/* Japanese Flashcard App Styles - 和 (Wa) Design System */

:root {
  /* ============ JAPANESE COLOR PALETTE (和) ============ */

  /* Shu (朱) - Vermilion Red (Torii Gates) */
  --jp-shu: #E34234;
  --jp-shu-light: #FF6B5B;
  --jp-shu-dark: #B8352A;

  /* Ai (藍) - Japanese Indigo */
  --jp-ai: #264E73;
  --jp-ai-light: #4A7A9E;
  --jp-ai-dark: #1A3A54;

  /* Sakura (桜) - Cherry Blossom Pink */
  --jp-sakura: #FFB7C5;
  --jp-sakura-light: #FFEEF2;
  --jp-sakura-dark: #E89AAB;

  /* Matcha (抹茶) - Green Tea */
  --jp-matcha: #7B9E6B;
  --jp-matcha-light: #B8D4A8;
  --jp-matcha-dark: #5A7D4A;

  /* Washi (和紙) - Japanese Paper */
  --jp-washi: #FAF8F5;
  --jp-washi-warm: #FDF9F3;
  --jp-washi-cool: #F5F7FA;

  /* Kinari (生成) - Natural Cream */
  --jp-kinari: #F5F1EB;

  /* Sumi (墨) - Ink Black */
  --jp-sumi: #1C1C1C;
  --jp-sumi-light: #3D3D3D;
  --jp-sumi-medium: #5C5C5C;

  /* Murasaki (紫) - Purple */
  --jp-murasaki: #7B5B9A;
  --jp-murasaki-light: #A88BC7;

  /* Kitsune (狐) - Fox Gold */
  --jp-kitsune: #D4A84B;
  --jp-kitsune-light: #F0D090;

  /* ============ SEMANTIC COLORS (mapped to Japanese) ============ */
  --primary: var(--jp-shu);
  --primary-dark: var(--jp-shu-dark);
  --primary-light: var(--jp-shu-light);
  --secondary: var(--jp-ai);
  --secondary-dark: var(--jp-ai-dark);
  --secondary-light: var(--jp-ai-light);
  --accent: var(--jp-sakura);
  --accent-dark: var(--jp-sakura-dark);
  --success: var(--jp-matcha);
  --success-light: var(--jp-matcha-light);
  --success-dark: var(--jp-matcha-dark);
  --warning: var(--jp-kitsune);
  --warning-light: var(--jp-kitsune-light);
  --danger: #c0392b;
  --danger-light: #f8d7da;
  --dark: var(--jp-sumi);
  --light: var(--jp-washi);
  --white: var(--jp-washi-warm);
  --gray: var(--jp-sumi-medium);
  --gray-light: #D4D0C8;
  --gray-dark: var(--jp-sumi-light);
  --border: #E8E4DC;

  /* ============ JAPANESE GRADIENTS ============ */
  --gradient-shu: linear-gradient(135deg, var(--jp-shu) 0%, var(--jp-shu-light) 100%);
  --gradient-ai: linear-gradient(135deg, var(--jp-ai) 0%, var(--jp-ai-light) 100%);
  --gradient-sakura: linear-gradient(135deg, var(--jp-sakura-light) 0%, var(--jp-sakura) 100%);
  --gradient-matcha: linear-gradient(135deg, var(--jp-matcha) 0%, var(--jp-matcha-light) 100%);
  --gradient-zen: linear-gradient(180deg, var(--jp-washi) 0%, var(--jp-kinari) 100%);
  --gradient-sunset: linear-gradient(135deg, var(--jp-shu) 0%, var(--jp-kitsune) 100%);
  --gradient-main: linear-gradient(180deg, var(--jp-ai-dark) 0%, var(--jp-ai) 50%, var(--jp-sakura-light) 100%);

  /* ============ SPACING (8px base) ============ */
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;

  /* ============ TYPOGRAPHY ============ */
  --font-family: 'Noto Sans JP', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-jp-display: 'Zen Old Mincho', 'Shippori Mincho', 'Noto Serif JP', serif;
  --font-jp-kanji: 'Noto Serif JP', 'Yu Mincho', serif;
  --font-jp-body: 'Noto Sans JP', 'Zen Maru Gothic', sans-serif;
  --font-jp-handwritten: 'Klee One', cursive;
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-md: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.5rem;
  --font-size-2xl: 2rem;
  --font-size-3xl: 2.5rem;
  --line-height: 1.6;
  --line-height-jp: 1.75;

  /* ============ BORDER RADIUS ============ */
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-xl: 12px;

  /* ============ SHADOWS ============ */
  --shadow-sm: 0 1px 3px rgba(28, 28, 28, 0.06);
  --shadow-md: 0 4px 12px rgba(28, 28, 28, 0.08);
  --shadow-lg: 0 8px 24px rgba(28, 28, 28, 0.1);
  --shadow-xl: 0 12px 32px rgba(28, 28, 28, 0.12);
  --shadow-sakura: 0 4px 16px rgba(255, 183, 197, 0.3);
  --shadow-shu: 0 4px 16px rgba(227, 66, 52, 0.25);

  /* ============ TRANSITIONS ============ */
  --transition-fast: 0.15s ease;
  --transition-normal: 0.2s ease;
  --transition-slow: 0.3s ease;

  /* ============ KAIWA DESIGN TOKENS ============ */
  /* Conversation-specific colors */
  --kaiwa-primary: #0D9488;
  --kaiwa-primary-light: #14B8A6;
  --kaiwa-primary-dark: #0F766E;
  --kaiwa-secondary: #2DD4BF;
  --kaiwa-accent: #EA580C;
  --kaiwa-background: #F0FDFA;
  --kaiwa-surface: rgba(255, 255, 255, 0.95);
  --kaiwa-surface-glass: rgba(255, 255, 255, 0.85);
  --kaiwa-text: #134E4A;
  --kaiwa-text-muted: #5EEAD4;
  --kaiwa-border: rgba(94, 234, 212, 0.3);

  /* Karaoke colors */
  --karaoke-correct: #10B981;
  --karaoke-wrong: #EF4444;
  --karaoke-missing: #9CA3AF;
  --karaoke-extra: #F59E0B;
  --karaoke-pending: #E5E7EB;
  --karaoke-current: #8B5CF6;

  /* Evaluation colors */
  --eval-excellent: #10B981;
  --eval-good: #3B82F6;
  --eval-average: #F59E0B;
  --eval-poor: #EF4444;

  /* Glassmorphism */
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-border: rgba(255, 255, 255, 0.3);
  --glass-shadow: 0 8px 32px rgba(13, 148, 136, 0.1);
  --glass-blur: blur(16px);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  overflow-x: hidden;
}

html, body, #root {
  width: 100%;
  min-height: 100vh;
}

body {
  font-family: var(--font-family);
  font-size: var(--font-size-md);
  line-height: var(--line-height);
  background: var(--gradient-main);
  min-height: 100vh;
  color: var(--dark);
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.app {
  min-height: 100vh;
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
}

/* Sidebar Layout */
.app-with-sidebar {
  flex-direction: row;
}

.app-with-sidebar .main-wrapper {
  flex: 1;
  margin-left: 268px;
  width: calc(100% - 268px);
  min-height: 100vh;
  transition: margin-left var(--transition-normal), width var(--transition-normal);
  display: flex;
  flex-direction: column;
}

.app-with-sidebar.sidebar-collapsed .main-wrapper {
  margin-left: 78px;
  width: calc(100% - 78px);
}

/* Sidebar - Zen Minimal Design */
.sidebar {
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  width: 260px;
  background: var(--jp-washi-warm);
  border-right: 1px solid var(--border);
  box-shadow: 2px 0 12px rgba(28, 28, 28, 0.04);
  display: flex;
  flex-direction: column;
  z-index: 1000;
  transition: width var(--transition-normal);
}

.sidebar.collapsed {
  width: 70px;
}

.sidebar-header {
  padding: var(--space-md);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-height: 60px;
  background: var(--jp-washi);
}

.sidebar-title {
  font-family: var(--font-jp-display);
  font-size: var(--font-size-xl);
  font-weight: 700;
  color: var(--jp-shu);
  background: none;
  -webkit-background-clip: unset;
  -webkit-text-fill-color: var(--jp-shu);
  background-clip: text;
  white-space: nowrap;
  overflow: hidden;
}

.sidebar.collapsed .sidebar-title {
  font-size: 1.5rem;
}

.sidebar.collapsed .sidebar-header {
  flex-direction: column;
  gap: var(--space-xs);
  padding: var(--space-sm);
}

.sidebar-collapse-btn {
  background: var(--light);
  border: none;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--gray-dark);
  transition: all var(--transition-normal);
  flex-shrink: 0;
}

.sidebar-collapse-btn:hover {
  background: var(--border);
  color: var(--dark);
}

.sidebar.collapsed .sidebar-collapse-btn {
  margin: 0 auto;
}

/* Sidebar User */
.sidebar-user {
  position: relative;
  padding: var(--space-md);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.sidebar.collapsed .sidebar-user {
  justify-content: center;
  padding: var(--space-sm);
}

.sidebar-user-avatar {
  width: 68px;
  height: 68px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  color: var(--white);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 2.5rem;
  flex-shrink: 0;
  overflow: hidden;
}

.sidebar-user-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.sidebar-user-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.sidebar.collapsed .sidebar-user-info {
  display: none;
}

.sidebar-username {
  font-weight: 700;
  font-size: 1.1rem;
  color: var(--dark);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  transition: all 0.3s ease;
}

/* Role-based username styles */
.sidebar-username.role-name-super_admin {
  background: linear-gradient(135deg, #ff6b6b, #ffd93d, #6bcb77, #4d96ff, #9b59b6);
  background-size: 300% 300%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: rainbow-text 3s ease infinite;
  font-weight: 800;
  text-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
}

@keyframes rainbow-text {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.sidebar-username.role-name-director {
  background: linear-gradient(135deg, #ffd700, #ffb347);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 800;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.4);
}

.sidebar-username.role-name-admin {
  color: var(--jp-shu);
  font-weight: 700;
  text-shadow: 0 0 8px rgba(227, 66, 52, 0.3);
}

.sidebar-username.role-name-branch_admin {
  color: var(--jp-ai);
  font-weight: 700;
}

.sidebar-username.role-name-main_teacher {
  color: var(--jp-matcha);
  font-weight: 600;
  font-style: italic;
}

.sidebar-username.role-name-part_time_teacher {
  color: var(--jp-matcha-light);
  font-weight: 600;
}

.sidebar-username.role-name-assistant {
  color: var(--jp-murasaki);
  font-weight: 600;
}

.sidebar-username.role-name-vip_user {
  background: linear-gradient(135deg, #a855f7, #ec4899);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
}

/* Sidebar Navigation */
.sidebar-nav {
  flex: 1;
  padding: var(--space-sm);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.sidebar-nav-btn {
  width: 100%;
  padding: var(--space-sm) var(--space-md);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  border: none;
  background: transparent;
  color: var(--jp-sumi-medium);
  font-size: var(--font-size-sm);
  font-weight: 500;
  border-radius: 0;
  border-left: 3px solid transparent;
  cursor: pointer;
  transition: all var(--transition-normal);
  text-align: left;
  margin: 2px 0;
}

.sidebar.collapsed .sidebar-nav-btn {
  justify-content: center;
  padding: var(--space-sm);
  border-left: none;
  border-bottom: 3px solid transparent;
}

.sidebar-nav-btn:hover {
  background: var(--jp-kinari);
  color: var(--jp-sumi);
  border-left-color: var(--jp-sakura);
}

.sidebar.collapsed .sidebar-nav-btn:hover {
  border-left-color: transparent;
  border-bottom-color: var(--jp-sakura);
}

.sidebar-nav-btn.active {
  background: linear-gradient(90deg, rgba(227, 66, 52, 0.1) 0%, transparent 100%);
  color: var(--jp-shu);
  border-left-color: var(--jp-shu);
  font-weight: 600;
}

.sidebar.collapsed .sidebar-nav-btn.active {
  background: rgba(227, 66, 52, 0.1);
  border-left-color: transparent;
  border-bottom-color: var(--jp-shu);
}

.sidebar-nav-icon {
  font-size: 1.2rem;
  flex-shrink: 0;
  width: 24px;
  text-align: center;
}

.sidebar-nav-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sidebar.collapsed .sidebar-nav-label {
  display: none;
}

/* Sidebar Footer */
.sidebar-footer {
  padding: var(--space-sm);
  border-top: 1px solid var(--border);
}

.sidebar-logout-btn {
  width: 100%;
  padding: var(--space-sm) var(--space-md);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  border: none;
  background: transparent;
  color: var(--danger);
  font-size: var(--font-size-sm);
  font-weight: 500;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-normal);
}

.sidebar.collapsed .sidebar-logout-btn {
  justify-content: center;
  padding: var(--space-sm);
}

.sidebar-logout-btn:hover {
  background: var(--danger-light);
}

/* Mobile sidebar toggle */
.sidebar-mobile-toggle {
  display: none;
  position: fixed;
  top: var(--space-sm);
  left: var(--space-sm);
  z-index: 1001;
  background: var(--white);
  border: none;
  padding: var(--space-xs);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  cursor: pointer;
}

.sidebar-overlay {
  display: none;
}

/* Header */
.header {
  background: var(--white);
  padding: var(--space-sm) var(--space-md);
  box-shadow: var(--shadow-md);
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--space-sm);
  position: sticky;
  top: 0;
  z-index: 100;
}

.header-top {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.header-title {
  font-size: var(--font-size-xl);
  font-weight: 700;
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Hamburger button - hidden on desktop */
.hamburger-btn {
  display: none;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  z-index: 101;
}

.hamburger-icon {
  display: flex;
  flex-direction: column;
  gap: 5px;
  width: 24px;
}

.hamburger-icon span {
  display: block;
  height: 3px;
  width: 100%;
  background: var(--dark);
  border-radius: 2px;
  transition: all 0.3s ease;
}

.hamburger-icon.open span:nth-child(1) {
  transform: translateY(8px) rotate(45deg);
}

.hamburger-icon.open span:nth-child(2) {
  opacity: 0;
}

.hamburger-icon.open span:nth-child(3) {
  transform: translateY(-8px) rotate(-45deg);
}

.nav {
  display: flex;
  gap: var(--space-xs);
  flex-wrap: wrap;
}

.header .nav-btn {
  padding: var(--space-xs) var(--space-md);
  font-size: var(--font-size-sm);
  font-weight: 500;
  border: none;
  background: var(--light);
  color: var(--gray-dark);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-normal);
  min-height: 35px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.header .nav-btn:hover {
  background: var(--border);
  color: var(--dark);
  transform: translateY(-1px);
}

.header .nav-btn.active {
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  color: var(--white);
  box-shadow: var(--shadow-sm);
}

/* Mobile menu user section - hidden on desktop */
.nav-user-section {
  display: none;
}

/* Main Content - Washi Paper Style */
.main-content {
  flex: 1;
  padding: 1.25rem;
  width: 100%;
  overflow: visible;
  min-height: 0;
  display: flex;
  flex-direction: column;
  margin: 12px;
  margin-left: 0;
  border-radius: var(--radius-lg) 0 0 var(--radius-lg);
  background: var(--jp-washi);
  box-shadow: -4px 0 24px rgba(28, 28, 28, 0.06);
  border: 1px solid var(--border);
  border-right: none;
}

.main-content > * {
  flex: 1;
  width: 100%;
  max-width: 100%;
}

/* Buttons - default styling */
button {
  font-family: inherit;
  color: var(--dark);
  background: var(--light);
}

/* Select and option - default styling */
select, option {
  font-family: inherit;
  color: var(--dark);
  background: var(--white);
}

/* Button System */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-lg);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--font-size-md);
  font-weight: 500;
  font-family: inherit;
  transition: all var(--transition-normal);
  color: var(--dark);
  background: var(--light);
  min-height: 35px;
}

.btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.btn:active:not(:disabled) {
  transform: translateY(0);
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  background: var(--gray-light);
  color: var(--gray);
}

.btn-primary {
  background: var(--jp-shu);
  color: var(--jp-washi);
}

.btn-primary:hover:not(:disabled) {
  background: var(--jp-shu-dark);
  box-shadow: var(--shadow-shu);
}

.btn-secondary {
  background: var(--jp-washi);
  color: var(--jp-sumi);
  border: 1px solid var(--border);
}

.btn-secondary:hover:not(:disabled) {
  background: var(--jp-kinari);
  border-color: var(--jp-shu);
  color: var(--jp-shu);
}

.btn-danger {
  background: var(--danger);
  color: var(--jp-washi);
}

.btn-danger:hover:not(:disabled) {
  background: #a83227;
  box-shadow: 0 4px 15px rgba(192, 57, 43, 0.3);
}

.btn-success {
  background: var(--jp-matcha);
  color: var(--jp-washi);
}

.btn-success:hover:not(:disabled) {
  background: var(--jp-matcha-dark);
  box-shadow: 0 4px 15px rgba(123, 158, 107, 0.3);
}

/* ============ UNIFIED BACK BUTTON (Professional Premium) ============ */
.app-back-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.05));
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 16px;
  color: rgba(255, 255, 255, 0.85);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  flex-shrink: 0;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.app-back-btn:hover {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
  border-color: rgba(255, 255, 255, 0.3);
  color: white;
  transform: translateX(-4px);
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.app-back-btn:active {
  transform: translateX(-2px);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
}

.app-back-btn svg {
  width: 24px;
  height: 24px;
}

/* Light theme variant */
.app-back-btn.light {
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0.02));
  border: 1px solid rgba(0, 0, 0, 0.1);
  color: var(--jp-sumi-medium);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

.app-back-btn.light:hover {
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.04));
  border-color: var(--jp-shu);
  color: var(--jp-shu);
  box-shadow: 0 6px 20px rgba(227, 66, 52, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

/* Small variant */
.app-back-btn.small {
  width: 44px;
  height: 44px;
  border-radius: 12px;
}

.app-back-btn.small svg {
  width: 20px;
  height: 20px;
}

/* Large variant */
.app-back-btn.large {
  width: 64px;
  height: 64px;
  border-radius: 18px;
}

.app-back-btn.large svg {
  width: 28px;
  height: 28px;
}

/* With text variant */
.app-back-btn.with-text {
  width: auto;
  padding: 0 1.25rem 0 1rem;
  gap: 0.6rem;
  font-size: 1rem;
  font-weight: 600;
}

/* Primary color variant */
.app-back-btn.primary {
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.15), rgba(124, 58, 237, 0.08));
  border-color: rgba(124, 58, 237, 0.25);
  color: #a78bfa;
  box-shadow: 0 4px 20px rgba(124, 58, 237, 0.15), inset 0 1px 0 rgba(167, 139, 250, 0.2);
}

.app-back-btn.primary:hover {
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.25), rgba(124, 58, 237, 0.15));
  border-color: rgba(124, 58, 237, 0.4);
  color: #c4b5fd;
  box-shadow: 0 6px 25px rgba(124, 58, 237, 0.25), inset 0 1px 0 rgba(167, 139, 250, 0.3);
}

.btn-outline {
  background: transparent;
  color: var(--jp-shu);
  border: 2px solid var(--jp-shu);
}

.btn-outline:hover:not(:disabled) {
  background: var(--jp-shu);
  color: var(--jp-washi);
}

.btn-ghost {
  background: transparent;
  color: var(--jp-sumi-medium);
}

.btn-ghost:hover:not(:disabled) {
  background: var(--jp-sakura-light);
  color: var(--jp-shu);
}

.btn-large {
  padding: var(--space-md) var(--space-xl);
  font-size: var(--font-size-lg);
  min-height: 52px;
}

.btn-small {
  padding: var(--space-xs) var(--space-md);
  font-size: var(--font-size-sm);
  min-height: 36px;
}

.btn-icon {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 1.2rem;
  padding: var(--space-xs);
  transition: all var(--transition-normal);
  border-radius: var(--radius-md);
  min-height: auto;
  color: var(--gray);
}

.btn-icon:hover:not(:disabled) {
  transform: scale(1.1);
  color: var(--primary);
  background: var(--light);
}

.btn-full {
  width: 100%;
}

/* Page Card - Base style for all page containers */
.page-card {
  background: var(--white);
  border-radius: var(--radius-xl);
  padding: var(--space-xl);
  box-shadow: var(--shadow-lg);
}

/* Home Page - Japanese Style */
.home-page {
  background: var(--jp-washi);
  border-radius: 0;
  padding: var(--space-lg);
  box-shadow: none;
  position: relative;
}

/* Subtle seigaiha wave pattern */
.home-page::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 200px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='50' viewBox='0 0 100 50'%3E%3Cpath d='M0 25 Q25 0 50 25 T100 25' fill='none' stroke='%23E34234' stroke-width='0.5' opacity='0.06'/%3E%3C/svg%3E");
  background-size: 100px 50px;
  pointer-events: none;
  opacity: 0.5;
}

.welcome-section {
  text-align: center;
  margin-bottom: var(--space-xl);
  padding: var(--space-lg) 0;
  border-bottom: 1px solid var(--border);
  position: relative;
}

.welcome-section h2 {
  font-family: var(--font-jp-display);
  font-size: var(--font-size-2xl);
  color: var(--jp-shu);
  margin-bottom: var(--space-xs);
  font-weight: 700;
}

.welcome-section p {
  color: var(--jp-sumi-medium);
  font-size: var(--font-size-md);
}

.jlpt-breakdown {
  margin-bottom: 2rem;
}

.jlpt-breakdown h3 {
  margin-bottom: 1.25rem;
  color: var(--dark);
  font-size: 1.1rem;
  font-weight: 600;
}

.jlpt-bars {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.jlpt-bar-item {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.jlpt-bar-item.clickable {
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 8px;
  transition: background-color 0.2s;
}

.jlpt-bar-item.clickable:hover {
  background-color: var(--bg-light);
}

.jlpt-label {
  width: 40px;
  font-weight: bold;
  color: var(--jp-shu);
}

.jlpt-bar {
  flex: 1;
  height: 24px;
  background: var(--jp-kinari);
  border-radius: var(--radius-md);
  overflow: hidden;
  border: 1px solid var(--border);
}

.jlpt-bar-fill {
  height: 100%;
  background: var(--gradient-shu);
  border-radius: var(--radius-md);
  transition: width 0.3s;
}

.jlpt-count {
  width: 30px;
  text-align: right;
  color: var(--gray);
}

.jlpt-level-name.jlpt-test {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: var(--white);
  padding: 0.15rem 0.5rem;
  border-radius: 4px;
  font-size: 0.8rem;
}

.jlpt-bar.jlpt-test-bar .jlpt-bar-fill {
  background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
}

/* JLPT Tree Structure */
.jlpt-tree {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.jlpt-tree-item {
  border-radius: 8px;
}

.jlpt-level-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  background: var(--light);
  border-radius: 8px;
}

.jlpt-level-name {
  font-weight: bold;
  color: var(--primary);
  min-width: 35px;
}

.expand-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 0.8rem;
  color: var(--gray);
  padding: 0.25rem;
  width: 24px;
}

.expand-btn:hover {
  color: var(--primary);
}

.add-category-btn {
  background: var(--success);
  color: white;
  border: none;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  font-size: 1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.7;
}

.add-category-btn:hover {
  opacity: 1;
}

.delete-category-btn {
  background: var(--danger);
  color: white;
  border: none;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  font-size: 1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.7;
}

.delete-category-btn:hover {
  opacity: 1;
}

.category-list {
  margin-left: 1.5rem;
  padding-left: 0.5rem;
  border-left: 2px solid var(--gray-light);
}

.category-item {
  margin: 0.25rem 0;
}

.category-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.4rem 0.5rem;
  border-radius: 6px;
}

.category-row:hover {
  background: var(--light);
}

.category-row.child {
  margin-left: 1.5rem;
}

.category-row.locked {
  opacity: 0.6;
  cursor: not-allowed;
}

.category-row.locked:hover {
  background: transparent;
}

.category-row .lock-icon {
  font-size: 0.85rem;
  margin-left: 0.25rem;
}

.child-lesson-list {
  margin-left: 1rem;
  border-left: 2px solid var(--gray-light);
  padding-left: 0.5rem;
}

.category-name {
  flex: 1;
  color: var(--dark);
}

.category-name.clickable:hover {
  color: var(--primary);
  cursor: pointer;
}

.category-count {
  font-size: 0.85rem;
  color: var(--gray);
}

.subcategory-list {
  margin-left: 1.5rem;
  padding-left: 0.5rem;
  border-left: 2px solid var(--gray-light);
}

.subcategory-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.3rem 0.5rem;
  border-radius: 6px;
}

.subcategory-row:hover {
  background: var(--light);
}

.tree-indent {
  color: var(--gray-light);
  font-size: 0.8rem;
}

.edit-input {
  flex: 1;
  padding: 0.3rem 0.5rem;
  border: 1px solid var(--primary);
  border-radius: 4px;
  font-size: 0.9rem;
}

.add-category-form {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.save-btn {
  background: var(--success);
  color: white;
  border: none;
  border-radius: 4px;
  padding: 0.3rem 0.5rem;
  cursor: pointer;
}

.cancel-btn {
  background: var(--gray);
  color: white;
  border: none;
  border-radius: 4px;
  padding: 0.3rem 0.5rem;
  cursor: pointer;
}

.clickable {
  cursor: pointer;
}

/* Custom Study Section */
.custom-study-section {
  margin-bottom: 2rem;
  border: 1px solid var(--gray-light);
  border-radius: 12px;
  overflow: hidden;
}

.custom-study-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  background: var(--light);
  cursor: pointer;
}

.custom-study-header:hover {
  background: #e8e8e8;
}

.custom-study-header h3 {
  margin: 0;
  flex: 1;
}

.selection-badge {
  background: var(--primary);
  color: var(--white);
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.85rem;
}

.custom-study-content {
  padding: 1rem;
}

.selection-group {
  margin-bottom: 1.25rem;
}

.group-label {
  display: block;
  font-weight: 600;
  color: var(--dark);
  margin-bottom: 0.75rem;
}

.checkbox-group {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.checkbox-group.categories {
  flex-direction: column;
  gap: 0.75rem;
}

.checkbox-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: var(--light);
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
  color: var(--dark);
}

.checkbox-item:hover {
  background: #e8e8e8;
}

.checkbox-item span {
  color: var(--dark);
}

.checkbox-item input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.item-count {
  color: var(--gray);
  font-size: 0.85rem;
}

/* Level group styling for custom study */
.level-group {
  background: var(--white);
  border: 1px solid var(--gray-light);
  border-radius: 10px;
  overflow: hidden;
}

.level-group-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: var(--white);
  padding: 0.6rem 1rem;
  font-weight: 700;
  font-size: 0.95rem;
}

.level-group .category-checkbox-group {
  padding: 0.5rem 0.75rem;
  border-bottom: 1px solid var(--light);
}

.level-group .category-checkbox-group:last-child {
  border-bottom: none;
}

.checkbox-item.parent {
  background: var(--light);
  font-weight: 500;
}

.checkbox-item.child {
  background: transparent;
  padding-left: 1.5rem;
}

.subcategory-checkboxes {
  margin-top: 0.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.custom-study-actions {
  display: flex;
  gap: 0.75rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 1rem;
}

.action-buttons {
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
}

/* ===== CLEAN HOME PAGE ===== */
.home-clean {
  padding: var(--space-lg);
  max-width: 800px;
  margin: 0 auto;
}

/* Header */
.home-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: var(--space-xl);
}

.greeting h1 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text);
  margin: 0 0 4px 0;
}

.subtitle {
  font-size: 0.9rem;
  color: var(--gray-dark);
  margin: 0;
}

.total-cards {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: var(--bg-light);
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--gray-dark);
}

/* Study CTA */
.study-cta {
  margin-bottom: var(--space-lg);
}

.cta-button {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  width: 100%;
  padding: var(--space-md) var(--space-lg);
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: none;
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.cta-button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.35);
}

.cta-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.cta-icon {
  width: 48px;
  height: 48px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  flex-shrink: 0;
}

.cta-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.cta-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: white;
}

.cta-desc {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.8);
}

.cta-arrow {
  color: rgba(255, 255, 255, 0.6);
}

/* Features Bar */
.features-bar {
  display: flex;
  gap: var(--space-sm);
  margin-bottom: var(--space-xl);
  overflow-x: auto;
  padding-bottom: 4px;
}

.feature-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  background: white;
  border: 1px solid var(--border);
  border-radius: 10px;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--text);
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
}

.feature-btn:hover:not(:disabled) {
  border-color: var(--primary);
  color: var(--primary);
}

.feature-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.feature-badge {
  background: var(--primary);
  color: white;
  font-size: 0.7rem;
  padding: 2px 6px;
  border-radius: 10px;
  font-weight: 600;
}

/* Levels Section */
.levels-section {
  margin-bottom: var(--space-xl);
}

.section-label {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--gray-dark);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 var(--space-md) 0;
}

.levels-grid {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.level-card {
  background: white;
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  transition: border-color 0.15s;
}

.level-card.expanded {
  border-color: var(--gray);
}

.level-header {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  width: 100%;
  padding: var(--space-md);
  background: none;
  border: none;
  cursor: pointer;
  transition: background 0.15s;
  text-align: left;
}

.level-header:hover:not(:disabled) {
  background: var(--bg-light);
}

.level-header:disabled {
  opacity: 0.5;
  cursor: default;
}

.level-name {
  font-size: 1rem;
  font-weight: 700;
  min-width: 36px;
}

.home-clean .level-count {
  flex: 1;
  text-align: right;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--gray-dark);
}

.level-expand {
  color: var(--gray);
  display: flex;
}

/* Level Lessons */
.level-lessons {
  border-top: 1px solid var(--border);
  padding: var(--space-sm);
  background: var(--bg-light);
}

.home-clean .lesson-group {
  margin-bottom: 2px;
}

.lesson-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: var(--space-sm) var(--space-md);
  background: none;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.15s;
  text-align: left;
}

.lesson-row:hover:not(:disabled):not(.locked) {
  background: white;
}

.lesson-row.locked {
  opacity: 0.5;
  cursor: not-allowed;
}

.lesson-row.child {
  padding-left: var(--space-xl);
}

.lesson-row .lesson-name {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.9rem;
  color: var(--text);
}

.lesson-row .lesson-count {
  font-size: 0.8rem;
  color: var(--gray);
}

.home-clean .child-lessons {
  margin-left: var(--space-md);
  padding-left: var(--space-sm);
  border-left: 2px solid var(--border);
}

/* Custom Section */
.custom-section {
  background: white;
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}

.custom-toggle {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  width: 100%;
  padding: var(--space-md);
  background: none;
  border: none;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text);
  cursor: pointer;
  transition: background 0.15s;
}

.custom-toggle:hover {
  background: var(--bg-light);
}

.custom-toggle.active {
  background: var(--bg-light);
}

.custom-toggle span:first-of-type {
  flex: 1;
  text-align: left;
}

.custom-badge {
  background: var(--primary);
  color: white;
  font-size: 0.75rem;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 600;
}

/* Custom Content */
.custom-content {
  padding: var(--space-md);
  border-top: 1px solid var(--border);
}

.chip-group {
  margin-bottom: var(--space-md);
}

.chip-label {
  display: block;
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--gray-dark);
  margin-bottom: var(--space-sm);
}

.chips {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
}

.chip {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: white;
  border: 2px solid var(--border);
  border-radius: 8px;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text);
  cursor: pointer;
  transition: all 0.15s;
}

.chip:hover {
  border-color: var(--chip-color, var(--primary));
}

.chip.selected {
  background: var(--chip-color, var(--primary));
  border-color: var(--chip-color, var(--primary));
  color: white;
}

.chip.selected .chip-count {
  background: rgba(255, 255, 255, 0.2);
  color: white;
}

.chip-count {
  font-size: 0.75rem;
  padding: 2px 6px;
  background: var(--bg-light);
  border-radius: 6px;
  color: var(--gray);
}

/* Lesson Select */
.lesson-select {
  margin-bottom: var(--space-md);
}

.lesson-options {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  max-height: 200px;
  overflow-y: auto;
}

.lesson-group-select {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.group-label {
  font-size: 0.75rem;
  font-weight: 700;
  color: var(--gray-dark);
  padding-left: var(--space-sm);
  border-left: 3px solid var(--primary);
  margin-bottom: 4px;
}

.lesson-option {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: 8px var(--space-sm);
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s;
}

.lesson-option:hover {
  background: var(--bg-light);
}

.lesson-option input {
  display: none;
}

.option-check {
  width: 16px;
  height: 16px;
  border: 2px solid var(--border);
  border-radius: 4px;
  flex-shrink: 0;
  position: relative;
  transition: all 0.15s;
}

.lesson-option input:checked + .option-check {
  background: var(--primary);
  border-color: var(--primary);
}

.lesson-option input:checked + .option-check::after {
  content: '';
  position: absolute;
  left: 4px;
  top: 1px;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.option-name {
  flex: 1;
  font-size: 0.85rem;
  color: var(--text);
}

.option-count {
  font-size: 0.75rem;
  color: var(--gray);
}

/* Custom Actions */
.custom-actions {
  display: flex;
  gap: var(--space-sm);
  justify-content: flex-end;
  padding-top: var(--space-md);
  border-top: 1px solid var(--border);
}

.btn-secondary {
  padding: 8px 16px;
  background: none;
  border: 1px solid var(--border);
  border-radius: 8px;
  font-size: 0.85rem;
  color: var(--gray-dark);
  cursor: pointer;
  transition: all 0.15s;
}

.btn-secondary:hover {
  background: var(--bg-light);
}

.btn-primary {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: var(--primary);
  border: none;
  border-radius: 8px;
  font-size: 0.85rem;
  font-weight: 600;
  color: white;
  cursor: pointer;
  transition: all 0.15s;
}

.btn-primary:hover:not(:disabled) {
  background: var(--primary-dark);
}

.btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Responsive */
@media (max-width: 640px) {
  .home-clean {
    padding: var(--space-md);
  }

  .greeting h1 {
    font-size: 1.25rem;
  }

  .features-bar {
    margin: 0 calc(-1 * var(--space-md));
    padding: 0 var(--space-md) var(--space-sm);
  }

  .chips {
    flex-direction: column;
  }

  .chip {
    justify-content: space-between;
  }
}

/* ===== JAPANESE-THEMED HOME PAGE ===== */
.home-jp {
  padding: 0;
  max-width: 100%;
  min-height: 100vh;
  background: linear-gradient(135deg, #fafafa 0%, #fff5f5 100%);
}

/* Compact Header V2 */
.jp-header-v2 {
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
  padding: var(--space-md) var(--space-lg);
  color: white;
}

.header-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-sm);
}

.header-brand {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.brand-kanji {
  width: 36px;
  height: 36px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  font-weight: 900;
}

.brand-text {
  display: flex;
  flex-direction: column;
}

.brand-name {
  font-size: 0.95rem;
  font-weight: 600;
  line-height: 1.2;
}

.brand-sub {
  font-size: 0.7rem;
  opacity: 0.75;
}

.header-stats {
  display: flex;
  gap: 6px;
}

.mini-stat {
  display: flex;
  align-items: center;
  gap: 3px;
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
}

.mini-stat.streak svg {
  color: #fbbf24;
}

.mini-stat.xp svg {
  color: #a3e635;
}

.mini-stat.lv {
  background: rgba(255, 255, 255, 0.25);
}

/* Header Progress */
.header-progress {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  padding: 8px 12px;
}

.progress-info {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
}

.progress-label {
  font-size: 0.7rem;
  opacity: 0.85;
}

.progress-percent {
  font-size: 0.75rem;
  font-weight: 700;
}

.progress-track {
  height: 4px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 2px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: white;
  border-radius: 2px;
  transition: width 0.5s ease;
}

/* CTA Section V2 */
.jp-cta-section-v2 {
  display: flex;
  gap: var(--space-sm);
  padding: var(--space-md) var(--space-lg);
  margin-top: -12px;
  position: relative;
  z-index: 1;
}

.cta-main-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
  padding: 14px var(--space-lg);
  background: white;
  border: none;
  border-radius: 14px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: all 0.2s;
  color: #dc2626;
}

.cta-main-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.15);
}

.cta-main-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.cta-label {
  font-size: 1rem;
  font-weight: 700;
}

.cta-badge {
  background: #dc2626;
  color: white;
  font-size: 0.7rem;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 10px;
  min-width: 20px;
  text-align: center;
}

.cta-quick-actions {
  display: flex;
  gap: 6px;
}

.quick-action {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  border: none;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  color: var(--gray-dark);
  cursor: pointer;
  transition: all 0.15s;
}

.quick-action:hover:not(:disabled) {
  color: #dc2626;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

.quick-action:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* Mobile responsive for header */
@media (max-width: 480px) {
  .jp-header-v2 {
    padding: var(--space-sm) var(--space-md);
  }

  .header-stats {
    gap: 4px;
  }

  .mini-stat {
    padding: 3px 6px;
    font-size: 0.7rem;
  }

  .jp-cta-section-v2 {
    padding: var(--space-sm) var(--space-md);
    flex-wrap: wrap;
  }

  .cta-main-btn {
    flex: 1 1 100%;
    padding: 12px;
  }

  .cta-quick-actions {
    flex: 1 1 100%;
    justify-content: space-between;
  }

  .quick-action {
    flex: 1;
    max-width: 50px;
  }
}

/* Levels Section - 5 Column Grid */
.jp-levels-section {
  padding: 0 var(--space-lg) var(--space-md);
}

.section-title {
  display: flex;
  align-items: baseline;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

.title-jp {
  font-size: 1rem;
  font-weight: 700;
  color: var(--text);
}

.title-vi {
  font-size: 0.75rem;
  color: var(--gray);
}

/* 5 Column Grid - Simple */
.levels-grid-5 {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
}

.level-card-simple {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 12px 8px;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.level-card-simple:hover:not(:disabled) {
  border-color: #9ca3af;
  transform: translateY(-1px);
}

.level-card-simple.selected {
  border-color: #3b82f6;
  background: #f0f9ff;
}

.level-card-simple:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.level-tag-simple {
  color: white;
  font-size: 0.75rem;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 6px;
}

.level-count-simple {
  font-size: 1.1rem;
  font-weight: 700;
  color: #1f2937;
}

.level-bar-simple {
  width: 100%;
  height: 4px;
  background: #e5e7eb;
  border-radius: 2px;
  overflow: hidden;
}

.level-bar-fill {
  height: 100%;
  border-radius: 2px;
  transition: width 0.3s;
}

.level-percent-simple {
  font-size: 0.7rem;
  color: #6b7280;
}

/* Lessons Panel */
.level-lessons-panel {
  margin-top: var(--space-md);
  background: white;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  overflow: hidden;
  animation: slideDown 0.2s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.lessons-panel-header {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  background: #f9fafb;
  border-bottom: 1px solid var(--border);
}

.panel-level {
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 0.8rem;
  font-weight: 700;
  color: white;
}

.panel-title {
  flex: 1;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text);
}

.panel-close {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  border-radius: 6px;
  font-size: 1.25rem;
  color: var(--gray);
  cursor: pointer;
  transition: all 0.15s;
}

.panel-close:hover {
  background: #e5e7eb;
  color: var(--text);
}

.lessons-panel-content {
  padding: var(--space-sm);
  max-height: 240px;
  overflow-y: auto;
}

.jp-levels-section .lesson-group {
  margin-bottom: 2px;
}

.jp-levels-section .lesson-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 10px 14px;
  background: none;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: background 0.15s;
}

.jp-levels-section .lesson-row:hover:not(:disabled):not(.locked) {
  background: #f3f4f6;
}

.jp-levels-section .lesson-row.locked {
  opacity: 0.5;
  cursor: not-allowed;
}

.jp-levels-section .lesson-name {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.9rem;
  color: var(--text);
}

.jp-levels-section .lesson-count {
  font-size: 0.75rem;
  color: var(--gray);
  background: #f3f4f6;
  padding: 4px 10px;
  border-radius: 12px;
  font-weight: 500;
}

.jp-levels-section .child-lessons {
  margin-left: var(--space-md);
  padding-left: var(--space-sm);
  border-left: 2px solid var(--border);
}

.jp-levels-section .lesson-row.child {
  padding-left: var(--space-sm);
}

.lessons-panel-footer {
  padding: var(--space-sm) var(--space-md);
  background: #f9fafb;
  border-top: 1px solid var(--border);
}

.btn-study-level {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 10px;
  font-size: 0.9rem;
  font-weight: 600;
  color: white;
  cursor: pointer;
  transition: all 0.15s;
}

.btn-study-level:hover {
  filter: brightness(1.1);
}

/* Responsive - keep 5 columns but smaller */
@media (max-width: 768px) {
  .levels-grid-5 {
    gap: 6px;
  }

  .level-card-simple {
    padding: 10px 6px;
  }
}

@media (max-width: 480px) {
  .levels-grid-5 {
    gap: 4px;
  }

  .level-card-simple {
    padding: 8px 4px;
    gap: 4px;
  }

  .level-tag-simple {
    font-size: 0.65rem;
    padding: 2px 6px;
  }

  .level-count-simple {
    font-size: 0.9rem;
  }

  .level-percent-simple {
    font-size: 0.6rem;
  }
}

/* Custom Section */
.jp-custom-section {
  padding: 0 var(--space-lg) var(--space-lg);
}

.custom-header {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  width: 100%;
  padding: var(--space-md);
  background: white;
  border: 1px solid var(--border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.custom-header:hover {
  border-color: #dc2626;
}

.custom-title {
  font-size: 1rem;
  font-weight: 700;
  color: var(--text);
}

.custom-subtitle {
  font-size: 0.8rem;
  color: var(--gray);
  flex: 1;
  text-align: left;
}

.custom-count {
  background: #dc2626;
  color: white;
  font-size: 0.75rem;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 12px;
}

/* Custom Content */
.jp-custom-section .custom-content {
  margin-top: var(--space-sm);
  padding: var(--space-md);
  background: white;
  border-radius: 12px;
  border: 1px solid var(--border);
}

.chip-row {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  margin-bottom: var(--space-md);
}

.jp-custom-section .chip {
  padding: 8px 14px;
  border: 2px solid var(--border);
  border-radius: 8px;
  font-size: 0.85rem;
  font-weight: 600;
  background: white;
  cursor: pointer;
  transition: all 0.15s;
}

.jp-custom-section .chip:hover {
  border-color: var(--c);
}

.jp-custom-section .chip.selected {
  background: var(--c);
  border-color: var(--c);
  color: white;
}

/* Lesson Select */
.jp-custom-section .lesson-select {
  max-height: 180px;
  overflow-y: auto;
  margin-bottom: var(--space-md);
  padding-right: var(--space-xs);
}

.jp-custom-section .lesson-group-select {
  margin-bottom: var(--space-sm);
}

.jp-custom-section .group-label {
  font-size: 0.75rem;
  font-weight: 700;
  margin-bottom: 4px;
}

.lesson-check {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: 6px 8px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s;
}

.lesson-check:hover {
  background: #f3f4f6;
}

.lesson-check input {
  display: none;
}

.check-box {
  width: 16px;
  height: 16px;
  border: 2px solid var(--border);
  border-radius: 4px;
  flex-shrink: 0;
  position: relative;
  transition: all 0.15s;
}

.lesson-check input:checked + .check-box {
  background: #dc2626;
  border-color: #dc2626;
}

.lesson-check input:checked + .check-box::after {
  content: '';
  position: absolute;
  left: 4px;
  top: 1px;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.check-name {
  flex: 1;
  font-size: 0.85rem;
  color: var(--text);
}

.check-count {
  font-size: 0.75rem;
  color: var(--gray);
}

/* Custom Actions */
.jp-custom-section .custom-actions {
  display: flex;
  gap: var(--space-sm);
  justify-content: flex-end;
  padding-top: var(--space-md);
  border-top: 1px solid var(--border);
}

.btn-ghost {
  padding: 8px 16px;
  background: none;
  border: 1px solid var(--border);
  border-radius: 8px;
  font-size: 0.85rem;
  color: var(--gray);
  cursor: pointer;
  transition: all 0.15s;
}

.btn-ghost:hover {
  background: #f3f4f6;
}

.btn-action {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: #dc2626;
  border: none;
  border-radius: 8px;
  font-size: 0.85rem;
  font-weight: 600;
  color: white;
  cursor: pointer;
  transition: all 0.15s;
}

.btn-action:hover:not(:disabled) {
  background: #b91c1c;
}

.btn-action:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Footer */
.jp-footer {
  height: 40px;
  position: relative;
  overflow: hidden;
}

.footer-wave {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 40px;
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
  clip-path: ellipse(60% 100% at 50% 100%);
}

/* Responsive */
@media (max-width: 640px) {
  .jp-header {
    padding: var(--space-md);
  }

  .jp-kanji {
    font-size: 1.5rem;
  }

  .jp-cta-section {
    padding: var(--space-sm) var(--space-md);
  }

  .jp-cta {
    padding: var(--space-sm) var(--space-md);
  }

  .jp-cta .cta-icon {
    width: 40px;
    height: 40px;
  }

  .jp-cta .cta-main {
    font-size: 1rem;
  }

  .progress-grid {
    grid-template-columns: 1fr;
    gap: var(--space-xs);
  }

  .jp-progress-section,
  .jp-features,
  .jp-levels-section,
  .jp-custom-section {
    padding-left: var(--space-md);
    padding-right: var(--space-md);
  }

  .jp-features .feature-btn {
    min-width: 60px;
    padding: var(--space-xs) var(--space-sm);
  }
}

/* Cards Page */
.cards-page {
  background: var(--white);
  border-radius: 0;
  padding: var(--space-lg);
  box-shadow: none;
  min-height: 100vh;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.page-header h2 {
  color: var(--dark);
}

.tab-buttons {
  display: flex;
  gap: 0.5rem;
}

.tab-btn {
  padding: 0.5rem 1rem;
  border: 1px solid var(--gray-light);
  background: var(--white);
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
}

.tab-btn:hover {
  border-color: var(--primary);
  color: var(--primary);
}

.tab-btn.active {
  background: var(--primary);
  border-color: var(--primary);
  color: var(--white);
}

/* Breadcrumb */
.breadcrumb {
  font-size: 0.9rem;
  color: var(--gray);
}

.breadcrumb .current {
  color: var(--dark);
  font-weight: 500;
}

.breadcrumb .clickable {
  color: var(--primary);
  cursor: pointer;
}

.breadcrumb .clickable:hover {
  text-decoration: underline;
}

/* Back button */
.btn-back {
  background: var(--light);
  color: var(--dark);
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.9rem;
  margin-bottom: 1rem;
}

.btn-back:hover {
  background: var(--gray-light);
}

/* Folder actions */
.folder-actions {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
}

/* Folder list */
.folder-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

.folder-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.25rem;
  background: var(--light);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
}

.folder-item:hover {
  background: #e8e8e8;
  transform: translateX(4px);
}

.folder-icon {
  font-size: 1.5rem;
}

.folder-name {
  flex: 1;
  font-size: 1rem;
  font-weight: 500;
  color: var(--dark);
}

.folder-count {
  color: var(--gray);
  font-size: 0.9rem;
}

.edit-btn {
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  font-size: 0.85rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.2s;
}

.folder-item:hover .edit-btn {
  opacity: 0.7;
}

.edit-btn:hover {
  opacity: 1 !important;
}

.delete-btn {
  background: var(--danger);
  color: white;
  border: none;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  font-size: 1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.2s;
}

.folder-item:hover .delete-btn {
  opacity: 0.7;
}

.delete-btn:hover {
  opacity: 1 !important;
}

/* Add category inline */
.add-category-inline {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
  align-items: center;
}

.category-input {
  flex: 1;
  padding: 0.75rem 1rem;
  border: 2px solid var(--primary);
  border-radius: 8px;
  font-size: 1rem;
}

.category-input:focus {
  outline: none;
  border-color: var(--primary-dark);
}

.btn-cancel {
  background: var(--gray-light);
  color: var(--dark);
}

.btn-cancel:hover {
  background: var(--gray);
}

/* Inline edit input */
.edit-input.inline {
  flex: 1;
  padding: 0.4rem 0.75rem;
  border: 2px solid var(--primary);
  border-radius: 6px;
  font-size: 1rem;
  min-width: 120px;
}

/* Section title */
.section-title {
  color: var(--gray);
  font-size: 0.9rem;
  margin: 1.5rem 0 0.75rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--gray-light);
}

/* Folder content area */
.folder-content {
  min-height: 200px;
}

.category-manager {
  padding: 1rem 0;
}

.category-hint {
  color: var(--gray);
  font-size: 0.85rem;
  margin-bottom: 1rem;
}

/* Filter Bar */
.filter-bar {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
  margin-bottom: 1rem;
}

.filter-bar span {
  color: var(--gray);
  font-size: 0.9rem;
}

.filter-btn {
  padding: 0.4rem 0.8rem;
  border: 1px solid var(--gray-light);
  background: var(--white);
  border-radius: 20px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
}

.filter-btn:hover {
  border-color: var(--primary);
  color: var(--primary);
}

.filter-btn.active {
  background: var(--primary);
  border-color: var(--primary);
  color: var(--white);
}

.card-count {
  color: var(--gray);
  margin-bottom: 1rem;
}

.empty-message {
  text-align: center;
  color: var(--gray);
  padding: 3rem;
}

/* Cards Grid */
.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
}

.card-item {
  position: relative;
}

.mini-card {
  background: var(--jp-washi-warm);
  border-radius: var(--radius-md);
  height: 120px;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
  position: relative;
  transform-style: preserve-3d;
  border: 1px solid var(--border);
}

.mini-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-sakura);
  border-color: var(--jp-sakura);
}

.mini-card.flipped .mini-card-front {
  opacity: 0;
}

.mini-card.flipped .mini-card-back {
  opacity: 1;
}

.mini-card-front,
.mini-card-back {
  transition: opacity 0.3s;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.mini-card-back {
  opacity: 0;
}

.jlpt-badge-small {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: var(--jp-shu);
  color: var(--jp-washi);
  padding: 0.2rem 0.5rem;
  border-radius: var(--radius-sm);
  font-size: 0.7rem;
  font-weight: bold;
}

.mini-kanji {
  font-family: var(--font-jp-kanji);
  font-size: 2rem;
  font-weight: 700;
  color: var(--jp-sumi);
}

.mini-vocab {
  font-size: 1rem;
  color: var(--gray);
}

.mini-meaning {
  font-size: 1rem;
  color: var(--dark);
  text-align: center;
}

.card-item-actions {
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

/* Flashcard Form */
.flashcard-form {
  max-width: 500px;
  margin: 0 auto;
}

.flashcard-form h3 {
  margin-bottom: 1.5rem;
  color: var(--dark);
}

/* Form System */
.form-group {
  margin-bottom: var(--space-lg);
}

.form-group label {
  display: block;
  margin-bottom: var(--space-xs);
  font-weight: 500;
  font-size: var(--font-size-sm);
  color: var(--dark);
}

.form-group input,
.form-group textarea,
.form-group select {
  width: 100%;
  padding: var(--space-sm) var(--space-md);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-md);
  font-family: inherit;
  background: var(--white);
  color: var(--dark);
  transition: all var(--transition-normal);
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.form-group input:hover:not(:focus):not(:disabled),
.form-group textarea:hover:not(:focus):not(:disabled),
.form-group select:hover:not(:focus):not(:disabled) {
  border-color: var(--gray-light);
}

.form-group input:disabled,
.form-group textarea:disabled,
.form-group select:disabled {
  background: var(--light);
  color: var(--gray);
  cursor: not-allowed;
}

.form-group input::placeholder,
.form-group textarea::placeholder {
  color: var(--gray-light);
}

.form-row {
  display: flex;
  gap: var(--space-md);
}

.form-row .form-group {
  flex: 1;
}

.form-row select:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Example input styling */
.form-group label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-add-example {
  background: var(--success);
  color: var(--white);
  border: none;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  font-size: 1.2rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

.btn-add-example:hover {
  opacity: 0.8;
}

.example-input-row {
  display: flex;
  gap: 0.5rem;
  margin-top: 0.5rem;
  align-items: flex-start;
}

.example-input-row textarea {
  flex: 1;
}

.btn-remove-example {
  background: var(--danger);
  color: var(--white);
  border: none;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  font-size: 1.2rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  flex-shrink: 0;
  margin-top: 0.5rem;
}

.btn-remove-example:hover {
  opacity: 0.8;
}

.form-actions {
  display: flex;
  gap: 1rem;
  justify-content: flex-end;
  margin-top: 1.5rem;
}

/* Flashcard (Study) */
.flashcard-container {
  perspective: 1000px;
  width: 100%;
  flex: 1;
}

.flashcard {
  position: relative;
  width: 100%;
  height: 70vh;
  min-height: 400px;
  cursor: pointer;
  transform-style: preserve-3d;
  transition: transform 0.6s;
}

.flashcard.flipped {
  transform: rotateY(180deg);
}

.flashcard-face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: var(--radius-lg);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  box-shadow: 0 8px 32px rgba(28, 28, 28, 0.15);
}

.flashcard-front {
  background: var(--gradient-ai);
  color: var(--jp-washi);
}

/* Subtle washi texture overlay */
.flashcard-front::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.08) 0%, transparent 3%),
    radial-gradient(circle at 70% 60%, rgba(255, 255, 255, 0.06) 0%, transparent 2%),
    radial-gradient(circle at 50% 80%, rgba(255, 255, 255, 0.05) 0%, transparent 4%);
  pointer-events: none;
  border-radius: var(--radius-lg);
}

.flashcard-back {
  background: var(--jp-washi-warm);
  color: var(--jp-sumi);
  transform: rotateY(180deg);
  border: 1px solid var(--border);
}

.jlpt-badge {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
  padding: 0.3rem 0.8rem;
  border-radius: var(--radius-sm);
  font-size: 0.8rem;
  font-weight: bold;
}

.flashcard-back .jlpt-badge {
  background: var(--jp-shu);
  color: var(--jp-washi);
  border: none;
}

/* Speak button for TTS pronunciation */
.speak-btn {
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  padding: 0.5rem 0.8rem;
  border-radius: 50%;
  font-size: 1.5rem;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-bottom: 0.5rem;
}

.speak-btn:hover {
  background: rgba(255, 255, 255, 0.35);
  transform: scale(1.1);
}

.speak-btn.speaking {
  animation: pulse 0.8s infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}

.flashcard-back .speak-btn {
  background: var(--jp-shu);
  color: var(--jp-washi);
  border: none;
}

.flashcard-back .speak-btn:hover {
  background: var(--jp-shu-dark);
}

.card-content {
  text-align: center;
}

.kanji {
  font-family: var(--font-jp-kanji);
  font-size: 250px;
  font-weight: 900;
  line-height: 1;
  text-shadow: 2px 4px 8px rgba(0, 0, 0, 0.15);
}

.vocabulary {
  font-size: 1.8rem;
  margin-bottom: 0.3rem;
  font-family: 'MS Mincho', 'Yu Mincho', 'Hiragino Mincho Pro', serif;
}

.vocabulary-with-speaker {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.vocabulary-with-speaker .vocabulary {
  margin-bottom: 0;
}

.sino-vietnamese {
  font-size: 2rem;
  color: var(--primary);
  font-weight: 700;
  margin-bottom: 0.5rem;
}

.meaning {
  font-size: 1.5rem;
  font-weight: 500;
  font-family: 'Times New Roman', Times, serif;
  margin-bottom: 1rem;
}

.example {
  font-size: 0.95rem;
  color: var(--gray);
}

.example-label {
  font-weight: bold;
  color: var(--dark);
}

.flip-hint {
  position: absolute;
  bottom: 1rem;
  font-size: 0.85rem;
  opacity: 0.7;
}

/* Study Session */
.study-session {
  background: var(--white);
  padding: var(--space-lg);
  width: 100%;
  min-height: calc(100vh - 80px - 1rem);
  display: flex;
  flex-direction: column;
}

.study-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0;
  flex-wrap: wrap;
  gap: var(--space-md);
}

.progress-info {
  display: flex;
  gap: var(--space-md);
  align-items: center;
  font-weight: 600;
  color: var(--primary);
}

.progress-info-right {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
  font-weight: 600;
  color: var(--primary);
  font-size: 0.95rem;
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
}

.progress-info-right .click-count {
  opacity: 0.8;
  font-size: 0.85rem;
  color: var(--gray);
}

.click-count {
  font-size: 0.85rem;
  color: var(--gray);
  background: var(--bg-light);
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.shuffle-btn {
  margin-left: 0.5rem;
}

.study-card-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;
}

.swipe-hint {
  text-align: center;
  color: var(--gray);
  font-size: 0.85rem;
  margin-top: 0.5rem;
  opacity: 0.7;
}

.card-navigation {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  width: 100%;
}

.card-nav-btn {
  padding: var(--space-sm) var(--space-md);
  font-size: 1.75rem;
  font-weight: 700;
  border: none;
  border-radius: var(--radius-lg);
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  color: var(--white);
  cursor: pointer;
  transition: all var(--transition-normal);
  min-width: 48px;
  min-height: 48px;
}

.card-nav-btn:hover:not(:disabled) {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

.card-nav-btn:disabled {
  background: var(--gray-light);
  color: var(--gray);
  cursor: not-allowed;
  opacity: 0.6;
}

.rating-buttons {
  text-align: center;
}

.rating-buttons p {
  margin-bottom: 1rem;
  color: var(--gray);
}

.rating-row {
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.rating-btn {
  padding: 0.8rem 1.5rem;
  border: none;
  border-radius: 8px;
  color: var(--white);
  cursor: pointer;
  font-size: 1rem;
  font-weight: 500;
  transition: transform 0.2s, opacity 0.2s;
}

.rating-btn:hover {
  transform: scale(1.05);
  opacity: 0.9;
}

/* Memorization status buttons */
.memorization-buttons,
.difficulty-buttons {
  text-align: center;
  margin-top: 1.5rem;
}

.memorization-buttons p,
.difficulty-buttons p {
  margin-bottom: 0.8rem;
  color: var(--gray);
  font-size: 0.95rem;
}

.memorization-row,
.difficulty-row {
  display: flex;
  justify-content: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.memo-btn,
.diff-btn {
  padding: 0.3rem 1rem;
  border: 2px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.2s;
  height: 35px;
}

.memo-btn.memorized {
  background: #e8f5e9;
  color: #2e7d32;
  border-color: #a5d6a7;
}

.memo-btn.memorized:hover {
  background: #c8e6c9;
  border-color: #81c784;
}

.memo-btn.memorized.active {
  background: #27ae60;
  color: var(--white);
  border-color: #27ae60;
}

.memo-btn.not-memorized {
  background: #ffebee;
  color: #c62828;
  border-color: #ef9a9a;
}

.memo-btn.not-memorized:hover {
  background: #ffcdd2;
  border-color: #e57373;
}

.memo-btn.not-memorized.active {
  background: #e74c3c;
  color: var(--white);
  border-color: #e74c3c;
}

.diff-btn.hard {
  background: #ffebee;
  color: #c62828;
  border-color: #ef9a9a;
}

.diff-btn.hard:hover {
  background: #ffcdd2;
  border-color: #e57373;
}

.diff-btn.hard.active {
  background: #e74c3c;
  color: var(--white);
  border-color: #e74c3c;
}

.diff-btn.medium {
  background: #fff3e0;
  color: #e65100;
  border-color: #ffcc80;
}

.diff-btn.medium:hover {
  background: #ffe0b2;
  border-color: #ffb74d;
}

.diff-btn.medium.active {
  background: #e67e22;
  color: var(--white);
  border-color: #e67e22;
}

.diff-btn.easy {
  background: #e3f2fd;
  color: #1565c0;
  border-color: #90caf9;
}

.diff-btn.easy:hover {
  background: #bbdefb;
  border-color: #64b5f6;
}

.diff-btn.easy.active {
  background: #3498db;
  color: var(--white);
  border-color: #3498db;
}

/* Filter bar inline styling */
.filter-bar-inline {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
  flex-wrap: wrap;
  margin-bottom: 1rem;
}

.filter-bar-inline span {
  color: var(--gray);
  font-size: 0.85rem;
}

.filter-separator {
  color: var(--gray-light);
  margin: 0 0.3rem;
}

/* Mobile filter bar with selects - hidden on desktop */
.filter-bar-mobile {
  display: none;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.filter-select {
  padding: 0.5rem 1rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: 0.9rem;
  background: var(--white);
  color: var(--dark);
  cursor: pointer;
  min-height: 35px;
}

.filter-select:focus {
  outline: none;
  border-color: var(--primary);
}

.filter-actions-mobile {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
}

/* Action buttons inline (memorization + difficulty) */
.action-buttons-inline {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  flex-wrap: wrap;
  padding: 0.75rem 0;
  position: relative;
}

.action-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.action-group span {
  color: var(--gray);
  font-size: 0.9rem;
}

.action-separator {
  color: var(--gray-light);
  margin: 0 0.5rem;
}

.study-empty {
  background: var(--white);
  border-radius: 16px;
  padding: 3rem;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.study-empty h2 {
  color: var(--success);
  margin-bottom: 1rem;
}

/* Study Result */
.study-result {
  background: var(--white);
  border-radius: 16px;
  padding: 3rem;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.study-result h2 {
  font-size: 2rem;
  color: var(--primary);
  margin-bottom: 2rem;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.stat-item {
  background: var(--light);
  padding: 1rem;
  border-radius: 12px;
}

.stat-value {
  display: block;
  font-size: 2rem;
  font-weight: bold;
  color: var(--dark);
}

.stat-label {
  font-size: 0.85rem;
  color: var(--gray);
}

.result-actions {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

/* Settings Page */
/* ============ PROFESSIONAL SETTINGS PAGE ============ */
.settings-page {
  background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
  border-radius: 0;
  padding: 0;
  box-shadow: none;
  min-height: 100vh;
}

/* Settings Header - Professional gradient header */
.settings-header {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  padding: 2rem 2rem 3rem;
  color: white;
  position: relative;
  overflow: hidden;
}

.settings-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  pointer-events: none;
}

.settings-header-content {
  position: relative;
  z-index: 1;
}

.settings-header h2 {
  color: white;
  margin: 0 0 0.5rem 0;
  font-size: 1.75rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.settings-header h2 .header-icon {
  font-size: 2rem;
}

.settings-header-subtitle {
  color: rgba(255, 255, 255, 0.85);
  font-size: 0.95rem;
  margin: 0;
}

.settings-page-body {
  padding: 0 1.5rem 2rem;
  margin-top: -1.5rem;
  position: relative;
  z-index: 2;
}

/* Settings Main Tabs - Modern pill design */
.settings-main-tabs {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  background: white;
  padding: 0.5rem;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.settings-main-tab {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.85rem 1.5rem;
  border: none;
  background: transparent;
  color: var(--gray);
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 12px;
  white-space: nowrap;
}

.settings-main-tab .tab-icon {
  font-size: 1.2rem;
  transition: transform 0.3s ease;
}

.settings-main-tab:hover {
  color: var(--primary);
  background: rgba(231, 76, 60, 0.08);
}

.settings-main-tab:hover .tab-icon {
  transform: scale(1.1);
}

.settings-main-tab.active {
  color: white;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
}

.settings-main-tab.active .tab-icon {
  transform: scale(1.1);
}

.settings-tab-content {
  /* Removed fadeIn animation - was causing flickering on tab switch */
}

/* ============ SETTINGS SUB-TABS - Modern Chip Design ============ */
.settings-sub-tabs {
  display: flex;
  gap: 0.75rem;
  padding: 1rem 1.25rem;
  background: white;
  border-radius: 16px;
  margin-bottom: 1.5rem;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
  border: 1px solid rgba(0, 0, 0, 0.04);
}

.settings-sub-tab {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.7rem 1.2rem;
  border: 2px solid transparent;
  border-radius: 50px;
  background: #f1f5f9;
  color: var(--gray-dark);
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  white-space: nowrap;
  position: relative;
  overflow: hidden;
}

.settings-sub-tab::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  opacity: 0;
  transition: opacity 0.25s ease;
}

.settings-sub-tab:hover {
  background: #e2e8f0;
  color: var(--dark);
  border-color: rgba(231, 76, 60, 0.2);
  transform: translateY(-1px);
}

.settings-sub-tab.active {
  background: transparent;
  color: white;
  border-color: transparent;
  box-shadow: 0 4px 15px rgba(231, 76, 60, 0.35);
}

.settings-sub-tab.active::before {
  opacity: 1;
}

.settings-sub-tab .sub-tab-icon {
  font-size: 1.15rem;
  position: relative;
  z-index: 1;
}

.settings-sub-tab .sub-tab-label {
  font-weight: 600;
  position: relative;
  z-index: 1;
}

/* Mobile responsive */
@media (max-width: 768px) {
  .settings-sub-tabs {
    gap: 0.5rem;
    padding: 0.75rem;
  }

  .settings-sub-tab {
    padding: 0.6rem 1rem;
    flex-direction: column;
    gap: 0.25rem;
    border-radius: 12px;
  }

  .settings-sub-tab .sub-tab-label {
    font-size: 0.75rem;
  }
}

@media (max-width: 480px) {
  .settings-sub-tab .sub-tab-label {
    display: none;
  }

  .settings-sub-tab {
    padding: 0.7rem;
    border-radius: 12px;
  }

  .settings-sub-tab .sub-tab-icon {
    font-size: 1.4rem;
  }
}

.settings-not-logged-in {
  text-align: center;
  color: var(--gray);
  padding: 3rem;
  background: white;
  border-radius: 16px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
}

/* ============ SETTINGS SECTION - Card Style ============ */
.settings-section {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 1.25rem;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
  border: 1px solid rgba(0, 0, 0, 0.04);
  transition: all 0.3s ease;
}

.settings-section:hover {
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

.settings-section:last-of-type {
  margin-bottom: 0;
}

.settings-section h3 {
  color: var(--dark);
  font-size: 1.1rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.settings-section h3::before {
  content: '';
  width: 4px;
  height: 1.2em;
  background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
  border-radius: 2px;
}

.settings-description {
  color: var(--gray);
  font-size: 0.9rem;
  margin-bottom: 1.25rem;
  line-height: 1.5;
}

/* ============ SETTING ITEMS - Professional Style ============ */
.setting-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 0;
  border-bottom: 1px solid #f1f5f9;
  transition: all 0.2s ease;
}

.setting-item:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.setting-item:first-child {
  padding-top: 0;
}

.setting-item:hover {
  background: linear-gradient(90deg, transparent, rgba(241, 245, 249, 0.5), transparent);
  margin: 0 -0.5rem;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  border-radius: 8px;
}

.setting-item label {
  color: var(--dark);
  font-size: 0.95rem;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.setting-item label svg {
  color: var(--primary);
  opacity: 0.8;
}

.setting-control {
  display: flex;
  align-items: center;
  gap: 1rem;
}

/* Custom Range Slider */
.setting-control input[type="range"] {
  width: 160px;
  height: 6px;
  cursor: pointer;
  -webkit-appearance: none;
  appearance: none;
  background: #e2e8f0;
  border-radius: 3px;
  outline: none;
  transition: all 0.2s ease;
}

.setting-control input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(231, 76, 60, 0.4);
  transition: all 0.2s ease;
}

.setting-control input[type="range"]::-webkit-slider-thumb:hover {
  transform: scale(1.15);
  box-shadow: 0 3px 10px rgba(231, 76, 60, 0.5);
}

.setting-control input[type="range"]::-moz-range-thumb {
  width: 18px;
  height: 18px;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  border-radius: 50%;
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 6px rgba(231, 76, 60, 0.4);
}

.setting-value {
  min-width: 65px;
  text-align: right;
  color: var(--primary);
  font-weight: 700;
  font-size: 0.9rem;
  background: rgba(231, 76, 60, 0.1);
  padding: 0.35rem 0.75rem;
  border-radius: 20px;
}

.setting-value .original-size {
  color: var(--gray);
  font-size: 0.75rem;
  font-weight: 500;
  margin-left: 0.25rem;
}

.device-multiplier {
  background: #f1f5f9;
  padding: 0.3rem 0.6rem;
  border-radius: 6px;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--gray-dark);
}

/* Custom Select */
.font-select {
  padding: 0.6rem 1.25rem;
  border: 2px solid #e2e8f0;
  border-radius: 10px;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  min-width: 200px;
  background: white;
  color: var(--dark);
  transition: all 0.2s ease;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 1rem center;
  padding-right: 2.5rem;
}

.font-select:hover {
  border-color: var(--primary);
}

.font-select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.15);
}

/* Font Preview */
.font-preview {
  margin-top: 1.5rem;
  padding: 1.5rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 12px;
  text-align: center;
}

.font-preview-label {
  color: rgba(255, 255, 255, 0.8);
  font-size: 0.85rem;
  margin-bottom: 0.5rem;
}

.font-preview-text {
  color: white;
  font-weight: 900;
  line-height: 1.2;
  margin-bottom: 1rem;
}

.font-preview-samples {
  color: rgba(255, 255, 255, 0.9);
  font-size: 2.5rem;
  letter-spacing: 0.5rem;
}

/* Toggle Switch */
.toggle {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 26px;
}

.toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--gray-light);
  transition: 0.3s;
  border-radius: 26px;
}

.toggle-slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background-color: var(--white);
  transition: 0.3s;
  border-radius: 50%;
}

.toggle input:checked + .toggle-slider {
  background-color: var(--primary);
}

.toggle input:checked + .toggle-slider:before {
  transform: translateX(24px);
}

/* Gradient preview grid */
.gradient-preview-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 0.5rem;
  margin-top: 0.75rem;
}

.gradient-preview-item {
  aspect-ratio: 1;
  border-radius: 8px;
  cursor: pointer;
  border: 3px solid transparent;
  transition: all 0.2s;
}

.gradient-preview-item:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.gradient-preview-item.active {
  border-color: var(--dark);
  box-shadow: 0 0 0 2px var(--white), 0 0 0 4px var(--primary);
}

/* Color picker */
.color-picker {
  width: 50px;
  height: 40px;
  padding: 0;
  border: 2px solid var(--gray-light);
  border-radius: 8px;
  cursor: pointer;
}

.color-picker::-webkit-color-swatch-wrapper {
  padding: 2px;
}

.color-picker::-webkit-color-swatch {
  border-radius: 4px;
  border: none;
}

/* URL input */
.url-input {
  flex: 1;
  padding: 0.6rem 1rem;
  border: 1px solid var(--gray-light);
  border-radius: 8px;
  font-size: 0.9rem;
}

.url-input:focus {
  outline: none;
  border-color: var(--primary);
}

.setting-control.full-width {
  flex: 1;
  width: 100%;
}

/* Stack layout for URL input */
.setting-item:has(.setting-control.full-width) {
  flex-direction: column;
  align-items: flex-start;
  gap: 0.5rem;
}

/* Card Frame Selection - Redesigned */
.frame-settings-section .setting-item {
  flex-direction: column;
  align-items: stretch;
}

.frame-settings-layout {
  display: flex;
  gap: 1.5rem;
  margin-top: 0.5rem;
}

/* Live Preview Card */
.frame-live-preview {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.frame-preview-card {
  width: 160px;
  height: 200px;
  border-radius: var(--radius-lg);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: all 0.3s ease;
}

.frame-preview-card .preview-kanji {
  font-size: 4rem;
  font-weight: bold;
  color: var(--jp-washi);
  text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}

.frame-preview-card .preview-label {
  font-size: 0.75rem;
  color: rgba(255,255,255,0.8);
  background: rgba(0,0,0,0.2);
  padding: 0.2rem 0.5rem;
  border-radius: var(--radius-sm);
}

.preview-frame-name {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--dark);
  margin: 0;
}

/* Frame Selection Area */
.frame-selection {
  flex: 1;
  min-width: 0;
}

/* Category Tabs */
.frame-category-tabs {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  margin-bottom: 0.75rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid var(--border);
}

.frame-tab {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  padding: 0.4rem 0.7rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-full);
  background: var(--white);
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 0.8rem;
}

.frame-tab:hover {
  background: var(--light);
  border-color: var(--primary);
}

.frame-tab.active {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

.frame-tab .tab-icon {
  font-size: 0.9rem;
}

.frame-tab .tab-label {
  font-weight: 500;
}

/* Frame Grid */
.frame-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(75px, 1fr));
  gap: 0.6rem;
  max-height: 280px;
  overflow-y: auto;
  padding: 0.5rem;
  background: var(--light);
  border-radius: var(--radius-md);
}

.frame-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.3rem;
  padding: 0.4rem;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s ease;
  background: transparent;
  border: none;
}

.frame-option:hover {
  transform: scale(1.08);
}

.frame-option.active {
  background: rgba(var(--primary-rgb, 231, 76, 60), 0.1);
}

.frame-option.active .frame-option-preview {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
}

.frame-option-preview {
  width: 55px;
  height: 55px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.frame-option-preview .frame-char {
  font-size: 1.4rem;
  font-weight: bold;
  color: var(--dark);
}

.frame-name {
  font-size: 0.65rem;
  color: var(--gray-dark);
  text-align: center;
  line-height: 1.2;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Custom Frame Builder */
.custom-frame-builder {
  margin-top: 1rem;
  padding: 1rem;
  background: var(--white);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.custom-frame-builder h4 {
  margin: 0 0 1rem 0;
  font-size: 0.95rem;
  color: var(--dark);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.custom-frame-row {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin-bottom: 0.75rem;
}

.custom-frame-field {
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
}

.custom-frame-field label {
  font-size: 0.8rem;
  color: var(--gray-dark);
  font-weight: 500;
}

.custom-frame-field input[type="range"] {
  width: 100%;
}

.custom-frame-field input[type="color"] {
  width: 100%;
  height: 36px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
}

.custom-frame-field select {
  padding: 0.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
}

.custom-frame-field .field-value {
  font-size: 0.75rem;
  color: var(--primary);
  font-weight: 600;
}

.custom-frame-toggle {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.custom-frame-toggle input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

/* Frame Animations */
@keyframes frame-pulse-gold {
  0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
  50% { box-shadow: 0 0 25px rgba(255, 215, 0, 0.9), 0 0 40px rgba(255, 215, 0, 0.5); }
}

@keyframes frame-pulse-rainbow {
  0% { border-color: #ff0000; box-shadow: 0 0 15px #ff0000; }
  16% { border-color: #ff8800; box-shadow: 0 0 15px #ff8800; }
  33% { border-color: #ffff00; box-shadow: 0 0 15px #ffff00; }
  50% { border-color: #00ff00; box-shadow: 0 0 15px #00ff00; }
  66% { border-color: #0088ff; box-shadow: 0 0 15px #0088ff; }
  83% { border-color: #8800ff; box-shadow: 0 0 15px #8800ff; }
  100% { border-color: #ff0000; box-shadow: 0 0 15px #ff0000; }
}

@keyframes frame-glow-blue {
  0%, 100% { box-shadow: 0 0 10px #00f3ff, 0 0 20px #00f3ff; }
  50% { box-shadow: 0 0 20px #00f3ff, 0 0 40px #00f3ff, 0 0 60px #00f3ff; }
}

@keyframes frame-glow-pink {
  0%, 100% { box-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff; }
  50% { box-shadow: 0 0 20px #ff00ff, 0 0 40px #ff00ff, 0 0 60px #ff00ff; }
}

@keyframes frame-shimmer {
  0% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5), inset 0 0 20px rgba(255, 255, 255, 0); }
  25% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), inset 20px 0 30px rgba(255, 255, 255, 0.3); }
  50% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5), inset 0 0 20px rgba(255, 255, 255, 0); }
  75% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), inset -20px 0 30px rgba(255, 255, 255, 0.3); }
  100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5), inset 0 0 20px rgba(255, 255, 255, 0); }
}

.frame-anim-pulse-gold {
  animation: frame-pulse-gold 2s ease-in-out infinite;
}

.frame-anim-pulse-rainbow {
  animation: frame-pulse-rainbow 4s linear infinite;
}

.frame-anim-glow-blue {
  animation: frame-glow-blue 2s ease-in-out infinite;
}

.frame-anim-glow-pink {
  animation: frame-glow-pink 2s ease-in-out infinite;
}

.frame-anim-shimmer {
  animation: frame-shimmer 3s ease-in-out infinite;
}

/* Preview Card Flip Animation */
.frame-preview-card {
  cursor: pointer;
  transform-style: preserve-3d;
}

.frame-preview-card:hover {
  transform: scale(1.02);
}

.frame-preview-card.flipping {
  animation: preview-flip 0.8s ease-in-out;
}

@keyframes preview-flip {
  0% { transform: rotateY(0deg); }
  50% { transform: rotateY(90deg); }
  100% { transform: rotateY(0deg); }
}

/* Animated indicator badge */
.frame-option .animated-badge {
  position: absolute;
  top: 2px;
  right: 2px;
  font-size: 0.6rem;
  background: linear-gradient(135deg, #ff6b6b, #feca57);
  color: white;
  padding: 1px 4px;
  border-radius: 4px;
  font-weight: 600;
}

.frame-option {
  position: relative;
}

/* ============ FLASHCARD STUDIO - PRO DESIGN ============ */
.fc-studio {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1rem;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  border-radius: var(--radius-lg);
}

/* Row 1: Preview + Typography */
.fc-studio-top {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.75rem;
}

.fc-studio-top .fc-preview-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.fc-studio-top .fc-typography {
  background: var(--white);
  border-radius: var(--radius-md);
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}

.fc-typography .fc-section-header {
  padding: 0.75rem 1rem;
  background: transparent;
  border-bottom: none;
}

.fc-typography .fc-section-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--gray-dark);
}

.fc-typography .fc-section-body {
  padding: 0 1rem 1rem;
}

.fc-typography .fc-control-row {
  margin-bottom: 0.75rem;
  gap: 0.75rem;
}

.fc-typography .fc-control-row:last-child {
  margin-bottom: 0;
}

.fc-typography .fc-control-row > label:first-child {
  min-width: 55px;
  font-size: 0.9rem;
  color: #6b7280;
}

.fc-typography .fc-select {
  flex: 1;
  padding: 0.4rem 0.6rem;
  font-size: 0.85rem;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  background: #fff;
}

.fc-typography .fc-toggle-mini {
  width: 32px;
  height: 32px;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  background: #fff;
}

.fc-typography .fc-toggle-mini:has(input:checked) {
  background: var(--gray-dark);
  color: #fff;
  border-color: var(--gray-dark);
}

.fc-typography .fc-toggle-mini input {
  display: none;
}

.fc-typography .fc-toggle-mini span {
  font-weight: 700;
  font-size: 0.9rem;
}

.fc-typography input[type="range"] {
  flex: 1;
  height: 6px;
  accent-color: #ef8354;
  border-radius: 3px;
}

.fc-typography .fc-value {
  font-size: 0.85rem;
  min-width: 30px;
  text-align: right;
  color: #6b7280;
}

/* Row 2: Background, Frame */
.fc-studio-bottom {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

/* Preview Area */
.fc-preview-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.fc-preview-card {
  width: 100%;
  max-width: 100%;
  height: 180px;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.12), 0 4px 12px rgba(0,0,0,0.08);
  overflow: hidden;
  transition: all 0.3s ease;
}

.fc-preview-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 15px 40px rgba(0,0,0,0.15), 0 8px 16px rgba(0,0,0,0.1);
}

/* Front card - shows kanji with background/frame */
.fc-card-front {
  padding: 1rem;
}

.fc-kanji {
  color: var(--jp-washi);
  text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
  line-height: 1;
}

/* Back card - white background with info */
.fc-card-back {
  background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
  padding: 1rem;
  gap: 0.5rem;
}

.fc-sino { color: #b91c1c; font-weight: 600; }
.fc-vocab { color: #1e40af; }
.fc-meaning { color: #374151; font-size: 0.85em; }

.fc-preview-label {
  font-size: 0.75rem;
  color: var(--gray);
  font-weight: 500;
}

/* Controls Area */
.fc-controls {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.fc-section {
  background: var(--white);
  border-radius: var(--radius-md);
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0,0,0,0.08);
}

.fc-section-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 0.8rem;
  background: linear-gradient(to right, #f1f5f9, #fff);
  border-bottom: 1px solid var(--border);
}

.fc-section-icon { font-size: 1rem; }
.fc-section-title { font-weight: 600; font-size: 0.85rem; color: var(--dark); }

.fc-section-body {
  padding: 0.75rem;
}

/* Control Rows */
.fc-control-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.fc-control-row:last-child { margin-bottom: 0; }

.fc-control-row > label:first-child {
  min-width: 55px;
  font-size: 0.8rem;
  color: var(--gray-dark);
}

.fc-control-row input[type="range"] {
  flex: 1;
  height: 4px;
  accent-color: var(--primary);
}

.fc-value {
  min-width: 32px;
  text-align: right;
  font-size: 0.75rem;
  color: var(--gray);
  font-family: monospace;
}

.fc-select {
  flex: 1;
  padding: 0.3rem 0.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.8rem;
  background: var(--white);
}

.fc-toggle-mini {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-weight: bold;
  font-size: 0.85rem;
  color: var(--gray);
  transition: all 0.15s;
}

.fc-toggle-mini:has(input:checked) {
  background: var(--dark);
  border-color: var(--dark);
  color: white;
}

.fc-toggle-mini input { display: none; }

/* Display Toggles */
.fc-toggles {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
}

.fc-chip {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  padding: 0.35rem 0.6rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-full);
  font-size: 0.75rem;
  cursor: pointer;
  transition: all 0.15s;
  background: var(--white);
}

.fc-chip:hover { border-color: var(--primary); }

.fc-chip:has(input:checked) {
  background: var(--primary);
  border-color: var(--primary);
  color: white;
}

.fc-chip input { display: none; }

/* Background Tabs in Header */
.fc-bg-tabs {
  display: flex;
  gap: 0.25rem;
  margin-left: auto;
}

.fc-bg-tabs button {
  padding: 0.2rem 0.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.7rem;
  background: var(--white);
  cursor: pointer;
  transition: all 0.15s;
}

.fc-bg-tabs button:hover { border-color: var(--primary); }
.fc-bg-tabs button.active { background: var(--primary); color: white; border-color: var(--primary); }

/* Category Tabs */
.fc-cat-tabs {
  display: flex;
  gap: 0.25rem;
  margin-bottom: 0.5rem;
  flex-wrap: wrap;
}

.fc-cat-tabs button {
  padding: 0.25rem 0.4rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
  background: var(--white);
  cursor: pointer;
  transition: all 0.15s;
}

.fc-cat-tabs button:hover { background: var(--light); }
.fc-cat-tabs button.active { background: var(--primary); border-color: var(--primary); }

/* Palette Grid */
.fc-palette {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
  padding: 0.25rem;
  background: #f8fafc;
  border-radius: var(--radius-sm);
  max-height: 120px;
  overflow-y: auto;
}

.fc-swatch {
  aspect-ratio: 1;
  border-radius: 4px;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.1s;
}

.fc-swatch:hover { transform: scale(1.15); z-index: 1; }
.fc-swatch.active { border-color: var(--dark); box-shadow: 0 0 0 2px white, 0 0 0 4px var(--primary); }

/* Color Row */
.fc-color-row {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  flex-wrap: wrap;
}

.fc-color-row input[type="color"] {
  width: 32px;
  height: 32px;
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  padding: 0;
}

.fc-color {
  width: 28px;
  height: 28px;
  border-radius: 4px;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.1s;
}

.fc-color:hover { transform: scale(1.1); }
.fc-color.active { border-color: var(--dark); }

/* Input */
.fc-input {
  width: 100%;
  padding: 0.4rem 0.6rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.8rem;
}

.fc-input:focus { outline: none; border-color: var(--primary); }

/* Frames Grid */
.fc-frames {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
  padding: 0.25rem;
  background: #f8fafc;
  border-radius: var(--radius-sm);
  max-height: 120px;
  overflow-y: auto;
}

.fc-frame {
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--jp-washi-warm);
  font-size: 0.9rem;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.1s;
}

.fc-frame:hover { transform: scale(1.1); z-index: 1; }
.fc-frame.active { box-shadow: 0 0 0 2px var(--primary); }

/* Custom Frame */
.fc-custom-frame {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.fc-cf-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.fc-cf-row > span:first-child {
  min-width: 45px;
  font-size: 0.75rem;
  color: var(--gray-dark);
}

.fc-cf-row input[type="range"] { flex: 1; height: 4px; }
.fc-cf-row input[type="color"] { width: 28px; height: 28px; border: 1px solid var(--border); border-radius: 4px; padding: 0; }
.fc-cf-row label { font-size: 0.75rem; display: flex; align-items: center; gap: 0.25rem; cursor: pointer; }

.fc-apply-btn {
  padding: 0.4rem 0.8rem;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}

.fc-apply-btn:hover { background: var(--primary-dark); }

/* Responsive */
@media (max-width: 900px) {
  .fc-studio-top,
  .fc-studio-bottom {
    grid-template-columns: 1fr;
  }

  .fc-preview-card {
    max-width: 400px;
    height: 140px;
  }

  .fc-kanji { font-size: 3rem !important; }
}

/* ============ CARD APPEARANCE SETTINGS (Legacy - Hidden) ============ */
.card-appearance-layout {
  display: flex;
  gap: 1rem;
  margin-top: 0.5rem;
}

/* Shared Mini Preview */
.card-appearance-preview {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.3rem;
}

.card-preview-mini {
  width: 80px;
  height: 100px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  box-shadow: var(--shadow-md);
}

.preview-kanji-mini {
  font-size: 2.5rem;
  font-weight: bold;
  color: var(--jp-washi);
  text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.preview-caption {
  font-size: 0.7rem;
  color: var(--gray);
}

/* Settings Panels Container */
.card-appearance-settings {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* Collapsible Panel */
.appearance-panel {
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background: var(--white);
}

.appearance-panel[open] {
  background: var(--light);
}

.panel-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 0.8rem;
  cursor: pointer;
  font-weight: 600;
  font-size: 0.9rem;
  color: var(--dark);
  list-style: none;
}

.panel-header::-webkit-details-marker {
  display: none;
}

.panel-header::after {
  content: '▸';
  margin-left: auto;
  transition: transform 0.2s;
}

.appearance-panel[open] .panel-header::after {
  transform: rotate(90deg);
}

.panel-icon {
  font-size: 1rem;
}

.panel-content {
  padding: 0.5rem 0.8rem 0.8rem;
}

/* Compact Background Type Tabs */
.background-type-tabs.compact {
  display: flex;
  gap: 0.3rem;
  margin-bottom: 0.5rem;
}

.background-type-tabs.compact .bg-type-tab {
  flex: 1;
  padding: 0.4rem 0.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--white);
  cursor: pointer;
  font-size: 0.75rem;
  text-align: center;
  transition: all 0.2s;
}

.background-type-tabs.compact .bg-type-tab:hover {
  background: var(--light);
}

.background-type-tabs.compact .bg-type-tab.active {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

/* Compact Gradient Category Tabs */
.gradient-category-tabs.compact {
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
  margin-bottom: 0.5rem;
}

.gradient-category-tabs.compact .gradient-tab {
  padding: 0.3rem 0.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--white);
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
}

.gradient-category-tabs.compact .gradient-tab:hover {
  background: var(--light);
}

.gradient-category-tabs.compact .gradient-tab.active {
  background: var(--primary);
  border-color: var(--primary);
}

/* Compact Gradient Grid */
.gradient-grid.compact {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
  gap: 0.3rem;
  max-height: 120px;
  overflow-y: auto;
  padding: 0.3rem;
  background: var(--white);
  border-radius: var(--radius-sm);
}

.gradient-grid.compact .gradient-option {
  aspect-ratio: 1;
  border-radius: 4px;
  cursor: pointer;
  border: 2px solid transparent;
  transition: all 0.15s;
}

.gradient-grid.compact .gradient-option:hover {
  transform: scale(1.1);
}

.gradient-grid.compact .gradient-option.active {
  border-color: var(--dark);
  box-shadow: 0 0 0 1px var(--white), 0 0 0 2px var(--primary);
}

/* Compact Color Picker */
.color-picker-compact {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.color-picker-compact input[type="color"] {
  width: 36px;
  height: 36px;
  padding: 0;
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
}

.quick-colors.compact {
  display: flex;
  gap: 0.25rem;
}

.quick-colors.compact .quick-color {
  width: 28px;
  height: 28px;
  border-radius: 4px;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.15s;
}

.quick-colors.compact .quick-color:hover {
  transform: scale(1.1);
}

.quick-colors.compact .quick-color.active {
  border-color: var(--dark);
}

/* Compact Image URL */
.image-url-compact .url-input {
  width: 100%;
  padding: 0.4rem 0.6rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.8rem;
}

/* Compact Frame Category Tabs */
.frame-category-tabs.compact {
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
  margin-bottom: 0.5rem;
}

.frame-category-tabs.compact .frame-tab {
  padding: 0.3rem 0.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--white);
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
}

.frame-category-tabs.compact .frame-tab:hover {
  background: var(--light);
}

.frame-category-tabs.compact .frame-tab.active {
  background: var(--primary);
  border-color: var(--primary);
}

/* Compact Frame Grid */
.frame-grid.compact {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
  gap: 0.3rem;
  max-height: 120px;
  overflow-y: auto;
  padding: 0.3rem;
  background: var(--white);
  border-radius: var(--radius-sm);
}

.frame-option-mini {
  width: 100%;
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--jp-washi-warm);
  cursor: pointer;
  font-size: 1rem;
  font-weight: bold;
  color: var(--dark);
  transition: all 0.15s;
}

.frame-option-mini:hover {
  transform: scale(1.1);
}

.frame-option-mini.active {
  box-shadow: 0 0 0 2px var(--primary);
}

/* Compact Custom Frame Builder */
.custom-frame-compact {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.custom-frame-compact .custom-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.custom-frame-compact .custom-row label {
  font-size: 0.75rem;
  color: var(--gray-dark);
  min-width: 45px;
}

.custom-frame-compact .custom-row input[type="range"] {
  flex: 1;
  height: 4px;
}

.custom-frame-compact .custom-row input[type="color"] {
  width: 28px;
  height: 28px;
  padding: 0;
  border: 1px solid var(--border);
  border-radius: 4px;
}

.custom-frame-compact .mini-toggle {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  font-size: 0.75rem;
  cursor: pointer;
}

.custom-frame-compact .mini-toggle input {
  width: 14px;
  height: 14px;
}

.btn-sm {
  padding: 0.3rem 0.6rem;
  font-size: 0.75rem;
}

/* Responsive */
@media (max-width: 768px) {
  .card-appearance-layout {
    flex-direction: column;
    align-items: center;
  }

  .card-preview-mini {
    width: 70px;
    height: 90px;
  }

  .preview-kanji-mini {
    font-size: 2rem;
  }
}

.settings-description {
  color: var(--gray);
  font-size: 0.9rem;
  margin-bottom: 1rem;
}

/* App Background Selection */
.app-bg-category {
  margin-bottom: 1.25rem;
}

.app-bg-category-label {
  display: block;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--gray-dark);
  margin-bottom: 0.5rem;
}

.app-bg-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
  gap: 0.75rem;
}

.app-bg-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem;
  background: var(--light);
  border: 2px solid transparent;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
}

.app-bg-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.app-bg-item.active {
  border-color: var(--primary);
  background: var(--white);
  box-shadow: 0 0 0 2px var(--primary-light);
}

.app-bg-preview {
  width: 60px;
  height: 40px;
  border-radius: 6px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.app-bg-name {
  font-size: 0.7rem;
  color: var(--dark);
  text-align: center;
  font-weight: 500;
  line-height: 1.2;
}

@media (max-width: 768px) {
  .app-bg-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .app-bg-preview {
    width: 50px;
    height: 35px;
  }

  .app-bg-name {
    font-size: 0.65rem;
  }
}

/* Game Settings Preview */
.game-settings-preview {
  background: var(--light);
  border-radius: 8px;
  padding: 1rem;
  margin-top: 1rem;
}

.game-settings-preview .preview-label {
  font-size: 0.8rem;
  color: var(--gray);
  margin-bottom: 0.75rem;
}

.game-settings-preview .preview-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.game-settings-preview .preview-question,
.game-settings-preview .preview-answer {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  background: var(--white);
  padding: 1rem 1.5rem;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.game-settings-preview .preview-badge {
  font-size: 0.7rem;
  color: var(--gray);
  text-transform: uppercase;
  font-weight: 600;
}

.game-settings-preview .preview-text {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--dark);
}

.game-settings-preview .preview-arrow {
  font-size: 1.5rem;
  color: var(--primary);
  font-weight: bold;
}

/* ============ GAME SOUND SETTINGS - Premium Design ============ */
.sound-settings-section {
  background: linear-gradient(145deg, #ffffff 0%, #fafbff 50%, #fff8f8 100%);
  border-radius: 20px;
  padding: 0;
  margin-top: 1rem;
  overflow: hidden;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);
  border: 1px solid rgba(231, 76, 60, 0.08);
}

.sound-settings-section h3 {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 1.15rem;
  margin: 0;
  padding: 1.25rem 1.5rem;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: white;
}

.sound-settings-section h3::before {
  display: none;
}

.sound-settings-section h3 .section-icon {
  font-size: 1.5rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.sound-settings-content {
  padding: 1.5rem;
}

.sound-settings-section .setting-item label {
  display: flex;
  align-items: center;
  gap: 0.6rem;
}

.sound-settings-section .setting-item label svg {
  color: var(--primary);
  filter: drop-shadow(0 1px 2px rgba(231, 76, 60, 0.2));
}

.setting-divider {
  height: 2px;
  background: linear-gradient(90deg, transparent, rgba(231, 76, 60, 0.15), transparent);
  margin: 1.25rem 0;
  border-radius: 1px;
}

/* Sound Test Section */
.sound-test-section {
  padding: 1.25rem 0;
}

.sound-test-section label {
  display: block;
  font-size: 0.9rem;
  color: var(--gray);
  margin-bottom: 1rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.sound-test-buttons {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.sound-test-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  color: white;
  position: relative;
  overflow: hidden;
}

.sound-test-btn::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(180deg, rgba(255,255,255,0.2) 0%, transparent 50%);
  pointer-events: none;
}

.sound-test-btn:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
}

.sound-test-btn:active {
  transform: translateY(-1px) scale(0.98);
}

.sound-test-btn.correct {
  background: linear-gradient(135deg, #10b981, #059669);
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.35);
}

.sound-test-btn.wrong {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.35);
}

.sound-test-btn.victory {
  background: linear-gradient(135deg, #f59e0b, #d97706);
  color: white;
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.35);
}

.sound-test-btn.start {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.35);
}

/* Music Control Section */
.music-control-section {
  display: flex;
  align-items: center;
  gap: 1.25rem;
  padding: 1.25rem 0;
  flex-wrap: wrap;
}

.music-control-btn {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  padding: 0.9rem 1.75rem;
  border: 2px solid var(--primary);
  border-radius: 14px;
  background: transparent;
  color: var(--primary);
  font-size: 0.95rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.music-control-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.5s ease;
}

.music-control-btn:hover {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(231, 76, 60, 0.35);
  border-color: transparent;
}

.music-control-btn:hover::before {
  left: 100%;
}

.music-control-btn.playing {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: white;
  border-color: transparent;
  box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
  animation: pulse-glow 2s infinite;
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4); }
  50% { box-shadow: 0 4px 25px rgba(231, 76, 60, 0.6); }
}

.music-control-btn.playing:hover {
  transform: translateY(-2px);
}

/* Music Playing Indicator */
.music-playing-indicator {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  color: var(--primary);
  font-size: 0.9rem;
  font-weight: 600;
  background: rgba(231, 76, 60, 0.1);
  padding: 0.5rem 1rem;
  border-radius: 20px;
}

.music-bar {
  width: 3px;
  height: 16px;
  background: var(--primary);
  border-radius: 2px;
  animation: musicBar 0.8s ease-in-out infinite;
}

.music-bar:nth-child(1) { animation-delay: 0s; }
.music-bar:nth-child(2) { animation-delay: 0.2s; }
.music-bar:nth-child(3) { animation-delay: 0.4s; }
.music-bar:nth-child(4) { animation-delay: 0.6s; }

@keyframes musicBar {
  0%, 100% { transform: scaleY(0.5); }
  50% { transform: scaleY(1); }
}

/* Sound Info Note */
.sound-info-note {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  margin-top: 1rem;
  padding: 0.75rem 1rem;
  background: rgba(33, 150, 243, 0.1);
  border-radius: 8px;
  border-left: 3px solid #2196f3;
}

.sound-info-note .info-icon {
  font-size: 1rem;
  flex-shrink: 0;
}

.sound-info-note span:last-child {
  font-size: 0.85rem;
  color: var(--gray);
  line-height: 1.4;
}

/* Music Current Track Display */
.music-current-track {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.25rem;
  background: linear-gradient(135deg, rgba(var(--primary-rgb, 231, 76, 60), 0.08), rgba(var(--primary-rgb, 231, 76, 60), 0.03));
  border-radius: 16px;
  border: 1px solid rgba(var(--primary-rgb, 231, 76, 60), 0.15);
  margin-bottom: 1rem;
}

.current-track-info {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.music-current-track .track-emoji {
  font-size: 2rem;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.track-details {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.track-details .track-name {
  font-weight: 700;
  font-size: 1rem;
  color: var(--text-dark);
}

.track-details .track-category {
  font-size: 0.8rem;
  color: var(--gray);
}

.music-playing-badge {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem 1rem;
  background: var(--primary);
  color: white;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
}

.music-playing-badge .music-bar {
  background: white;
  width: 2px;
  height: 12px;
}

/* Music Track Selector Grid */
.music-track-selector {
  margin-top: 0.5rem;
}

.music-track-selector > label {
  display: block;
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 0.75rem;
}

.music-categories {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-height: 400px;
  overflow-y: auto;
  padding: 0.5rem;
  background: var(--bg-secondary);
  border-radius: 12px;
  border: 1px solid var(--border-light);
}

.music-category-group {
  background: var(--bg-primary);
  border-radius: 10px;
  padding: 0.75rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.category-header {
  font-size: 0.85rem;
  font-weight: 700;
  color: var(--gray);
  margin-bottom: 0.5rem;
  padding-left: 0.25rem;
}

.category-tracks {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
  gap: 0.5rem;
}

.track-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.35rem;
  padding: 0.75rem 0.5rem;
  background: var(--bg-secondary);
  border: 2px solid transparent;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.track-btn:hover {
  background: rgba(var(--primary-rgb, 231, 76, 60), 0.1);
  border-color: rgba(var(--primary-rgb, 231, 76, 60), 0.3);
  transform: translateY(-1px);
}

.track-btn.selected {
  background: linear-gradient(135deg, rgba(var(--primary-rgb, 231, 76, 60), 0.15), rgba(var(--primary-rgb, 231, 76, 60), 0.08));
  border-color: var(--primary);
  box-shadow: 0 2px 8px rgba(var(--primary-rgb, 231, 76, 60), 0.2);
}

.track-btn.has-audio::after {
  content: '🎧';
  position: absolute;
  top: 4px;
  right: 4px;
  font-size: 0.65rem;
}

.track-btn .track-emoji {
  font-size: 1.5rem;
}

.track-btn .track-name {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-dark);
  text-align: center;
  line-height: 1.2;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.track-remove-btn {
  position: absolute;
  top: -6px;
  right: -6px;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #ef4444;
  color: white;
  border: none;
  font-size: 14px;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.track-btn:hover .track-remove-btn {
  opacity: 1;
}

/* Add Custom Track Section */
.add-custom-track-section {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px dashed var(--border-light);
}

.add-custom-btn {
  width: 100%;
  padding: 0.75rem 1rem;
  background: transparent;
  border: 2px dashed var(--gray-light);
  border-radius: 10px;
  color: var(--gray);
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.add-custom-btn:hover {
  border-color: var(--primary);
  color: var(--primary);
  background: rgba(var(--primary-rgb, 231, 76, 60), 0.05);
}

.custom-track-form {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 1rem;
  background: var(--bg-secondary);
  border-radius: 12px;
  border: 1px solid var(--border-light);
}

.custom-track-form .form-row {
  display: flex;
  gap: 0.5rem;
}

.custom-track-form .emoji-select {
  width: 60px;
  padding: 0.6rem;
  border: 1px solid var(--border-light);
  border-radius: 8px;
  font-size: 1.25rem;
  text-align: center;
  cursor: pointer;
}

.custom-track-form .custom-track-name-input,
.custom-track-form .custom-track-url-input {
  flex: 1;
  padding: 0.6rem 0.75rem;
  border: 1px solid var(--border-light);
  border-radius: 8px;
  font-size: 0.9rem;
  background: var(--bg-primary);
}

.custom-track-form .custom-track-url-input {
  font-family: monospace;
  font-size: 0.85rem;
}

.custom-track-form input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(var(--primary-rgb, 231, 76, 60), 0.1);
}

.custom-track-form .form-actions {
  display: flex;
  gap: 0.5rem;
  justify-content: flex-end;
}

.custom-track-form .btn-add {
  padding: 0.5rem 1.25rem;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.custom-track-form .btn-add:hover:not(:disabled) {
  background: var(--primary-dark);
  transform: translateY(-1px);
}

.custom-track-form .btn-add:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.custom-track-form .btn-cancel {
  padding: 0.5rem 1.25rem;
  background: transparent;
  color: var(--gray);
  border: 1px solid var(--border-light);
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.custom-track-form .btn-cancel:hover {
  background: var(--bg-secondary);
  border-color: var(--gray-light);
}

/* Toggle Switch (used for sound on/off) */
.toggle {
  position: relative;
  display: inline-block;
  width: 52px;
  height: 28px;
}

.toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  border-radius: 28px;
  transition: all 0.3s ease;
}

.toggle-slider::before {
  position: absolute;
  content: "";
  height: 22px;
  width: 22px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  border-radius: 50%;
  transition: all 0.3s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.toggle input:checked + .toggle-slider {
  background: linear-gradient(135deg, var(--primary), var(--primary-light));
}

.toggle input:checked + .toggle-slider::before {
  transform: translateX(24px);
}

.toggle input:focus + .toggle-slider {
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.2);
}

/* Mobile responsive for sound settings */
@media (max-width: 768px) {
  .sound-test-buttons {
    justify-content: center;
  }

  .sound-test-btn {
    padding: 0.5rem 0.8rem;
    font-size: 0.85rem;
  }

  .music-control-section {
    flex-direction: column;
    align-items: flex-start;
  }

  .music-control-btn {
    width: 100%;
    justify-content: center;
  }
}

.settings-actions {
  margin-top: 2rem;
  text-align: center;
}

/* Profile Section */
.profile-section {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 12px;
  padding: 1.5rem !important;
}

.profile-info {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--gray-light);
}

.profile-avatar {
  width: 68px;
  height: 68px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary) 0%, #c0392b 100%);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.5rem;
  font-weight: bold;
  flex-shrink: 0;
}

.profile-details {
  flex: 1;
}

.profile-name {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--dark);
  margin-bottom: 0.25rem;
}

.profile-username {
  color: var(--gray);
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
}

.profile-input-group {
  display: flex;
  gap: 0.5rem;
  flex: 1;
}

.profile-input {
  flex: 1;
  padding: 0.5rem 1rem;
  border: 1px solid var(--gray-light);
  border-radius: 8px;
  font-size: 0.95rem;
}

.profile-input:focus {
  outline: none;
  border-color: var(--primary);
}

.password-change-section {
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--gray-light);
}

.password-change-section h4 {
  color: var(--dark);
  margin-bottom: 1rem;
  font-size: 1rem;
}

.password-inputs {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.form-message {
  font-size: 0.9rem;
  margin-top: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 6px;
}

.form-message.success {
  background: #d4edda;
  color: #155724;
}

.form-message.error {
  background: #f8d7da;
  color: #721c24;
}

/* Orange Button */
.btn-orange {
  background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%) !important;
  color: white !important;
  border: none;
}

.btn-orange:hover:not(:disabled) {
  background: linear-gradient(135deg, #e67e22 0%, #d35400 100%) !important;
}

.btn-orange:disabled {
  background: var(--gray-light) !important;
  color: var(--gray) !important;
  cursor: not-allowed;
}

/* Profile Avatar Improvements */
.profile-avatar-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.profile-avatar.clickable {
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

.profile-avatar.clickable:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.profile-avatar.has-image {
  overflow: hidden;
  padding: 0;
}

.profile-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.avatar-edit-hint {
  font-size: 0.75rem;
  color: var(--gray);
}

/* Avatar Picker */
.avatar-picker {
  background: var(--light);
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: 1.5rem;
}

.avatar-picker-title {
  font-size: 0.9rem;
  color: var(--dark);
  margin-bottom: 0.75rem;
}

.avatar-options {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.avatar-option {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: 2px solid transparent;
  background: white;
  font-size: 1.5rem;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.avatar-option:hover {
  transform: scale(1.1);
  border-color: var(--primary);
}

.avatar-option.active {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.3);
}

/* Avatar Picker Expanded - 100 icons with categories */
.avatar-picker-expanded {
  max-height: 400px;
  overflow-y: auto;
}

.avatar-category {
  margin-bottom: 1rem;
}

.avatar-category:last-child {
  margin-bottom: 0;
}

.avatar-category-label {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--gray-dark);
  margin-bottom: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.avatar-picker-expanded .avatar-option {
  width: 38px;
  height: 38px;
  font-size: 1.3rem;
}

.avatar-picker-actions {
  display: flex;
  gap: 0.75rem;
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid var(--border);
}

.avatar-picker-actions .btn {
  flex: 1;
}

/* Image avatar options */
.avatar-options-images {
  gap: 0.75rem;
}

.avatar-option-image {
  width: 56px;
  height: 56px;
  padding: 4px;
}

.avatar-option-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

/* Profile Form Group */
.profile-form-group {
  margin-bottom: 1.5rem;
}

.profile-form-group > label {
  display: block;
  font-weight: 500;
  color: var(--dark);
  margin-bottom: 0.5rem;
}

.profile-input-row {
  display: flex;
  gap: 0.75rem;
  align-items: center;
}

.profile-input-row .profile-input {
  flex: 1;
}

/* Password Section */
.password-section {
  padding-top: 1.5rem;
  border-top: 1px solid var(--gray-light);
}

.password-action {
  display: flex;
  justify-content: flex-end;
  margin-top: 1rem;
}

/* Header Small Avatar */
.user-avatar-small {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  font-weight: bold;
  flex-shrink: 0;
}

/* Profile Background Options */
.profile-bg-options {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.profile-bg-option {
  width: 50px;
  height: 35px;
  border-radius: 6px;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.2s;
}

.profile-bg-option:hover {
  transform: scale(1.1);
  border-color: var(--primary);
}

.profile-bg-option.active {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.3);
}

/* Theme Section (Super Admin) */
.theme-section {
  background: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
  border: 1px solid rgba(231, 76, 60, 0.2);
}

.theme-current {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
  padding: 0.75rem;
  background: white;
  border-radius: 8px;
}

.theme-color-preview {
  width: 30px;
  height: 35px;
  border-radius: 6px;
  border: 2px solid rgba(0, 0, 0, 0.1);
}

.theme-color-value {
  font-family: monospace;
  color: var(--gray);
}

/* Theme Category */
.theme-category {
  margin-bottom: 1.25rem;
}

.theme-category-label {
  display: block;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--gray-dark);
  margin-bottom: 0.5rem;
}

.theme-current {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1.25rem;
  padding: 0.75rem;
  background: var(--light);
  border-radius: 8px;
}

.theme-current-preview {
  display: flex;
  gap: 0.5rem;
}

.theme-color-preview {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.theme-gradient-preview {
  width: 80px;
  height: 40px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.theme-preset-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.75rem;
}

.theme-preset-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.5rem;
  border: 2px solid var(--border);
  border-radius: 10px;
  background: white;
  cursor: pointer;
  transition: all 0.2s;
}

.theme-preset-btn:hover {
  border-color: var(--gray);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.theme-preset-btn.active {
  border-color: var(--primary);
  box-shadow: 0 0 0 2px var(--primary-light);
}

.theme-preset-colors {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  width: 100%;
  margin-bottom: 0.35rem;
}

.theme-preset-primary {
  width: 100%;
  height: 24px;
  border-radius: 6px 6px 2px 2px;
}

.theme-preset-gradient {
  width: 100%;
  height: 16px;
  border-radius: 2px 2px 6px 6px;
}

.theme-preset-name {
  font-size: 0.7rem;
  color: var(--dark);
  text-align: center;
  font-weight: 500;
  line-height: 1.2;
}

@media (max-width: 768px) {
  .theme-preset-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Profile Badges */
.profile-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

/* Level Badge */
.level-badge {
  background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
  color: white;
  padding: 0.15rem 0.5rem;
  border-radius: 4px;
  font-size: 0.7rem;
  font-weight: bold;
}

/* Level Progress */
.level-progress-container {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.level-progress-bar {
  flex: 1;
  height: 8px;
  background: var(--gray-light);
  border-radius: 4px;
  overflow: hidden;
  max-width: 150px;
}

.level-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #f39c12 0%, #e67e22 100%);
  border-radius: 4px;
  transition: width 0.3s ease;
}

.level-progress-text {
  font-size: 0.75rem;
  color: var(--gray);
}

/* Profile Action (button below input) */
.profile-action {
  display: flex;
  justify-content: flex-end;
  margin-top: 0.75rem;
}

/* Transparent background option */
.profile-bg-option[style*="transparent"] {
  background: repeating-conic-gradient(#ccc 0% 25%, white 0% 50%) 50% / 10px 10px !important;
  border: 1px dashed var(--gray);
}

/* Chat Page */
.chat-page {
  height: calc(100vh - 80px);
  display: flex;
  justify-content: center;
  padding: 0.5rem 1rem 0;
}

.chat-container {
  width: 100%;
  max-width: 800px;
  height: 100%;
  background: var(--white);
  border-radius: 16px 16px 0 0;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.chat-header {
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--gray-light);
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: white;
}

.chat-header h2 {
  margin: 0 0 0.25rem 0;
  font-size: 1.25rem;
}

.chat-description {
  margin: 0;
  font-size: 0.85rem;
  opacity: 0.9;
}

.chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.chat-empty {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: var(--gray);
}

.chat-empty-hint {
  font-size: 0.85rem;
  margin-top: 0.5rem;
}

.chat-date-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.chat-date-divider {
  text-align: center;
  margin: 1rem 0;
}

.chat-date-divider span {
  background: var(--light);
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.75rem;
  color: var(--gray);
}

.chat-message {
  display: flex;
  gap: 0.5rem;
  align-items: flex-end;
  max-width: 80%;
}

.chat-message.own {
  margin-left: auto;
  flex-direction: row-reverse;
}

.chat-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  color: white;
  flex-shrink: 0;
}

.chat-message-content {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.chat-sender-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.chat-message.own .chat-sender-row {
  flex-direction: row-reverse;
}

.chat-sender {
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--dark);
  margin-left: 0.5rem;
}

/* Role-based sender colors */
.chat-sender-super_admin {
  background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 0.95rem;
}

.chat-sender-admin {
  color: #e74c3c;
  font-size: 0.95rem;
}

.chat-sender-vip_user {
  color: #f39c12;
  font-size: 0.95rem;
}

.chat-sender-user {
  color: var(--dark);
}

.chat-bubble {
  background: var(--light);
  padding: 0.5rem 0.75rem;
  border-radius: 12px;
  border-bottom-left-radius: 4px;
}

.chat-message.own .chat-bubble {
  background: var(--primary);
  color: white;
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 4px;
}

.chat-bubble p {
  margin: 0;
  word-break: break-word;
}

.chat-time {
  font-size: 0.7rem;
  color: var(--gray);
}

.chat-input-container {
  display: flex;
  gap: 0.5rem;
  padding: 1rem;
  border-top: 1px solid var(--gray-light);
  background: var(--light);
}

.chat-input {
  flex: 1;
  padding: 0.75rem 1rem;
  border: 1px solid var(--gray-light);
  border-radius: 24px;
  font-size: 0.95rem;
  outline: none;
}

.chat-input:focus {
  border-color: var(--primary);
}

.chat-send-btn {
  padding: 0.75rem 1.5rem;
  border-radius: 24px;
}

/* Own message sender name */
.chat-message.own .chat-sender {
  text-align: right;
}

/* Emoji Toggle Button */
.emoji-toggle-btn {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: 1px solid var(--gray-light);
  background: white;
  font-size: 1.25rem;
  cursor: pointer;
  transition: all 0.2s;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

.emoji-toggle-btn:hover {
  background: var(--light);
  transform: scale(1.1);
}

/* Emoji Picker */
.emoji-picker {
  background: white;
  border-top: 1px solid var(--gray-light);
  padding: 0.75rem;
  max-height: 250px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.emoji-categories {
  display: flex;
  gap: 0.25rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--gray-light);
  margin-bottom: 0.5rem;
}

.emoji-category-btn {
  width: 36px;
  height: 36px;
  border: none;
  background: transparent;
  font-size: 1.25rem;
  cursor: pointer;
  border-radius: 8px;
  transition: background 0.2s;
}

.emoji-category-btn:hover {
  background: var(--light);
}

.emoji-category-btn.active {
  background: var(--light);
  box-shadow: inset 0 -2px 0 var(--primary);
}

.emoji-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
  overflow-y: auto;
  max-height: 150px;
}

.emoji-btn {
  width: 36px;
  height: 36px;
  border: none;
  background: transparent;
  font-size: 1.25rem;
  cursor: pointer;
  border-radius: 8px;
  transition: all 0.2s;
}

.emoji-btn:hover {
  background: var(--light);
  transform: scale(1.2);
}

/* Stats Section */
.stats-section {
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
  border-radius: 12px;
  padding: 1.5rem !important;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 1rem;
}

.stat-card {
  background: white;
  border-radius: 12px;
  padding: 1rem;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.stat-icon {
  display: block;
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

.stat-value {
  display: block;
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--primary);
  margin-bottom: 0.25rem;
}

.stat-label {
  display: block;
  font-size: 0.8rem;
  color: var(--gray);
}

/* History Section */
.history-section {
  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
  border-radius: 12px;
  padding: 1.5rem !important;
}

.history-tabs {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.history-tab {
  padding: 0.5rem 1rem;
  border: none;
  background: white;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.9rem;
  color: var(--gray);
  transition: all 0.2s;
}

.history-tab:hover {
  background: #f5f5f5;
}

.history-tab.active {
  background: var(--primary);
  color: white;
}

.history-content {
  background: white;
  border-radius: 12px;
  padding: 1rem;
  max-height: 400px;
  overflow-y: auto;
}

.history-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.history-item {
  padding: 0.75rem;
  background: #f8f9fa;
  border-radius: 8px;
  border-left: 3px solid var(--primary);
}

.history-item-main {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 0.25rem;
}

.history-date {
  font-size: 0.85rem;
  color: var(--gray);
  min-width: 90px;
}

.history-detail,
.history-title {
  font-weight: 600;
  color: var(--dark);
}

.history-level {
  background: var(--primary);
  color: white;
  padding: 0.15rem 0.5rem;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: 600;
}

.history-category {
  font-size: 0.9rem;
  color: var(--gray);
}

.history-item-sub {
  display: flex;
  gap: 1rem;
  font-size: 0.85rem;
  color: var(--gray);
  padding-left: 90px;
}

.history-item-sub .rank-win {
  color: #f39c12;
  font-weight: 600;
}

.history-empty {
  text-align: center;
  color: var(--gray);
  padding: 2rem;
}

.history-loading {
  text-align: center;
  color: var(--gray);
  padding: 2rem;
}

/* Login Page - Japanese Aesthetic */
.login-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  background: var(--gradient-main);
  position: relative;
  overflow: hidden;
}

/* Decorative sakura petals background */
.login-page::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(circle at 20% 30%, rgba(255, 183, 197, 0.3) 0%, transparent 8%),
    radial-gradient(circle at 80% 20%, rgba(255, 183, 197, 0.25) 0%, transparent 6%),
    radial-gradient(circle at 60% 70%, rgba(255, 183, 197, 0.2) 0%, transparent 10%),
    radial-gradient(circle at 30% 80%, rgba(255, 183, 197, 0.25) 0%, transparent 7%),
    radial-gradient(circle at 90% 60%, rgba(255, 183, 197, 0.2) 0%, transparent 5%);
  animation: sakura-float 20s ease-in-out infinite;
  pointer-events: none;
}

@keyframes sakura-float {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(2deg); }
}

.login-card {
  background: var(--jp-washi-warm);
  border-radius: var(--radius-md);
  padding: 2.5rem 2rem;
  box-shadow: 0 8px 32px rgba(28, 28, 28, 0.15);
  width: 100%;
  max-width: 400px;
  border: 1px solid var(--border);
  position: relative;
  z-index: 1;
}

/* Decorative Japanese character */
.login-card::before {
  content: '日本語';
  position: absolute;
  top: 12px;
  right: 16px;
  font-family: var(--font-jp-display);
  font-size: 0.7rem;
  color: var(--jp-shu);
  opacity: 0.25;
  letter-spacing: 2px;
}

.login-card h2 {
  text-align: center;
  font-family: var(--font-jp-display);
  color: var(--jp-shu);
  margin-bottom: 0.5rem;
  font-size: var(--font-size-xl);
}

.login-subtitle {
  text-align: center;
  color: var(--jp-sumi-medium);
  margin-bottom: 1.5rem;
  font-size: 0.9rem;
  font-family: var(--font-jp-body);
}

.login-card .btn {
  padding: 0.75rem 1.25rem;
  font-size: 0.95rem;
}

.login-card .form-group {
  margin-bottom: 1rem;
}

.login-card .form-group input {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.95rem;
  color: var(--jp-sumi);
  background: var(--jp-washi);
  transition: all var(--transition-normal);
}

.login-card .form-group input:focus {
  outline: none;
  border-color: var(--jp-shu);
  box-shadow: 0 0 0 3px rgba(227, 66, 52, 0.1);
}

.btn-full {
  width: 100%;
}

.error-message {
  color: var(--danger);
  font-size: 0.9rem;
  margin-bottom: 1rem;
  text-align: center;
}

.login-toggle {
  text-align: center;
  margin-top: 1.5rem;
  color: var(--jp-sumi-medium);
}

.btn-link {
  background: none;
  border: none;
  color: var(--jp-shu);
  cursor: pointer;
  font-size: inherit;
  text-decoration: none;
  margin-left: 0.25rem;
  font-weight: 500;
  transition: color var(--transition-fast);
}

.btn-link:hover {
  color: var(--jp-shu-dark);
  text-decoration: underline;
}

.login-hint {
  text-align: center;
  margin-top: 1rem;
  font-size: 0.85rem;
  color: var(--jp-sumi-medium);
  padding: 0.75rem;
  background: var(--jp-kinari);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
}

/* User Info in Header */
.user-info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.username {
  color: var(--dark);
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.role-badge {
  background: var(--primary);
  color: var(--white);
  padding: 0.15rem 0.5rem;
  border-radius: 4px;
  font-size: 0.7rem;
  font-weight: bold;
}

.role-badge.super-admin {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.role-badge.admin {
  background: var(--secondary);
}

.role-badge.vip {
  background: linear-gradient(135deg, #f5af19 0%, #f12711 100%);
}

.btn-logout {
  padding: 0.4rem 0.8rem;
  font-size: 0.85rem;
  background: var(--light);
  color: var(--dark);
  border: none;
  border-radius: 6px;
  cursor: pointer;
  margin-left: auto;
}

.btn-logout:hover {
  background: var(--gray-light);
}

/* Admin Page */
.admin-page {
  background: var(--white);
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.admin-page h2 {
  color: var(--primary);
  margin-bottom: 1.5rem;
}

.admin-actions {
  margin-top: 1rem;
  margin-bottom: 0.75rem;
  display: flex;
  justify-content: flex-end;
}

.admin-actions .btn {
  height: 35px;
  min-height: 35px;
  padding: 0 1rem;
}

.add-user-form {
  background: var(--light);
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
}

.add-user-form .form-row {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.add-user-form input,
.add-user-form select {
  padding: 0.6rem 0.8rem;
  border: 1px solid var(--gray-light);
  border-radius: 6px;
  font-size: 0.95rem;
}

.add-user-form input {
  flex: 1;
  min-width: 120px;
}

/* Users Table */
.users-table {
  width: 100%;
  border-collapse: collapse;
}

.users-table th,
.users-table td {
  padding: 0.75rem 1rem;
  text-align: left;
  border-bottom: 1px solid var(--gray-light);
}

.users-table th {
  background: var(--light);
  font-weight: 600;
  color: var(--dark);
}

.users-table tbody tr:hover {
  background: var(--light);
}

.role-select {
  padding: 0.4rem 0.6rem;
  border: 1px solid var(--gray-light);
  border-radius: 4px;
  font-size: 0.9rem;
}

.role-select:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.action-buttons-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.expiration-input {
  padding: 0.3rem 0.5rem;
  border: 1px solid var(--gray-light);
  border-radius: 4px;
  font-size: 0.85rem;
}

.expiration-input:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.no-expiration {
  color: var(--gray);
}

.expired-badge {
  display: inline-block;
  margin-left: 0.5rem;
  padding: 0.2rem 0.4rem;
  background: #ffebee;
  color: #c62828;
  border-radius: 4px;
  font-size: 0.7rem;
  font-weight: 500;
}

.vip-expired {
  background: #fff8e1 !important;
}

.admin-add-user {
  padding: 1.5rem;
  background: var(--light);
  border-radius: 8px;
  margin-bottom: 1.5rem;
}

.admin-add-user h3 {
  margin-bottom: 1rem;
  color: var(--dark);
}

.role-badge {
  display: inline-block;
  padding: 0.3rem 0.6rem;
  border-radius: 4px;
  font-size: 0.85rem;
  font-weight: 500;
}

.role-super_admin {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.role-admin {
  background: var(--secondary);
  color: white;
}

.role-user {
  background: var(--gray-light);
  color: var(--dark);
}

.btn-danger {
  background: var(--danger);
  color: var(--white);
}

.btn-danger:hover {
  background: #c0392b;
}

.btn-small {
  padding: 0.3rem 0.6rem;
  font-size: 0.85rem;
}

/* ============ Game Tab Styles ============ */
.game-tab {
  padding: 1.5rem 2rem;
}

.game-tab-header {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--border);
}

.game-tab-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, var(--jp-shu) 0%, var(--jp-shu-light) 100%);
  border-radius: 12px;
  color: white;
  flex-shrink: 0;
}

.game-tab-title h3 {
  margin: 0 0 0.25rem;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--dark);
}

.game-tab-title p {
  margin: 0;
  font-size: 0.9rem;
  color: var(--gray);
}

.game-tab-section {
  margin-bottom: 2rem;
}

.game-tab-section-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--jp-matcha-dark);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 1rem;
}

.game-tab-section-title.disabled {
  color: var(--gray);
}

.game-tab-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1rem;
}

.game-tab-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.25rem;
  background: white;
  border: 1px solid var(--border);
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.25s ease;
  position: relative;
  overflow: hidden;
}

.game-tab-card::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: transparent;
  transition: background 0.25s ease;
}

.game-tab-card:hover:not(.disabled) {
  border-color: transparent;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  transform: translateY(-3px);
}

.game-tab-card:hover:not(.disabled)::before {
  background: var(--jp-shu);
}

.game-tab-card.disabled {
  opacity: 0.7;
  cursor: default;
  background: var(--jp-kinari);
}

.game-card-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  border-radius: 14px;
  flex-shrink: 0;
  font-size: 1.75rem;
  color: white;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.game-card-content {
  flex: 1;
  min-width: 0;
}

.game-card-content h4 {
  margin: 0 0 0.35rem;
  font-size: 1.05rem;
  font-weight: 600;
  color: var(--dark);
}

.game-card-content p {
  margin: 0;
  font-size: 0.85rem;
  color: var(--gray);
  line-height: 1.4;
}

.game-card-arrow {
  color: var(--gray-light);
  transition: all 0.25s ease;
  flex-shrink: 0;
}

.game-tab-card:hover:not(.disabled) .game-card-arrow {
  color: var(--jp-shu);
  transform: translateX(4px);
}

.game-card-badge {
  padding: 0.35rem 0.75rem;
  background: var(--jp-kinari);
  border: 1px solid var(--border);
  border-radius: 20px;
  font-size: 0.7rem;
  font-weight: 600;
  color: var(--gray);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

/* Admin Lessons */
.admin-lessons {
  margin-top: 1rem;
}

.admin-hint {
  color: var(--gray);
  font-size: 0.9rem;
  margin-bottom: 1rem;
}

.lesson-tree {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.lesson-level {
  border: 1px solid var(--gray-light);
  border-radius: 8px;
  overflow: hidden;
}

.lesson-level-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: var(--light);
  cursor: pointer;
}

.lesson-level-header:hover {
  background: #e8e8e8;
}

.expand-icon {
  font-size: 0.8rem;
  color: var(--gray);
}

.level-name {
  font-weight: 600;
  color: var(--primary);
}

.level-count {
  color: var(--gray);
  font-size: 0.9rem;
}

.lesson-categories {
  padding: 0.5rem;
}

.no-categories {
  color: var(--gray);
  font-style: italic;
  padding: 0.5rem 1rem;
}

.lesson-category {
  margin-bottom: 0.25rem;
}

.lesson-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  border-radius: 6px;
}

.lesson-row:hover {
  background: var(--light);
}

.lesson-row.sub {
  margin-left: 2rem;
}

.lesson-row.child {
  margin-left: 1.5rem;
}

.child-lessons {
  margin-left: 1rem;
  border-left: 2px solid var(--gray-light);
  padding-left: 0.5rem;
}

.lock-btn {
  background: none;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 4px;
  transition: all 0.2s;
}

.lock-btn:hover {
  background: var(--light);
  transform: scale(1.1);
}

.lock-btn.locked {
  color: var(--danger);
}

.lesson-name {
  flex: 1;
  color: var(--dark);
}

.locked-badge {
  background: var(--danger);
  color: var(--white);
  padding: 0.15rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
}

.lesson-subcategories {
  margin-left: 1rem;
  border-left: 2px solid var(--gray-light);
}

/* Confirm Modal - Japanese Fusuma Style */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(28, 28, 28, 0.6);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-content {
  background: var(--jp-washi-warm);
  border-radius: var(--radius-md);
  padding: 1.5rem;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 16px 48px rgba(28, 28, 28, 0.2);
  border: 1px solid var(--border);
}

.confirm-modal .modal-title {
  font-family: var(--font-jp-body);
  font-size: 1.25rem;
  color: var(--jp-shu);
  margin-bottom: 0.75rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid var(--border);
}

.confirm-modal .modal-message {
  color: var(--jp-sumi-medium);
  margin-bottom: 1.5rem;
  line-height: 1.6;
}

.modal-actions {
  display: flex;
  gap: 0.75rem;
  justify-content: flex-end;
}

.modal-actions .btn {
  min-width: 80px;
}

/* Success Modal */
.success-modal {
  text-align: center;
  padding: 2rem;
}

.success-modal .success-icon {
  width: 60px;
  height: 60px;
  background: var(--success);
  color: var(--white);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  margin: 0 auto 1rem;
}

.success-modal .modal-title {
  font-size: 1.25rem;
  color: var(--dark);
  margin-bottom: 0.5rem;
}

.success-modal .modal-message {
  color: var(--gray);
  margin-bottom: 1.5rem;
  line-height: 1.5;
}

/* Kaiwa (Conversation) Page */
.kaiwa-page {
  background: linear-gradient(135deg, var(--kaiwa-background) 0%, #E6FFFA 50%, #CCFBF1 100%);
  padding: 0.75rem;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100%;
}

.kaiwa-page > .kaiwa-container {
  background: var(--kaiwa-surface-glass);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border-radius: var(--radius-xl);
  padding: var(--space-lg);
  box-shadow: var(--glass-shadow), 0 1px 0 var(--glass-border) inset;
  border: 1px solid var(--kaiwa-border);
  width: 100%;
  display: flex;
  flex-direction: column;
  height: calc(100vh - 1.5rem);
  overflow: hidden;
  transition: box-shadow var(--transition-slow);
}

.kaiwa-page > .kaiwa-container:hover {
  box-shadow: var(--glass-shadow), 0 12px 40px rgba(13, 148, 136, 0.15);
}

.kaiwa-start-screen {
  text-align: center;
  padding: 2rem;
  max-width: 720px;
  margin: auto;
  animation: kaiwa-fade-in 0.5s ease-out;
}

@keyframes kaiwa-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.kaiwa-start-screen h2 {
  font-size: 2rem;
  margin-bottom: 0.75rem;
  color: var(--kaiwa-primary-dark);
  font-weight: 700;
  letter-spacing: -0.02em;
  background: linear-gradient(135deg, var(--kaiwa-primary-dark) 0%, var(--kaiwa-primary) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.kaiwa-description {
  color: var(--kaiwa-text);
  margin-bottom: 2rem;
  line-height: 1.7;
  font-size: 1.05rem;
  opacity: 0.85;
}

.kaiwa-setup {
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-radius: 16px;
  padding: 1.75rem;
  margin-bottom: 2rem;
  text-align: left;
  border: 1px solid var(--kaiwa-border);
  box-shadow: 0 4px 16px rgba(13, 148, 136, 0.08);
}

.kaiwa-setup-row {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
}

.kaiwa-setup-row .kaiwa-setup-item {
  flex: 1;
  margin-bottom: 0;
}

.kaiwa-setup-item {
  margin-bottom: 1rem;
}

.kaiwa-setup-item:last-child {
  margin-bottom: 0;
}

.kaiwa-setup-item label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: var(--kaiwa-text);
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.kaiwa-setup-item select {
  width: 100%;
  padding: 0.875rem 1rem;
  border: 2px solid var(--kaiwa-border);
  border-radius: 12px;
  font-size: 1rem;
  background: var(--white);
  color: var(--kaiwa-text);
  cursor: pointer;
  transition: all var(--transition-normal);
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%230D9488'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  background-size: 1.25rem;
}

.kaiwa-setup-item select:hover {
  border-color: var(--kaiwa-primary);
}

.kaiwa-setup-item select:focus {
  outline: none;
  border-color: var(--kaiwa-primary);
  box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.15);
}

/* Topic selection grid */
.kaiwa-topic-section {
  margin-top: 1.25rem;
}

.kaiwa-topic-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 0.625rem;
}

.kaiwa-topic-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1rem 0.5rem;
  border: 2px solid transparent;
  border-radius: 12px;
  background: var(--white);
  cursor: pointer;
  transition: all var(--transition-normal);
  box-shadow: 0 2px 8px rgba(13, 148, 136, 0.06);
  position: relative;
  overflow: hidden;
}

.kaiwa-topic-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--kaiwa-primary) 0%, var(--kaiwa-secondary) 100%);
  opacity: 0;
  transition: opacity var(--transition-normal);
}

.kaiwa-topic-btn:hover {
  border-color: var(--kaiwa-primary);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(13, 148, 136, 0.15);
}

.kaiwa-topic-btn:hover::before {
  opacity: 0.05;
}

.kaiwa-topic-btn.active {
  border-color: var(--kaiwa-primary);
  background: linear-gradient(135deg, rgba(13, 148, 136, 0.1) 0%, rgba(45, 212, 191, 0.1) 100%);
  box-shadow: 0 4px 16px rgba(13, 148, 136, 0.2);
}

.kaiwa-topic-btn.active::before {
  opacity: 0.1;
}

.kaiwa-topic-btn .topic-icon {
  font-size: 1.75rem;
  margin-bottom: 0.375rem;
  position: relative;
  z-index: 1;
  transition: transform var(--transition-normal);
}

.kaiwa-topic-btn:hover .topic-icon {
  transform: scale(1.1);
}

.kaiwa-topic-btn .topic-label {
  font-size: 0.7rem;
  font-weight: 500;
  color: var(--kaiwa-text);
  text-align: center;
  line-height: 1.3;
  position: relative;
  z-index: 1;
}

/* Options row */
.kaiwa-options-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid var(--gray-light);
}

.kaiwa-options-row label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  margin-bottom: 0;
}

.kaiwa-options-row input[type="checkbox"] {
  width: 18px;
  height: 18px;
}

.kaiwa-voice-info {
  font-size: 0.85rem;
  color: var(--gray);
}

.kaiwa-setup-hint {
  font-size: 0.85rem;
  color: var(--gray);
}

.kaiwa-warning {
  background: #fff3cd;
  color: #856404;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  font-size: 0.9rem;
}

.btn-large {
  padding: 1rem 2rem;
  font-size: 1.1rem;
}

/* Kaiwa Conversation Header */
.kaiwa-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  background: linear-gradient(135deg, rgba(13, 148, 136, 0.08) 0%, rgba(45, 212, 191, 0.05) 100%);
  border-radius: 12px;
  margin-bottom: 1rem;
  flex-wrap: wrap;
  gap: 0.75rem;
  border: 1px solid var(--kaiwa-border);
}

.kaiwa-header-left {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.kaiwa-header-center {
  display: flex;
  align-items: center;
}

.kaiwa-stats {
  display: flex;
  gap: 0.5rem;
}

.kaiwa-stat {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--kaiwa-text);
  padding: 0.375rem 0.625rem;
  background: var(--white);
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(13, 148, 136, 0.08);
  transition: all var(--transition-fast);
}

.kaiwa-stat:hover {
  box-shadow: 0 2px 6px rgba(13, 148, 136, 0.12);
}

.kaiwa-stat.saved {
  color: var(--kaiwa-accent);
  background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%);
  border: 1px solid rgba(234, 88, 12, 0.2);
}

.kaiwa-header-right {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  flex: 1;
  justify-content: flex-end;
}

.kaiwa-end-btn {
  margin-left: 0.5rem;
}

.kaiwa-header h2 {
  margin: 0;
  font-size: 1.125rem;
  font-weight: 700;
  color: var(--kaiwa-primary-dark);
}

.kaiwa-info {
  display: flex;
  gap: 0.375rem;
  flex-wrap: wrap;
}

.kaiwa-badge {
  background: var(--white);
  padding: 0.25rem 0.625rem;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--kaiwa-text);
  box-shadow: 0 1px 2px rgba(13, 148, 136, 0.08);
  transition: all var(--transition-fast);
}

.kaiwa-badge:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(13, 148, 136, 0.12);
}

.kaiwa-badge.topic {
  background: linear-gradient(135deg, rgba(13, 148, 136, 0.15) 0%, rgba(45, 212, 191, 0.1) 100%);
  color: var(--kaiwa-primary-dark);
}

.kaiwa-badge.role {
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(167, 139, 250, 0.1) 100%);
  color: #7C3AED;
}

/* Header control buttons */
.kaiwa-slow-btn,
.kaiwa-furigana-btn,
.kaiwa-restart-btn,
.kaiwa-send-mode-btn {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.4rem 0.625rem;
  border: 1px solid var(--kaiwa-border);
  border-radius: 8px;
  background: var(--white);
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
  color: var(--kaiwa-text);
}

.kaiwa-slow-btn:hover,
.kaiwa-furigana-btn:hover,
.kaiwa-restart-btn:hover,
.kaiwa-send-mode-btn:hover {
  border-color: var(--kaiwa-primary);
  background: rgba(13, 148, 136, 0.05);
}

.kaiwa-slow-btn.active {
  background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
  border-color: #F59E0B;
  color: #92400E;
}

.kaiwa-furigana-btn.active {
  background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
  border-color: #3B82F6;
  color: #1D4ED8;
}

.kaiwa-send-mode-btn.active {
  background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 100%);
  border-color: var(--kaiwa-primary);
  color: var(--kaiwa-primary-dark);
}

/* Font size control */
.kaiwa-fontsize-control {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  background: var(--white);
  border: 1px solid var(--gray-light);
  border-radius: 20px;
  padding: 0.2rem 0.4rem;
}

.kaiwa-fontsize-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  border-radius: 50%;
  cursor: pointer;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--gray-dark);
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.kaiwa-fontsize-btn:hover {
  background: var(--light);
  color: var(--primary);
}

.kaiwa-fontsize-value {
  font-size: 0.75rem;
  color: var(--gray-dark);
  min-width: 20px;
  text-align: center;
}

/* Ruby (furigana) styling */
.kaiwa-message-text ruby {
  ruby-align: center;
}

.kaiwa-message-text rt {
  font-size: 0.6em;
  color: var(--gray);
}

.kaiwa-template-pattern ruby {
  ruby-align: center;
}

.kaiwa-template-pattern rt {
  font-size: 0.55em;
  color: #795548;
}

.kaiwa-hint-chip ruby {
  ruby-align: center;
}

.kaiwa-hint-chip rt {
  font-size: 0.5em;
  color: var(--gray);
}

/* Kaiwa Messages */
.kaiwa-messages {
  flex: 1;
  overflow-y: auto;
  padding: 1rem 0;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  min-height: 0;
  max-height: 100%;
}

/* Bottom section: template + suggestions + input */
.kaiwa-bottom-section {
  flex-shrink: 0;
  margin-top: auto;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

/* Suggestion Tabs */
.kaiwa-suggestion-tabs {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* Quick reply toggle */
.kaiwa-quick-reply-toggle {
  display: flex;
  justify-content: center;
}

.kaiwa-toggle-btn {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.4rem 1rem;
  background: var(--light);
  border: 1px solid var(--border);
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 0.8rem;
  color: var(--gray);
}

.kaiwa-toggle-btn:hover {
  background: var(--white);
  border-color: var(--primary-light);
  color: var(--dark);
}

.kaiwa-toggle-btn.active {
  background: var(--primary-light);
  border-color: var(--primary);
  color: var(--primary-dark);
}

.kaiwa-toggle-btn .toggle-icon {
  font-size: 0.7rem;
}

.dark-mode .kaiwa-toggle-btn {
  background: var(--dark-card);
  border-color: var(--dark-border);
  color: var(--text-muted);
}

.dark-mode .kaiwa-toggle-btn:hover {
  background: rgba(63, 81, 181, 0.2);
  color: var(--text-light);
}

.dark-mode .kaiwa-toggle-btn.active {
  background: rgba(63, 81, 181, 0.3);
  border-color: var(--primary);
  color: var(--primary-light);
}

.kaiwa-tabs-row {
  display: flex;
  gap: 0.5rem;
}

.kaiwa-tab-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
  padding: 0.6rem 0.75rem;
  background: var(--light);
  border: 2px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--dark);
}

.kaiwa-tab-btn:hover {
  background: var(--white);
  border-color: var(--primary-light);
}

.kaiwa-tab-btn.active {
  background: linear-gradient(135deg, var(--primary) 0%, #5c6bc0 100%);
  border-color: var(--primary);
  color: white;
}

.kaiwa-tab-btn .tab-icon {
  font-size: 1rem;
}

.kaiwa-tab-btn .tab-label {
  white-space: nowrap;
}

.kaiwa-tab-content {
  background: var(--white);
  border: 2px solid var(--primary-light);
  border-radius: var(--radius-lg);
  overflow: hidden;
  animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.kaiwa-tab-content .kaiwa-template-box {
  border: none;
  box-shadow: none;
  border-radius: 0;
}

.kaiwa-tab-content .kaiwa-suggestions-list {
  padding: 0.75rem;
}

.kaiwa-tab-content .kaiwa-questions-list {
  padding: 0.75rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* Dark mode for tabs */
.dark-mode .kaiwa-tab-btn {
  background: var(--dark-card);
  border-color: var(--dark-border);
  color: var(--text-light);
}

.dark-mode .kaiwa-tab-btn:hover {
  background: rgba(63, 81, 181, 0.2);
  border-color: var(--primary);
}

.dark-mode .kaiwa-tab-btn.active {
  background: linear-gradient(135deg, var(--primary) 0%, #5c6bc0 100%);
  color: white;
}

.dark-mode .kaiwa-tab-content {
  background: var(--dark-card);
  border-color: var(--primary);
}

.kaiwa-message {
  display: flex;
  gap: 0.75rem;
  max-width: 85%;
  animation: message-slide-in 0.3s ease-out;
}

@keyframes message-slide-in {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.kaiwa-message.assistant {
  align-self: flex-start;
}

.kaiwa-message.user {
  align-self: flex-end;
  flex-direction: row-reverse;
}

.kaiwa-message-avatar {
  width: 42px;
  height: 42px;
  border-radius: 12px;
  background: linear-gradient(135deg, var(--kaiwa-background) 0%, #E6FFFA 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  flex-shrink: 0;
  box-shadow: 0 2px 8px rgba(13, 148, 136, 0.1);
  border: 2px solid var(--kaiwa-border);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.kaiwa-message:hover .kaiwa-message-avatar {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(13, 148, 136, 0.15);
}

.kaiwa-message.user .kaiwa-message-avatar {
  background: linear-gradient(135deg, var(--kaiwa-primary) 0%, var(--kaiwa-primary-light) 100%);
  border-color: var(--kaiwa-primary);
}

.kaiwa-message-content {
  position: relative;
}

.kaiwa-message-text {
  background: var(--white);
  padding: 1rem 1.25rem;
  border-radius: 18px;
  border-bottom-left-radius: 4px;
  margin: 0;
  font-size: 1rem;
  line-height: 1.65;
  color: var(--kaiwa-text);
  box-shadow: 0 2px 12px rgba(13, 148, 136, 0.08);
  border: 1px solid var(--kaiwa-border);
  transition: box-shadow var(--transition-normal);
}

.kaiwa-message-text:hover {
  box-shadow: 0 4px 16px rgba(13, 148, 136, 0.12);
}

.kaiwa-message.user .kaiwa-message-text {
  background: linear-gradient(135deg, var(--kaiwa-primary) 0%, var(--kaiwa-primary-light) 100%);
  color: white;
  border-bottom-left-radius: 18px;
  border-bottom-right-radius: 4px;
  border-color: transparent;
  box-shadow: 0 2px 12px rgba(13, 148, 136, 0.2);
}

.kaiwa-message.user .kaiwa-message-text:hover {
  box-shadow: 0 4px 20px rgba(13, 148, 136, 0.3);
}

.kaiwa-message-translation {
  font-size: 0.8rem;
  color: var(--kaiwa-text);
  opacity: 0.7;
  margin: 0.375rem 0 0 0;
  padding-left: 0.75rem;
  font-style: italic;
  border-left: 2px solid var(--kaiwa-border);
}

/* Message action buttons */
.kaiwa-message-actions {
  display: flex;
  gap: 0.375rem;
  margin-top: 0.625rem;
  opacity: 0.7;
  transition: opacity var(--transition-fast);
}

.kaiwa-message:hover .kaiwa-message-actions {
  opacity: 1;
}

.kaiwa-action-btn {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  border: 1px solid var(--kaiwa-border);
  background: var(--white);
  cursor: pointer;
  font-size: 0.85rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
  color: var(--kaiwa-text);
}

.kaiwa-action-btn:hover {
  background: linear-gradient(135deg, rgba(13, 148, 136, 0.1) 0%, rgba(45, 212, 191, 0.05) 100%);
  border-color: var(--kaiwa-primary);
  color: var(--kaiwa-primary);
  transform: translateY(-1px);
}

.kaiwa-action-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
}

.kaiwa-action-btn.active {
  background: linear-gradient(135deg, var(--kaiwa-primary) 0%, var(--kaiwa-primary-light) 100%);
  border-color: var(--kaiwa-primary);
  color: white;
}

/* Message translation */
.kaiwa-message-translation {
  font-size: 0.9rem;
  color: var(--gray);
  font-style: italic;
  margin-top: 0.5rem;
  padding-top: 0.5rem;
  border-top: 1px dashed var(--gray-light);
}

/* Quick phrases */
.kaiwa-quick-phrases {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.kaiwa-quick-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.5rem 0.75rem;
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
  min-width: 70px;
}

.kaiwa-quick-btn:hover {
  background: var(--primary-light);
  border-color: var(--primary);
}

.kaiwa-quick-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.kaiwa-quick-btn .quick-jp {
  font-size: 0.95rem;
  font-weight: 500;
  color: var(--text);
}

.kaiwa-quick-btn .quick-vi {
  font-size: 0.7rem;
  color: var(--gray);
  margin-top: 0.1rem;
}

.kaiwa-quick-toggle {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1px solid var(--border);
  background: var(--white);
  cursor: pointer;
  font-size: 1.1rem;
  transition: all 0.2s;
  flex-shrink: 0;
}

.kaiwa-quick-toggle:hover {
  background: var(--light);
}

.kaiwa-quick-toggle.active {
  background: #fef3c7;
  border-color: #f59e0b;
}

/* Legacy speak button (for backward compat) */
.kaiwa-speak-btn {
  position: absolute;
  bottom: -8px;
  right: -8px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: none;
  background: white;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  cursor: pointer;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.kaiwa-speak-btn:hover {
  background: var(--light);
}

/* Typing Indicator */
.kaiwa-typing {
  display: flex;
  gap: 4px;
  padding: 0.75rem 1rem;
  background: var(--light);
  border-radius: 16px;
}

.kaiwa-typing span {
  width: 8px;
  height: 8px;
  background: var(--gray);
  border-radius: 50%;
  animation: typing 1.4s infinite ease-in-out both;
}

.kaiwa-typing span:nth-child(1) { animation-delay: -0.32s; }
.kaiwa-typing span:nth-child(2) { animation-delay: -0.16s; }

@keyframes typing {
  0%, 80%, 100% { transform: scale(0.6); opacity: 0.5; }
  40% { transform: scale(1); opacity: 1; }
}

/* Answer Template Box */
.kaiwa-template-box {
  background: linear-gradient(135deg, #fff8e1 0%, #fffde7 100%);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  border: 2px solid #ffd54f;
}

.kaiwa-template-box.no-header .kaiwa-template-pattern {
  border-bottom: none;
  border-radius: var(--radius-md) var(--radius-md) 0 0;
}

.kaiwa-template-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: linear-gradient(135deg, #ffe082 0%, #ffd54f 100%);
  border-bottom: 1px solid #ffc107;
}

.kaiwa-template-icon {
  font-size: 1.2rem;
}

.kaiwa-template-title {
  font-weight: 600;
  font-size: 0.95rem;
  color: #5d4037;
}

.kaiwa-template-pattern {
  padding: 1rem;
  font-size: 1.3rem;
  font-weight: 500;
  color: #3e2723;
  text-align: center;
  background: rgba(255, 255, 255, 0.5);
  border-bottom: 1px solid #ffe082;
}

.kaiwa-template-hints {
  padding: 0.75rem 1rem;
}

.kaiwa-hints-label {
  font-size: 0.85rem;
  color: #795548;
  margin-bottom: 0.5rem;
  font-weight: 500;
}

.kaiwa-hints-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.kaiwa-hint-chip {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.5rem 0.75rem;
  background: var(--white);
  border: 2px solid #ffe082;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
  min-width: 80px;
}

.kaiwa-hint-chip:hover {
  background: #fff8e1;
  border-color: #ffc107;
  transform: translateY(-2px);
  box-shadow: 0 2px 8px rgba(255, 193, 7, 0.3);
}

.kaiwa-hint-chip:active {
  transform: translateY(0);
}

.kaiwa-hint-chip .hint-word {
  font-size: 1.1rem;
  font-weight: 600;
  color: #3e2723;
}

.kaiwa-hint-chip .hint-meaning {
  font-size: 0.75rem;
  color: #795548;
  margin-top: 0.15rem;
}

/* Suggested Questions Box */
.kaiwa-questions-box {
  background: linear-gradient(135deg, #e8f5e9 0%, #f1f8e9 100%);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  border: 2px solid #81c784;
}

.kaiwa-questions-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1rem;
  background: linear-gradient(135deg, #a5d6a7 0%, #81c784 100%);
  border-bottom: 1px solid #66bb6a;
}

.kaiwa-questions-icon {
  font-size: 1.1rem;
}

.kaiwa-questions-title {
  font-weight: 600;
  color: #1b5e20;
  font-size: 0.9rem;
}

.kaiwa-questions-list {
  padding: 0.75rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.kaiwa-question-btn {
  padding: 0.5rem 0.75rem;
  background: white;
  border: 1px solid #c8e6c9;
  border-radius: var(--radius-md);
  font-size: 0.95rem;
  cursor: pointer;
  transition: all var(--transition-fast);
  color: #2e7d32;
  text-align: left;
}

.kaiwa-question-btn:hover:not(:disabled) {
  background: #e8f5e9;
  border-color: #66bb6a;
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(102, 187, 106, 0.3);
}

.kaiwa-question-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.kaiwa-question-btn rt {
  font-size: 0.6em;
  color: #43a047;
}

/* Dark mode */
.dark-mode .kaiwa-template-box {
  background: linear-gradient(135deg, #3e2723 0%, #4e342e 100%);
  border-color: #8d6e63;
}

.dark-mode .kaiwa-template-header {
  background: linear-gradient(135deg, #5d4037 0%, #6d4c41 100%);
  border-color: #8d6e63;
}

.dark-mode .kaiwa-template-title {
  color: #ffe082;
}

.dark-mode .kaiwa-template-pattern {
  background: rgba(0, 0, 0, 0.2);
  color: #fff8e1;
  border-color: #5d4037;
}

.dark-mode .kaiwa-hints-label {
  color: #bcaaa4;
}

.dark-mode .kaiwa-hint-chip {
  background: #4e342e;
  border-color: #6d4c41;
}

.dark-mode .kaiwa-hint-chip:hover {
  background: #5d4037;
  border-color: #8d6e63;
}

.dark-mode .kaiwa-hint-chip .hint-word {
  color: #ffe082;
}

.dark-mode .kaiwa-hint-chip .hint-meaning {
  color: #bcaaa4;
}

/* Dark mode for new kaiwa elements */
.dark-mode .kaiwa-stat {
  background: var(--dark);
  color: var(--gray-light);
}

.dark-mode .kaiwa-stat.saved {
  background: #422006;
  color: #fbbf24;
}

.dark-mode .kaiwa-message-translation {
  color: var(--gray-light);
  border-color: var(--border);
}

.dark-mode .kaiwa-quick-btn {
  background: var(--dark);
  border-color: var(--border);
}

.dark-mode .kaiwa-quick-btn:hover {
  background: var(--primary-dark);
}

.dark-mode .kaiwa-quick-btn .quick-jp {
  color: var(--light);
}

.dark-mode .kaiwa-quick-toggle {
  background: var(--dark);
  border-color: var(--border);
}

.dark-mode .kaiwa-quick-toggle.active {
  background: #422006;
  border-color: #f59e0b;
}

/* Dark mode for font size control */
.dark-mode .kaiwa-fontsize-control {
  background: var(--dark);
  border-color: var(--border);
}

.dark-mode .kaiwa-fontsize-btn {
  color: var(--gray-light);
}

.dark-mode .kaiwa-fontsize-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--primary-light);
}

.dark-mode .kaiwa-fontsize-value {
  color: var(--gray-light);
}

/* Saved sentences panel */
.kaiwa-saved-panel {
  position: fixed;
  top: 60px;
  right: 0;
  bottom: 0;
  width: 350px;
  max-width: 90vw;
  background: var(--white);
  box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
  z-index: 200;
  display: flex;
  flex-direction: column;
  animation: slideInRight 0.2s ease;
}

@keyframes slideInRight {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

.kaiwa-saved-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(135deg, #fef3c7 0%, #fef9c3 100%);
}

.kaiwa-saved-header h3 {
  font-size: 1rem;
  color: var(--dark);
  margin: 0;
}

.kaiwa-saved-close {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  font-size: 1.2rem;
  cursor: pointer;
  border-radius: 50%;
  transition: background 0.2s;
}

.kaiwa-saved-close:hover {
  background: rgba(0, 0, 0, 0.1);
}

.kaiwa-saved-list {
  flex: 1;
  overflow-y: auto;
  padding: 0.5rem;
}

.kaiwa-saved-item {
  background: var(--light);
  border-radius: var(--radius-md);
  padding: 0.75rem;
  margin-bottom: 0.5rem;
  border: 1px solid var(--border);
}

.kaiwa-saved-text {
  margin: 0 0 0.5rem 0;
  line-height: 1.6;
}

.kaiwa-saved-text ruby {
  ruby-align: center;
}

.kaiwa-saved-text rt {
  font-size: 0.6em;
  color: var(--gray);
}

.kaiwa-saved-actions {
  display: flex;
  gap: 0.5rem;
}

.kaiwa-saved-btn {
  padding: 0.35rem 0.5rem;
  border: 1px solid var(--border);
  background: var(--white);
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
}

.kaiwa-saved-btn:hover {
  background: var(--light);
  border-color: var(--primary);
}

.kaiwa-saved-btn.delete:hover {
  background: #fee2e2;
  border-color: #ef4444;
}

/* Make saved stat clickable */
button.kaiwa-stat.saved {
  cursor: pointer;
  border: none;
  transition: all 0.2s;
}

button.kaiwa-stat.saved:hover {
  background: #fef3c7;
  transform: scale(1.05);
}

button.kaiwa-stat.saved.active {
  background: #fbbf24;
  color: white;
}

/* Dark mode saved panel */
.dark-mode .kaiwa-saved-panel {
  background: var(--dark);
}

.dark-mode .kaiwa-saved-header {
  background: linear-gradient(135deg, #422006 0%, #78350f 100%);
  border-color: var(--border);
}

.dark-mode .kaiwa-saved-header h3 {
  color: #fbbf24;
}

.dark-mode .kaiwa-saved-item {
  background: rgba(255, 255, 255, 0.05);
  border-color: var(--border);
}

.dark-mode .kaiwa-saved-text {
  color: var(--light);
}

.dark-mode .kaiwa-saved-btn {
  background: var(--dark);
  border-color: var(--border);
  color: var(--light);
}

.dark-mode .kaiwa-saved-btn:hover {
  background: rgba(255, 255, 255, 0.1);
}

.dark-mode button.kaiwa-stat.saved:hover {
  background: #78350f;
}

.dark-mode button.kaiwa-stat.saved.active {
  background: #f59e0b;
}

/* Dark mode for Questions Box */
.dark-mode .kaiwa-questions-box {
  background: linear-gradient(135deg, #1b3a2a 0%, #254336 100%);
  border-color: #4caf50;
}

.dark-mode .kaiwa-questions-header {
  background: linear-gradient(135deg, #2e5e3c 0%, #3e7c52 100%);
  border-color: #4caf50;
}

.dark-mode .kaiwa-questions-title {
  color: #a5d6a7;
}

.dark-mode .kaiwa-question-btn {
  background: rgba(0, 0, 0, 0.3);
  border-color: #4caf50;
  color: #a5d6a7;
}

.dark-mode .kaiwa-question-btn:hover:not(:disabled) {
  background: rgba(76, 175, 80, 0.2);
  border-color: #81c784;
}

.dark-mode .kaiwa-question-btn rt {
  color: #81c784;
}

/* Suggestions Box */
.kaiwa-suggestions-box {
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  border: 2px solid var(--primary-light);
}

.kaiwa-suggestions-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1rem;
  background: linear-gradient(135deg, var(--primary-light) 0%, #e8eaf6 100%);
  border-bottom: 1px solid var(--primary-light);
}

.kaiwa-suggestions-title {
  font-weight: 600;
  font-size: 0.95rem;
  color: var(--primary-dark);
}

.kaiwa-suggestions-hint {
  font-size: 0.75rem;
  color: var(--gray);
}

.kaiwa-suggestions-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding: 1rem;
}

.kaiwa-suggestion-chip {
  background: var(--light);
  border: 1px solid var(--border);
  padding: 0.75rem 1rem;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: 0.95rem;
  transition: all 0.2s;
  text-align: left;
  flex: 1;
}

.kaiwa-suggestion-chip:hover {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

.kaiwa-suggestion-btn {
  background: var(--light);
  border: 2px solid var(--border);
  padding: 0.75rem 1rem;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: 0.95rem;
  transition: all 0.2s;
  text-align: left;
  width: 100%;
  line-height: 1.5;
}

.kaiwa-suggestion-btn:hover:not(:disabled) {
  background: linear-gradient(135deg, #e3f2fd 0%, #e8eaf6 100%);
  border-color: var(--primary);
}

.kaiwa-suggestion-btn.selected {
  background: linear-gradient(135deg, #bbdefb 0%, #c5cae9 100%);
  border-color: var(--primary);
  box-shadow: 0 2px 8px rgba(63, 81, 181, 0.3);
}

.kaiwa-suggestion-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.kaiwa-suggestion-btn rt {
  font-size: 0.6em;
  color: var(--gray);
}

.kaiwa-suggestions-icon {
  font-size: 1.1rem;
}

/* Old class kept for compatibility */
.kaiwa-suggestions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding: 0.75rem;
  background: var(--light);
  border-radius: 12px;
  margin-bottom: 1rem;
  align-items: center;
}

.kaiwa-suggestions-label {
  font-size: 0.85rem;
  color: var(--gray);
  margin-right: 0.5rem;
}

/* Dark mode for suggestions */
.dark-mode .kaiwa-suggestions-box {
  background: var(--dark-card);
  border-color: var(--primary);
}

.dark-mode .kaiwa-suggestions-header {
  background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
  border-color: var(--primary);
}

.dark-mode .kaiwa-suggestions-title {
  color: #90caf9;
}

.dark-mode .kaiwa-suggestion-btn {
  background: rgba(0, 0, 0, 0.3);
  border-color: var(--primary);
  color: var(--text-light);
}

.dark-mode .kaiwa-suggestion-btn:hover:not(:disabled) {
  background: rgba(63, 81, 181, 0.2);
  border-color: #7986cb;
}

.dark-mode .kaiwa-suggestion-btn.selected {
  background: rgba(63, 81, 181, 0.3);
  border-color: #7986cb;
}

.dark-mode .kaiwa-suggestion-btn rt {
  color: #7986cb;
}

/* Error Display */
.kaiwa-error {
  background: #f8d7da;
  color: #721c24;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.kaiwa-error button {
  background: none;
  border: none;
  color: #721c24;
  cursor: pointer;
  font-size: 1rem;
}

/* Input Controls - Professional Design */
.kaiwa-controls {
  display: flex;
  gap: 0.75rem;
  padding: 1rem;
  background: linear-gradient(135deg, var(--glass-bg) 0%, rgba(255,255,255,0.9) 100%);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-radius: 16px;
  align-items: center;
  border: 1px solid var(--kaiwa-border);
  box-shadow: 0 -4px 20px rgba(13, 148, 136, 0.08);
}

.kaiwa-mic-btn {
  width: 50px;
  height: 50px;
  border-radius: 14px;
  border: 2px solid var(--kaiwa-border);
  background: var(--white);
  font-size: 1.25rem;
  cursor: pointer;
  transition: all var(--transition-normal);
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--kaiwa-primary);
}

.kaiwa-mic-btn:hover {
  border-color: var(--kaiwa-primary);
  background: rgba(13, 148, 136, 0.05);
  transform: scale(1.05);
}

.kaiwa-mic-btn.listening {
  background: linear-gradient(135deg, #EF4444 0%, #F87171 100%);
  border-color: #EF4444;
  color: white;
  animation: mic-pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes mic-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.5); }
  50% { box-shadow: 0 0 0 12px rgba(239, 68, 68, 0); }
}

.kaiwa-input-wrapper {
  flex: 1;
  position: relative;
}

.kaiwa-interim {
  position: absolute;
  top: -36px;
  left: 0;
  right: 0;
  background: var(--white);
  padding: 0.5rem 0.875rem;
  border-radius: 10px;
  font-size: 0.875rem;
  color: var(--kaiwa-text);
  box-shadow: 0 4px 12px rgba(13, 148, 136, 0.12);
  border: 1px solid var(--kaiwa-border);
  animation: interim-slide-down 0.2s ease-out;
}

@keyframes interim-slide-down {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.kaiwa-input-wrapper input {
  width: 100%;
  padding: 0.875rem 1.25rem;
  border: 2px solid var(--kaiwa-border);
  border-radius: 14px;
  font-size: 1rem;
  outline: none;
  background: var(--white);
  color: var(--kaiwa-text);
  transition: all var(--transition-fast);
}

.kaiwa-input-wrapper input:hover {
  border-color: var(--kaiwa-primary-light);
}

.kaiwa-input-wrapper input:focus {
  border-color: var(--kaiwa-primary);
  box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.15);
}

.kaiwa-input-wrapper input::placeholder {
  color: var(--kaiwa-text);
  opacity: 0.5;
}

.kaiwa-send-btn {
  padding: 0.875rem 1.5rem;
  border-radius: 14px;
  flex-shrink: 0;
  background: linear-gradient(135deg, var(--kaiwa-primary) 0%, var(--kaiwa-primary-light) 100%);
  color: white;
  border: none;
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}

.kaiwa-send-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(13, 148, 136, 0.3);
}

.kaiwa-send-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* Voice Status */
.kaiwa-status {
  display: flex;
  justify-content: center;
  gap: 1rem;
  padding: 0.625rem;
  font-size: 0.85rem;
  font-weight: 500;
}

.status-listening {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  color: #EF4444;
  animation: status-blink 1s ease-in-out infinite;
}

.status-speaking {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  color: var(--kaiwa-primary);
}

@keyframes status-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Pronunciation Practice Modal - Professional Design */
.kaiwa-practice-overlay {
  position: fixed;
  inset: 0;
  background: rgba(13, 148, 136, 0.2);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 1rem;
  animation: overlay-fade-in 0.2s ease-out;
}

@keyframes overlay-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.kaiwa-practice-modal {
  background: var(--white);
  border-radius: 20px;
  padding: 2rem;
  max-width: 450px;
  width: 100%;
  position: relative;
  text-align: center;
  box-shadow: 0 25px 50px -12px rgba(13, 148, 136, 0.25);
  border: 1px solid var(--kaiwa-border);
  animation: modal-scale-in 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes modal-scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.kaiwa-practice-modal h3 {
  margin-bottom: 1.25rem;
  color: var(--kaiwa-primary-dark);
  font-size: 1.25rem;
  font-weight: 700;
}

.kaiwa-practice-karaoke-wrapper {
  margin-bottom: 1.5rem;
}

.kaiwa-practice-hint {
  color: var(--kaiwa-text);
  font-size: 0.9rem;
  margin-bottom: 1.25rem;
  opacity: 0.8;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.375rem;
}

.kaiwa-practice-actions {
  display: flex;
  gap: 0.875rem;
  justify-content: center;
  flex-wrap: wrap;
}

.kaiwa-practice-mic {
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  border: none;
  border-radius: var(--radius-lg);
  background: var(--primary);
  color: var(--white);
  cursor: pointer;
  transition: var(--transition-normal);
}

.kaiwa-practice-mic:hover {
  background: var(--primary-dark);
}

.kaiwa-practice-mic.listening {
  background: var(--danger);
  animation: pulse 1s infinite;
}

.kaiwa-practice-listen {
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  border: 2px solid var(--primary);
  border-radius: var(--radius-lg);
  background: transparent;
  color: var(--primary);
  cursor: pointer;
  transition: var(--transition-normal);
}

.kaiwa-practice-listen:hover:not(:disabled) {
  background: var(--primary);
  color: var(--white);
}

.kaiwa-practice-listen:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.kaiwa-practice-close {
  position: absolute;
  top: 0.75rem;
  right: 0.75rem;
  background: none;
  border: none;
  font-size: 1.25rem;
  cursor: pointer;
  color: var(--gray);
  padding: 0.25rem;
}

.kaiwa-practice-close:hover {
  color: var(--dark);
}

/* Pronunciation Result */
.kaiwa-practice-result {
  margin-top: 1rem;
}

.kaiwa-accuracy {
  font-size: 3rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
}

.kaiwa-accuracy.good {
  color: var(--success);
}

.kaiwa-accuracy.ok {
  color: var(--warning);
}

.kaiwa-accuracy.poor {
  color: var(--danger);
}

.kaiwa-feedback {
  font-size: 1.1rem;
  margin-bottom: 1rem;
  color: var(--dark);
}

.kaiwa-spoken {
  font-size: 0.9rem;
  color: var(--gray);
  margin-bottom: 1rem;
  padding: 0.5rem;
  background: var(--light);
  border-radius: var(--radius-sm);
}

.kaiwa-differences {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  justify-content: center;
  margin-bottom: 1.5rem;
  font-size: 0.85rem;
}

.kaiwa-differences > span:first-child {
  width: 100%;
  color: var(--gray);
}

.kaiwa-diff-item {
  background: var(--danger-light);
  color: var(--danger);
  padding: 0.25rem 0.5rem;
  border-radius: var(--radius-sm);
}

/* Analysis Modal */
.kaiwa-analysis-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 1rem;
}

.kaiwa-analysis-modal {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: 2rem;
  max-width: 600px;
  width: 100%;
  max-height: 80vh;
  overflow-y: auto;
  position: relative;
  box-shadow: var(--shadow-xl);
}

.kaiwa-analysis-modal h3 {
  margin-bottom: 1rem;
  color: var(--primary);
  font-size: 1.25rem;
}

.kaiwa-analysis-original {
  font-size: 1.25rem;
  color: var(--dark);
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: var(--light);
  border-radius: var(--radius-md);
  text-align: center;
}

.kaiwa-analysis-loading {
  text-align: center;
  color: var(--gray);
  padding: 2rem;
}

.kaiwa-analysis-loading p {
  margin-top: 1rem;
}

.kaiwa-analysis-result {
  text-align: left;
}

.kaiwa-analysis-result pre {
  white-space: pre-wrap;
  word-wrap: break-word;
  font-family: inherit;
  font-size: 0.95rem;
  line-height: 1.6;
  color: var(--dark);
  background: var(--light);
  padding: 1rem;
  border-radius: var(--radius-md);
  margin: 0;
}

.kaiwa-analysis-close {
  position: absolute;
  top: 0.75rem;
  right: 0.75rem;
  background: none;
  border: none;
  font-size: 1.25rem;
  cursor: pointer;
  color: var(--gray);
  padding: 0.25rem;
}

.kaiwa-analysis-close:hover {
  color: var(--dark);
}

/* Suggestion Items with Send Button */
.kaiwa-suggestion-item {
  display: inline-flex;
  align-items: stretch;
  background: var(--primary-light);
  border-radius: 20px;
  overflow: hidden;
}

.kaiwa-suggestion-item .kaiwa-suggestion-chip {
  border-radius: 20px 0 0 20px;
}

.kaiwa-suggestion-send {
  padding: 0.5rem 0.75rem;
  background: var(--primary);
  color: var(--white);
  border: none;
  cursor: pointer;
  font-size: 0.9rem;
  transition: var(--transition-fast);
}

.kaiwa-suggestion-send:hover {
  background: var(--primary-dark);
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

/* Kaiwa Responsive - Tablet */
@media (max-width: 768px) {
  .kaiwa-topic-grid {
    grid-template-columns: repeat(5, 1fr);
    gap: 0.4rem;
  }

  .kaiwa-topic-btn {
    padding: 0.5rem 0.25rem;
  }

  .kaiwa-topic-btn .topic-icon {
    font-size: 1.25rem;
  }

  .kaiwa-topic-btn .topic-label {
    font-size: 0.6rem;
  }

  .kaiwa-header-left h2 {
    font-size: 1rem;
  }

  .kaiwa-badge {
    font-size: 0.75rem;
    padding: 0.2rem 0.5rem;
  }
}

/* Kaiwa Responsive - Mobile */
@media (max-width: 480px) {
  .kaiwa-setup-row {
    flex-direction: column;
  }

  .kaiwa-topic-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .kaiwa-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .kaiwa-header-right {
    width: 100%;
    justify-content: space-between;
  }

  .kaiwa-options-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
}

/* Kaiwa Start Screen - Mobile scrollable fix */
@media (max-width: 768px) {
  .kaiwa-page-start > .kaiwa-container {
    height: auto;
    min-height: calc(100vh - 1rem);
    overflow-y: auto;
  }

  .kaiwa-start-screen {
    padding: 1.5rem 1rem;
    padding-bottom: 2rem;
  }

  .kaiwa-start-screen h2 {
    font-size: 1.4rem;
  }

  .kaiwa-description {
    font-size: 0.9rem;
    margin-bottom: 1.5rem;
  }

  .kaiwa-setup {
    padding: 1rem;
  }

  .kaiwa-start-screen .btn-large {
    margin-top: 1.5rem;
    margin-bottom: 1rem;
  }
}

/* Kaiwa Role Selector */
.kaiwa-role-section {
  margin-top: 1rem;
}

.kaiwa-role-section label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.kaiwa-role-grid {
  display: flex;
  gap: 1rem;
  margin-top: 0.75rem;
  flex-wrap: wrap;
}

.kaiwa-role-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
  padding: 1rem 1.5rem;
  border: 2px solid var(--gray-light);
  border-radius: var(--radius-lg);
  background: var(--white);
  cursor: pointer;
  transition: var(--transition-fast);
  min-width: 120px;
}

.kaiwa-role-btn:hover {
  border-color: var(--primary);
  background: var(--primary-light);
}

.kaiwa-role-btn.active {
  border-color: var(--primary);
  background: var(--primary);
  color: var(--white);
}

.kaiwa-role-btn .role-emoji {
  font-size: 2rem;
}

.kaiwa-role-btn .role-name {
  font-size: 1rem;
  font-weight: 600;
}

.kaiwa-role-btn .role-name-vi {
  font-size: 0.8rem;
  opacity: 0.8;
}

.kaiwa-role-btn.active .role-name-vi {
  opacity: 0.9;
}

/* Kaiwa Badge for Role */
.kaiwa-badge.role {
  background: var(--success);
  color: var(--white);
}

/* Kaiwa Send Mode Button */
.kaiwa-send-mode-btn {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.4rem 0.75rem;
  border: 1px solid var(--gray-light);
  border-radius: var(--radius-md);
  background: var(--white);
  cursor: default;
  font-size: 0.8rem;
  color: var(--gray);
}

.kaiwa-send-mode-btn.active {
  border-color: var(--warning);
  background: var(--warning);
  color: var(--white);
}

/* Kaiwa Evaluation Button */
.kaiwa-eval-btn {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.4rem 0.75rem;
  border: 1px solid var(--success);
  border-radius: var(--radius-md);
  background: var(--white);
  color: var(--success);
  cursor: pointer;
  font-size: 0.8rem;
  transition: var(--transition-fast);
}

.kaiwa-eval-btn:hover:not(:disabled) {
  background: var(--success);
  color: var(--white);
}

.kaiwa-eval-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Kaiwa Karaoke Text - Professional Design */
.kaiwa-karaoke-container {
  text-align: center;
  padding: 0.5rem;
}

.kaiwa-karaoke-text {
  font-size: 1.875rem;
  line-height: 2.2;
  padding: 1.25rem 1.5rem;
  background: linear-gradient(135deg, var(--kaiwa-background) 0%, #E6FFFA 100%);
  border-radius: 16px;
  margin-bottom: 1.25rem;
  border: 2px solid var(--kaiwa-border);
  box-shadow: 0 4px 16px rgba(13, 148, 136, 0.08);
  font-family: var(--font-jp-body);
  letter-spacing: 0.05em;
}

.karaoke-char {
  display: inline-block;
  padding: 0.125rem 0.25rem;
  margin: 0 1px;
  border-radius: 6px;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.karaoke-char.karaoke-correct {
  color: var(--karaoke-correct);
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%);
  text-shadow: 0 0 8px rgba(16, 185, 129, 0.3);
  transform: scale(1.02);
}

.karaoke-char.karaoke-wrong {
  color: var(--karaoke-wrong);
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.2) 0%, rgba(239, 68, 68, 0.1) 100%);
  text-decoration: none;
  border-bottom: 2px wavy var(--karaoke-wrong);
  animation: shake-subtle 0.4s ease-in-out;
}

@keyframes shake-subtle {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}

.karaoke-char.karaoke-missing {
  color: var(--karaoke-missing);
  text-decoration: line-through;
  text-decoration-thickness: 2px;
  opacity: 0.5;
  background: rgba(156, 163, 175, 0.1);
}

.karaoke-char.karaoke-extra {
  color: var(--karaoke-extra);
  background: linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(245, 158, 11, 0.1) 100%);
  border: 1px dashed var(--karaoke-extra);
}

.karaoke-char.karaoke-pending {
  color: var(--kaiwa-text);
  opacity: 0.4;
}

.karaoke-char.karaoke-current {
  color: var(--karaoke-current);
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.25) 0%, rgba(139, 92, 246, 0.1) 100%);
  animation: karaoke-pulse 0.6s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  box-shadow: 0 0 12px rgba(139, 92, 246, 0.4);
}

@keyframes karaoke-pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 12px rgba(139, 92, 246, 0.4);
  }
  50% {
    transform: scale(1.15);
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.6);
  }
}

.kaiwa-karaoke-stats {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  margin-top: 1.25rem;
}

.karaoke-accuracy {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1rem 1.5rem;
  background: var(--white);
  border-radius: 12px;
  box-shadow: 0 2px 12px rgba(13, 148, 136, 0.1);
  border: 1px solid var(--kaiwa-border);
}

.karaoke-accuracy .accuracy-value {
  font-size: 2.75rem;
  font-weight: 700;
  line-height: 1;
  background: linear-gradient(135deg, var(--kaiwa-primary) 0%, var(--kaiwa-secondary) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.karaoke-accuracy .accuracy-label {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--kaiwa-text);
  opacity: 0.7;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-top: 0.25rem;
}

.karaoke-accuracy.good .accuracy-value {
  background: linear-gradient(135deg, var(--karaoke-correct) 0%, #34D399 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.karaoke-accuracy.ok .accuracy-value {
  background: linear-gradient(135deg, var(--karaoke-extra) 0%, #FBBF24 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.karaoke-accuracy.poor .accuracy-value {
  background: linear-gradient(135deg, var(--karaoke-wrong) 0%, #F87171 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.karaoke-feedback {
  font-size: 1rem;
  color: var(--kaiwa-text);
  font-weight: 500;
  max-width: 200px;
  text-align: center;
  line-height: 1.4;
}

.kaiwa-karaoke-recording {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.625rem;
  color: var(--karaoke-wrong);
  font-size: 0.875rem;
  font-weight: 500;
  margin-top: 0.75rem;
  padding: 0.5rem 1rem;
  background: rgba(239, 68, 68, 0.1);
  border-radius: 20px;
  animation: recording-breathe 2s ease-in-out infinite;
}

@keyframes recording-breathe {
  0%, 100% { background: rgba(239, 68, 68, 0.1); }
  50% { background: rgba(239, 68, 68, 0.15); }
}

.kaiwa-karaoke-recording .recording-indicator {
  width: 10px;
  height: 10px;
  background: var(--karaoke-wrong);
  border-radius: 50%;
  animation: recording-blink 1s ease-in-out infinite;
  box-shadow: 0 0 8px rgba(239, 68, 68, 0.5);
}

@keyframes recording-blink {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.4;
    transform: scale(0.9);
  }
}

/* Kaiwa Evaluation Modal - Professional Design */
.kaiwa-evaluation-modal {
  background: var(--white);
  border-radius: 20px;
  max-width: 520px;
  width: 92%;
  max-height: 88vh;
  overflow-y: auto;
  box-shadow: 0 25px 50px -12px rgba(13, 148, 136, 0.25);
  border: 1px solid var(--kaiwa-border);
  animation: eval-modal-enter 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes eval-modal-enter {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.kaiwa-evaluation-modal.loading {
  padding: 3.5rem 2rem;
  text-align: center;
}

.eval-loading-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.25rem;
}

.eval-loading-spinner {
  width: 56px;
  height: 56px;
  border: 4px solid var(--kaiwa-border);
  border-top-color: var(--kaiwa-primary);
  border-radius: 50%;
  animation: eval-spin 0.8s linear infinite;
}

@keyframes eval-spin {
  to { transform: rotate(360deg); }
}

.eval-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.25rem 1.5rem;
  background: linear-gradient(135deg, rgba(13, 148, 136, 0.08) 0%, rgba(45, 212, 191, 0.04) 100%);
  border-bottom: 1px solid var(--kaiwa-border);
}

.eval-modal-header h2 {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  font-size: 1.25rem;
  font-weight: 700;
  margin: 0;
  color: var(--kaiwa-primary-dark);
}

.eval-close-btn {
  background: var(--white);
  border: 1px solid var(--kaiwa-border);
  color: var(--kaiwa-text);
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 8px;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
}

.eval-close-btn:hover {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.3);
  color: #EF4444;
}

.eval-modal-content {
  padding: 1.5rem;
}

.eval-overall-score {
  text-align: center;
  padding: 2rem 1.5rem;
  margin-bottom: 1.5rem;
  border-radius: 16px;
  background: linear-gradient(135deg, var(--kaiwa-background) 0%, #E6FFFA 100%);
  border: 2px solid var(--kaiwa-border);
  position: relative;
  overflow: hidden;
}

.eval-overall-score::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
  animation: eval-shimmer 3s ease-in-out infinite;
}

@keyframes eval-shimmer {
  0%, 100% { transform: rotate(0deg); }
  50% { transform: rotate(180deg); }
}

.eval-overall-score.excellent {
  background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 50%, #6EE7B7 100%);
  border-color: rgba(16, 185, 129, 0.3);
}

.eval-overall-score.good {
  background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 50%, #93C5FD 100%);
  border-color: rgba(59, 130, 246, 0.3);
}

.eval-overall-score.average {
  background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 50%, #FCD34D 100%);
  border-color: rgba(245, 158, 11, 0.3);
}

.eval-overall-score.needs-work {
  background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 50%, #FCA5A5 100%);
  border-color: rgba(239, 68, 68, 0.3);
}

.eval-overall-circle {
  display: flex;
  align-items: baseline;
  justify-content: center;
  gap: 0.25rem;
  position: relative;
  z-index: 1;
}

.eval-overall-value {
  font-size: 4.5rem;
  font-weight: 800;
  color: var(--kaiwa-primary-dark);
  line-height: 1;
  text-shadow: 0 2px 4px rgba(13, 148, 136, 0.1);
  animation: eval-score-pop 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
}

@keyframes eval-score-pop {
  from {
    transform: scale(0.5);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.eval-overall-max {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--kaiwa-text);
  opacity: 0.6;
}

.eval-overall-label {
  font-size: 1.125rem;
  font-weight: 700;
  color: var(--kaiwa-primary-dark);
  margin-top: 0.75rem;
  position: relative;
  z-index: 1;
}

.eval-recommended-level {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 1rem;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--kaiwa-text);
  background: var(--white);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  box-shadow: 0 2px 8px rgba(13, 148, 136, 0.1);
  position: relative;
  z-index: 1;
}

.eval-scores-section {
  margin-bottom: 1.5rem;
}

.eval-scores-section h3 {
  font-size: 0.9rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 1rem;
  color: var(--kaiwa-text);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.eval-scores-section h3::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--kaiwa-border);
}

.eval-scores-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.eval-score-item {
  display: flex;
  align-items: center;
  gap: 0.875rem;
  animation: eval-score-slide 0.4s ease-out both;
}

.eval-score-item:nth-child(1) { animation-delay: 0.1s; }
.eval-score-item:nth-child(2) { animation-delay: 0.15s; }
.eval-score-item:nth-child(3) { animation-delay: 0.2s; }
.eval-score-item:nth-child(4) { animation-delay: 0.25s; }

@keyframes eval-score-slide {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.eval-score-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  min-width: 110px;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--kaiwa-text);
}

.eval-score-label .score-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: linear-gradient(135deg, var(--kaiwa-primary) 0%, var(--kaiwa-primary-light) 100%);
  color: var(--white);
  border-radius: 8px;
  font-size: 0.75rem;
  font-weight: 700;
}

.eval-score-bar-container {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 0.625rem;
  height: 24px;
  background: rgba(13, 148, 136, 0.08);
  border-radius: 12px;
  overflow: hidden;
  position: relative;
  border: 1px solid var(--kaiwa-border);
}

.eval-score-bar {
  height: 100%;
  border-radius: 12px;
  transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.eval-score-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
  animation: eval-bar-shine 2s ease-in-out infinite;
}

@keyframes eval-bar-shine {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.eval-score-bar.excellent {
  background: linear-gradient(90deg, var(--eval-excellent) 0%, #34D399 100%);
}

.eval-score-bar.good {
  background: linear-gradient(90deg, var(--eval-good) 0%, #60A5FA 100%);
}

.eval-score-bar.average {
  background: linear-gradient(90deg, #ff9800 0%, #ffc107 100%);
}

.eval-score-bar.needs-work {
  background: linear-gradient(90deg, #f44336 0%, #ff5722 100%);
}

.eval-score-value {
  position: absolute;
  right: 8px;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--dark);
}

.eval-feedback-section {
  margin-bottom: 1rem;
}

.eval-feedback-section h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.95rem;
  margin-bottom: 0.5rem;
  color: var(--dark);
}

.eval-feedback-section h3 .section-icon {
  color: var(--primary);
}

.eval-feedback-section.strengths h3 .section-icon {
  color: var(--success);
}

.eval-feedback-section.weaknesses h3 .section-icon {
  color: var(--warning);
}

.eval-feedback-section.suggestions h3 .section-icon {
  color: var(--info);
}

.eval-feedback-section ul {
  margin: 0;
  padding-left: 1.25rem;
}

.eval-feedback-section li {
  font-size: 0.9rem;
  line-height: 1.6;
  color: var(--gray-dark);
  margin-bottom: 0.25rem;
}

.eval-encouragement {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  padding: 1rem;
  background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
  border-radius: var(--radius-md);
  margin-top: 1rem;
}

.eval-encouragement svg {
  color: #e91e63;
  flex-shrink: 0;
  margin-top: 2px;
}

.eval-encouragement p {
  margin: 0;
  font-size: 0.95rem;
  line-height: 1.5;
  color: var(--dark);
}

.eval-modal-footer {
  padding: 1rem 1.5rem;
  border-top: 1px solid var(--gray-light);
  display: flex;
  justify-content: center;
}

/* Auto-send countdown in practice modal */
.kaiwa-auto-send-countdown {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem;
  background: var(--warning);
  color: var(--white);
  border-radius: var(--radius-md);
  font-size: 0.9rem;
  margin-top: 1rem;
}

.kaiwa-auto-send-countdown .countdown-number {
  font-size: 1.5rem;
  font-weight: bold;
}

/* Responsive - Tablet */
@media (max-width: 768px) {
  /* Sidebar mobile styles */
  .sidebar {
    transform: translateX(-100%);
  }

  .sidebar.mobile-open {
    transform: translateX(0);
  }

  .sidebar-mobile-toggle {
    display: flex;
  }

  .sidebar-overlay {
    display: block;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
  }

  .sidebar-collapse-btn {
    display: none;
  }

  .app-with-sidebar .main-wrapper {
    margin-left: 0;
    width: 100%;
  }

  .app-with-sidebar.sidebar-collapsed .main-wrapper {
    margin-left: 0;
    width: 100%;
  }

  .header {
    padding: 0.5rem;
  }

  .header-top {
    width: 100%;
    justify-content: space-between;
  }

  .hamburger-btn {
    display: block;
  }

  .nav {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--white);
    flex-direction: column;
    padding: 1rem;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    gap: 0.5rem;
    z-index: 99;
  }

  .nav.nav-open {
    display: flex;
  }

  .header .nav-btn {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    justify-content: flex-start;
  }

  /* Show user section at top of mobile menu */
  .nav-user-section {
    display: flex;
    flex-direction: column;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border);
    margin-bottom: 0.5rem;
    gap: 0.5rem;
  }

  .nav-user-info {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* Logout button below user info */
  .nav-user-section .nav-logout-btn {
    display: flex;
    padding: 0.5rem 0.75rem;
    color: var(--danger) !important;
    font-size: 0.9rem;
  }

  /* Hide desktop user info on mobile */
  .desktop-user-info {
    display: none;
  }

  .home-page {
    padding: var(--space-md);
  }

  .jlpt-bar-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }

  .jlpt-bar-label {
    width: 100%;
  }

  .lesson-tree-item {
    padding: 0.75rem;
  }

  /* Flashcard font scaling - iPad/Tablet */
  .kanji {
    font-size: 180px;
  }

  .vocabulary {
    font-size: 1.6rem;
  }

  .sino-vietnamese {
    font-size: 1.8rem;
  }

  .meaning {
    font-size: 1.3rem;
  }

  .flashcard {
    height: 350px;
  }
}

/* Responsive - Mobile */
@media (max-width: 600px) {
  .header-title {
    font-size: 1.25rem;
  }

  .main-content {
    padding: 0.75rem;
    margin: 8px;
    margin-left: 8px;
    border-radius: 12px;
  }

  .flashcard {
    height: 280px;
  }

  .kanji {
    font-size: 120px;
  }

  .vocabulary {
    font-size: 1.4rem;
  }

  .sino-vietnamese {
    font-size: 1.5rem;
  }

  .meaning {
    font-size: 1.1rem;
  }

  .example {
    font-size: 0.85rem;
  }

  .rating-btn {
    padding: 0.6rem 1rem;
    font-size: 0.9rem;
    min-height: 48px;
  }

  .btn {
    min-height: 35px;
    padding: 0.75rem 1rem;
  }

  .btn-large {
    padding: 0.875rem 1.5rem;
    font-size: 1rem;
  }

  .home-page {
    padding: var(--space-sm);
  }

  .welcome-section h2 {
    font-size: 1.35rem;
  }

  .study-controls {
    flex-direction: column;
    gap: 0.75rem;
  }

  .filter-group {
    flex-direction: column;
    width: 100%;
  }

  .filter-group select {
    width: 100%;
  }

  /* Study session responsive */
  .study-session {
    padding: 0.75rem;
  }

  .study-header {
    margin-bottom: 0;
  }

  /* Hide desktop filter buttons, show mobile selects */
  .filter-desktop {
    display: none;
  }

  .filter-bar-mobile {
    display: flex;
  }

  .filter-btn {
    padding: 0.3rem 0.5rem;
    font-size: 0.7rem;
  }

  .filter-separator {
    display: none;
  }

  .action-buttons-inline {
    flex-direction: column;
    gap: 0.75rem;
    align-items: stretch;
  }

  .action-group {
    justify-content: center;
    flex-wrap: wrap;
  }

  .action-separator {
    display: none;
  }

  .progress-info-right {
    margin-left: 0;
    justify-content: center;
  }

  .memo-btn, .diff-btn {
    padding: 0.4rem 0.6rem;
    font-size: 0.8rem;
  }

  .speak-btn {
    font-size: 1.2rem;
    padding: 0.4rem 0.6rem;
  }

  .card-nav-btn {
    padding: 0.35rem 0.5rem;
    font-size: 1.2rem;
    min-width: 40px;
    min-height: 40px;
  }

  .card-navigation {
    gap: 0.5rem;
  }

  .action-buttons-inline {
    padding: 0.5rem 0;
    gap: 0.4rem;
  }
}

/* Responsive - Small Mobile */
@media (max-width: 380px) {
  .header-title {
    font-size: 1.1rem;
  }

  .kanji {
    font-size: 80px;
  }

  .vocabulary {
    font-size: 1.2rem;
  }

  .sino-vietnamese {
    font-size: 1.3rem;
  }

  .meaning {
    font-size: 1rem;
  }

  .example {
    font-size: 0.75rem;
  }

  .flashcard {
    height: 220px;
  }

  .rating-buttons {
    flex-wrap: wrap;
  }

  .rating-btn {
    flex: 1 1 45%;
    min-width: 80px;
  }

  /* Extra small study session */
  .study-session {
    padding: 0.5rem;
  }

  .filter-bar-inline span {
    display: none;
  }

  .filter-btn {
    padding: 0.25rem 0.4rem;
    font-size: 0.65rem;
  }

  .action-group span {
    display: none;
  }

  .memo-btn, .diff-btn {
    padding: 0.35rem 0.5rem;
    font-size: 0.75rem;
  }

  .progress-info-right {
    font-size: 0.85rem;
  }

  .card-nav-btn {
    padding: 0.25rem 0.4rem;
    font-size: 1rem;
    min-width: 36px;
    min-height: 36px;
  }

  .action-buttons-inline {
    padding: 0.4rem 0;
  }
}

/* ============ QUIZ GAME STYLES ============ */

.quiz-game-page {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: var(--space-lg);
  background: linear-gradient(135deg, var(--jp-ai-dark) 0%, var(--jp-ai) 50%, var(--jp-sakura-light) 100%);
}

/* ============ PROFESSIONAL GAME PLAY STYLES ============ */

/* Fullscreen game container */
.game-fullscreen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 1000;
}

/* Starting Screen */
.game-starting-screen {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  align-items: center;
  justify-content: center;
}

.starting-content {
  text-align: center;
  color: white;
  animation: fadeInUp 0.5s ease-out;
}

.starting-icon {
  width: 160px;
  height: 160px;
  background: linear-gradient(135deg, rgba(255,255,255,0.25), rgba(255,255,255,0.1));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 2rem;
  animation: pulse 1s ease-in-out infinite;
  border: 4px solid rgba(255,255,255,0.2);
  box-shadow: 0 12px 50px rgba(0,0,0,0.2), inset 0 0 40px rgba(255,255,255,0.1);
}

.starting-icon svg {
  color: #ffd700;
}

.starting-title {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 1rem;
  text-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

.starting-countdown {
  width: 180px;
  height: 180px;
  background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.08));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.5rem;
  border: 5px solid rgba(255,255,255,0.35);
  box-shadow: 0 12px 50px rgba(0,0,0,0.25), inset 0 0 40px rgba(255,255,255,0.15);
}

.countdown-number {
  font-size: 6rem;
  font-weight: 900;
  animation: countdownPop 1s ease-in-out infinite;
  text-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

.starting-hint {
  font-size: 1.1rem;
  opacity: 0.9;
}

@keyframes countdownPop {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Question Screen */
.game-question-screen {
  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
  padding: 0;
}

.game-top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: linear-gradient(135deg, rgba(0,0,0,0.4), rgba(0,0,0,0.2));
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,0.08);
}

.top-bar-left {
  display: flex;
  gap: 0.75rem;
  align-items: center;
}

.round-badge {
  background: rgba(255,255,255,0.15);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-weight: 600;
  font-size: 0.9rem;
}

.special-round-badge {
  background: linear-gradient(135deg, #f39c12, #e74c3c);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-weight: 600;
  font-size: 0.85rem;
  display: flex;
  align-items: center;
  gap: 0.35rem;
  animation: glowPulse 2s ease-in-out infinite;
}

@keyframes glowPulse {
  0%, 100% { box-shadow: 0 0 10px rgba(243, 156, 18, 0.5); }
  50% { box-shadow: 0 0 25px rgba(243, 156, 18, 0.8); }
}

.top-bar-center {
  flex: 1;
  display: flex;
  justify-content: center;
}

.timer-circle {
  width: 90px;
  height: 90px;
  position: relative;
  filter: drop-shadow(0 4px 15px rgba(46, 204, 113, 0.3));
}

.timer-circle svg {
  width: 100%;
  height: 100%;
  transform: scaleX(-1);
}

.timer-bg {
  stroke: rgba(255,255,255,0.2);
}

.timer-progress {
  stroke: #2ecc71;
  transition: stroke-dasharray 0.1s linear;
}

.timer-circle.warning .timer-progress {
  stroke: #e74c3c;
}

.timer-value {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.8rem;
  font-weight: 700;
  color: white;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.time-freeze-icon {
  color: #00bcd4;
  animation: snowflakeSpin 3s linear infinite;
}

@keyframes snowflakeSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.timer-circle.warning .timer-value {
  color: #e74c3c;
  animation: timerShake 0.3s ease-in-out infinite;
}

@keyframes timerShake {
  0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
  25% { transform: translate(-50%, -50%) rotate(-3deg); }
  75% { transform: translate(-50%, -50%) rotate(3deg); }
}

.top-bar-right {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

/* Leave game button in top bar */
.leave-game-btn {
  background: rgba(231, 76, 60, 0.9);
  color: white;
  border: none;
  padding: 0.5rem 0.75rem;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.85rem;
  font-weight: 600;
  transition: all 0.2s;
}

.leave-game-btn:hover {
  background: #c0392b;
  transform: scale(1.05);
}

/* Floating leave button for fullscreen states */
.leave-game-btn.floating {
  position: absolute;
  top: 1rem;
  right: 1rem;
  z-index: 100;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
}

.leave-game-btn.floating:hover {
  background: rgba(231, 76, 60, 0.9);
}

.score-display {
  background: linear-gradient(135deg, #f39c12, #e67e22);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* Question area */
.question-area {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1.5rem;
}

.question-card {
  background: linear-gradient(135deg, rgba(255,255,255,0.98), rgba(255,255,255,0.92));
  padding: 2.5rem 3rem;
  border-radius: 24px;
  max-width: 850px;
  width: 100%;
  text-align: center;
  box-shadow: 0 15px 50px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,1);
  animation: slideDown 0.4s ease-out;
  border: 1px solid rgba(255,255,255,0.5);
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.question-card .question-text {
  color: #1a1a2e;
  font-weight: 600;
  line-height: 1.4;
  margin: 0;
}

/* Blocked overlay */
.blocked-overlay {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
  gap: 1rem;
}

.blocked-overlay svg {
  color: #e74c3c;
  opacity: 0.8;
}

.blocked-overlay p {
  font-size: 1.3rem;
  opacity: 0.9;
}

/* Answers grid */
.answers-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.25rem;
  padding: 1.25rem 1.5rem 1.5rem;
  max-width: 950px;
  margin: 0 auto;
  width: 100%;
}

.answer-card {
  padding: 1.75rem 1.25rem;
  border: none;
  border-radius: 18px;
  cursor: pointer;
  color: white;
  font-weight: 600;
  font-size: 1.1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  min-height: 100px;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 6px 20px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.15);
  position: relative;
  overflow: hidden;
}

.answer-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 50%;
  background: linear-gradient(180deg, rgba(255,255,255,0.12) 0%, transparent 100%);
  border-radius: 18px 18px 0 0;
}

.answer-card:hover:not(.disabled):not(.selected) {
  transform: translateY(-5px) scale(1.02);
  box-shadow: 0 12px 35px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.2);
}

.answer-card:active:not(.disabled) {
  transform: translateY(-2px) scale(1.01);
}

.answer-card.selected {
  transform: scale(1.02);
  box-shadow: inset 0 0 0 5px rgba(255,255,255,0.6), 0 0 40px rgba(255,255,255,0.3);
}

.answer-card.disabled {
  opacity: 0.7;
  cursor: default;
}

.answer-icon {
  font-size: 1.8rem;
  opacity: 0.9;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.answer-text {
  position: relative;
  z-index: 1;
}

/* Bottom status bar */
.game-bottom-bar {
  padding: 1rem;
  background: rgba(0,0,0,0.3);
  display: flex;
  justify-content: center;
}

.answered-status,
.waiting-status {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-size: 0.95rem;
}

.status-check {
  color: #2ecc71;
  font-weight: bold;
}

/* Reveal Screen */
.game-reveal-screen {
  background: linear-gradient(180deg, #1a1a2e 0%, #0f3460 100%);
  padding: 1.5rem;
  align-items: center;
  overflow-y: auto;
}

.reveal-header {
  width: 100%;
  max-width: 500px;
  margin-bottom: 1.5rem;
}

.result-banner {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  padding: 1.5rem;
  border-radius: 16px;
  animation: resultPop 0.5s ease-out;
}

@keyframes resultPop {
  0% { transform: scale(0.8); opacity: 0; }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); opacity: 1; }
}

.result-banner.correct {
  background: linear-gradient(135deg, #2ecc71, #27ae60);
  color: white;
}

.result-banner.wrong {
  background: linear-gradient(135deg, #e74c3c, #c0392b);
  color: white;
}

.result-icon {
  font-size: 2.5rem;
}

.result-text {
  font-size: 1.8rem;
  font-weight: 700;
}

.score-gained {
  background: rgba(255,255,255,0.2);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-weight: 700;
}

/* Correct answer card */
.correct-answer-card {
  background: rgba(255,255,255,0.1);
  padding: 1.5rem;
  border-radius: 12px;
  text-align: center;
  max-width: 500px;
  width: 100%;
  margin-bottom: 1.5rem;
}

.correct-label {
  display: block;
  color: rgba(255,255,255,0.7);
  font-size: 0.9rem;
  margin-bottom: 0.75rem;
}

.correct-answer {
  display: inline-block;
  padding: 1rem 2rem;
  border-radius: 10px;
  color: white;
  font-weight: 600;
  font-size: 1.2rem;
  margin-bottom: 0.75rem;
}

.answer-stats {
  display: block;
  color: rgba(255,255,255,0.6);
  font-size: 0.85rem;
}

/* Reveal players list */
.reveal-players {
  max-width: 500px;
  width: 100%;
  flex: 1;
  overflow-y: auto;
}

.reveal-players h3 {
  color: white;
  font-size: 1rem;
  margin-bottom: 0.75rem;
  text-align: center;
}

.reveal-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.reveal-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  background: rgba(255,255,255,0.1);
  border-radius: 10px;
  color: white;
  transition: background 0.2s;
}

.reveal-item.is-me {
  background: rgba(102, 126, 234, 0.3);
  border: 1px solid rgba(102, 126, 234, 0.5);
}

.reveal-item.correct {
  border-left: 3px solid #2ecc71;
}

.reveal-item.wrong {
  border-left: 3px solid #e74c3c;
}

.reveal-rank {
  width: 32px;
  display: flex;
  justify-content: center;
  color: rgba(255,255,255,0.7);
}

.reveal-rank svg {
  color: #ffd700;
}

.reveal-name {
  flex: 1;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.me-tag {
  background: rgba(102, 126, 234, 0.5);
  padding: 0.15rem 0.5rem;
  border-radius: 10px;
  font-size: 0.75rem;
}

.reveal-status {
  width: 24px;
  text-align: center;
}

.reveal-item.correct .reveal-status {
  color: #2ecc71;
}

.reveal-item.wrong .reveal-status {
  color: #e74c3c;
}

.reveal-score {
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.35rem;
}

.reveal-score .change {
  font-size: 0.8rem;
}

.reveal-score .change.positive {
  color: #2ecc71;
}

/* Timer bar */
.reveal-timer-bar {
  width: 100%;
  max-width: 500px;
  height: 40px;
  background: rgba(255,255,255,0.1);
  border-radius: 20px;
  position: relative;
  overflow: hidden;
  margin-top: 1rem;
}

.timer-fill {
  height: 100%;
  background: linear-gradient(90deg, #667eea, #764ba2);
  border-radius: 20px;
  transition: width 1s linear;
}

.timer-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-size: 0.9rem;
  font-weight: 500;
  white-space: nowrap;
}

/* Power-up Screen */
.game-powerup-screen {
  background: linear-gradient(135deg, #2c3e50 0%, #1a1a2e 100%);
  padding: 1.5rem;
  align-items: center;
}

.powerup-header {
  text-align: center;
  margin-bottom: 1.5rem;
}

.powerup-icon-large {
  color: #f39c12;
  margin-bottom: 0.5rem;
}

.powerup-header h2 {
  color: white;
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
}

.powerup-timer {
  background: rgba(243, 156, 18, 0.2);
  color: #f39c12;
  padding: 0.5rem 1.5rem;
  border-radius: 20px;
  font-weight: 700;
  font-size: 1.2rem;
  display: inline-block;
}

.powerup-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  max-width: 500px;
  width: 100%;
  margin-bottom: 1.5rem;
}

.powerup-card {
  background: rgba(255,255,255,0.1);
  border: 2px solid transparent;
  border-radius: 12px;
  padding: 1.25rem;
  cursor: pointer;
  text-align: center;
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.powerup-card:hover {
  background: rgba(255,255,255,0.15);
  transform: translateY(-2px);
}

.powerup-card.selected {
  border-color: #f39c12;
  background: rgba(243, 156, 18, 0.2);
}

.powerup-emoji {
  font-size: 2rem;
}

.powerup-name {
  color: white;
  font-weight: 600;
  font-size: 0.95rem;
}

.powerup-desc {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
}

/* Target selection */
.target-section {
  max-width: 500px;
  width: 100%;
  margin-bottom: 1.5rem;
}

.target-section h3 {
  color: white;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  font-size: 1rem;
}

.target-grid {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.target-card {
  background: rgba(255,255,255,0.1);
  border: 2px solid transparent;
  border-radius: 10px;
  padding: 0.75rem 1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  transition: all 0.2s;
}

.target-card:hover {
  background: rgba(255,255,255,0.15);
}

.target-card.selected {
  border-color: #e74c3c;
  background: rgba(231, 76, 60, 0.2);
}

.target-name {
  color: white;
  font-weight: 500;
}

.target-score {
  color: rgba(255,255,255,0.7);
  font-size: 0.9rem;
}

.shield-indicator {
  color: #3498db;
  margin-left: 0.5rem;
}

.confirm-powerup-btn {
  background: linear-gradient(135deg, #f39c12, #e67e22);
  color: white;
  border: none;
  padding: 1rem 2.5rem;
  border-radius: 30px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.2s;
}

.confirm-powerup-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(243, 156, 18, 0.4);
}

.confirm-powerup-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Ineligible/Confirmed states */
.powerup-ineligible-content,
.powerup-confirmed-content {
  text-align: center;
  color: white;
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.ineligible-icon,
.confirmed-check {
  font-size: 4rem;
  margin-bottom: 1rem;
}

.confirmed-check {
  width: 80px;
  height: 80px;
  background: #2ecc71;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.5rem;
  animation: checkPop 0.5s ease-out;
}

@keyframes checkPop {
  0% { transform: scale(0); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.ineligible-text {
  font-size: 1.3rem;
  margin-bottom: 0.5rem;
}

.ineligible-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.95rem;
}

.confirmed-powerup-display {
  background: rgba(255,255,255,0.1);
  padding: 1rem 2rem;
  border-radius: 12px;
  margin-top: 1rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

/* Leaderboard Screen */
.game-leaderboard-screen {
  background: linear-gradient(180deg, #1a1a2e 0%, #0f3460 100%);
  padding: 1.5rem;
  align-items: center;
}

.leaderboard-header {
  text-align: center;
  margin-bottom: 1.5rem;
}

.trophy-icon {
  color: #ffd700;
  margin-bottom: 0.5rem;
}

.leaderboard-header h2 {
  color: white;
  font-size: 1.8rem;
  margin-bottom: 0.25rem;
}

.round-progress {
  color: rgba(255,255,255,0.6);
  font-size: 0.95rem;
}

/* Podium */
.podium {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  max-width: 400px;
  width: 100%;
}

.podium-place {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.podium-player {
  text-align: center;
  margin-bottom: 0.5rem;
  animation: slideUp 0.5s ease-out;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.podium-player .crown {
  color: #ffd700;
  margin-bottom: 0.25rem;
}

.podium-player .medal {
  margin-bottom: 0.25rem;
}

.medal.silver {
  color: #bdc3c7;
}

.medal.bronze {
  color: #cd7f32;
}

.podium-name {
  display: block;
  color: white;
  font-weight: 600;
  font-size: 0.9rem;
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.podium-score {
  display: block;
  color: rgba(255,255,255,0.8);
  font-weight: 700;
  font-size: 1.1rem;
}

.streak-fire {
  display: block;
  font-size: 0.8rem;
  color: #f39c12;
  margin-top: 0.25rem;
}

.podium-stand {
  width: 90px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 1.5rem;
  border-radius: 8px 8px 0 0;
}

.podium-place.first .podium-stand {
  height: 100px;
  background: linear-gradient(180deg, #ffd700, #f39c12);
}

.podium-place.second .podium-stand {
  height: 70px;
  background: linear-gradient(180deg, #bdc3c7, #95a5a6);
}

.podium-place.third .podium-stand {
  height: 50px;
  background: linear-gradient(180deg, #cd7f32, #a0522d);
}

/* Leaderboard rest */
.leaderboard-rest {
  max-width: 400px;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.leaderboard-row {
  display: flex;
  align-items: center;
  padding: 0.75rem 1rem;
  background: rgba(255,255,255,0.1);
  border-radius: 10px;
  color: white;
}

.leaderboard-row.is-me {
  background: rgba(102, 126, 234, 0.3);
  border: 1px solid rgba(102, 126, 234, 0.5);
}

.row-rank {
  width: 40px;
  color: rgba(255,255,255,0.6);
  font-weight: 500;
}

.row-name {
  flex: 1;
  font-weight: 500;
}

.row-score {
  font-weight: 700;
}

/* Loading Screen */
.game-loading-screen {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  align-items: center;
  justify-content: center;
  gap: 1.5rem;
  color: white;
}

.loading-spinner {
  width: 50px;
  height: 50px;
  border: 4px solid rgba(255,255,255,0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.leave-btn {
  background: rgba(255,255,255,0.2);
  color: white;
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
}

.leave-btn:hover {
  background: rgba(255,255,255,0.3);
}

/* Mobile responsive */
@media (max-width: 600px) {
  .game-top-bar {
    padding: 0.75rem 1rem;
  }

  .timer-circle {
    width: 60px;
    height: 60px;
  }

  .timer-value {
    font-size: 1.4rem;
  }

  .question-card {
    padding: 1.25rem 1.5rem;
  }

  .question-card .question-text {
    font-size: 1.3rem !important;
  }

  .answers-grid {
    grid-template-columns: 1fr;
    gap: 0.75rem;
    padding: 0.75rem 1rem 1rem;
  }

  .answer-card {
    min-height: 60px;
    padding: 1rem;
  }

  .podium-stand {
    width: 70px;
  }

  .podium-place.first .podium-stand {
    height: 80px;
  }

  .podium-place.second .podium-stand {
    height: 55px;
  }

  .podium-place.third .podium-stand {
    height: 40px;
  }

  .powerup-grid {
    grid-template-columns: 1fr;
  }

  .result-banner {
    flex-direction: column;
    gap: 0.5rem;
  }

  .result-text {
    font-size: 1.4rem;
  }
}

/* Game Menu */
.game-menu {
  background: var(--white);
  padding: 2rem;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  max-width: 520px;
  width: 100%;
}

.game-menu-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--light);
}

.game-title-section {
  text-align: left;
  flex: 1;
}

.game-menu h2 {
  color: var(--primary);
  margin-bottom: 0.5rem;
  font-size: 1.6rem;
  font-weight: 700;
}

.game-description {
  color: var(--gray);
  margin-bottom: 0;
  font-size: 0.95rem;
}

.player-profile-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.player-profile-section .player-name {
  font-size: 0.85rem;
  color: var(--dark);
  font-weight: 500;
}

/* Game Avatar Picker */
.game-avatar-picker {
  position: relative;
}

.game-avatar-picker .avatar-preview {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  gap: 0.25rem;
}

.game-avatar-picker .avatar-display {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: var(--gradient-shu);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  color: white;
  border: 3px solid var(--white);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  overflow: hidden;
  transition: transform 0.2s, box-shadow 0.2s;
}

.game-avatar-picker .avatar-display:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}

.game-avatar-picker .avatar-display img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.game-avatar-picker .avatar-change-hint {
  font-size: 0.7rem;
  color: var(--primary);
  font-weight: 500;
}

.avatar-picker-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.5rem;
  background: var(--white);
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
  padding: 1rem;
  z-index: 100;
  min-width: 280px;
  max-height: 320px;
  overflow-y: auto;
}

.avatar-picker-category {
  margin-bottom: 1rem;
}

.avatar-picker-category:last-child {
  margin-bottom: 0;
}

.avatar-picker-category .category-label {
  display: block;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--gray-dark);
  text-transform: uppercase;
  margin-bottom: 0.5rem;
  letter-spacing: 0.5px;
}

.avatar-picker-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.avatar-picker-item {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid transparent;
  background: var(--light);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3rem;
  cursor: pointer;
  transition: all 0.2s;
  overflow: hidden;
}

.avatar-picker-item:hover {
  border-color: var(--primary);
  transform: scale(1.1);
}

.avatar-picker-item.selected {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(227, 66, 52, 0.3);
}

.avatar-picker-item.is-image {
  width: 48px;
  height: 48px;
  padding: 3px;
}

.avatar-picker-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

.menu-buttons {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
}

.menu-buttons .btn {
  padding: 1rem 1.5rem;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 12px;
  transition: all 0.2s;
}

.menu-buttons .btn-primary {
  background: var(--gradient-shu);
  box-shadow: 0 4px 12px rgba(227, 66, 52, 0.3);
}

.menu-buttons .btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(227, 66, 52, 0.4);
}

.menu-buttons .btn-secondary {
  background: var(--gradient-ai);
  box-shadow: 0 4px 12px rgba(38, 78, 115, 0.3);
}

.menu-buttons .btn-secondary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(38, 78, 115, 0.4);
}

.btn-large {
  padding: 1rem 2rem;
  font-size: 1.1rem;
}

/* Game Rules */
.game-rules {
  margin-top: 1.5rem;
  padding: 1.25rem;
  background: var(--light);
  border-radius: 12px;
  text-align: left;
}

.game-rules h3 {
  font-size: 0.9rem;
  color: var(--dark);
  margin-bottom: 0.75rem;
  text-align: center;
  font-weight: 600;
}

.game-rules ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: 0.5rem;
}

.game-rules li {
  padding: 0.5rem 0.75rem;
  color: var(--gray-dark);
  font-size: 0.85rem;
  line-height: 1.4;
  background: var(--white);
  border-radius: 8px;
}

.game-rules li strong {
  color: var(--primary);
}

/* Game Lobby Join (Sảnh chờ) */
.game-lobby-join {
  background: var(--white);
  padding: 1rem;
  border-radius: 0;
  box-shadow: none;
  max-width: 100%;
  width: 100%;
  display: flex;
  flex-direction: column;
  font-size: 1.05rem;
}

.lobby-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--border);
}

.lobby-header h2 {
  margin: 0;
  color: var(--primary);
  font-size: 1.6rem;
}

.game-lobby-join h3 {
  font-size: 1.1rem;
  color: var(--gray-dark);
  margin-bottom: 0.75rem;
}

/* Section Header */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.75rem;
}

.room-count {
  font-size: 0.95rem;
  color: var(--gray);
  background: var(--light);
  padding: 0.3rem 0.6rem;
  border-radius: 12px;
}

/* Available Rooms Section */
.available-rooms-section {
  margin-bottom: 0;
  flex: 1;
  display: flex;
  flex-direction: column;
}

.loading-rooms {
  color: var(--gray);
  font-size: 0.9rem;
  padding: 1.5rem;
  background: var(--light);
  border-radius: 10px;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.loading-spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Global spin class for loading icons */
.spin {
  animation: spin 1s linear infinite;
}

.no-rooms {
  color: var(--gray);
  padding: 2rem 1rem;
  background: var(--light);
  border-radius: 10px;
  text-align: center;
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.no-rooms .empty-icon {
  font-size: 2.5rem;
  display: block;
  margin-bottom: 0.75rem;
}

.no-rooms p {
  margin: 0;
}

.no-rooms .empty-hint {
  font-size: 0.8rem;
  margin-top: 0.5rem;
  opacity: 0.7;
}

.room-list {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
  flex: 1;
  overflow-y: auto;
  padding: 0.25rem;
  align-content: start;
}

@media (max-width: 600px) {
  .room-list {
    grid-template-columns: 1fr;
  }
}

.room-item {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 1rem 1.25rem;
  background: linear-gradient(135deg, var(--white) 0%, var(--light) 100%);
  border: 2px solid var(--border);
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.25s ease;
  text-align: left;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.room-item:hover {
  border-color: var(--primary);
  background: linear-gradient(135deg, var(--white) 0%, rgba(237, 109, 82, 0.08) 100%);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(237, 109, 82, 0.15);
}

.room-item:active {
  transform: translateY(0);
  box-shadow: 0 2px 8px rgba(237, 109, 82, 0.1);
}

.room-item:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.room-item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}

.room-info {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.room-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--dark);
  margin-bottom: 0.25rem;
}

.room-code {
  font-size: 1rem;
  font-weight: 700;
  color: var(--primary);
  letter-spacing: 0.15rem;
  font-family: 'Courier New', monospace;
  background: rgba(237, 109, 82, 0.1);
  padding: 0.2rem 0.6rem;
  border-radius: 4px;
  display: inline-block;
}

.room-host {
  font-size: 0.95rem;
  color: var(--gray-dark);
}

.room-meta {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.room-source {
  font-size: 0.85rem;
  color: var(--white);
  background: linear-gradient(135deg, #5c6bc0, #7986cb);
  padding: 0.2rem 0.6rem;
  border-radius: 4px;
  font-weight: 500;
}

.room-content-info {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  padding: 0.5rem 0;
  border-top: 1px dashed var(--border);
  width: 100%;
}

.room-content-label {
  font-size: 0.9rem;
  color: var(--gray-dark);
  white-space: nowrap;
}

.room-content-value {
  font-size: 0.9rem;
  color: var(--dark);
  font-weight: 500;
  line-height: 1.4;
}

.room-status-badge {
  background: linear-gradient(135deg, #4caf50, #66bb6a);
  color: white;
  font-size: 0.7rem;
  padding: 0.25rem 0.6rem;
  border-radius: 20px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05rem;
}

.room-settings {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding: 0.5rem 0;
  border-top: 1px dashed var(--border);
  width: 100%;
}

.room-setting-item {
  font-size: 0.9rem;
  color: var(--gray-dark);
  background: var(--light);
  padding: 0.3rem 0.6rem;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.room-setting-item.bonus {
  background: linear-gradient(135deg, #fff3e0, #ffe0b2);
  color: #e65100;
  font-weight: 500;
}

.room-join-hint {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding-top: 0.5rem;
  border-top: 1px dashed var(--border);
  font-size: 0.95rem;
  color: var(--gray);
}

.join-arrow {
  font-size: 1.25rem;
  color: var(--primary);
  opacity: 0.3;
  transition: all 0.25s ease;
}

.room-item:hover .join-arrow {
  opacity: 1;
  transform: translateX(4px);
}

.room-item:hover .room-join-hint {
  color: var(--primary);
}

/* Join by Code Section */
.join-by-code-section {
  padding-top: 1rem;
  border-top: 1px solid var(--border);
}

.join-by-code-section.top {
  padding-top: 0;
  padding-bottom: 1rem;
  border-top: none;
  border-bottom: 1px solid var(--border);
  margin-bottom: 1rem;
}

.join-form-inline {
  display: flex;
  gap: 0.5rem;
}

.join-input-compact {
  flex: 1;
  padding: 0.65rem 0.75rem;
  font-size: 1rem;
  text-align: center;
  letter-spacing: 0.2rem;
  border: 2px solid var(--gray-light);
  border-radius: 8px;
  text-transform: uppercase;
  font-weight: 600;
}

.join-input-compact:focus {
  outline: none;
  border-color: var(--primary);
}

.join-form-inline .btn {
  padding: 0.65rem 1.25rem;
  white-space: nowrap;
}

.join-form {
  margin-top: 1rem;
}

.join-input {
  width: 100%;
  padding: 1rem;
  font-size: 1.5rem;
  text-align: center;
  letter-spacing: 0.5rem;
  border: 2px solid var(--gray-light);
  border-radius: 8px;
  margin-bottom: 1rem;
  text-transform: uppercase;
}

.join-buttons {
  display: flex;
  gap: 1rem;
  justify-content: center;
}

/* Game Create */
.game-create {
  background: var(--white);
  padding: 2rem;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  max-width: 600px;
  width: 100%;
}

.game-create h2 {
  color: var(--primary);
  margin-bottom: 1.5rem;
  text-align: center;
}

/* Game create tabs */
.game-create-tabs {
  display: flex;
  gap: var(--space-xs);
  margin-bottom: var(--space-lg);
  border-bottom: 2px solid var(--border);
}

.game-create-tabs .tab-btn {
  padding: var(--space-sm) var(--space-lg);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  margin-bottom: -2px;
  color: var(--gray-dark);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.game-create-tabs .tab-btn:hover {
  color: var(--primary);
}

.game-create-tabs .tab-btn.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
  font-weight: 600;
}

.game-create .settings-tab-content {
  animation: fadeIn 0.2s ease;
}

.game-create .settings-info {
  margin-top: var(--space-lg);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius);
  font-size: 0.9rem;
}

.game-create .settings-info p {
  margin: 0 0 var(--space-sm) 0;
}

.game-create .settings-info ul {
  margin: 0;
  padding-left: var(--space-lg);
}

.game-create .settings-info li {
  margin-bottom: var(--space-xs);
}

.create-game-form .form-group {
  margin-bottom: 1.5rem;
}

.create-game-form label {
  display: block;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: var(--dark);
}

.form-input {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--gray-light);
  border-radius: 6px;
  font-size: 1rem;
}

.lesson-selector {
  max-height: 300px;
  overflow-y: auto;
  border: 1px solid var(--gray-light);
  border-radius: 6px;
  padding: 0.5rem;
}

.lesson-selector .lesson-level-header {
  padding: 0.75rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.lesson-selector .lesson-list {
  padding-left: 1rem;
}

.lesson-item {
  padding: 0.5rem 0;
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  padding: 0.25rem 0;
}

.checkbox-label input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--primary);
}

.checkbox-label.child {
  padding-left: 1.5rem;
  font-size: 0.9rem;
  color: var(--gray);
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.form-row small {
  display: block;
  color: var(--gray);
  margin-top: 0.25rem;
  font-size: 0.8rem;
}

.form-buttons {
  display: flex;
  gap: 1rem;
  justify-content: flex-end;
  margin-top: 1.5rem;
}

/* Source Selector */
.source-selector {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.source-btn {
  flex: 1;
  padding: 0.75rem 1rem;
  border: 2px solid var(--gray-light);
  border-radius: 8px;
  background: var(--white);
  color: var(--gray);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.source-btn:hover {
  border-color: var(--primary);
  color: var(--primary);
}

.source-btn.active {
  border-color: var(--primary);
  background: var(--primary);
  color: var(--white);
}

/* JLPT Filter Section */
.jlpt-filter-section {
  border: 1px solid var(--gray-light);
  border-radius: 8px;
  padding: 1rem;
}

.filter-group {
  margin-bottom: 1rem;
}

.filter-group:last-child {
  margin-bottom: 0;
}

.filter-label {
  display: block;
  font-weight: 500;
  margin-bottom: 0.5rem;
  color: var(--dark);
}

.filter-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.filter-chip {
  padding: 0.5rem 1rem;
  border: 1px solid var(--gray-light);
  border-radius: 20px;
  background: var(--white);
  color: var(--gray);
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s;
}

.filter-chip:hover {
  border-color: var(--primary);
  color: var(--primary);
}

.filter-chip.active {
  border-color: var(--primary);
  background: var(--primary);
  color: var(--white);
}

.filter-hint {
  display: block;
  margin-top: 0.25rem;
  font-size: 0.75rem;
  color: var(--gray);
}

/* Game Lobby */
.game-lobby {
  background: var(--white);
  padding: 2rem;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  max-width: 680px;
  width: 100%;
}

.lobby-header {
  text-align: center;
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--light);
}

.lobby-header h2 {
  color: var(--primary);
  margin-bottom: 0.5rem;
  font-size: 1.5rem;
  font-weight: 700;
}

.game-info {
  color: var(--gray);
  font-size: 0.95rem;
  display: flex;
  justify-content: center;
  gap: 1rem;
}

.game-info::before {
  content: '📝';
}

.lobby-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
}

.qr-section {
  text-align: center;
  background: var(--light);
  padding: 1.5rem;
  border-radius: 12px;
}

.qr-code {
  background: var(--white);
  padding: 1rem;
  border-radius: 12px;
  display: inline-block;
  margin-bottom: 1rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.game-code {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  background: var(--white);
  padding: 0.75rem 1rem;
  border-radius: 8px;
  margin-top: 0.5rem;
}

.code-label {
  color: var(--gray);
  font-size: 0.85rem;
}

.code-value {
  font-size: 1.4rem;
  font-weight: 700;
  color: var(--primary);
  letter-spacing: 0.15rem;
  font-family: 'Courier New', monospace;
}

.invite-friends-btn {
  margin-top: 1rem;
  width: 100%;
}

.players-section {
  background: var(--light);
  padding: 1.5rem;
  border-radius: 12px;
}

.players-section h3 {
  margin-bottom: 1rem;
  font-size: 0.95rem;
  color: var(--dark);
  font-weight: 600;
}

.player-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-height: 280px;
  overflow-y: auto;
}

.player-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: var(--white);
  border-radius: 10px;
  transition: transform 0.2s;
}

.player-item:hover {
  transform: translateX(4px);
}

.player-rank {
  font-weight: 700;
  color: var(--primary);
  min-width: 28px;
  font-size: 0.9rem;
}

.player-name {
  flex: 1;
  font-weight: 500;
}

.player-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--gradient-sakura);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  flex-shrink: 0;
  overflow: hidden;
}

.player-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.host-badge {
  background: var(--primary);
  color: white;
  padding: 0.15rem 0.4rem;
  border-radius: 4px;
  font-size: 0.75rem;
  margin-left: 0.5rem;
}

.waiting-message {
  text-align: center;
  color: var(--gray);
  font-style: italic;
  padding: 1rem;
}

.lobby-actions {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-top: 1.5rem;
  text-align: center;
}

.waiting-host {
  color: var(--gray);
  font-style: italic;
}

/* Game Play */
.game-starting {
  text-align: center;
  background: var(--white);
  padding: 3rem;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.game-starting h2 {
  color: var(--dark);
  margin-bottom: 2rem;
}

.countdown {
  font-size: 8rem;
  font-weight: bold;
  color: var(--primary);
  animation: pulse 1s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.game-question,
.game-reveal {
  background: var(--white);
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  max-width: 700px;
  width: 100%;
  position: relative;
}

/* Timer centered at top of screen */
.game-timer-center {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 5rem;
  font-weight: bold;
  color: var(--dark);
  background: var(--white);
  padding: 1rem 2.5rem;
  border-radius: 16px;
  z-index: 100;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
  min-width: 120px;
  text-align: center;
}

.game-timer-center.timer-warning {
  color: var(--danger);
  background: #ffebee;
  animation: pulse 0.5s ease-in-out infinite;
}

.game-timer-center .time-bonus {
  font-size: 1.5rem;
  color: var(--success);
  margin-left: 0.5rem;
}

/* Question header combined with round info */
.question-header-combined {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--gray-light);
  margin-top: 60px; /* Space for centered timer */
}

/* Question text 5x larger */
.game-question .question-text {
  font-size: 8rem;
  line-height: 1.2;
}

.question-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--gray-light);
}

.round-info {
  font-weight: 600;
  color: var(--dark);
}

.special-badge {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
  margin-left: 0.5rem;
}

.timer {
  font-size: 1.5rem;
  font-weight: bold;
  color: var(--dark);
  background: var(--light);
  padding: 0.5rem 1rem;
  border-radius: 8px;
}

.timer-warning {
  color: var(--danger);
  background: #ffebee;
  animation: pulse 0.5s ease-in-out infinite;
}

.time-bonus {
  font-size: 0.8rem;
  color: var(--success);
  margin-left: 0.25rem;
}

.score-info {
  font-weight: 600;
  color: var(--secondary);
}

.question-content {
  text-align: center;
  padding: 2rem;
}

.question-text {
  font-size: 3rem;
  color: var(--dark);
}

.blocked-message {
  text-align: center;
  padding: 2rem;
  color: var(--danger);
  font-weight: 600;
  background: #ffebee;
  border-radius: 8px;
}

.answer-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.answer-btn {
  padding: 1.5rem;
  font-size: 1.1rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  color: white;
}

.answer-btn.answer-0 { background: #e74c3c; }
.answer-btn.answer-1 { background: #3498db; }
.answer-btn.answer-2 { background: #27ae60; }
.answer-btn.answer-3 { background: #f39c12; }

.answer-btn:hover:not(.disabled):not(.selected) {
  transform: scale(1.02);
  filter: brightness(1.1);
}

.answer-btn.selected {
  transform: scale(0.98);
  box-shadow: inset 0 0 0 4px rgba(255, 255, 255, 0.5);
}

.answer-btn.disabled {
  opacity: 0.7;
  cursor: default;
}

.reveal-mode .answer-btn {
  position: relative;
}

.reveal-mode .answer-btn.correct {
  box-shadow: 0 0 0 4px var(--success);
}

.reveal-mode .answer-btn.wrong {
  opacity: 0.5;
}

.correct-icon,
.wrong-icon {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  font-size: 1.5rem;
}

.answered-message {
  text-align: center;
  color: var(--gray);
  margin-top: 1rem;
  font-style: italic;
}

.player-status {
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 1rem;
  flex-wrap: wrap;
}

.player-dot {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--gray-light);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: white;
  font-size: 0.8rem;
  transition: background 0.3s;
}

.player-dot.answered {
  background: var(--success);
}

.reveal-scores {
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 1px solid var(--gray-light);
}

.reveal-scores h3 {
  text-align: center;
  margin-bottom: 1rem;
  color: var(--dark);
}

.mini-leaderboard {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.mini-rank {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  background: var(--light);
  border-radius: 6px;
}

.mini-rank .rank {
  font-weight: bold;
  color: var(--primary);
  min-width: 30px;
}

.mini-rank .name {
  flex: 1;
}

.mini-rank .score {
  font-weight: 600;
  color: var(--dark);
}

.streak-badge {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
  padding: 0.15rem 0.4rem;
  border-radius: 4px;
  font-size: 0.75rem;
}

/* Answer Reveal - New detailed view */
.reveal-answer-section {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1.5rem;
  border-radius: 12px;
  text-align: center;
  margin-bottom: 1.5rem;
}

.correct-answer-display {
  margin-bottom: 0.5rem;
}

.correct-label {
  font-size: 0.9rem;
  opacity: 0.9;
  display: block;
  margin-bottom: 0.25rem;
}

.correct-text {
  font-size: 1.5rem;
  font-weight: bold;
}

.answer-stats {
  font-size: 0.9rem;
  opacity: 0.9;
}

.reveal-players-section {
  margin-top: 1rem;
}

.reveal-players-section h3 {
  font-size: 1rem;
  color: var(--dark);
  margin-bottom: 0.75rem;
}

.reveal-players-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-height: 300px;
  overflow-y: auto;
}

.reveal-player-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  border-radius: 8px;
  background: var(--light);
  transition: transform 0.2s;
}

.reveal-player-item.correct {
  background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
  border-left: 4px solid var(--success);
}

.reveal-player-item.wrong {
  background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
  border-left: 4px solid var(--danger);
}

.reveal-player-item.is-me {
  box-shadow: 0 0 0 2px var(--primary);
}

.reveal-player-rank {
  font-weight: bold;
  font-size: 1.1rem;
  min-width: 35px;
  text-align: center;
}

.reveal-player-info {
  flex: 1;
  min-width: 0;
}

.reveal-player-name {
  font-weight: 600;
  color: var(--dark);
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.me-badge {
  font-size: 0.75rem;
  color: var(--primary);
  margin-left: 0.25rem;
}

.reveal-player-status {
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.status-correct {
  color: var(--success);
  font-weight: 600;
}

.status-wrong {
  color: var(--danger);
  font-weight: 600;
}

.status-blocked {
  color: var(--warning);
}

.status-no-answer {
  color: var(--gray);
}

.reveal-player-score {
  text-align: right;
  min-width: 70px;
}

.score-total {
  font-weight: bold;
  font-size: 1.1rem;
  color: var(--dark);
  display: block;
}

.score-change {
  font-size: 0.85rem;
  font-weight: 600;
}

.score-change.positive {
  color: var(--success);
}

.score-change.negative {
  color: var(--danger);
}

.reveal-player-bonuses {
  display: flex;
  gap: 0.25rem;
}

.bonus-badge {
  font-size: 0.9rem;
  cursor: help;
}

.btn-next {
  width: 100%;
  margin-top: 1rem;
}

/* Power-up Selection */
.game-powerup {
  background: var(--white);
  padding: 2rem;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  max-width: 600px;
  width: 100%;
  text-align: center;
}

.game-powerup h2 {
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.game-powerup p {
  color: var(--gray);
  margin-bottom: 1.5rem;
}

.powerup-list {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
}

.powerup-btn {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  border: 2px solid var(--gray-light);
  border-radius: 8px;
  background: var(--white);
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.powerup-btn:hover {
  border-color: var(--primary);
  background: #fff5f5;
}

.powerup-btn.selected {
  border-color: var(--primary);
  background: #fff5f5;
  box-shadow: 0 0 0 2px rgba(231, 76, 60, 0.2);
}

.powerup-icon {
  font-size: 2rem;
}

.powerup-name {
  font-weight: 600;
  color: var(--dark);
}

.powerup-desc {
  color: var(--gray);
  font-size: 0.85rem;
  margin-left: auto;
}

.target-selection {
  margin-bottom: 1.5rem;
}

.target-selection h3 {
  margin-bottom: 1rem;
  color: var(--dark);
}

.target-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 0.5rem;
}

.target-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.75rem;
  border: 2px solid var(--gray-light);
  border-radius: 8px;
  background: var(--white);
  cursor: pointer;
  transition: all 0.2s;
}

.target-btn:hover {
  border-color: var(--secondary);
}

.target-btn.selected {
  border-color: var(--secondary);
  background: #e3f2fd;
}

.target-name {
  font-weight: 600;
  color: var(--dark);
}

.target-score {
  font-size: 0.85rem;
  color: var(--gray);
}

.shield-icon {
  font-size: 0.9rem;
  margin-top: 0.25rem;
}

.powerup-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-bottom: 1rem;
}

/* Power-up ineligible (wrong answer) */
.powerup-ineligible {
  padding: 2rem;
  background: #fef3f2;
  border-radius: 12px;
  margin-bottom: 1rem;
}

.powerup-ineligible .ineligible-icon {
  font-size: 3rem;
  margin-bottom: 0.5rem;
}

.powerup-ineligible .ineligible-message {
  font-size: 1.1rem;
  color: var(--dark);
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.powerup-ineligible .ineligible-hint {
  font-size: 0.9rem;
  color: var(--gray);
  margin-bottom: 0;
}

/* Power-up confirmed */
.powerup-confirmed {
  padding: 2rem;
  background: #f0fdf4;
  border-radius: 12px;
  margin-bottom: 1rem;
}

.powerup-confirmed .confirmed-icon {
  font-size: 3rem;
  margin-bottom: 0.5rem;
}

.powerup-confirmed .confirmed-message {
  font-size: 1.1rem;
  color: var(--dark);
  font-weight: 600;
  margin-bottom: 1rem;
}

.powerup-confirmed .confirmed-powerup {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: var(--white);
  border-radius: 8px;
  border: 2px solid #22c55e;
  display: inline-flex;
}

.powerup-confirmed .confirmed-powerup .powerup-icon {
  font-size: 1.5rem;
}

.powerup-confirmed .confirmed-powerup .powerup-name {
  font-weight: 600;
  color: #16a34a;
}

/* Leaderboard */
.game-leaderboard {
  background: var(--white);
  padding: 2rem;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  max-width: 500px;
  width: 100%;
  text-align: center;
}

.game-leaderboard h2 {
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.game-leaderboard p {
  color: var(--gray);
  margin-bottom: 1.5rem;
}

.leaderboard-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

.leaderboard-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  background: var(--light);
  border-radius: 8px;
  transition: transform 0.2s;
}

.leaderboard-item.first {
  background: linear-gradient(135deg, #ffd700 0%, #ffec8b 100%);
  font-size: 1.1rem;
}

.leaderboard-item.second {
  background: linear-gradient(135deg, #c0c0c0 0%, #e0e0e0 100%);
}

.leaderboard-item.third {
  background: linear-gradient(135deg, #cd7f32 0%, #daa520 100%);
}

.leaderboard-item.is-me {
  box-shadow: 0 0 0 2px var(--primary);
}

.leaderboard-item .rank {
  font-size: 1.25rem;
  min-width: 40px;
}

.leaderboard-item .name {
  flex: 1;
  text-align: left;
  font-weight: 500;
}

.leaderboard-item .score {
  font-weight: bold;
  color: var(--dark);
}

/* Game Results */
.game-results {
  background: var(--white);
  padding: 2rem;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  max-width: 600px;
  width: 100%;
  text-align: center;
}

.results-header h2 {
  font-size: 2rem;
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.game-title {
  color: var(--gray);
  margin-bottom: 1.5rem;
}

.winner-section {
  margin-bottom: 2rem;
}

.winner-card {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  padding: 1.5rem 3rem;
  background: linear-gradient(135deg, #ffd700 0%, #ffec8b 100%);
  border-radius: 12px;
  animation: winner-glow 2s ease-in-out infinite;
}

@keyframes winner-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
  50% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.8); }
}

.trophy {
  font-size: 3rem;
  margin-bottom: 0.5rem;
}

.winner-name {
  font-size: 1.5rem;
  font-weight: bold;
  color: var(--dark);
}

.winner-score {
  color: var(--dark);
  font-weight: 500;
}

.podium {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 0.5rem;
  margin-bottom: 2rem;
}

.podium-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1rem;
  border-radius: 8px 8px 0 0;
  min-width: 100px;
}

.podium-item.position-1 {
  background: linear-gradient(135deg, #ffd700 0%, #ffec8b 100%);
  height: 160px;
  order: 2;
}

.podium-item.position-2 {
  background: linear-gradient(135deg, #c0c0c0 0%, #e0e0e0 100%);
  height: 120px;
  order: 1;
}

.podium-item.position-3 {
  background: linear-gradient(135deg, #cd7f32 0%, #daa520 100%);
  height: 100px;
  order: 3;
}

.podium-rank {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

.podium-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
  overflow: hidden;
}

.podium-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.podium-name {
  font-weight: 600;
  font-size: 0.9rem;
  margin-bottom: 0.25rem;
}

.podium-score {
  font-weight: bold;
}

.my-result {
  background: #e3f2fd;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  color: var(--secondary);
  font-weight: 500;
}

.full-rankings h3 {
  margin-bottom: 1rem;
  color: var(--dark);
}

.ranking-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-height: 200px;
  overflow-y: auto;
  margin-bottom: 1.5rem;
}

.ranking-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  background: var(--light);
  border-radius: 6px;
}

.ranking-item.is-me {
  background: #e3f2fd;
}

.ranking-avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--gradient-sakura);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  flex-shrink: 0;
  overflow: hidden;
}

.ranking-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.ranking-item .streak {
  font-size: 0.85rem;
  color: var(--danger);
}

.game-stats {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: var(--light);
  border-radius: 8px;
}

.stat {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.stat-label {
  font-size: 0.85rem;
  color: var(--gray);
}

.stat-value {
  font-size: 1.5rem;
  font-weight: bold;
  color: var(--dark);
}

.results-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
}

/* Loading State */
.loading-state {
  text-align: center;
  padding: 3rem;
  color: var(--gray);
}

/* ============ JLPT PAGE STYLES ============ */

.jlpt-page {
  background: transparent;
  padding: var(--space-lg);
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

.jlpt-page > .jlpt-container {
  background: var(--white);
  border-radius: var(--radius-xl);
  padding: var(--space-xl);
  box-shadow: var(--shadow-lg);
  max-width: 900px;
  width: 100%;
}

.jlpt-page h2 {
  color: var(--primary);
}

.jlpt-form {
  background: var(--light);
  padding: 1.5rem;
  border-radius: 12px;
  margin-bottom: 1.5rem;
}

.jlpt-form h3 {
  margin-bottom: 1rem;
  color: var(--dark);
}

.answers-grid {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.answer-input-row {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.answer-input-row input[type="radio"] {
  width: 20px;
  height: 20px;
  accent-color: var(--success);
}

.answer-input-row input[type="text"] {
  flex: 1;
  padding: 0.75rem;
  border: 1px solid var(--gray-light);
  border-radius: 6px;
  font-size: 1rem;
}

.answer-input-row input[type="text"].correct-answer {
  border: 2px solid var(--success);
}

.filter-select {
  padding: 0.4rem 0.8rem;
  border: 1px solid var(--gray-light);
  border-radius: 6px;
  font-size: 0.9rem;
  background: var(--white);
}

.questions-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.question-card {
  background: var(--light);
  border-radius: 12px;
  overflow: hidden;
}

.question-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.question-level {
  background: rgba(255, 255, 255, 0.2);
  color: var(--white);
  padding: 0.25rem 0.75rem;
  border-radius: 4px;
  font-weight: bold;
  font-size: 0.85rem;
}

.question-category {
  background: rgba(255, 255, 255, 0.15);
  color: var(--white);
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.8rem;
}

.question-actions {
  margin-left: auto;
  display: flex;
  gap: 0.5rem;
}

.question-actions .btn-icon {
  background: rgba(255, 255, 255, 0.2);
  color: var(--white);
  border: none;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  font-size: 1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.question-actions .btn-icon:hover {
  background: rgba(255, 255, 255, 0.3);
}

.question-actions .btn-icon.danger:hover {
  background: var(--danger);
}

.question-content {
  padding: 1rem;
}

.question-content .question-text {
  font-size: 1.1rem;
  color: var(--dark);
  margin-bottom: 1rem;
  line-height: 1.5;
}

.question-answers {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.5rem;
}

.answer-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 0.75rem;
  background: var(--white);
  border-radius: 6px;
  border: 1px solid var(--gray-light);
}

.answer-item.correct {
  background: #e8f5e9;
  border-color: var(--success);
}

.answer-letter {
  font-weight: bold;
  color: var(--gray);
}

.answer-text {
  flex: 1;
  color: var(--dark);
}

.correct-mark {
  color: var(--success);
  font-weight: bold;
}

.question-explanation {
  margin-top: 1rem;
  padding: 0.75rem;
  background: #fff3e0;
  border-radius: 6px;
  font-size: 0.9rem;
  color: #e65100;
}

/* JLPT Management Section */
.jlpt-management {
  padding: 1rem 0;
}

/* ============ JLPT SETUP PAGE - Japanese Style ============ */
.jlpt-setup-container {
  background: var(--jp-washi-warm);
  border-radius: var(--radius-lg);
  padding: var(--space-xl);
  max-width: 900px;
  width: 100%;
  margin: 0 auto;
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--border);
}

.jlpt-setup-header {
  text-align: center;
  margin-bottom: var(--space-xl);
  padding-bottom: var(--space-lg);
  border-bottom: 1px solid var(--border);
}

.jlpt-setup-header h1 {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  margin-bottom: var(--space-sm);
}

.jlpt-title-jp {
  font-family: var(--font-jp-display);
  font-size: var(--font-size-xl);
  color: var(--jp-shu);
  letter-spacing: 2px;
}

.jlpt-title-vi {
  font-size: var(--font-size-2xl);
  font-weight: 700;
  color: var(--jp-sumi);
}

.jlpt-subtitle {
  color: var(--jp-sumi-medium);
  font-size: var(--font-size-md);
}

/* JLPT Sections */
.jlpt-section {
  margin-bottom: var(--space-xl);
}

.jlpt-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-md);
}

.jlpt-section-header h3 {
  font-family: var(--font-jp-body);
  font-size: var(--font-size-lg);
  color: var(--jp-sumi);
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.jlpt-section-header h3::before {
  content: '';
  width: 4px;
  height: 20px;
  background: var(--jp-shu);
  border-radius: 2px;
}

.btn-link-sm {
  background: none;
  border: none;
  color: var(--jp-shu);
  font-size: var(--font-size-sm);
  cursor: pointer;
  text-decoration: underline;
  transition: color var(--transition-fast);
}

.btn-link-sm:hover {
  color: var(--jp-shu-dark);
}

/* Level Grid */
.jlpt-level-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: var(--space-sm);
}

.jlpt-level-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: var(--space-md);
  background: var(--jp-washi);
  border: 2px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-normal);
  position: relative;
}

.jlpt-level-card:hover {
  border-color: var(--jp-sakura);
  background: var(--jp-sakura-light);
}

.jlpt-level-card.selected {
  border-color: var(--jp-shu);
  background: rgba(227, 66, 52, 0.08);
}

.jlpt-level-card .level-badge {
  font-family: var(--font-jp-body);
  font-size: var(--font-size-xl);
  font-weight: 700;
  color: var(--jp-ai);
}

.jlpt-level-card.selected .level-badge {
  color: var(--jp-shu);
}

.jlpt-level-card .level-count {
  font-size: var(--font-size-xs);
  color: var(--jp-sumi-medium);
}

.jlpt-level-card .check-icon {
  position: absolute;
  top: 8px;
  right: 8px;
  color: var(--jp-shu);
}

/* Category Grid */
.jlpt-category-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--space-sm);
}

.jlpt-category-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: var(--space-lg) var(--space-md);
  background: var(--jp-washi);
  border: 2px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-normal);
  position: relative;
}

.jlpt-category-card:hover {
  border-color: var(--jp-sakura);
  background: var(--jp-sakura-light);
}

.jlpt-category-card.selected {
  border-color: var(--jp-shu);
  background: rgba(227, 66, 52, 0.08);
}

.jlpt-category-card .category-icon {
  font-family: var(--font-jp-kanji);
  font-size: 2rem;
  color: var(--jp-ai);
  line-height: 1;
}

.jlpt-category-card.selected .category-icon {
  color: var(--jp-shu);
}

.jlpt-category-card .category-name {
  font-weight: 600;
  color: var(--jp-sumi);
}

.jlpt-category-card .category-count {
  font-size: var(--font-size-xs);
  color: var(--jp-sumi-medium);
}

.jlpt-category-card .check-icon {
  position: absolute;
  top: 8px;
  right: 8px;
  color: var(--jp-shu);
}

/* Question Count - Toggle Button */
.btn-toggle-advanced {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: var(--jp-washi);
  border: 1px solid var(--border);
  padding: 0.5rem 1rem;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  color: var(--jp-sumi-medium);
  cursor: pointer;
  transition: all var(--transition-normal);
}

.btn-toggle-advanced:hover {
  background: var(--jp-sakura-light);
  border-color: var(--jp-sakura);
  color: var(--jp-shu);
}

/* Simple Count Options */
.jlpt-simple-count {
  background: var(--jp-washi);
  padding: var(--space-lg);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.count-options {
  display: flex;
  gap: var(--space-sm);
  flex-wrap: wrap;
  margin-bottom: var(--space-md);
}

.count-option {
  padding: 0.75rem 1.5rem;
  background: var(--jp-washi-warm);
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-md);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-normal);
}

.count-option:hover {
  border-color: var(--jp-sakura);
  background: var(--jp-sakura-light);
}

.count-option.selected {
  border-color: var(--jp-shu);
  background: var(--jp-shu);
  color: var(--jp-washi);
}

.count-note {
  color: var(--jp-sumi-medium);
  font-size: var(--font-size-sm);
}

.count-note strong {
  color: var(--jp-shu);
}

/* Advanced Setup - Per Section Config */
.jlpt-advanced-setup {
  background: var(--jp-washi);
  padding: var(--space-lg);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.no-sections {
  text-align: center;
  color: var(--jp-sumi-medium);
  padding: var(--space-lg);
}

.section-config-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.section-config-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md);
  background: var(--jp-washi-warm);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
}

.section-info {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.section-icon {
  font-family: var(--font-jp-kanji);
  font-size: 1.5rem;
  color: var(--jp-ai);
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--jp-washi);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
}

.section-name {
  font-weight: 600;
  color: var(--jp-sumi);
}

.section-available {
  font-size: var(--font-size-xs);
  color: var(--jp-sumi-medium);
}

.section-count-control {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.count-btn {
  width: 40px;
  height: 36px;
  background: var(--jp-washi);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.count-btn:hover:not(:disabled) {
  background: var(--jp-sakura-light);
  border-color: var(--jp-sakura);
}

.count-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.count-input {
  width: 60px;
  height: 36px;
  text-align: center;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-md);
  font-weight: 600;
  background: var(--jp-washi);
}

.count-input:focus {
  outline: none;
  border-color: var(--jp-shu);
  box-shadow: 0 0 0 3px rgba(227, 66, 52, 0.1);
}

/* Summary Section */
.jlpt-summary {
  background: linear-gradient(135deg, var(--jp-ai-dark) 0%, var(--jp-ai) 100%);
  padding: var(--space-xl);
  border-radius: var(--radius-md);
  color: var(--jp-washi);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.summary-stats {
  display: flex;
  gap: var(--space-xl);
}

.summary-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}

.summary-value {
  font-size: var(--font-size-2xl);
  font-weight: 700;
}

.summary-label {
  font-size: var(--font-size-sm);
  opacity: 0.8;
}

.btn-start {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem 2rem;
  font-size: var(--font-size-lg);
  font-weight: 600;
}

/* Result Header with Badge */
.result-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
}

.result-badge {
  font-family: var(--font-jp-kanji);
  font-size: 1.5rem;
  color: var(--jp-shu);
  padding: 0.5rem 1rem;
  background: rgba(227, 66, 52, 0.1);
  border-radius: var(--radius-sm);
  border: 2px solid var(--jp-shu);
}

/* Practice Score */
.practice-score {
  display: flex;
  gap: var(--space-md);
}

.score-correct {
  color: var(--jp-matcha);
  font-weight: 600;
}

.score-wrong {
  color: var(--danger);
  font-weight: 600;
}

/* Review Meta */
.review-meta {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.review-level {
  background: var(--jp-ai);
  color: var(--jp-washi);
  padding: 0.2rem 0.5rem;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 600;
}

.review-category {
  background: var(--jp-kinari);
  color: var(--jp-sumi-medium);
  padding: 0.2rem 0.5rem;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
}

/* Result Stats with Icons */
.result-stats .stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.result-stats .stat-item.correct svg {
  color: var(--jp-matcha);
}

.result-stats .stat-item.wrong svg {
  color: var(--danger);
}

.result-stats .stat-item.accuracy .stat-value {
  font-size: var(--font-size-3xl);
  color: var(--jp-shu);
}

/* Responsive */
@media (max-width: 768px) {
  .jlpt-level-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .jlpt-category-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .jlpt-summary {
    flex-direction: column;
    gap: var(--space-lg);
    text-align: center;
  }

  .summary-stats {
    width: 100%;
    justify-content: space-around;
  }

  .section-config-item {
    flex-direction: column;
    gap: var(--space-md);
    align-items: stretch;
  }

  .section-count-control {
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .jlpt-level-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .jlpt-category-grid {
    grid-template-columns: 1fr;
  }

  .count-options {
    justify-content: center;
  }

  .count-option {
    flex: 1;
    min-width: 80px;
  }
}

/* ============ KAIWA DEFAULT QUESTIONS STYLES ============ */

.kaiwa-questions-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.kaiwa-question-item {
  background: var(--white);
  border-radius: var(--radius-md);
  padding: 1rem;
  box-shadow: var(--shadow-sm);
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1rem;
  border: 1px solid var(--gray-light);
}

.kaiwa-question-content {
  flex: 1;
}

.kaiwa-question-ja {
  font-size: 1.1rem;
  color: var(--dark);
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

.kaiwa-question-vi {
  font-size: 0.9rem;
  color: var(--gray);
  margin-bottom: 0.5rem;
}

.kaiwa-question-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  align-items: center;
}

.kaiwa-question-meta .meta-badge {
  background: var(--primary-light);
  color: var(--primary);
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
}

.kaiwa-question-meta .meta-context {
  font-size: 0.85rem;
  color: var(--gray);
  font-style: italic;
}

.kaiwa-suggested-answers {
  margin-top: 0.75rem;
  padding-top: 0.75rem;
  border-top: 1px solid var(--gray-light);
}

.kaiwa-suggested-answers .answers-label {
  font-size: 0.8rem;
  color: var(--gray);
  margin-right: 0.5rem;
}

.kaiwa-suggested-answers .answer-item {
  display: inline-block;
  background: var(--light);
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.9rem;
  margin: 0.25rem;
  color: var(--dark);
}

.kaiwa-question-actions {
  display: flex;
  gap: 0.5rem;
  flex-shrink: 0;
}

.kaiwa-question-form {
  background: var(--light);
  border-radius: var(--radius-md);
  padding: 1.5rem;
  margin-top: 1rem;
}

.kaiwa-question-form h3 {
  margin: 0 0 1rem 0;
  color: var(--dark);
}

.kaiwa-question-form .form-group {
  margin-bottom: 1rem;
}

.kaiwa-question-form .form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: var(--dark);
}

.kaiwa-question-form textarea,
.kaiwa-question-form input[type="text"],
.kaiwa-question-form select {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--gray-light);
  border-radius: var(--radius-sm);
  font-size: 1rem;
  background: var(--white);
}

.kaiwa-question-form textarea:focus,
.kaiwa-question-form input[type="text"]:focus,
.kaiwa-question-form select:focus {
  outline: none;
  border-color: var(--primary);
}

.suggested-answer-row {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.suggested-answer-row input {
  flex: 1;
}

.form-actions {
  display: flex;
  gap: 0.5rem;
  margin-top: 1.5rem;
}

/* ============ KAIWA QUESTION SELECTOR STYLES (Kaiwa Page) ============ */

.kaiwa-question-selector-section {
  background: var(--light);
  border-radius: var(--radius-lg);
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.kaiwa-selector-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.kaiwa-mode-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  border: 2px solid var(--primary);
  background: transparent;
  color: var(--primary);
  border-radius: var(--radius-md);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.kaiwa-mode-btn:hover {
  background: var(--primary);
  color: white;
}

.kaiwa-mode-btn.active {
  background: var(--primary);
  color: white;
}

.kaiwa-clear-selection-btn {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.5rem 0.75rem;
  border: none;
  background: var(--danger-light);
  color: var(--danger);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.kaiwa-clear-selection-btn:hover {
  background: var(--danger);
  color: white;
}

.kaiwa-selected-question-preview {
  background: white;
  border-radius: var(--radius-md);
  padding: 1rem;
  margin-bottom: 1rem;
  border: 2px solid var(--primary);
}

.selected-question-badges {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}

.selected-question-badges .badge {
  background: var(--primary);
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
}

.selected-question-text {
  font-size: 1.1rem;
  color: var(--dark);
  margin: 0 0 0.5rem 0;
  line-height: 1.6;
}

.selected-question-vi {
  font-size: 0.9rem;
  color: var(--gray);
  margin: 0 0 0.5rem 0;
}

.selected-question-context {
  font-size: 0.85rem;
  color: var(--gray-dark);
  margin: 0;
  font-style: italic;
}

.kaiwa-question-selector {
  background: white;
  border-radius: var(--radius-md);
  padding: 1rem;
  max-height: 350px;
  overflow-y: auto;
}

.selector-breadcrumb {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--gray-light);
  margin-bottom: 1rem;
  color: var(--gray);
  font-size: 0.9rem;
}

.selector-breadcrumb button {
  display: flex;
  align-items: center;
  padding: 0.25rem 0.5rem;
  border: none;
  background: var(--light);
  color: var(--dark);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 0.2s ease;
}

.selector-breadcrumb button:hover {
  background: var(--primary);
  color: white;
}

.selector-grid {
  display: grid;
  gap: 0.75rem;
}

.selector-grid.levels {
  grid-template-columns: repeat(5, 1fr);
}

.selector-grid.topics {
  grid-template-columns: repeat(3, 1fr);
}

.selector-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  border: 1px solid var(--gray-light);
  background: var(--light);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: center;
}

.selector-item:hover {
  border-color: var(--primary);
  background: white;
  transform: translateY(-2px);
}

.selector-item.level {
  font-weight: 600;
  color: var(--primary);
  font-size: 1.1rem;
}

.selector-item.topic .topic-icon {
  font-size: 1.5rem;
}

.selector-item.topic .topic-label {
  font-size: 0.85rem;
  color: var(--dark);
}

.selector-question-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.selector-folders {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--gray-light);
}

.selector-folder-btn {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  border: 1px solid var(--gray-light);
  background: var(--light);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
}

.selector-folder-btn:hover {
  border-color: var(--primary);
  background: white;
}

.selector-folder-btn span {
  flex: 1;
  font-weight: 500;
  color: var(--dark);
}

.selector-folder-btn svg:last-child {
  color: var(--gray);
}

.selector-questions {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.selector-question-btn {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  border: 1px solid var(--gray-light);
  background: white;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
}

.selector-question-btn:hover {
  border-color: var(--primary);
  background: var(--light);
}

.selector-question-btn.selected {
  border-color: var(--primary);
  background: var(--primary);
  color: white;
}

.selector-question-btn.selected .question-vi {
  color: rgba(255, 255, 255, 0.8);
}

.selector-question-btn .question-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.selector-question-btn .question-ja {
  font-size: 0.95rem;
  line-height: 1.5;
}

.selector-question-btn .question-vi {
  font-size: 0.85rem;
  color: var(--gray);
}

.selector-question-list .no-questions {
  text-align: center;
  padding: 2rem;
  color: var(--gray);
  font-size: 0.9rem;
}

/* Mobile responsive */
@media (max-width: 768px) {
  .kaiwa-question-selector-section {
    padding: 1rem;
  }

  .kaiwa-selector-header {
    flex-direction: column;
    align-items: stretch;
    gap: 0.75rem;
  }

  .selector-grid.levels {
    grid-template-columns: repeat(3, 1fr);
  }

  .selector-grid.topics {
    grid-template-columns: repeat(2, 1fr);
  }

  .kaiwa-question-selector {
    max-height: 300px;
  }
}

/* ============ JLPT PRACTICE STYLES ============ */

.jlpt-practice-setup {
  text-align: center;
  max-width: 500px;
  margin: 0 auto;
}

.jlpt-practice-setup h2 {
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.practice-description {
  color: var(--gray);
  margin-bottom: 2rem;
}

.practice-options {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 1.5rem;
  text-align: left;
}

.practice-options .form-group {
  background: var(--light);
  padding: 1rem;
  border-radius: 8px;
}

.practice-options select {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--gray-light);
  border-radius: 6px;
  font-size: 1rem;
  background: var(--white);
}

.practice-info {
  padding: 1rem;
  background: var(--light);
  border-radius: 8px;
  margin-bottom: 1.5rem;
}

.practice-info p {
  margin: 0;
  color: var(--dark);
}

/* Practice View */
.jlpt-practice {
  max-width: 700px;
  margin: 0 auto;
}

.practice-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  background: var(--light);
  border-radius: 8px;
  margin-bottom: 1.5rem;
}

.practice-progress {
  font-weight: 600;
  color: var(--dark);
}

.practice-score {
  color: var(--success);
  font-weight: 500;
}

.practice-question-card {
  background: var(--white);
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  margin-bottom: 1.5rem;
}

.question-meta {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.practice-question-card .question-text {
  font-size: 1.25rem;
  color: var(--dark);
  margin-bottom: 1.5rem;
  line-height: 1.6;
}

.practice-answers {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.practice-answer-btn {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  background: var(--light);
  border: 2px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  text-align: left;
  font-size: 1rem;
  transition: all 0.2s;
}

.practice-answer-btn:hover:not(:disabled) {
  background: #e8e8e8;
}

.practice-answer-btn.selected {
  border-color: var(--primary);
  background: #fff5f5;
}

.practice-answer-btn.correct {
  border: 3px solid var(--success);
  background: #e8f5e9;
}

.practice-answer-btn.wrong {
  border: 3px solid var(--danger);
  background: #ffebee;
}

.practice-answer-btn .answer-letter {
  font-weight: bold;
  color: var(--gray);
}

.practice-answer-btn .answer-text {
  flex: 1;
}

.correct-icon {
  color: var(--success);
  font-weight: bold;
  font-size: 1.2rem;
}

.wrong-icon {
  color: var(--danger);
  font-weight: bold;
  font-size: 1.2rem;
}

.practice-explanation {
  margin-top: 1rem;
  padding: 1rem;
  background: #fff3e0;
  border-radius: 8px;
  color: #e65100;
}

.practice-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
}

/* Result View */
.jlpt-practice-result {
  max-width: 700px;
  margin: 0 auto;
}

.jlpt-practice-result h2 {
  text-align: center;
  color: var(--primary);
  margin-bottom: 1.5rem;
}

.result-stats {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin-bottom: 1.5rem;
}

.result-stats .stat-item {
  text-align: center;
  padding: 1.5rem 2rem;
  background: var(--light);
  border-radius: 12px;
}

.result-stats .stat-value {
  font-size: 2rem;
  font-weight: bold;
  color: var(--primary);
  display: block;
}

.result-stats .stat-label {
  color: var(--gray);
  font-size: 0.9rem;
}

.result-message {
  text-align: center;
  margin-bottom: 1.5rem;
  padding: 1rem;
  border-radius: 8px;
}

.result-message .success {
  color: var(--success);
  background: #e8f5e9;
  padding: 1rem;
  border-radius: 8px;
}

.result-message .good {
  color: #e67e22;
  background: #fff3e0;
  padding: 1rem;
  border-radius: 8px;
}

.result-message .needs-work {
  color: var(--danger);
  background: #ffebee;
  padding: 1rem;
  border-radius: 8px;
}

.result-actions {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.result-review {
  margin-top: 2rem;
}

.result-review h3 {
  color: var(--dark);
  margin-bottom: 1rem;
}

.review-item {
  background: var(--light);
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 1rem;
  border-left: 4px solid var(--gray-light);
}

.review-item.correct {
  border-left-color: var(--success);
}

.review-item.wrong {
  border-left-color: var(--danger);
}

.review-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.review-number {
  font-weight: 600;
  color: var(--dark);
}

.review-status {
  font-weight: 500;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.review-status.correct {
  color: var(--success);
  background: #e8f5e9;
}

.review-status.wrong {
  color: var(--danger);
  background: #ffebee;
}

.review-question {
  margin-bottom: 0.75rem;
  color: var(--dark);
}

.review-answers {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.review-answer {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  background: var(--white);
  border-radius: 4px;
}

.review-answer.correct {
  background: #e8f5e9;
  border: 2px solid var(--success);
}

.review-answer.selected-wrong {
  background: #ffebee;
  border: 2px solid var(--danger);
}

.wrong-mark {
  color: var(--danger);
  font-weight: bold;
}

.review-explanation {
  margin-top: 0.75rem;
  padding: 0.75rem;
  background: #fff3e0;
  border-radius: 6px;
  font-size: 0.9rem;
  color: #e65100;
}

/* ===== JLPT LEVEL ASSESSMENT ===== */
.level-assessment {
  background: var(--light);
  border-radius: 12px;
  padding: 1.5rem;
  margin: 1.5rem 0;
}

.level-assessment h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--dark);
  margin-bottom: 1rem;
  font-size: 1.2rem;
}

.level-assessment h3 svg {
  color: #f59e0b;
}

/* Category Breakdown */
.category-breakdown {
  margin-bottom: 1.5rem;
}

.category-breakdown h4 {
  font-size: 0.95rem;
  color: #666;
  margin-bottom: 1rem;
}

.breakdown-grid {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.breakdown-item {
  background: var(--white);
  border-radius: 8px;
  padding: 0.75rem 1rem;
}

.breakdown-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.breakdown-icon {
  font-size: 1.2rem;
  font-weight: bold;
}

.breakdown-name {
  font-weight: 500;
  color: var(--dark);
}

.breakdown-bar {
  height: 8px;
  background: #e0e0e0;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.25rem;
}

.breakdown-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.5s ease;
}

.breakdown-stats {
  display: flex;
  justify-content: space-between;
  font-size: 0.85rem;
  color: #666;
}

.breakdown-percent {
  font-weight: 600;
}

/* Assessment Feedback */
.assessment-feedback {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.feedback-section {
  background: var(--white);
  border-radius: 8px;
  padding: 1rem;
}

.feedback-section h4 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.95rem;
  margin-bottom: 0.75rem;
}

.feedback-section.strengths h4 {
  color: #10b981;
}

.feedback-section.strengths h4 svg {
  color: #10b981;
}

.feedback-section.weaknesses h4 {
  color: #ef4444;
}

.feedback-section.weaknesses h4 svg {
  color: #ef4444;
}

.feedback-section.recommendations h4 {
  color: #f59e0b;
}

.feedback-section.recommendations h4 svg {
  color: #f59e0b;
}

.feedback-section ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.feedback-section li {
  padding: 0.5rem 0;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  font-size: 0.9rem;
  color: #333;
}

.feedback-section li:last-child {
  border-bottom: none;
}

/* Result stats with time */
.result-stats .stat-item.time {
  background: linear-gradient(135deg, #3b82f6, #60a5fa);
}

.result-stats .stat-item.time svg {
  color: white;
}

/* Coverage hint */
.coverage-hint {
  color: #888;
  font-size: 0.85rem;
}

/* Result review header with icon */
.result-review h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.result-review h3 svg {
  color: var(--primary);
}

/* JLPT settings section */
.jlpt-settings-section .setting-divider {
  margin: 1rem 0;
  border-top: 1px dashed rgba(0, 0, 0, 0.1);
}

/* Historical Weak Areas */
.historical-weak-areas {
  margin-top: 1.5rem;
  padding: 1rem;
  background: linear-gradient(135deg, #fff5f5 0%, #fef2f2 100%);
  border-radius: 12px;
  border: 1px solid #fecaca;
}

.historical-weak-areas h4 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0 0 1rem 0;
  font-size: 1rem;
  color: #dc2626;
}

.historical-weak-areas h4 svg {
  color: #ef4444;
}

.weak-areas-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.weak-area-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #fee2e2;
}

.weak-rank {
  font-weight: 700;
  color: #dc2626;
  min-width: 2rem;
}

.weak-info {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
}

.weak-level {
  padding: 0.2rem 0.5rem;
  background: var(--primary);
  color: white;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 600;
}

.weak-category {
  font-size: 0.9rem;
  color: #333;
}

.weak-stats {
  font-size: 0.85rem;
  color: #dc2626;
  font-weight: 500;
}

.weak-hint {
  margin-top: 0.75rem;
  font-size: 0.8rem;
  color: #888;
  text-align: center;
  font-style: italic;
}

/* Quiz Game Responsive - Tablet */
@media (max-width: 768px) {
  .lobby-content {
    grid-template-columns: 1fr;
  }

  .game-create,
  .game-menu,
  .game-join {
    margin: 0.5rem;
    width: calc(100% - 1rem);
  }

  .answer-options {
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
  }

  .answer-btn {
    min-height: 60px;
    font-size: 1rem;
  }
}

/* Quiz Game Responsive - Mobile */
@media (max-width: 600px) {
  .form-row {
    grid-template-columns: 1fr;
  }

  .answer-options {
    grid-template-columns: 1fr;
  }

  .answer-btn {
    min-height: 56px;
    padding: 1rem;
  }

  .question-text {
    font-size: 1.75rem;
  }

  /* Game question text - larger on mobile */
  .game-question .question-text {
    font-size: 4rem;
  }

  /* Timer centered on mobile */
  .game-timer-center {
    top: 60px;
    font-size: 3rem;
    padding: 0.75rem 1.5rem;
    min-width: 80px;
  }

  .question-header-combined {
    margin-top: 50px;
  }

  .podium {
    flex-direction: column;
    align-items: center;
  }

  .podium-item {
    width: 100%;
    height: auto !important;
    order: unset !important;
  }

  .filter-bar {
    flex-direction: column;
    align-items: stretch;
  }

  .filter-bar-inline {
    flex-direction: column;
    align-items: stretch;
  }

  .filter-btn {
    width: 100%;
    min-height: 35px;
  }
}

/* ============ UTILITY CLASSES ============ */

/* Text utilities */
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }
.text-muted { color: var(--gray); }
.text-primary { color: var(--primary); }
.text-success { color: var(--success); }
.text-danger { color: var(--danger); }
.text-sm { font-size: var(--font-size-sm); }
.text-lg { font-size: var(--font-size-lg); }
.font-bold { font-weight: 700; }
.font-medium { font-weight: 500; }

/* Spacing utilities */
.mt-sm { margin-top: var(--space-sm); }
.mt-md { margin-top: var(--space-md); }
.mt-lg { margin-top: var(--space-lg); }
.mb-sm { margin-bottom: var(--space-sm); }
.mb-md { margin-bottom: var(--space-md); }
.mb-lg { margin-bottom: var(--space-lg); }
.p-sm { padding: var(--space-sm); }
.p-md { padding: var(--space-md); }
.p-lg { padding: var(--space-lg); }

/* Flexbox utilities */
.flex { display: flex; }
.flex-center { display: flex; align-items: center; justify-content: center; }
.flex-between { display: flex; align-items: center; justify-content: space-between; }
.flex-col { flex-direction: column; }
.gap-sm { gap: var(--space-sm); }
.gap-md { gap: var(--space-md); }
.gap-lg { gap: var(--space-lg); }

/* ============ LOADING STATES ============ */

.loading {
  position: relative;
  pointer-events: none;
}

.loading::after {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  top: 50%;
  left: 50%;
  margin: -10px 0 0 -10px;
  border: 2px solid var(--border);
  border-radius: 50%;
  border-top-color: var(--primary);
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.skeleton {
  background: linear-gradient(90deg, var(--light) 25%, var(--border) 50%, var(--light) 75%);
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s ease-in-out infinite;
  border-radius: var(--radius-md);
}

@keyframes skeleton-loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* ============ FOCUS STATES (Accessibility) ============ */

*:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

/* ============ SCROLLBAR STYLING ============ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--light);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--gray-light);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--gray);
}

/* ============ LECTURE PAGE STYLES ============ */

.lecture-page {
  padding: var(--space-lg);
  background: var(--white);
}

.lecture-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
}

.lecture-header h1 {
  font-size: var(--font-size-2xl);
  color: var(--dark);
  margin: 0;
}

.lecture-filters {
  display: flex;
  gap: var(--space-md);
  margin-bottom: var(--space-lg);
}

.lecture-filters .search-input {
  flex: 1;
  max-width: 400px;
  padding: var(--space-sm) var(--space-md);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-md);
}

.lecture-filters .filter-select {
  padding: var(--space-sm) var(--space-md);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-md);
  background: var(--white);
}

.lecture-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--space-lg);
}

/* Lecture levels - grouped by JLPT */
.lecture-levels {
  display: flex;
  flex-direction: column;
  gap: var(--space-xl);
}

.lecture-level-section {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  box-shadow: var(--shadow-sm);
}

.lecture-level-header {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  margin-bottom: var(--space-lg);
  padding-bottom: var(--space-md);
  border-bottom: 1px solid var(--border);
  border-left: 4px solid;
  padding-left: var(--space-md);
}

.lecture-level-header h2 {
  margin: 0;
  font-size: var(--font-size-xl);
  font-weight: 700;
}

.lecture-level-header .level-description {
  color: var(--gray);
  font-size: var(--font-size-sm);
}

.lecture-level-header .level-count {
  margin-left: auto;
  background: var(--light);
  color: var(--gray-dark);
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: 500;
}

/* ========== Lecture Navigation Breadcrumb ========== */
.lecture-nav-breadcrumb {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-bottom: var(--space-lg);
  padding: var(--space-sm) var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
}

.lecture-nav-breadcrumb .breadcrumb-link {
  background: none;
  border: none;
  color: var(--primary);
  cursor: pointer;
  font-size: var(--font-size-sm);
  padding: 0;
  transition: color var(--transition-fast);
}

.lecture-nav-breadcrumb .breadcrumb-link:hover {
  color: var(--primary-dark);
  text-decoration: underline;
}

.lecture-nav-breadcrumb .breadcrumb-separator {
  color: var(--gray-light);
  font-weight: bold;
}

.lecture-nav-breadcrumb .breadcrumb-current {
  font-weight: 600;
  color: var(--dark);
}

/* ========== Level Cards Grid ========== */
.lecture-levels-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--space-lg);
}

.lecture-level-card {
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  border: 2px solid transparent;
  border-top-width: 4px;
}

.lecture-level-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.lecture-level-card .level-card-header {
  padding: var(--space-lg);
  text-align: center;
}

.lecture-level-card .level-card-header h2 {
  margin: 0;
  color: var(--white);
  font-size: var(--font-size-2xl);
  font-weight: 700;
}

.lecture-level-card .level-card-body {
  padding: var(--space-md);
  text-align: center;
}

.lecture-level-card .level-card-body .level-description {
  color: var(--gray);
  font-size: var(--font-size-sm);
  margin-bottom: var(--space-sm);
}

.lecture-level-card .level-stats {
  display: flex;
  justify-content: center;
  gap: var(--space-lg);
  color: var(--gray-dark);
  font-size: var(--font-size-xs);
}

/* ========== Folder Cards Grid ========== */
.lecture-folders-grid {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.lecture-folder-card {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md) var(--space-lg);
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  cursor: pointer;
  transition: transform 0.15s, box-shadow 0.15s, background 0.15s;
  border: 1px solid var(--border);
}

.lecture-folder-card:hover {
  transform: translateX(4px);
  box-shadow: var(--shadow-md);
  background: var(--light);
}

.lecture-folder-card .folder-card-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.lecture-folder-card .folder-card-content {
  flex: 1;
  min-width: 0;
}

.lecture-folder-card .folder-card-content h3 {
  margin: 0;
  font-size: var(--font-size-lg);
  color: var(--dark);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.lecture-folder-card .folder-lecture-count {
  color: var(--gray);
  font-size: var(--font-size-sm);
}

.lecture-folder-card .folder-card-arrow {
  font-size: 1.5rem;
  color: var(--gray-light);
  flex-shrink: 0;
}

/* ========== Floating Notes Panel ========== */
.floating-notes-panel {
  position: absolute;
  top: var(--space-md);
  right: var(--space-md);
  width: 280px;
  max-height: 200px;
  background: rgba(255, 255, 255, 0.95);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  z-index: 100;
  overflow: hidden;
  backdrop-filter: blur(8px);
}

.floating-notes-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-sm) var(--space-md);
  background: var(--primary);
  color: var(--white);
  font-size: var(--font-size-sm);
  font-weight: 600;
}

.floating-notes-header .btn-minimize {
  background: none;
  border: none;
  color: var(--white);
  font-size: 1.2rem;
  cursor: pointer;
  padding: 0 4px;
  line-height: 1;
  opacity: 0.8;
  transition: opacity 0.15s;
}

.floating-notes-header .btn-minimize:hover {
  opacity: 1;
}

.floating-notes-textarea {
  flex: 1;
  padding: var(--space-sm);
  border: none;
  resize: none;
  font-family: inherit;
  font-size: var(--font-size-sm);
  line-height: 1.5;
  min-height: 100px;
  background: transparent;
}

.floating-notes-textarea:focus {
  outline: none;
}

.floating-notes-textarea::placeholder {
  color: var(--gray-light);
}

/* Lecture Card */
.lecture-card {
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

.lecture-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.lecture-card-cover {
  position: relative;
  height: 160px;
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
}

.lecture-card-cover img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.lecture-card-placeholder {
  font-size: 4rem;
}

.lecture-level-badge {
  position: absolute;
  top: var(--space-sm);
  left: var(--space-sm);
  background: rgba(0, 0, 0, 0.6);
  color: var(--white);
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 600;
}

.lecture-draft-badge {
  position: absolute;
  top: var(--space-sm);
  right: var(--space-sm);
  background: var(--warning);
  color: var(--dark);
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 600;
}

.lecture-card-content {
  padding: var(--space-md);
}

.lecture-card-title {
  font-size: var(--font-size-lg);
  font-weight: 600;
  color: var(--dark);
  margin: 0 0 var(--space-xs);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.lecture-card-description {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  margin: 0 0 var(--space-sm);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.lecture-card-meta {
  display: flex;
  justify-content: space-between;
  font-size: var(--font-size-xs);
  color: var(--gray);
}

.lecture-card-date {
  font-size: var(--font-size-xs);
  color: var(--gray-light);
  margin-top: var(--space-xs);
}

.lecture-card-actions {
  display: flex;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  border-top: 1px solid var(--border);
}

/* Lecture View */
.lecture-view {
  padding: var(--space-lg);
  max-width: 1200px;
  margin: 0 auto;
}

.lecture-view-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
  gap: var(--space-md);
}

.lecture-view-header h2 {
  flex: 1;
  font-size: var(--font-size-xl);
  color: var(--dark);
  margin: 0;
  text-align: center;
}

.btn-back {
  background: var(--light);
  color: var(--dark);
  border: 1px solid var(--border);
}

.btn-present {
  background: var(--primary);
  color: var(--white);
}

/* Lecture view actions */
.lecture-view-actions {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.btn-auto {
  background: var(--light);
  color: var(--dark);
  border: 1px solid var(--border);
  padding: 0.4rem 0.75rem;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
  font-size: var(--font-size-sm);
}

.btn-auto:hover {
  border-color: var(--primary);
}

.btn-auto.active {
  background: var(--success);
  color: white;
  border-color: var(--success);
}

.auto-interval-select {
  padding: 0.3rem 0.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  cursor: pointer;
}

/* Progress bar */
.lecture-progress-bar {
  height: 4px;
  background: var(--light);
  border-radius: 2px;
  margin-bottom: var(--space-md);
  overflow: hidden;
}

.lecture-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary), var(--secondary));
  transition: width 0.3s ease;
}

/* Keyboard hints */
.keyboard-hints {
  display: flex;
  justify-content: center;
  gap: var(--space-lg);
  padding: var(--space-sm);
  font-size: var(--font-size-xs);
  color: var(--gray);
  background: var(--light);
  border-radius: var(--radius-md);
  margin-top: var(--space-md);
}

.keyboard-hints span {
  padding: 0.25rem 0.5rem;
  background: white;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
}

/* Viewed thumbnails */
.thumbnail.viewed {
  border-color: var(--success);
  background: #d4edda;
}

.thumbnail.viewed span {
  color: var(--success);
}

/* Slide item actions in editor */
.slide-item-actions {
  display: flex;
  gap: 0.25rem;
  opacity: 0;
  transition: opacity 0.2s;
}

.slide-item:hover .slide-item-actions {
  opacity: 1;
}

.btn-icon-small {
  width: 24px;
  height: 24px;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 12px;
  border-radius: var(--radius-sm);
  transition: background 0.2s;
}

.btn-icon-small:hover {
  background: rgba(0, 0, 0, 0.1);
}

.lecture-view-content {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

.slide-viewer {
  aspect-ratio: 16 / 9;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
}

.slide-navigation {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--space-lg);
}

.slide-navigation .nav-btn {
  padding: var(--space-sm) var(--space-lg);
  background: var(--primary);
  color: var(--white);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--font-size-md);
}

.slide-navigation .nav-btn:disabled {
  background: var(--gray-light);
  cursor: not-allowed;
}

.slide-counter {
  font-size: var(--font-size-lg);
  color: var(--dark);
  font-weight: 600;
}

.slide-thumbnails {
  display: flex;
  gap: var(--space-sm);
  overflow-x: auto;
  padding: var(--space-sm);
}

.thumbnail {
  flex-shrink: 0;
  width: 100px;
  height: 60px;
  background: var(--light);
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: border-color 0.2s;
}

.thumbnail:hover {
  border-color: var(--primary-light);
}

.thumbnail.active {
  border-color: var(--primary);
  background: var(--primary-light);
}

.thumbnail span {
  font-weight: 600;
  color: var(--dark);
}

.thumbnail small {
  font-size: 10px;
  color: var(--gray);
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  max-width: 90px;
}

/* Slide Renderer */
.slide-container {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.slide-container.presenting {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1000;
}

.slide-layout {
  width: 100%;
  height: 100%;
  padding: var(--space-xl);
  position: relative;
}

.slide-layout-title {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.slide-main-title {
  font-size: 3rem;
  color: var(--dark);
  margin: 0;
}

.slide-title {
  font-size: 2rem;
  color: var(--dark);
  margin: 0 0 var(--space-lg);
}

.slide-body {
  flex: 1;
  position: relative;
}

.slide-element {
  overflow: hidden;
}

.slide-element-text {
  font-size: var(--font-size-lg);
  line-height: 1.6;
  color: var(--dark);
}

/* Ruby (furigana) styling for slides */
.slide-element-text ruby {
  ruby-align: center;
  display: inline;
}

.slide-element-text ruby rt {
  font-size: 0.5em;
  font-weight: normal;
  color: inherit;
  opacity: 0.85;
  text-align: center;
  line-height: 1;
}

/* Furigana in slide editor */
.ppt-text-box ruby {
  ruby-align: center;
  display: inline;
}

.ppt-text-box ruby rt {
  font-size: 0.5em;
  font-weight: normal;
  color: inherit;
  opacity: 0.8;
  text-align: center;
  line-height: 1;
}

.slide-element-image img {
  border-radius: var(--radius-md);
}

.slide-columns {
  display: flex;
  gap: var(--space-xl);
  height: calc(100% - 80px);
}

.slide-column {
  flex: 1;
  position: relative;
}

.slide-content-split {
  display: flex;
  gap: var(--space-xl);
  height: calc(100% - 80px);
}

.slide-image-area,
.slide-text-area {
  flex: 1;
  position: relative;
}

/* Presentation Mode */
.presentation-mode {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--dark);
  z-index: 2000;
  display: flex;
  flex-direction: column;
}

.presentation-controls {
  position: absolute;
  bottom: var(--space-lg);
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: var(--space-md);
  background: rgba(0, 0, 0, 0.7);
  padding: var(--space-sm) var(--space-lg);
  border-radius: var(--radius-lg);
  color: var(--white);
}

.presentation-controls button {
  background: rgba(255, 255, 255, 0.2);
  color: var(--white);
  border: none;
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--font-size-lg);
}

.presentation-controls button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.presentation-controls .exit-btn {
  background: var(--danger);
  margin-left: var(--space-md);
}

.presentation-controls button.active {
  background: var(--primary);
}

.presentation-timer {
  font-family: monospace;
  font-size: var(--font-size-md);
  padding: 0 var(--space-sm);
  border-right: 1px solid rgba(255, 255, 255, 0.3);
  margin-right: var(--space-sm);
}

.presentation-counter {
  min-width: 70px;
  text-align: center;
}

/* PowerPoint-like slide transitions */
.presentation-slide {
  width: 100%;
  height: 100%;
  position: relative;
}

.presentation-slide.animate-next {
  animation: slideInRight 0.3s ease-out;
}

.presentation-slide.animate-prev {
  animation: slideInLeft 0.3s ease-out;
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Slide viewer transitions */
.slide-viewer {
  aspect-ratio: 16 / 9;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  position: relative;
  cursor: pointer;
}

.slide-content {
  width: 100%;
  height: 100%;
}

.slide-content.animate-next {
  animation: slideInRight 0.3s ease-out;
}

.slide-content.animate-prev {
  animation: slideInLeft 0.3s ease-out;
}

/* Click areas for navigation */
.click-area-left,
.click-area-right {
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s;
}

.click-area-left {
  left: 0;
  width: 20%;
  background: linear-gradient(90deg, rgba(0,0,0,0.05), transparent);
}

.click-area-right {
  right: 0;
  width: 80%;
  background: linear-gradient(-90deg, rgba(0,0,0,0.02), transparent);
}

.slide-viewer:hover .click-area-left,
.slide-viewer:hover .click-area-right {
  opacity: 1;
}

/* Presentation mode click hints */
.click-hint-left,
.click-hint-right {
  position: fixed;
  top: 0;
  bottom: 80px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s;
}

.click-hint-left {
  left: 0;
  width: 20%;
  background: linear-gradient(90deg, rgba(255,255,255,0.03), transparent);
}

.click-hint-right {
  right: 0;
  width: 80%;
  cursor: pointer;
}

.presentation-mode:hover .click-hint-left,
.presentation-mode:hover .click-hint-right {
  opacity: 1;
}

/* Blank screen overlay */
.blank-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 2100;
  animation: fadeIn 0.2s ease-out;
}

.blank-black {
  background: #000;
}

.blank-white {
  background: #fff;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Jump to slide dialog */
.jump-dialog {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.9);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  gap: var(--space-md);
  z-index: 2200;
  box-shadow: var(--shadow-xl);
}

.jump-dialog label {
  color: var(--white);
  font-size: var(--font-size-md);
}

.jump-dialog input {
  width: 80px;
  padding: var(--space-sm);
  font-size: var(--font-size-lg);
  text-align: center;
  border: 2px solid var(--primary);
  border-radius: var(--radius-md);
  background: var(--white);
}

.jump-dialog button {
  padding: var(--space-sm) var(--space-md);
  background: var(--primary);
  color: var(--white);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--font-size-md);
}

/* Slides Grid View */
.slides-grid-view {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--space-lg);
  padding: var(--space-lg);
}

.grid-slide-item {
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  border: 3px solid transparent;
}

.grid-slide-item:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.grid-slide-item.active {
  border-color: var(--primary);
}

.grid-slide-preview {
  aspect-ratio: 16 / 9;
  overflow: hidden;
  pointer-events: none;
}

.grid-slide-preview .slide-container {
  transform: scale(1);
  transform-origin: top left;
}

.grid-slide-number {
  position: absolute;
  top: var(--space-sm);
  left: var(--space-sm);
  background: rgba(0, 0, 0, 0.7);
  color: var(--white);
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-sm);
  font-weight: 600;
  font-size: var(--font-size-sm);
}

.grid-slide-item {
  position: relative;
}

.grid-slide-title {
  padding: var(--space-sm);
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  border-top: 1px solid var(--border);
}

/* Resume Dialog */
.resume-dialog-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.2s ease-out;
}

.resume-dialog {
  background: var(--white);
  padding: var(--space-xl);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  max-width: 400px;
  text-align: center;
}

.resume-dialog h3 {
  margin: 0 0 var(--space-md);
  color: var(--dark);
}

.resume-dialog p {
  margin: 0 0 var(--space-lg);
  color: var(--gray-dark);
}

.resume-actions {
  display: flex;
  gap: var(--space-md);
  justify-content: center;
}

/* Help Overlay */
.help-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2300;
  animation: fadeIn 0.2s ease-out;
}

.help-content {
  background: var(--white);
  padding: var(--space-xl);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  max-width: 500px;
  width: 90%;
}

.help-content h3 {
  margin: 0 0 var(--space-lg);
  color: var(--dark);
  text-align: center;
  font-size: var(--font-size-xl);
}

.help-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-sm);
  margin-bottom: var(--space-lg);
}

.help-grid div {
  padding: var(--space-xs);
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.help-grid kbd {
  background: var(--light);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 0.85em;
  border: 1px solid var(--border);
  margin-right: 4px;
}

.help-content .btn {
  display: block;
  width: 100%;
}

/* Laser Pointer */
.laser-pointer {
  position: absolute;
  width: 12px;
  height: 12px;
  background: radial-gradient(circle, #ff0000 0%, #ff0000 50%, transparent 70%);
  border-radius: 50%;
  pointer-events: none;
  transform: translate(-50%, -50%);
  z-index: 2050;
  box-shadow: 0 0 10px 3px rgba(255, 0, 0, 0.5);
  animation: laserPulse 1s ease-in-out infinite;
}

@keyframes laserPulse {
  0%, 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.2); }
}

.presentation-mode.laser-active {
  cursor: none;
}

/* Presenter Notes */
.presenter-notes {
  position: absolute;
  bottom: 70px;
  left: var(--space-lg);
  right: var(--space-lg);
  background: rgba(0, 0, 0, 0.85);
  color: var(--white);
  padding: var(--space-md);
  border-radius: var(--radius-md);
  max-height: 150px;
  overflow-y: auto;
  z-index: 2040;
  animation: slideUp 0.2s ease-out;
}

.presenter-notes h4 {
  margin: 0 0 var(--space-sm);
  font-size: var(--font-size-sm);
  color: var(--gray-light);
  text-transform: uppercase;
}

.presenter-notes p {
  margin: 0;
  font-size: var(--font-size-md);
  line-height: 1.5;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.presentation-slide.with-notes {
  height: calc(100% - 230px);
}

/* Next Slide Preview */
.next-slide-preview {
  position: absolute;
  bottom: 70px;
  right: var(--space-lg);
  width: 200px;
  background: rgba(0, 0, 0, 0.9);
  border-radius: var(--radius-md);
  overflow: hidden;
  z-index: 2030;
  box-shadow: var(--shadow-lg);
}

.next-slide-preview .preview-label {
  padding: var(--space-xs) var(--space-sm);
  background: rgba(255, 255, 255, 0.1);
  color: var(--white);
  font-size: var(--font-size-xs);
  text-transform: uppercase;
}

.next-slide-preview .preview-content {
  aspect-ratio: 16 / 9;
  overflow: hidden;
  pointer-events: none;
  opacity: 0.9;
}

.next-slide-preview .preview-content .slide-container {
  transform: scale(1);
}

/* Teacher Notes Panel (View Mode) */
.teacher-notes-panel {
  background: linear-gradient(135deg, #fff9e6 0%, #fff3cd 100%);
  border: 1px solid #ffc107;
  border-left: 4px solid #ffc107;
  border-radius: var(--radius-md);
  padding: var(--space-md);
  margin-top: var(--space-md);
  animation: slideUp 0.2s ease-out;
}

.teacher-notes-panel.empty {
  background: var(--light);
  border-color: var(--border);
  border-left-color: var(--gray-light);
}

.teacher-notes-panel.empty .teacher-notes-content {
  color: var(--gray);
}

.teacher-notes-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-sm);
  padding-bottom: var(--space-sm);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.teacher-notes-header span {
  font-weight: 600;
  color: var(--dark);
  font-size: var(--font-size-sm);
}

.teacher-notes-header .btn-close {
  background: none;
  border: none;
  font-size: 1.25rem;
  color: var(--gray);
  cursor: pointer;
  padding: 0;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.2s;
}

.teacher-notes-header .btn-close:hover {
  background: rgba(0, 0, 0, 0.1);
  color: var(--dark);
}

.teacher-notes-content {
  color: var(--dark);
  font-size: var(--font-size-md);
  line-height: 1.6;
  white-space: pre-wrap;
}

/* Notes button active state */
.lecture-view-actions .btn.active {
  background: var(--primary);
  color: var(--white);
}

/* Lecture Editor */
.lecture-editor-page {
  padding: var(--space-lg);
  background: var(--white);
  min-height: 100vh;
}

.editor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
  gap: var(--space-md);
}

.editor-header h1 {
  flex: 1;
  font-size: var(--font-size-xl);
  color: var(--dark);
  margin: 0;
}

.editor-content {
  display: flex;
  flex-direction: column;
  gap: var(--space-xl);
}

.lecture-form {
  background: var(--white);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
}

.lecture-form h3 {
  margin: 0 0 var(--space-md);
  color: var(--dark);
}

.lecture-form input,
.lecture-form textarea,
.lecture-form select {
  color: var(--dark);
  background: var(--white);
}

.form-row {
  display: flex;
  gap: var(--space-lg);
}

.form-row .form-group {
  flex: 1;
}

.slides-editor {
  display: flex;
  gap: var(--space-lg);
  min-height: 500px;
}

.slides-sidebar {
  width: 250px;
  flex-shrink: 0;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.slides-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md);
  border-bottom: 1px solid var(--border);
}

.slides-header h3 {
  margin: 0;
  font-size: var(--font-size-md);
}

.btn-add {
  background: var(--success);
  color: var(--white);
  border: none;
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: var(--font-size-sm);
}

.slides-list {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-sm);
}

.slide-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background 0.2s;
}

.slide-item:hover {
  background: var(--light);
}

.slide-item.active {
  background: var(--primary-light);
}

.slide-number {
  width: 24px;
  height: 24px;
  background: var(--primary);
  color: var(--white);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--font-size-xs);
  font-weight: 600;
  flex-shrink: 0;
}

.slide-name {
  flex: 1;
  font-size: var(--font-size-sm);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.btn-delete-small {
  width: 20px;
  height: 20px;
  background: var(--danger);
  color: var(--white);
  border: none;
  border-radius: 50%;
  cursor: pointer;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.7;
}

.btn-delete-small:hover {
  opacity: 1;
}

.slide-editor-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

.slide-preview {
  aspect-ratio: 16 / 9;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

.slide-edit-form {
  background: var(--white);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.element-toolbar {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm);
  background: var(--light);
  border-radius: var(--radius-md);
}

.element-toolbar span {
  font-weight: 600;
  color: var(--gray-dark);
}

.element-toolbar button {
  background: var(--white);
  border: 1px solid var(--border);
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: var(--font-size-sm);
}

.element-toolbar button:hover {
  background: var(--primary-light);
  border-color: var(--primary);
}

.elements-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  max-height: 200px;
  overflow-y: auto;
}

.element-edit-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-sm);
  padding: var(--space-sm);
  background: var(--light);
  border-radius: var(--radius-sm);
}

.element-type {
  background: var(--primary);
  color: var(--white);
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 600;
  text-transform: uppercase;
  flex-shrink: 0;
}

.element-edit-item textarea,
.element-edit-item input {
  flex: 1;
  padding: var(--space-xs);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
}

.slide-actions {
  display: flex;
  gap: var(--space-md);
  justify-content: flex-end;
}

.no-slide-selected,
.save-first-message {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--light);
  border-radius: var(--radius-lg);
  color: var(--gray);
  font-size: var(--font-size-lg);
}

/* Enhanced Editor Toolbar */
.editor-toolbar {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  margin-bottom: var(--space-md);
}

.toolbar-group {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.toolbar-label {
  font-size: var(--font-size-xs);
  color: var(--gray-dark);
  font-weight: 600;
  white-space: nowrap;
}

.toolbar-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--light);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: var(--font-size-sm);
  transition: all var(--transition-fast);
}

.toolbar-btn:hover {
  background: var(--primary-light);
  border-color: var(--primary);
}

.toolbar-btn.active {
  background: var(--primary);
  color: var(--white);
  border-color: var(--primary);
}

.toolbar-btn.btn-danger {
  background: var(--danger-light);
  border-color: var(--danger);
  color: var(--danger);
}

.toolbar-btn.btn-danger:hover {
  background: var(--danger);
  color: var(--white);
}

.toolbar-select {
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  background: var(--white);
  cursor: pointer;
  min-width: 80px;
}

.toolbar-select:focus {
  outline: none;
  border-color: var(--primary);
}

.toolbar-divider {
  width: 1px;
  height: 24px;
  background: var(--border);
  margin: 0 var(--space-xs);
}

.color-picker {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.color-btn {
  width: 24px;
  height: 24px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: transform var(--transition-fast);
  box-sizing: border-box;
}

.color-btn:hover {
  transform: scale(1.15);
}

.color-btn.active {
  box-shadow: 0 0 0 2px var(--primary);
}

/* Slide Settings */
.slide-settings {
  background: var(--white);
  padding: var(--space-md);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  margin-bottom: var(--space-md);
}

.slide-settings .form-row {
  display: flex;
  gap: var(--space-md);
  align-items: flex-start;
}

.slide-settings .form-group {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.slide-settings .form-group label {
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--gray-dark);
}

/* Elements Panel */
.elements-panel {
  background: var(--white);
  padding: var(--space-md);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.elements-panel h4 {
  margin: 0 0 var(--space-md);
  font-size: var(--font-size-md);
  color: var(--dark);
}

.element-type-badge {
  background: var(--primary);
  color: var(--white);
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 600;
  text-transform: uppercase;
  flex-shrink: 0;
}

.element-edit-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-sm);
  padding: var(--space-sm);
  background: var(--light);
  border-radius: var(--radius-sm);
  cursor: pointer;
  border: 2px solid transparent;
  transition: border-color var(--transition-fast);
}

.element-edit-item:hover {
  background: #eee;
}

.element-edit-item.selected {
  border-color: var(--primary);
  background: var(--primary-light);
}

.element-edit-item textarea,
.element-edit-item input {
  flex: 1;
  padding: var(--space-xs);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  resize: vertical;
}

.element-edit-item textarea:focus,
.element-edit-item input:focus {
  outline: none;
  border-color: var(--primary);
}

.empty-hint {
  text-align: center;
  color: var(--gray);
  font-size: var(--font-size-sm);
  padding: var(--space-md);
  font-style: italic;
}

.error-page {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-2xl);
  gap: var(--space-lg);
}

/* ============ Slide Thumbnail Preview ============ */
.slide-thumbnail-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  padding: var(--space-sm);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-normal);
  border: 2px solid transparent;
  background: var(--light);
  margin-bottom: var(--space-sm);
}

.slide-thumbnail-item:hover {
  background: var(--white);
  border-color: var(--gray-light);
}

.slide-thumbnail-item.active {
  background: var(--white);
  border-color: var(--primary);
  box-shadow: var(--shadow-md);
}

.slide-thumbnail-number {
  font-size: var(--font-size-xs);
  font-weight: 700;
  color: var(--gray-dark);
  text-align: center;
}

.slide-thumbnail-preview {
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: var(--radius-sm);
  overflow: hidden;
  box-shadow: var(--shadow-sm);
}

.slide-mini-preview {
  width: 100%;
  height: 100%;
  padding: 4px;
  display: flex;
  flex-direction: column;
  gap: 2px;
  overflow: hidden;
}

.slide-mini-title {
  font-size: 6px;
  font-weight: 700;
  color: inherit;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.slide-mini-element {
  font-size: 5px;
  color: inherit;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  opacity: 0.7;
}

.slide-thumbnail-info {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  justify-content: center;
}

.slide-thumbnail-name {
  font-size: var(--font-size-xs);
  color: var(--gray-dark);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 120px;
}

.slide-effect-badge {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--primary);
  color: var(--white);
  font-size: 8px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.slide-thumbnail-actions {
  display: flex;
  justify-content: center;
  gap: var(--space-xs);
}

.btn-icon-small {
  width: 24px;
  height: 24px;
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.btn-icon-small:hover {
  background: var(--primary-light);
  border-color: var(--primary);
}

/* Slides empty message */
.slides-empty-message {
  padding: var(--space-lg);
  text-align: center;
  color: var(--gray);
}

.slides-empty-message p {
  margin: 0;
  font-size: var(--font-size-sm);
}

.slides-empty-message .hint {
  margin-top: var(--space-xs);
  font-size: var(--font-size-xs);
  color: var(--gray-light);
}

/* Quick content & Admin notes inputs */
.form-group-large {
  flex: 2 !important;
}

.quick-content-input,
.admin-notes-input {
  width: 100%;
  padding: var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  font-family: inherit;
  resize: vertical;
  background: var(--white);
  color: var(--dark);
}

.quick-content-input:focus,
.admin-notes-input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
}

.admin-notes-input {
  background: #fffef5;
  border-color: var(--warning);
}

.admin-notes-input::placeholder {
  color: var(--warning);
  opacity: 0.7;
}

.form-hint {
  display: block;
  margin-top: var(--space-xs);
  font-size: var(--font-size-xs);
  color: var(--gray);
}

/* ============ Interactive Slide Canvas ============ */
.slide-canvas-container {
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

.slide-canvas-toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-sm) var(--space-md);
  background: var(--light);
  border-bottom: 1px solid var(--border);
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.admin-notes-panel {
  padding: var(--space-sm) var(--space-md);
  background: #fffef5;
  border-bottom: 1px solid var(--warning);
}

.admin-notes-panel label {
  display: block;
  font-size: var(--font-size-xs);
  font-weight: 600;
  color: var(--warning);
  margin-bottom: var(--space-xs);
}

.slide-canvas {
  position: relative;
  aspect-ratio: 16 / 9;
  cursor: crosshair;
  overflow: hidden;
}

.canvas-element {
  border: 2px solid transparent;
  transition: border-color 0.2s, box-shadow 0.2s;
  word-wrap: break-word;
  overflow: hidden;
}

.canvas-element:hover {
  border-color: rgba(102, 126, 234, 0.5);
}

.canvas-element.selected {
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.3);
}

.element-controls {
  position: absolute;
  top: -28px;
  right: 0;
  display: flex;
  gap: 4px;
  background: var(--white);
  padding: 2px;
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-sm);
}

.ctrl-btn {
  width: 22px;
  height: 22px;
  border: none;
  border-radius: var(--radius-sm);
  background: var(--danger);
  color: var(--white);
  cursor: pointer;
  font-size: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.ctrl-btn:hover {
  background: var(--danger-dark, #c0392b);
}

.media-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--gray-light);
  color: var(--gray-dark);
  height: 100%;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
}

/* Add content dialog */
.add-content-dialog {
  position: absolute;
  background: var(--white);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  padding: var(--space-sm);
  min-width: 250px;
  z-index: 100;
}

.add-content-input {
  width: 100%;
  padding: var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  font-family: inherit;
  resize: none;
  margin-bottom: var(--space-sm);
}

.add-content-input:focus {
  outline: none;
  border-color: var(--primary);
}

.dialog-buttons {
  display: flex;
  gap: var(--space-xs);
  flex-wrap: wrap;
}

.btn-small {
  padding: var(--space-xs) var(--space-sm);
  font-size: var(--font-size-xs);
}

.btn-warning {
  background: var(--warning);
  color: var(--white);
  border-color: var(--warning);
}

.btn-warning:hover {
  background: #e67e22;
}

/* ============ Professional Slide Editor ============ */
.pro-slide-editor {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  background: var(--gray-light);
  border-radius: var(--radius-lg);
  padding: var(--space-sm);
}

.pro-toolbar {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  background: var(--white);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  flex-wrap: wrap;
}

.toolbar-section {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.toolbar-section.format-section {
  flex: 1;
}

.pro-toolbar .toolbar-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--white);
  cursor: pointer;
  font-size: var(--font-size-sm);
  transition: all 0.15s;
}

.pro-toolbar .toolbar-btn:hover {
  background: var(--light);
  border-color: var(--primary);
}

.pro-toolbar .toolbar-btn.active {
  background: var(--primary-light);
  border-color: var(--primary);
  color: var(--primary);
}

.pro-toolbar .toolbar-btn.btn-primary {
  background: var(--primary);
  color: var(--white);
  border-color: var(--primary);
}

.pro-toolbar .toolbar-btn.btn-danger {
  color: var(--danger);
}

.pro-toolbar .toolbar-btn.btn-danger:hover {
  background: var(--danger);
  color: var(--white);
}

.pro-toolbar .toolbar-select {
  padding: var(--space-xs);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  background: var(--white);
}

.pro-toolbar .toolbar-divider {
  width: 1px;
  height: 24px;
  background: var(--border);
  margin: 0 var(--space-xs);
}

.color-picker-mini input[type="color"] {
  width: 28px;
  height: 28px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  padding: 0;
}

/* Template Picker */
.template-picker {
  background: var(--white);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

.template-picker-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-sm) var(--space-md);
  background: var(--light);
  border-bottom: 1px solid var(--border);
  font-weight: 600;
}

.template-picker-header button {
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: var(--gray);
}

.template-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: var(--space-sm);
  padding: var(--space-md);
}

.template-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-sm);
  border: 2px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.15s;
}

.template-item:hover {
  border-color: var(--primary);
  background: var(--primary-light);
}

.template-preview {
  width: 80px;
  height: 45px;
  background: var(--light);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
}

.template-icon {
  font-size: 24px;
  color: var(--gray-dark);
}

.template-name {
  font-size: var(--font-size-xs);
  color: var(--gray-dark);
}

/* Pro Canvas */
.pro-canvas {
  position: relative;
  aspect-ratio: 16 / 9;
  background: var(--white);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  cursor: crosshair;
}

.canvas-grid {
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(rgba(0,0,0,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,0,0,0.03) 1px, transparent 1px);
  background-size: 5% 5%;
  pointer-events: none;
  opacity: 0.5;
}

.pro-canvas .canvas-element {
  position: absolute;
  cursor: move;
  border: 2px solid transparent;
  border-radius: 4px;
  transition: border-color 0.15s, box-shadow 0.15s;
  user-select: none;
}

.pro-canvas .canvas-element:hover {
  border-color: rgba(102, 126, 234, 0.4);
}

.pro-canvas .canvas-element.selected {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

.pro-canvas .canvas-element.dragging {
  opacity: 0.8;
  cursor: grabbing;
}

.element-text {
  width: 100%;
  height: 100%;
  padding: 4px 8px;
  word-wrap: break-word;
  overflow: hidden;
}

.element-text-editor {
  width: 100%;
  height: 100%;
  min-height: 50px;
  padding: 4px 8px;
  border: none;
  background: rgba(255, 255, 255, 0.9);
  resize: none;
  font-family: inherit;
  outline: 2px solid var(--primary);
}

.element-image {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.element-placeholder {
  width: 100%;
  height: 100%;
  min-height: 80px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: var(--light);
  border: 2px dashed var(--border);
  border-radius: var(--radius-sm);
  color: var(--gray);
  gap: var(--space-xs);
}

.element-placeholder span {
  font-size: 32px;
  opacity: 0.5;
}

.element-placeholder small {
  font-size: var(--font-size-xs);
}

/* Resize handles */
.resize-handles {
  position: absolute;
  inset: -4px;
  pointer-events: none;
}

.resize-handle {
  position: absolute;
  width: 8px;
  height: 8px;
  background: var(--primary);
  border: 1px solid var(--white);
  border-radius: 2px;
  pointer-events: auto;
}

.resize-handle.nw { top: 0; left: 0; cursor: nw-resize; }
.resize-handle.ne { top: 0; right: 0; cursor: ne-resize; }
.resize-handle.sw { bottom: 0; left: 0; cursor: sw-resize; }
.resize-handle.se { bottom: 0; right: 0; cursor: se-resize; }

/* Add menu */
.add-menu {
  position: absolute;
  background: var(--white);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  padding: var(--space-xs);
  z-index: 100;
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 140px;
}

.add-menu button {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm);
  border: none;
  background: none;
  cursor: pointer;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  text-align: left;
}

.add-menu button:hover {
  background: var(--light);
}

.add-menu button.cancel {
  color: var(--gray);
  border-top: 1px solid var(--border);
  margin-top: var(--space-xs);
  padding-top: var(--space-sm);
}

/* Notes panel */
.pro-notes-panel {
  background: #fffef5;
  border-radius: var(--radius-md);
  overflow: hidden;
  border: 1px solid var(--warning);
}

.pro-notes-panel .notes-header {
  padding: var(--space-xs) var(--space-md);
  background: rgba(241, 196, 15, 0.1);
  font-size: var(--font-size-sm);
  color: var(--warning);
  font-weight: 600;
}

.pro-notes-panel textarea {
  width: 100%;
  min-height: 60px;
  padding: var(--space-sm) var(--space-md);
  border: none;
  background: transparent;
  resize: vertical;
  font-family: inherit;
  font-size: var(--font-size-sm);
}

.pro-notes-panel textarea:focus {
  outline: none;
}

/* Shortcuts hint */
.shortcuts-hint {
  display: flex;
  justify-content: center;
  gap: var(--space-md);
  padding: var(--space-xs);
  font-size: var(--font-size-xs);
  color: var(--gray);
}

.shortcuts-hint span {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* Responsive */
@media (max-width: 768px) {
  .template-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .shortcuts-hint {
    display: none;
  }

  .pro-toolbar {
    flex-direction: column;
    align-items: stretch;
  }

  .toolbar-section {
    justify-content: center;
    flex-wrap: wrap;
  }
}

/* ============ Background Image Controls ============ */
.bg-image-controls {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  flex-wrap: wrap;
}

.bg-image-preview {
  width: 60px;
  height: 34px;
  border-radius: var(--radius-sm);
  overflow: hidden;
  border: 1px solid var(--border);
}

.bg-image-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ============ Slide Animation Keyframes ============ */
@keyframes slide-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slide-slide-left {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slide-slide-right {
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slide-slide-up {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes slide-slide-down {
  from { transform: translateY(-100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes slide-zoom-in {
  from { transform: scale(0.5); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes slide-zoom-out {
  from { transform: scale(1.5); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes slide-bounce {
  0% { transform: scale(0.5); opacity: 0; }
  60% { transform: scale(1.1); opacity: 1; }
  80% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

@keyframes slide-rotate {
  from { transform: rotate(-180deg) scale(0.5); opacity: 0; }
  to { transform: rotate(0) scale(1); opacity: 1; }
}

/* Slide content animations */
.slide-animation-fade-in { animation: slide-fade-in var(--animation-duration, 500ms) ease-out forwards; }
.slide-animation-fade-out { animation: slide-fade-out var(--animation-duration, 500ms) ease-out forwards; }
.slide-animation-slide-left { animation: slide-slide-left var(--animation-duration, 500ms) ease-out forwards; }
.slide-animation-slide-right { animation: slide-slide-right var(--animation-duration, 500ms) ease-out forwards; }
.slide-animation-slide-up { animation: slide-slide-up var(--animation-duration, 500ms) ease-out forwards; }
.slide-animation-slide-down { animation: slide-slide-down var(--animation-duration, 500ms) ease-out forwards; }
.slide-animation-zoom-in { animation: slide-zoom-in var(--animation-duration, 500ms) ease-out forwards; }
.slide-animation-zoom-out { animation: slide-zoom-out var(--animation-duration, 500ms) ease-out forwards; }
.slide-animation-bounce { animation: slide-bounce var(--animation-duration, 500ms) ease-out forwards; }
.slide-animation-rotate { animation: slide-rotate var(--animation-duration, 500ms) ease-out forwards; }

/* ============ Page Transition Keyframes ============ */
@keyframes transition-fade {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes transition-slide-horizontal-enter {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

@keyframes transition-slide-horizontal-exit {
  from { transform: translateX(0); }
  to { transform: translateX(-100%); }
}

@keyframes transition-slide-vertical-enter {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

@keyframes transition-slide-vertical-exit {
  from { transform: translateY(0); }
  to { transform: translateY(-100%); }
}

@keyframes transition-zoom-enter {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes transition-flip {
  from { transform: perspective(1000px) rotateY(-90deg); opacity: 0; }
  to { transform: perspective(1000px) rotateY(0); opacity: 1; }
}

@keyframes transition-cube {
  from { transform: perspective(1000px) rotateY(-90deg) translateZ(200px); opacity: 0; }
  to { transform: perspective(1000px) rotateY(0) translateZ(0); opacity: 1; }
}

@keyframes transition-dissolve {
  0% { opacity: 0; filter: blur(10px); }
  100% { opacity: 1; filter: blur(0); }
}

/* Slide transition classes */
.slide-transition-fade { animation: transition-fade var(--transition-duration, 400ms) ease-out forwards; }
.slide-transition-slide-horizontal { animation: transition-slide-horizontal-enter var(--transition-duration, 400ms) ease-out forwards; }
.slide-transition-slide-vertical { animation: transition-slide-vertical-enter var(--transition-duration, 400ms) ease-out forwards; }
.slide-transition-zoom { animation: transition-zoom-enter var(--transition-duration, 400ms) ease-out forwards; }
.slide-transition-flip { animation: transition-flip var(--transition-duration, 400ms) ease-out forwards; }
.slide-transition-cube { animation: transition-cube var(--transition-duration, 400ms) ease-out forwards; }
.slide-transition-dissolve { animation: transition-dissolve var(--transition-duration, 400ms) ease-out forwards; }

/* Slide wrapper for transitions */
.slide-transition-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* Slide content wrapper for animations */
.slide-content-wrapper {
  width: 100%;
  height: 100%;
}

/* Lecture page responsive */
@media (max-width: 768px) {
  .lecture-page {
    padding: var(--space-md);
  }

  .lecture-header {
    flex-direction: column;
    gap: var(--space-md);
    text-align: center;
  }

  .lecture-filters {
    flex-direction: column;
  }

  .lecture-filters .search-input {
    max-width: none;
  }

  .lecture-grid {
    grid-template-columns: 1fr;
  }

  .lecture-view-header {
    flex-direction: column;
    gap: var(--space-sm);
  }

  .lecture-view-header h2 {
    order: -1;
  }

  .slide-navigation {
    gap: var(--space-md);
  }

  .slide-navigation .nav-btn {
    padding: var(--space-xs) var(--space-md);
    font-size: var(--font-size-sm);
  }

  .slides-editor {
    flex-direction: column;
  }

  .slides-sidebar {
    width: 100%;
    min-height: 150px;
  }

  .slides-list {
    display: flex;
    flex-direction: row;
    overflow-x: auto;
    gap: var(--space-sm);
  }

  .slide-item {
    flex-shrink: 0;
    flex-direction: column;
    width: 80px;
    text-align: center;
  }

  .slide-name {
    max-width: 70px;
    font-size: var(--font-size-xs);
  }

  /* Slide thumbnail responsive */
  .slide-thumbnail-item {
    flex-shrink: 0;
    width: 100px;
    padding: var(--space-xs);
  }

  .slide-thumbnail-preview {
    width: 100%;
  }

  .slide-thumbnail-info {
    flex-direction: column;
    gap: 2px;
  }

  .slide-thumbnail-name {
    max-width: 90px;
  }

  .slide-thumbnail-actions {
    gap: 4px;
  }

  .bg-image-controls {
    flex-direction: column;
    align-items: flex-start;
  }

  .form-row {
    flex-direction: column;
  }

  .presentation-controls {
    bottom: var(--space-sm);
    padding: var(--space-xs) var(--space-sm);
  }
}

/* ============ Progress Page ============ */
.progress-page {
  padding: var(--space-lg);
  background: var(--white);
  min-height: 100vh;
}

.progress-header {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-md);
  margin-bottom: var(--space-xl);
}

/* Level Card */
.progress-level-card {
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  color: var(--white);
  display: flex;
  align-items: center;
  gap: var(--space-md);
  box-shadow: var(--shadow-md);
}

.level-circle {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 3px solid var(--white);
}

.level-number {
  font-size: var(--font-size-xl);
  font-weight: bold;
}

.level-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.level-title {
  font-size: var(--font-size-lg);
  font-weight: 600;
}

.level-xp {
  font-size: var(--font-size-sm);
  opacity: 0.9;
}

/* Streak Card */
.progress-streak-card {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
  box-shadow: var(--shadow-md);
}

.streak-flame {
  font-size: 2.5rem;
}

.streak-info {
  display: flex;
  align-items: baseline;
  gap: var(--space-xs);
}

.streak-count {
  font-size: var(--font-size-2xl);
  font-weight: bold;
  color: var(--warning);
}

.streak-label {
  font-size: var(--font-size-sm);
  color: var(--gray);
}

.streak-best {
  font-size: var(--font-size-xs);
  color: var(--gray);
}

/* Due Card */
.progress-due-card {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-sm);
  box-shadow: var(--shadow-md);
  cursor: pointer;
  transition: var(--transition-normal);
}

.progress-due-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.due-count {
  font-size: var(--font-size-2xl);
  font-weight: bold;
  color: var(--primary);
}

.due-label {
  font-size: var(--font-size-sm);
  color: var(--gray);
  text-align: center;
}

/* Progress Sections */
.progress-section {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  margin-bottom: var(--space-lg);
  box-shadow: var(--shadow-sm);
}

.progress-section h3 {
  font-size: var(--font-size-lg);
  color: var(--dark);
  margin-bottom: var(--space-md);
  padding-bottom: var(--space-sm);
  border-bottom: 1px solid var(--border);
}

/* Weekly Goals */
.weekly-goals {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.goal-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.goal-header {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.goal-icon {
  font-size: 1.2rem;
}

.goal-title {
  flex: 1;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.goal-count {
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--dark);
}

.goal-bar {
  height: 10px;
  background: var(--light);
  border-radius: 5px;
  overflow: hidden;
}

.goal-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary) 0%, var(--primary-light) 100%);
  border-radius: 5px;
  transition: width var(--transition-slow);
}

.goal-fill.time {
  background: linear-gradient(90deg, var(--success) 0%, #2ecc71 100%);
}

/* Activity Chart */
.activity-chart {
  display: flex;
  align-items: flex-end;
  gap: 4px;
  height: 150px;
  padding: var(--space-sm) 0;
}

.activity-bar-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  height: 100%;
}

.activity-bar-container.today .activity-bar {
  background: linear-gradient(180deg, var(--warning) 0%, #e67e22 100%);
}

.activity-bar-wrapper {
  flex: 1;
  width: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}

.activity-bar {
  width: 100%;
  max-width: 30px;
  background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
  border-radius: 4px 4px 0 0;
  transition: height var(--transition-normal);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 4px;
  min-height: 4px;
}

.activity-value {
  font-size: 10px;
  color: var(--white);
  font-weight: 600;
}

.activity-label {
  font-size: 10px;
  color: var(--gray);
}

.activity-legend {
  text-align: center;
  padding-top: var(--space-sm);
  font-size: var(--font-size-xs);
  color: var(--gray);
}

/* Level Progress List */
.level-progress-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.level-progress-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.level-progress-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.level-badge {
  background: var(--primary);
  color: var(--white);
  padding: 2px 10px;
  border-radius: 4px;
  font-size: var(--font-size-sm);
  font-weight: 600;
}

.level-stats {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.due-badge {
  background: var(--warning-light);
  color: var(--warning);
  padding: 2px 8px;
  border-radius: 4px;
  font-size: var(--font-size-xs);
  font-weight: 600;
}

.level-progress-bar {
  height: 12px;
  background: var(--light);
  border-radius: 6px;
  overflow: hidden;
  position: relative;
}

.level-fill {
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  border-radius: 6px;
  transition: width var(--transition-slow);
}

.level-fill.memorized {
  background: var(--success);
  z-index: 2;
}

.level-fill.learning {
  background: var(--warning);
  z-index: 1;
}

.level-progress-labels {
  display: flex;
  justify-content: flex-end;
}

.mastery-percent {
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--success);
}

.level-legend {
  display: flex;
  gap: var(--space-lg);
  justify-content: center;
  padding-top: var(--space-md);
}

.legend-item {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 3px;
}

.legend-color.memorized {
  background: var(--success);
}

.legend-color.learning {
  background: var(--warning);
}

/* Quick Stats */
.quick-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--space-md);
}

.stat-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
}

.stat-icon {
  font-size: 1.5rem;
}

.stat-value {
  font-size: var(--font-size-xl);
  font-weight: bold;
  color: var(--primary);
}

.stat-label {
  font-size: var(--font-size-xs);
  color: var(--gray);
  text-align: center;
}

/* Progress Page Responsive */
@media (max-width: 768px) {
  .progress-page {
    padding: var(--space-md);
  }

  .progress-header {
    grid-template-columns: 1fr;
  }

  .progress-level-card {
    padding: var(--space-md);
  }

  .level-circle {
    width: 50px;
    height: 50px;
  }

  .quick-stats {
    grid-template-columns: repeat(2, 1fr);
  }

  .activity-chart {
    height: 120px;
  }
}

/* ============ Offline Indicator ============ */
.offline-indicator {
  position: fixed;
  top: 70px;
  left: 50%;
  transform: translateX(-50%);
  padding: var(--space-xs) var(--space-md);
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: var(--font-size-sm);
  z-index: 1000;
  box-shadow: var(--shadow-md);
  animation: slideDown 0.3s ease;
}

@keyframes slideDown {
  from {
    transform: translateX(-50%) translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }
}

.offline-indicator.offline {
  background: var(--warning);
  color: var(--white);
}

.offline-indicator.syncing {
  background: var(--primary);
  color: var(--white);
}

.offline-icon {
  font-size: 1rem;
}

.offline-icon.syncing {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ============ Export/Import Modal ============ */
.export-import-modal {
  background: var(--white);
  border-radius: var(--radius-lg);
  width: 90%;
  max-width: 500px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: var(--shadow-xl);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md) var(--space-lg);
  border-bottom: 1px solid var(--border);
}

.modal-header h3 {
  margin: 0;
  font-size: var(--font-size-lg);
}

.modal-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: var(--gray);
  padding: 0;
  line-height: 1;
}

.modal-tabs {
  display: flex;
  border-bottom: 1px solid var(--border);
}

.modal-tab {
  flex: 1;
  padding: var(--space-md);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  font-size: var(--font-size-md);
  cursor: pointer;
  color: var(--gray);
  transition: var(--transition-normal);
}

.modal-tab.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
}

.modal-content {
  padding: var(--space-lg);
}

.export-info,
.import-info {
  color: var(--gray-dark);
  margin-bottom: var(--space-md);
}

.export-stats,
.preview-stats {
  display: flex;
  gap: var(--space-md);
  margin-bottom: var(--space-lg);
}

.export-stats .stat-item,
.preview-stats .stat-item {
  flex: 1;
  background: var(--light);
  padding: var(--space-md);
  border-radius: var(--radius-md);
  text-align: center;
}

.stat-label {
  display: block;
  font-size: var(--font-size-sm);
  color: var(--gray);
  margin-bottom: 4px;
}

.export-buttons {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

.export-note {
  font-size: var(--font-size-sm);
  color: var(--gray);
  line-height: 1.5;
}

.file-input-wrapper {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

.file-input {
  display: none;
}

.file-name {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.import-error {
  background: var(--danger-light);
  color: var(--danger);
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-md);
}

.import-preview {
  background: var(--light);
  padding: var(--space-md);
  border-radius: var(--radius-md);
}

.import-preview h4 {
  margin: 0 0 var(--space-sm) 0;
  font-size: var(--font-size-md);
}

.preview-levels {
  display: flex;
  gap: var(--space-xs);
  flex-wrap: wrap;
  margin-bottom: var(--space-md);
}

.level-tag {
  background: var(--primary);
  color: var(--white);
  padding: 2px 8px;
  border-radius: 4px;
  font-size: var(--font-size-sm);
}

.import-warning {
  background: #fff3cd;
  color: #856404;
  padding: var(--space-md);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  margin-top: var(--space-md);
  border: 1px solid #ffc107;
}

.import-warning p {
  margin: 0 0 var(--space-sm) 0;
}

.import-warning .warning-list {
  margin: var(--space-sm) 0;
  padding-left: var(--space-md);
}

.import-warning .hint {
  font-size: 0.8em;
  opacity: 0.8;
  margin-top: var(--space-sm);
}

.import-success {
  text-align: center;
  padding: var(--space-xl);
}

.success-icon {
  font-size: 3rem;
  display: block;
  margin-bottom: var(--space-md);
}

/* ===== FLOATING CHAT BUTTON ===== */
.floating-chat-btn {
  position: fixed;
  bottom: 16px;
  right: 16px;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark, #2563eb) 100%);
  color: white;
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}

.floating-chat-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 28px rgba(0, 0, 0, 0.3);
}

.floating-chat-btn.active {
  background: linear-gradient(135deg, var(--success) 0%, var(--success-dark, #059669) 100%);
}

.floating-chat-btn .chat-icon {
  width: 28px;
  height: 28px;
  transition: transform 0.3s ease;
}

.floating-chat-btn:hover .chat-icon {
  transform: scale(1.1);
}

/* Eye animation on hover */
.floating-chat-btn .eye-pupil {
  transition: transform 0.2s ease;
}

.floating-chat-btn:hover .eye-pupil {
  animation: eyeMove 1s ease-in-out infinite;
}

@keyframes eyeMove {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(1px); }
  75% { transform: translateX(-1px); }
}

/* Tooltip */
.floating-chat-btn .chat-tooltip {
  position: absolute;
  right: 56px;
  top: 50%;
  transform: translateY(-50%);
  background: var(--dark);
  color: white;
  padding: 6px 10px;
  border-radius: 6px;
  font-size: var(--font-size-xs);
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  animation: fadeIn 0.2s ease forwards;
}

.floating-chat-btn .chat-tooltip::after {
  content: '';
  position: absolute;
  right: -6px;
  top: 50%;
  transform: translateY(-50%);
  border: 6px solid transparent;
  border-left-color: var(--dark);
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-50%) translateX(10px); }
  to { opacity: 1; transform: translateY(-50%) translateX(0); }
}

/* Pulse animation for attention */
.floating-chat-btn::before {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: inherit;
  z-index: -1;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 0.4; }
  50% { transform: scale(1.2); opacity: 0; }
}

/* Mobile responsive */
@media (max-width: 768px) {
  .floating-chat-btn {
    bottom: 12px;
    right: 12px;
    width: 40px;
    height: 40px;
  }

  .floating-chat-btn .chat-icon {
    width: 22px;
    height: 22px;
  }

  .floating-chat-btn .chat-tooltip {
    display: none;
  }
}

/* ===== FLOATING CHAT PANEL ===== */
.floating-chat-panel {
  position: fixed;
  bottom: 72px;
  right: 16px;
  width: 360px;
  height: 500px;
  background: var(--white);
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  display: flex;
  flex-direction: column;
  z-index: 999;
  overflow: hidden;
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Header */
.floating-chat-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark, #2563eb) 100%);
  color: white;
}

.floating-chat-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
}

.floating-chat-title .chat-icon {
  font-size: 1.2rem;
}

.floating-chat-close {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  font-size: 1.2rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
}

.floating-chat-close:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Messages area */
.floating-chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
  background: var(--light);
}

.floating-chat-empty {
  text-align: center;
  padding: 40px 20px;
  color: var(--gray);
}

.floating-chat-empty span {
  font-size: 2.5rem;
  display: block;
  margin-bottom: 12px;
}

.floating-chat-empty p {
  margin: 0;
  font-weight: 500;
}

.floating-chat-empty small {
  color: var(--gray-light);
}

/* Message item */
.floating-msg {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}

.floating-msg.own {
  flex-direction: row-reverse;
}

.floating-msg-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 0.8rem;
  font-weight: 600;
  flex-shrink: 0;
}

.floating-msg-content {
  max-width: 75%;
}

.floating-msg-sender {
  font-size: 1rem;
  font-weight: 700;
  color: var(--gray-dark);
  margin-bottom: 4px;
  display: block;
}

.floating-msg-sender.super_admin { color: var(--danger); }
.floating-msg-sender.admin { color: var(--primary); }
.floating-msg-sender.vip_user { color: var(--warning); }

.floating-msg-bubble {
  background: var(--white);
  padding: 8px 12px;
  border-radius: 12px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.floating-msg.own .floating-msg-bubble {
  background: var(--primary);
  color: white;
}

.floating-msg-bubble p {
  margin: 0;
  font-size: 0.9rem;
  line-height: 1.4;
  word-break: break-word;
}

.floating-msg-time {
  font-size: 0.65rem;
  color: var(--gray-light);
  display: block;
  margin-top: 4px;
  text-align: right;
}

.floating-msg.own .floating-msg-time {
  color: rgba(255, 255, 255, 0.7);
}

/* Emoji picker */
.floating-emoji-picker {
  border-top: 1px solid var(--border);
  background: var(--white);
  padding: 8px;
}

.floating-emoji-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 8px;
  border-bottom: 1px solid var(--border);
  padding-bottom: 8px;
}

.floating-emoji-tabs button {
  background: none;
  border: none;
  font-size: 1.1rem;
  padding: 4px 8px;
  border-radius: 6px;
  cursor: pointer;
  opacity: 0.5;
  transition: all 0.2s;
}

.floating-emoji-tabs button.active,
.floating-emoji-tabs button:hover {
  opacity: 1;
  background: var(--light);
}

.floating-emoji-list {
  display: flex;
  flex-wrap: wrap;
  gap: 2px;
  max-height: 100px;
  overflow-y: auto;
}

.floating-emoji-list button {
  background: none;
  border: none;
  font-size: 1.2rem;
  padding: 4px;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.2s;
}

.floating-emoji-list button:hover {
  background: var(--light);
}

/* Input area */
.floating-chat-input {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px;
  background: var(--white);
  border-top: 1px solid var(--border);
}

.floating-emoji-btn {
  background: none;
  border: none;
  font-size: 1.3rem;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  transition: background 0.2s;
}

.floating-emoji-btn:hover {
  background: var(--light);
}

.floating-chat-input input {
  flex: 1;
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 8px 16px;
  font-size: 0.9rem;
  outline: none;
  transition: border-color 0.2s;
}

.floating-chat-input input:focus {
  border-color: var(--primary);
}

.floating-send-btn {
  background: var(--primary);
  border: none;
  color: white;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  transition: all 0.2s;
}

.floating-send-btn:hover:not(:disabled) {
  background: var(--primary-dark, #2563eb);
  transform: scale(1.05);
}

.floating-send-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Mobile responsive */
@media (max-width: 768px) {
  .floating-chat-panel {
    bottom: 80px;
    right: 12px;
    left: 12px;
    width: auto;
    height: 60vh;
    max-height: 500px;
  }
}

/* ==========================================
   PPTX Import/Export Styles
   ========================================== */

/* Header actions in editor */
.editor-header .header-actions {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

/* Slides header actions */
.slides-header-actions {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.btn-small {
  padding: 0.4rem 0.8rem;
  font-size: 0.85rem;
}

/* PPTX Import Modal */
.pptx-import-modal {
  max-width: 500px;
  width: 90%;
}

.pptx-import-modal .modal-body {
  padding: 1.5rem;
}

/* Drop Zone */
.drop-zone {
  border: 2px dashed var(--border);
  border-radius: 16px;
  padding: 3rem 2rem;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  position: relative;
  overflow: hidden;
}

.drop-zone::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(52, 152, 219, 0.1) 0%, rgba(155, 89, 182, 0.1) 100%);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.drop-zone:hover,
.drop-zone.dragging {
  border-color: var(--primary);
  transform: scale(1.01);
  box-shadow: 0 8px 30px rgba(52, 152, 219, 0.15);
}

.drop-zone:hover::before,
.drop-zone.dragging::before {
  opacity: 1;
}

.drop-zone-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.75rem;
  position: relative;
  z-index: 1;
}

.drop-zone .drop-icon {
  font-size: 3.5rem;
  margin-bottom: 0.5rem;
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

.drop-zone .drop-title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--dark);
}

.drop-zone .drop-hint {
  margin: 0;
  color: var(--gray);
  font-size: 0.9rem;
}

.drop-zone .drop-limit {
  display: inline-block;
  background: var(--white);
  color: var(--gray);
  font-size: 0.75rem;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  margin-top: 0.5rem;
}

/* File Info */
.file-info {
  background: var(--light);
  border-radius: 12px;
  padding: 1rem;
}

.file-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.file-header .file-icon {
  font-size: 2.5rem;
}

.file-details {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.file-name {
  font-weight: 600;
  color: var(--dark);
  word-break: break-all;
}

.file-size {
  font-size: 0.85rem;
  color: var(--gray);
}

.btn-remove {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: var(--gray);
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.btn-remove:hover {
  background: var(--danger);
  color: white;
}

/* Preview Stats */
.preview-stats {
  display: flex;
  gap: 1.5rem;
  justify-content: center;
  padding: 1rem 0;
}

.preview-stats .stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}

.preview-stats .stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary);
}

.preview-stats .stat-label {
  font-size: 0.8rem;
  color: var(--gray);
}

.preview-errors {
  padding: 1rem;
}

.preview-errors .error {
  color: var(--danger);
  margin: 0;
}

/* Import Mode Selection */
.import-mode {
  margin-top: 1.5rem;
}

.import-mode > label {
  display: block;
  font-weight: 600;
  margin-bottom: 0.75rem;
  color: var(--dark);
}

.mode-options {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.mode-option {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  padding: 1rem;
  border: 2px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.mode-option:hover {
  border-color: var(--primary);
}

.mode-option.selected {
  border-color: var(--primary);
  background: rgba(231, 76, 60, 0.05);
}

.mode-option input[type="radio"] {
  margin-top: 0.25rem;
}

.mode-icon {
  font-size: 1.25rem;
}

.mode-text {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.mode-text strong {
  color: var(--dark);
}

.mode-text small {
  color: var(--gray);
  font-size: 0.85rem;
}

/* Import Progress Container */
.import-progress-container {
  margin-top: 1.5rem;
  padding: 1.5rem;
  background: var(--light);
  border-radius: 12px;
}

/* Progress Steps */
.progress-steps {
  display: flex;
  justify-content: space-between;
  margin-bottom: 1.5rem;
  position: relative;
}

.progress-steps::before {
  content: '';
  position: absolute;
  top: 20px;
  left: 30px;
  right: 30px;
  height: 2px;
  background: var(--border);
  z-index: 0;
}

.progress-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  z-index: 1;
  background: var(--light);
  padding: 0 0.5rem;
}

.progress-step .step-icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--white);
  border: 2px solid var(--border);
  border-radius: 50%;
  font-size: 1.2rem;
  transition: all 0.3s ease;
}

.progress-step.completed .step-icon {
  background: var(--success);
  border-color: var(--success);
}

.progress-step.active .step-icon {
  background: var(--primary);
  border-color: var(--primary);
  animation: pulse 1s infinite;
}

.progress-step .step-label {
  font-size: 0.75rem;
  color: var(--gray);
  text-align: center;
}

.progress-step.completed .step-label,
.progress-step.active .step-label {
  color: var(--dark);
  font-weight: 500;
}

.progress-bar {
  height: 8px;
  background: var(--border);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.75rem;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary) 0%, var(--success) 100%);
  border-radius: 4px;
  transition: width 0.3s ease;
}

.progress-text {
  text-align: center;
  color: var(--gray);
  font-size: 0.9rem;
  margin: 0;
}

/* Progress Info with Percentage */
.progress-info {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  margin-top: 0.75rem;
}

.progress-percent {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary);
  min-width: 60px;
  text-align: center;
}

.progress-info .progress-text {
  flex: 1;
  text-align: left;
  color: var(--gray-dark);
  font-size: 0.9rem;
}

/* Import Error */
.import-error {
  margin-top: 1rem;
  padding: 1.5rem;
  background: rgba(231, 76, 60, 0.1);
  border-radius: 12px;
  border-left: 4px solid var(--danger);
  text-align: center;
}

.import-error .error-icon {
  font-size: 2rem;
  display: block;
  margin-bottom: 0.5rem;
}

.import-error p {
  color: var(--danger);
  margin: 0 0 1rem 0;
}

/* Import Success */
.import-success {
  margin-top: 1rem;
  padding: 1.5rem;
  background: rgba(39, 174, 96, 0.1);
  border-radius: 12px;
  border-left: 4px solid var(--success);
  text-align: center;
}

.import-success .success-icon {
  font-size: 2.5rem;
  display: block;
  margin-bottom: 0.5rem;
}

.import-success p {
  color: var(--success);
  margin: 0;
  font-weight: 500;
  font-size: 1.1rem;
}

.saving-spinner {
  width: 24px;
  height: 24px;
  border: 3px solid var(--border);
  border-top-color: var(--primary);
  border-radius: 50%;
  margin: 1rem auto 0;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ============================================
   PowerPoint-like Lecture Editor Styles
   ============================================ */

/* Prevent body scroll when editor is active */
body:has(.ppt-editor) {
  overflow: hidden !important;
  height: 100vh;
}

html:has(.ppt-editor) {
  overflow: hidden !important;
  height: 100vh;
}

/* Main Container - Full viewport, no page scroll */
.ppt-editor {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  background: #f0f0f0;
  overflow: hidden;
  z-index: 1000;
}

/* Error Page */
.ppt-error-page {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 2rem;
  text-align: center;
  background: var(--white);
}

.ppt-error-page p {
  margin-bottom: 1rem;
  color: var(--gray-dark);
}

/* Top Header Bar */
.ppt-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 1rem;
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  color: var(--white);
  min-height: 50px;
  flex-shrink: 0;
}

.ppt-header-left {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex: 1;
}

.ppt-header-right {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.ppt-title-input {
  flex: 1;
  max-width: 400px;
  padding: 0.5rem 0.75rem;
  border: none;
  border-radius: var(--radius-md);
  background: rgba(255, 255, 255, 0.2);
  color: var(--white);
  font-size: 1rem;
  font-weight: 500;
}

.ppt-title-input::placeholder {
  color: rgba(255, 255, 255, 0.7);
}

.ppt-title-input:focus {
  outline: none;
  background: rgba(255, 255, 255, 0.3);
}

.ppt-unsaved-badge {
  color: #ffeb3b;
  font-size: 1.2rem;
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Buttons */
.ppt-btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: var(--radius-md);
  background: rgba(255, 255, 255, 0.2);
  color: var(--white);
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  white-space: nowrap;
}

.ppt-btn:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.3);
}

.ppt-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.ppt-btn-icon {
  padding: 0.5rem;
  min-width: 36px;
  justify-content: center;
}

.ppt-btn-primary {
  background: var(--white);
  color: var(--primary);
}

.ppt-btn-primary:hover:not(:disabled) {
  background: var(--light);
}

.ppt-btn-ghost {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.ppt-btn-ghost:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.5);
}

.ppt-btn-ghost.active {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.6);
}

/* Ribbon Toolbar */
.ppt-ribbon {
  background: var(--white);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.ppt-ribbon-tabs {
  display: flex;
  gap: 0;
  padding: 0 1rem;
  border-bottom: 1px solid var(--border);
  background: #fafafa;
}

.ppt-tab {
  padding: 0.75rem 1.5rem;
  border: none;
  background: transparent;
  color: var(--gray-dark);
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
  border-bottom: 2px solid transparent;
  margin-bottom: -1px;
}

.ppt-tab:hover {
  color: var(--primary);
  background: rgba(102, 126, 234, 0.05);
}

.ppt-tab.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
  background: var(--white);
}

.ppt-ribbon-content {
  display: flex;
  align-items: flex-start;
  gap: 0;
  padding: 0.75rem 1rem;
  min-height: 80px;
}

/* Ribbon Groups */
.ppt-ribbon-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0 1rem;
  border-right: 1px solid var(--border);
}

.ppt-ribbon-group:last-child {
  border-right: none;
}

.ppt-ribbon-group-content {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.ppt-ribbon-group-label {
  font-size: 0.7rem;
  color: var(--gray);
  margin-top: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Ribbon Buttons */
.ppt-ribbon-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
  padding: 0.5rem 0.75rem;
  border: none;
  background: transparent;
  color: var(--dark);
  font-size: 0.75rem;
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all var(--transition-fast);
  min-width: 60px;
}

.ppt-ribbon-btn:hover:not(:disabled) {
  background: var(--light);
}

.ppt-ribbon-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.ppt-ribbon-btn-danger {
  color: var(--danger);
}

.ppt-ribbon-btn-danger:hover:not(:disabled) {
  background: rgba(231, 76, 60, 0.1);
}

.ppt-ribbon-btn-lg {
  min-width: 70px;
  padding: 0.6rem 0.85rem;
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  color: var(--white);
  border-radius: var(--radius-md);
}

.ppt-ribbon-btn-lg:hover:not(:disabled) {
  background: linear-gradient(135deg, #5a68d8 0%, #7a5adb 100%);
  transform: translateY(-1px);
}

.ppt-ribbon-btn.active {
  background: var(--primary);
  color: var(--white);
}

.ppt-ribbon-icon {
  font-size: 1.25rem;
}

.ppt-ribbon-icon-text {
  font-size: 1rem;
  font-weight: 600;
}

.ppt-ribbon-row {
  display: flex;
  align-items: center;
  gap: 0.35rem;
}

/* Ribbon Button Groups */
.ppt-ribbon-btn-group {
  display: flex;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.ppt-ribbon-btn-sm {
  padding: 0.35rem 0.5rem;
  border: none;
  background: var(--white);
  color: var(--dark);
  font-size: 0.875rem;
  cursor: pointer;
  transition: all var(--transition-fast);
  min-width: 28px;
}

.ppt-ribbon-btn-sm:hover {
  background: var(--light);
}

.ppt-ribbon-btn-sm.active {
  background: var(--primary);
  color: var(--white);
}

/* Ribbon Selects */
.ppt-ribbon-select {
  padding: 0.35rem 0.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--white);
  color: var(--dark);
  font-size: 0.8rem;
  cursor: pointer;
  min-width: 100px;
}

.ppt-ribbon-select-sm {
  min-width: 60px;
}

.ppt-ribbon-input {
  padding: 0.35rem 0.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--white);
  color: var(--dark);
  font-size: 0.8rem;
  width: 60px;
  text-align: center;
}

.ppt-ribbon-label {
  font-size: 0.75rem;
  color: var(--gray-dark);
}

/* Color Picker */
.ppt-color-picker {
  display: flex;
  gap: 4px;
}

.ppt-color-btn {
  width: 22px;
  height: 22px;
  border: 2px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.ppt-color-btn:hover {
  transform: scale(1.15);
}

.ppt-color-btn.active {
  border-color: var(--dark);
  box-shadow: 0 0 0 2px var(--white), 0 0 0 4px var(--primary);
}

/* Color Section for grouped color pickers */
.ppt-color-section {
  display: flex;
  flex-direction: column;
  gap: 2px;
  align-items: flex-start;
}

.ppt-ribbon-mini-label {
  font-size: 0.65rem;
  color: var(--gray);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

/* Color Input */
.ppt-color-input {
  width: 28px;
  height: 28px;
  padding: 2px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  background: var(--white);
}

.ppt-color-input::-webkit-color-swatch-wrapper {
  padding: 0;
}

.ppt-color-input::-webkit-color-swatch {
  border: none;
  border-radius: 3px;
}

/* Shape Elements */
.ppt-shape {
  position: relative;
}

.ppt-shape-line {
  border-radius: 0 !important;
}

.ppt-shape-arrow {
  overflow: visible !important;
}

/* Text Box Element */
.ppt-text-box {
  box-sizing: border-box;
}

/* Quick Symbols in Ribbon */
.ppt-quick-symbols {
  display: flex;
  gap: 2px;
  flex-wrap: wrap;
  max-width: 200px;
}

.ppt-symbol-btn {
  width: 28px;
  height: 28px;
  padding: 0;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--white);
  cursor: pointer;
  font-size: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.ppt-symbol-btn:hover:not(:disabled) {
  background: var(--light);
  border-color: var(--primary);
  transform: scale(1.1);
}

.ppt-symbol-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* Symbol Picker Modal */
.ppt-symbol-modal {
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  width: 90%;
  max-width: 600px;
  max-height: 80vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.ppt-symbol-categories {
  padding: 1rem;
  overflow-y: auto;
  flex: 1;
}

.ppt-symbol-category {
  margin-bottom: 1rem;
}

.ppt-symbol-category h4 {
  font-size: 0.85rem;
  color: var(--gray-dark);
  margin-bottom: 0.5rem;
  padding-bottom: 0.25rem;
  border-bottom: 1px solid var(--border);
}

.ppt-symbol-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.ppt-symbol-item {
  width: 36px;
  height: 36px;
  padding: 0;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--white);
  cursor: pointer;
  font-size: 1.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.ppt-symbol-item:hover {
  background: var(--light);
  border-color: var(--primary);
  transform: scale(1.15);
  box-shadow: var(--shadow-sm);
}

/* Admin Notes Feature */
.ppt-btn-active {
  background: var(--primary) !important;
  color: var(--white) !important;
}

.ppt-add-note-btn {
  position: absolute;
  top: -32px;
  right: 4px;
  padding: 4px 10px;
  background: var(--warning);
  color: var(--white);
  border: none;
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  z-index: 100;
  box-shadow: var(--shadow-md);
  transition: all var(--transition-fast);
}

.ppt-add-note-btn:hover {
  background: var(--warning-light);
  color: var(--warning);
  transform: scale(1.05);
}

.ppt-admin-notes-container {
  position: absolute;
  left: -30px;
  top: 0;
  width: 26px;
  height: 100%;
  pointer-events: auto;
}

.ppt-admin-note {
  position: absolute;
  left: 0;
}

.ppt-admin-note-marker {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: var(--warning);
  border-radius: 50%;
  cursor: pointer;
  font-size: 12px;
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-fast);
}

.ppt-admin-note-marker:hover {
  transform: scale(1.2);
  box-shadow: var(--shadow-md);
}

.ppt-admin-note-popup {
  display: none;
  position: absolute;
  left: 30px;
  top: -10px;
  width: 280px;
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  padding: 10px;
  z-index: 200;
}

.ppt-admin-note:hover .ppt-admin-note-popup {
  display: block;
}

.ppt-admin-note-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border);
}

.ppt-admin-note-text {
  font-size: 0.8rem;
  color: var(--primary);
  font-style: italic;
  flex: 1;
  word-break: break-word;
}

.ppt-admin-note-actions {
  display: flex;
  gap: 4px;
  margin-left: 8px;
}

.ppt-admin-note-actions button {
  padding: 2px 6px;
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 12px;
  border-radius: 4px;
}

.ppt-admin-note-actions button:hover {
  background: var(--light);
}

.ppt-admin-note-content {
  font-size: 0.85rem;
  color: var(--dark);
  line-height: 1.4;
  margin-bottom: 8px;
}

.ppt-admin-note-meta {
  font-size: 0.7rem;
  color: var(--gray);
}

/* Note Modal */
.ppt-note-modal {
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  width: 90%;
  max-width: 450px;
  overflow: hidden;
}

.ppt-note-modal-content {
  padding: 1.5rem;
}

.ppt-note-selected-text {
  margin-bottom: 1rem;
}

.ppt-note-selected-text label {
  display: block;
  font-size: 0.85rem;
  color: var(--gray-dark);
  margin-bottom: 0.5rem;
}

.ppt-note-highlight {
  background: var(--warning-light);
  color: var(--dark);
  padding: 0.75rem;
  border-radius: var(--radius-sm);
  font-style: italic;
  border-left: 3px solid var(--warning);
}

.ppt-note-input-group {
  margin-bottom: 1rem;
}

.ppt-note-input-group label {
  display: block;
  font-size: 0.85rem;
  color: var(--gray-dark);
  margin-bottom: 0.5rem;
}

.ppt-note-input-group textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.9rem;
  resize: vertical;
  font-family: inherit;
}

.ppt-note-input-group textarea:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.ppt-note-modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
}

/* Error Bar */
.ppt-error-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 1rem;
  background: var(--danger-light);
  color: var(--danger);
  font-size: 0.875rem;
  flex-shrink: 0;
}

.ppt-error-bar button {
  background: none;
  border: none;
  color: var(--danger);
  cursor: pointer;
  font-size: 1.25rem;
  padding: 0 0.5rem;
}

/* Main Content Area */
.ppt-main {
  display: flex;
  flex: 1;
  min-height: 0; /* Critical for nested flex scroll */
  overflow: hidden;
}

/* Left Sidebar - Slide Thumbnails */
.ppt-sidebar {
  width: 220px;
  min-width: 220px;
  max-width: 220px;
  background: var(--white);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-height: 0; /* Critical for nested flex scroll */
}

.ppt-sidebar-header {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--border);
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--dark);
  background: #fafafa;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.ppt-thumbnails {
  flex: 1;
  min-height: 0; /* Critical for flex scroll */
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* Custom scrollbar for thumbnails */
.ppt-thumbnails::-webkit-scrollbar {
  width: 6px;
}

.ppt-thumbnails::-webkit-scrollbar-track {
  background: transparent;
}

.ppt-thumbnails::-webkit-scrollbar-thumb {
  background: var(--gray-light);
  border-radius: 3px;
}

.ppt-thumbnails::-webkit-scrollbar-thumb:hover {
  background: var(--gray);
}

.ppt-loading,
.ppt-empty {
  padding: 2rem 1rem;
  text-align: center;
  color: var(--gray);
  font-size: 0.875rem;
}

/* Slide Thumbnail */
.ppt-thumbnail {
  display: flex;
  gap: 0.4rem;
  padding: 0.4rem;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
  flex-shrink: 0;
}

.ppt-thumbnail:hover {
  background: var(--light);
}

.ppt-thumbnail.active {
  background: rgba(102, 126, 234, 0.15);
  box-shadow: inset 3px 0 0 var(--primary);
}

.ppt-thumbnail-num {
  font-size: 0.7rem;
  color: var(--gray);
  font-weight: 600;
  min-width: 18px;
  text-align: center;
  padding-top: 0.2rem;
}

.ppt-thumbnail-preview {
  flex: 1;
  min-width: 0;
  aspect-ratio: 16 / 9;
  border: 1px solid var(--border);
  border-radius: 3px;
  background: var(--white);
  overflow: hidden;
  padding: 0.2rem;
  display: flex;
  flex-direction: column;
  gap: 1px;
  box-shadow: var(--shadow-sm);
  background-size: cover;
  background-position: center;
}

.ppt-thumbnail.active .ppt-thumbnail-preview {
  border-color: var(--primary);
}

.ppt-thumb-title {
  font-size: 0.55rem;
  font-weight: 600;
  color: var(--dark);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 1.2;
}

.ppt-thumb-element {
  font-size: 0.5rem;
  color: var(--gray);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 1.2;
}

.ppt-thumbnail-actions {
  position: absolute;
  right: 0.2rem;
  top: 0.2rem;
  display: none;
  gap: 0.15rem;
}

.ppt-thumbnail:hover .ppt-thumbnail-actions {
  display: flex;
}

.ppt-thumbnail-actions button {
  padding: 0.15rem 0.2rem;
  border: none;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 3px;
  cursor: pointer;
  font-size: 0.65rem;
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-fast);
  line-height: 1;
}

.ppt-thumbnail-actions button:hover {
  background: var(--white);
  transform: scale(1.1);
}

/* Add Slide Button */
.ppt-add-slide-btn {
  margin: 0.5rem;
  padding: 0.6rem;
  border: 2px dashed var(--border);
  border-radius: var(--radius-md);
  background: transparent;
  color: var(--gray);
  font-size: 0.8rem;
  cursor: pointer;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.ppt-add-slide-btn:hover:not(:disabled) {
  border-color: var(--primary);
  color: var(--primary);
  background: rgba(102, 126, 234, 0.05);
}

.ppt-add-slide-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Main Canvas Container */
.ppt-canvas-container {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  background: #e5e5e5;
  overflow: hidden;
  position: relative;
  min-width: 0; /* Prevent flex overflow */
  min-height: 0; /* Prevent flex overflow */
}

@media (max-width: 1024px) {
  .ppt-canvas-container {
    padding: 0.5rem;
  }
}

/* Slide Canvas */
.ppt-canvas {
  width: 100%;
  max-width: 960px;
  max-height: 100%;
  aspect-ratio: 16 / 9;
  background: var(--white);
  box-shadow: var(--shadow-lg);
  border-radius: 4px;
  position: relative;
  overflow: hidden;
  /* Ensure canvas doesn't exceed container */
  container-type: inline-size;
}

.ppt-canvas-empty {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--gray);
  font-size: 0.875rem;
  pointer-events: none;
}

/* Element wrapper - inherits position from inline style */
.ppt-element {
  /* Position set via inline style (absolute with %) */
}

.ppt-element.selected {
  z-index: 10;
  outline: none;
}

/* Resize Handles */
.ppt-resize-handle {
  position: absolute;
  width: 8px;
  height: 8px;
  background: #fff;
  border: 2px solid #3498db;
  border-radius: 2px;
  z-index: 20;
  pointer-events: auto;
}

.ppt-resize-nw { top: -4px; left: -4px; cursor: nw-resize; }
.ppt-resize-n { top: -4px; left: 50%; transform: translateX(-50%); cursor: n-resize; }
.ppt-resize-ne { top: -4px; right: -4px; cursor: ne-resize; }
.ppt-resize-w { top: 50%; left: -4px; transform: translateY(-50%); cursor: w-resize; }
.ppt-resize-e { top: 50%; right: -4px; transform: translateY(-50%); cursor: e-resize; }
.ppt-resize-sw { bottom: -4px; left: -4px; cursor: sw-resize; }
.ppt-resize-s { bottom: -4px; left: 50%; transform: translateX(-50%); cursor: s-resize; }
.ppt-resize-se { bottom: -4px; right: -4px; cursor: se-resize; }

.ppt-resize-handle:hover {
  background: #3498db;
}

/* Floating Context Toolbar */
.ppt-floating-toolbar {
  position: absolute;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.35rem 0.5rem;
  background: var(--dark);
  color: var(--white);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
  z-index: 100;
  pointer-events: auto;
  animation: floatToolbarIn 0.15s ease-out;
}

@keyframes floatToolbarIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

.ppt-floating-toolbar::after {
  content: '';
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: var(--dark);
}

.ppt-floating-toolbar-group {
  display: flex;
  align-items: center;
  gap: 0.15rem;
}

.ppt-floating-toolbar-divider {
  width: 1px;
  height: 20px;
  background: rgba(255, 255, 255, 0.2);
  margin: 0 0.25rem;
}

.ppt-floating-toolbar button {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.4rem;
  border: none;
  background: transparent;
  color: var(--white);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
  line-height: 1;
}

.ppt-floating-toolbar button:hover {
  background: rgba(255, 255, 255, 0.15);
}

.ppt-floating-toolbar button.danger:hover {
  background: rgba(231, 76, 60, 0.5);
}

@media (max-width: 768px) {
  .ppt-floating-toolbar {
    padding: 0.25rem 0.35rem;
    gap: 0.15rem;
  }

  .ppt-floating-toolbar button {
    padding: 0.3rem;
  }
}

/* Inline Title Editing */
.ppt-slide-title {
  position: absolute;
  top: 2%;
  left: 5%;
  right: 5%;
  padding: 0.5rem 1rem;
  font-size: clamp(1rem, 2.5vw, 1.5rem);
  font-weight: 700;
  text-align: center;
  color: var(--dark);
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: all var(--transition-fast);
  z-index: 5;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.ppt-slide-title:hover {
  background: rgba(0, 0, 0, 0.05);
}

.ppt-slide-title.editing {
  background: var(--white);
  box-shadow: var(--shadow-md);
  white-space: normal;
  overflow: visible;
}

.ppt-slide-title span {
  display: block;
  min-height: 1.2em;
}

.ppt-title-inline-input {
  width: 100%;
  padding: 0;
  border: none;
  background: transparent;
  font-size: inherit;
  font-weight: 700;
  text-align: center;
  color: var(--dark);
  outline: none;
}

.ppt-title-inline-input::placeholder {
  color: var(--gray);
}

.ppt-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background: var(--light);
  color: var(--gray);
  font-size: 0.875rem;
}

/* No Slide State */
.ppt-no-slide {
  width: 100%;
  max-width: 600px;
  padding: 3rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  text-align: center;
}

.ppt-no-slide-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

.ppt-no-slide-icon {
  font-size: 4rem;
  color: var(--primary);
  opacity: 0.7;
  display: flex;
  align-items: center;
  justify-content: center;
}

.ppt-no-slide p {
  color: var(--gray-dark);
  font-size: 1.1rem;
}

/* Save Float Button */
.ppt-save-float {
  position: absolute;
  bottom: 2rem;
  right: 2rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  color: var(--white);
  border: none;
  border-radius: 30px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  box-shadow: var(--shadow-lg);
  transition: all var(--transition-fast);
  animation: savePulse 2s ease-in-out infinite;
}

.ppt-save-float:hover {
  transform: scale(1.05);
  box-shadow: var(--shadow-xl);
  animation: none;
}

@keyframes savePulse {
  0%, 100% { transform: translateY(0); box-shadow: var(--shadow-lg); }
  50% { transform: translateY(-3px); box-shadow: 0 8px 30px rgba(102, 126, 234, 0.4); }
}

/* Quick Actions Bar */
.ppt-quick-actions-bar {
  position: absolute;
  bottom: 1rem;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem 0.75rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
  z-index: 50;
}

.ppt-quick-actions-bar button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  padding: 0;
  border: none;
  background: var(--light);
  color: var(--dark);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.ppt-quick-actions-bar button:hover:not(:disabled) {
  background: var(--primary);
  color: var(--white);
  transform: translateY(-2px);
}

.ppt-quick-actions-bar button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.ppt-quick-actions-divider {
  width: 1px;
  height: 24px;
  background: var(--border);
  margin: 0 0.25rem;
}

/* Settings Panel */
.ppt-settings-panel {
  width: 280px;
  background: var(--white);
  border-left: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
}

.ppt-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--border);
  background: #fafafa;
}

.ppt-panel-header h3 {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--dark);
  margin: 0;
}

.ppt-panel-header button {
  background: none;
  border: none;
  font-size: 1.25rem;
  color: var(--gray);
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

.ppt-panel-header button:hover {
  color: var(--dark);
}

.ppt-panel-content {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
}

/* Form Groups */
.ppt-form-group {
  margin-bottom: 1rem;
}

.ppt-form-group label {
  display: block;
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--dark);
  margin-bottom: 0.5rem;
}

.ppt-form-group input[type="checkbox"] {
  margin-right: 0.5rem;
}

.ppt-form-group textarea,
.ppt-form-group select {
  width: 100%;
  padding: 0.5rem 0.75rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  color: var(--dark);
  background: var(--white);
}

.ppt-form-group textarea {
  resize: vertical;
  min-height: 80px;
}

.ppt-form-group textarea:focus,
.ppt-form-group select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
}

/* Import Warning */
.import-warning {
  margin-top: 1rem;
  padding: 1.5rem;
  background: rgba(243, 156, 18, 0.1);
  border-radius: 12px;
  border-left: 4px solid var(--warning);
  text-align: center;
}

.import-warning .warning-icon {
  font-size: 2rem;
  display: block;
  margin-bottom: 0.5rem;
}

.import-warning p {
  color: var(--dark);
  margin: 0 0 0.75rem 0;
}

.import-warning .warning-list {
  text-align: left;
  padding-left: 1.5rem;
  margin: 0.75rem 0;
  color: var(--gray-dark);
  font-size: 0.875rem;
}

.import-warning .warning-list li {
  margin-bottom: 0.25rem;
}

.import-warning .hint {
  font-size: 0.8rem;
  color: var(--gray);
  margin-top: 0.75rem;
}

/* Responsive adjustments */
@media (max-width: 1200px) {
  .ppt-sidebar {
    width: 160px;
  }

  .ppt-settings-panel {
    width: 240px;
  }
}

@media (max-width: 992px) {
  .ppt-ribbon-content {
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .ppt-ribbon-group {
    padding: 0 0.5rem;
  }
}

@media (max-width: 768px) {
  .ppt-header {
    flex-direction: column;
    gap: 0.5rem;
    padding: 0.5rem;
  }

  .ppt-header-left,
  .ppt-header-right {
    width: 100%;
    justify-content: center;
  }

  .ppt-title-input {
    max-width: 100%;
  }

  .ppt-sidebar {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    z-index: 100;
    transform: translateX(-100%);
    transition: transform var(--transition-normal);
  }

  .ppt-sidebar.open {
    transform: translateX(0);
  }

  .ppt-canvas-container {
    padding: 1rem;
  }

  .ppt-settings-panel {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: 100;
    transform: translateX(100%);
    transition: transform var(--transition-normal);
  }

  .ppt-settings-panel.open {
    transform: translateX(0);
  }
}

/* ============================================
   ENHANCED LECTURE EDITOR (LE) COMPONENTS
   ============================================ */

/* Floating Action Buttons */
.le-fab {
  position: fixed;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transition: all 0.2s ease;
  z-index: 500;
}

.le-fab:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
}

.le-fab-quick {
  bottom: 24px;
  right: 24px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.le-fab-icon {
  font-size: 28px;
  font-weight: 300;
}

.le-fab-layers {
  bottom: 80px;
  right: 24px;
  background: white;
  color: #333;
  border: 1px solid #e0e0e0;
}

/* Quick Actions Panel */
.le-quick-panel {
  position: fixed;
  bottom: 80px;
  right: 24px;
  width: 280px;
  background: white;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  z-index: 510;
  overflow: hidden;
  animation: slideUp 0.2s ease;
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.le-quick-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  font-weight: 600;
}

.le-quick-panel-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
  padding: 16px;
}

.le-quick-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px 8px;
  border: none;
  background: #f8f9fa;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #333;
}

.le-quick-item:hover {
  background: #e9ecef;
  transform: translateY(-2px);
}

.le-quick-item span:last-child {
  font-size: 10px;
  color: #666;
}

/* Icon Button Common */
.le-icon-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: inherit;
  opacity: 0.8;
}

.le-icon-btn:hover {
  opacity: 1;
  background: rgba(255, 255, 255, 0.2);
}

/* Templates Panel */
.le-templates-panel {
  position: fixed;
  top: 120px;
  left: 240px;
  width: 360px;
  max-height: calc(100vh - 160px);
  background: white;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  z-index: 510;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.le-templates-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: #2c3e50;
  color: white;
  font-weight: 600;
}

.le-templates-header .le-icon-btn {
  margin-left: auto;
}

.le-templates-categories {
  display: flex;
  gap: 4px;
  padding: 12px;
  background: #f8f9fa;
  border-bottom: 1px solid #e0e0e0;
  flex-wrap: wrap;
}

.le-cat-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 12px;
  border: none;
  background: white;
  border-radius: 20px;
  cursor: pointer;
  font-size: 12px;
  color: #666;
  transition: all 0.2s ease;
}

.le-cat-btn:hover {
  background: #e9ecef;
}

.le-cat-btn.active {
  background: #667eea;
  color: white;
}

.le-templates-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  padding: 16px;
  overflow-y: auto;
  flex: 1;
}

.le-template-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 12px;
  border: 2px solid #e0e0e0;
  background: white;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.le-template-card:hover {
  border-color: #667eea;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
}

.le-template-preview {
  width: 100%;
  aspect-ratio: 16/9;
  background: #f8f9fa;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.le-template-thumb {
  font-size: 24px;
  font-weight: 600;
  color: #666;
}

.le-template-name {
  font-size: 12px;
  font-weight: 500;
  color: #333;
  text-align: center;
}

/* Layers Panel */
.le-layers-panel {
  position: fixed;
  bottom: 80px;
  right: 80px;
  width: 280px;
  max-height: 400px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  z-index: 510;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.le-layers-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: #34495e;
  color: white;
  font-size: 13px;
  font-weight: 600;
}

.le-layers-header .le-icon-btn {
  margin-left: auto;
}

.le-layers-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

.le-layers-empty {
  padding: 24px;
  text-align: center;
  color: #999;
  font-size: 13px;
}

.le-layer-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
  border: 1px solid transparent;
}

.le-layer-item:hover {
  background: #f8f9fa;
}

.le-layer-item.selected {
  background: #e8f0fe;
  border-color: #667eea;
}

.le-layer-item.hidden {
  opacity: 0.5;
}

.le-layer-item.locked {
  background: #fef5e7;
}

.le-layer-drag {
  color: #ccc;
  cursor: grab;
}

.le-layer-icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f0f0f0;
  border-radius: 4px;
  color: #666;
}

.le-layer-name {
  flex: 1;
  font-size: 12px;
  color: #333;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.le-layer-actions {
  display: flex;
  gap: 2px;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.le-layer-item:hover .le-layer-actions {
  opacity: 1;
}

.le-layer-actions button {
  background: none;
  border: none;
  padding: 4px;
  cursor: pointer;
  color: #666;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.le-layer-actions button:hover {
  background: #e0e0e0;
  color: #333;
}

.le-layer-actions button:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.le-layer-delete:hover {
  background: #fee !important;
  color: #e74c3c !important;
}

/* Alignment Tools */
.le-align-tools {
  display: flex;
  gap: 16px;
  padding: 8px 12px;
  background: #f8f9fa;
  border-radius: 8px;
}

.le-align-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.le-align-label {
  font-size: 10px;
  color: #999;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.le-align-btns {
  display: flex;
  gap: 2px;
}

.le-align-btns button {
  background: white;
  border: 1px solid #e0e0e0;
  padding: 6px;
  cursor: pointer;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #666;
  transition: all 0.15s ease;
}

.le-align-btns button:hover:not(:disabled) {
  background: #667eea;
  border-color: #667eea;
  color: white;
}

.le-align-btns button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* Zoom Controls */
.le-zoom-controls {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px;
  background: white;
  border-radius: 8px;
  border: 1px solid #e0e0e0;
}

.le-zoom-controls button {
  background: none;
  border: none;
  padding: 6px 8px;
  cursor: pointer;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #666;
  transition: all 0.15s ease;
}

.le-zoom-controls button:hover:not(:disabled) {
  background: #f0f0f0;
  color: #333;
}

.le-zoom-controls button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.le-zoom-value {
  min-width: 48px;
  text-align: center;
  font-size: 12px;
  font-weight: 500;
}

/* Grid Toggle */
.le-grid-toggle {
  background: white;
  border: 1px solid #e0e0e0;
  padding: 8px;
  cursor: pointer;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #666;
  transition: all 0.15s ease;
}

.le-grid-toggle:hover {
  background: #f0f0f0;
}

.le-grid-toggle.active {
  background: #667eea;
  border-color: #667eea;
  color: white;
}

/* ============ ADVANCED EFFECTS PANELS ============ */

/* Effects Panel Base */
.le-effects-panel {
  position: fixed;
  top: 150px;
  right: 24px;
  width: 320px;
  max-height: calc(100vh - 200px);
  background: white;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  z-index: 520;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.le-effects-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: linear-gradient(135deg, #2c3e50, #3498db);
  color: white;
  font-weight: 600;
  font-size: 14px;
}

.le-effects-header .le-icon-btn {
  margin-left: auto;
}

.le-effects-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
  padding: 16px;
  overflow-y: auto;
}

.le-effects-grid-shapes {
  grid-template-columns: repeat(4, 1fr);
}

.le-effect-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 8px;
  border: 2px solid #e0e0e0;
  background: white;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.le-effect-item:hover {
  border-color: #3498db;
  transform: translateY(-2px);
}

.le-effect-item.active {
  border-color: #667eea;
  background: #f0f4ff;
}

.le-effect-preview-text {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8f9fa;
  border-radius: 6px;
}

.le-effect-preview-shape {
  width: 36px;
  height: 36px;
  border-radius: 6px;
}

.le-effect-name {
  font-size: 10px;
  color: #666;
  text-align: center;
}

/* Gradient Panel */
.le-gradient-panel {
  width: 380px;
}

.le-gradient-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  padding: 16px;
  overflow-y: auto;
}

.le-gradient-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 6px;
  border: 2px solid transparent;
  background: white;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.le-gradient-item:hover {
  border-color: #3498db;
}

.le-gradient-item.active {
  border-color: #667eea;
}

.le-gradient-preview {
  width: 100%;
  aspect-ratio: 16/9;
  border-radius: 6px;
  border: 1px solid #e0e0e0;
}

.le-gradient-name {
  font-size: 10px;
  color: #666;
}

/* Animations Panel */
.le-animations-panel {
  width: 300px;
}

.le-animation-tabs {
  display: flex;
  border-bottom: 1px solid #e0e0e0;
}

.le-animation-tabs button {
  flex: 1;
  padding: 10px;
  border: none;
  background: none;
  cursor: pointer;
  font-size: 12px;
  color: #666;
  transition: all 0.15s ease;
}

.le-animation-tabs button:hover {
  background: #f8f9fa;
}

.le-animation-tabs button.active {
  color: #667eea;
  border-bottom: 2px solid #667eea;
  font-weight: 600;
}

.le-animation-list {
  padding: 8px;
  overflow-y: auto;
  max-height: 300px;
}

.le-animation-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  border-radius: 6px;
  transition: background 0.15s ease;
}

.le-animation-item:hover {
  background: #f8f9fa;
}

.le-animation-item.active {
  background: #e8f0fe;
}

.le-animation-select {
  flex: 1;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border: none;
  background: none;
  cursor: pointer;
  padding: 4px 0;
}

.le-animation-name {
  font-size: 13px;
  color: #333;
}

.le-animation-duration {
  font-size: 11px;
  color: #999;
}

.le-animation-preview-btn {
  padding: 6px;
  border: none;
  background: #667eea;
  color: white;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.le-animation-preview-btn:hover {
  background: #5a6fd6;
}

/* Themes Panel */
.le-themes-panel {
  width: 360px;
}

.le-themes-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  padding: 16px;
  overflow-y: auto;
}

.le-theme-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 6px;
  border: 2px solid #e0e0e0;
  background: white;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.le-theme-item:hover {
  border-color: #3498db;
  transform: translateY(-2px);
}

.le-theme-item.active {
  border-color: #667eea;
}

.le-theme-preview {
  width: 100%;
  aspect-ratio: 16/9;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  padding: 4px;
}

.le-theme-name {
  font-size: 10px;
  color: #666;
}

/* Shortcuts Panel */
.le-shortcuts-panel {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 400px;
  max-height: 80vh;
  background: white;
  border-radius: 16px;
  box-shadow: 0 16px 64px rgba(0, 0, 0, 0.2);
  z-index: 600;
  overflow: hidden;
}

.le-shortcuts-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px 20px;
  background: linear-gradient(135deg, #2c3e50, #34495e);
  color: white;
  font-weight: 600;
}

.le-shortcuts-header .le-icon-btn {
  margin-left: auto;
}

.le-shortcuts-content {
  padding: 12px;
  overflow-y: auto;
  max-height: calc(80vh - 60px);
}

.le-shortcuts-category {
  margin-bottom: 8px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  overflow: hidden;
}

.le-shortcuts-category-header {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border: none;
  background: #f8f9fa;
  cursor: pointer;
  font-weight: 500;
  color: #333;
}

.le-shortcuts-category-header:hover {
  background: #f0f0f0;
}

.le-shortcuts-list {
  padding: 8px 16px;
}

.le-shortcut-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 0;
  border-bottom: 1px solid #f0f0f0;
}

.le-shortcut-item:last-child {
  border-bottom: none;
}

.le-shortcut-key {
  min-width: 80px;
  padding: 4px 8px;
  background: #e9ecef;
  border-radius: 4px;
  font-family: monospace;
  font-size: 12px;
  color: #333;
  text-align: center;
}

.le-shortcut-desc {
  font-size: 13px;
  color: #666;
}

/* Rotation Control */
.le-rotation-control {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: #f8f9fa;
  border-radius: 8px;
}

.le-rotation-slider {
  flex: 1;
  height: 4px;
  -webkit-appearance: none;
  appearance: none;
  background: #e0e0e0;
  border-radius: 2px;
  outline: none;
}

.le-rotation-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  background: #667eea;
  border-radius: 50%;
  cursor: pointer;
}

.le-rotation-input {
  width: 50px;
  padding: 4px;
  border: 1px solid #e0e0e0;
  border-radius: 4px;
  text-align: center;
  font-size: 12px;
}

.le-rotation-reset {
  padding: 4px 8px;
  border: none;
  background: #e0e0e0;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

.le-rotation-reset:hover {
  background: #d0d0d0;
}

/* Undo/Redo Toolbar */
.le-undo-redo {
  display: flex;
  align-items: center;
  gap: 4px;
}

.le-undo-btn,
.le-redo-btn {
  padding: 6px 10px;
  border: none;
  background: transparent;
  cursor: pointer;
  border-radius: 4px;
  color: #fff;
  opacity: 0.8;
  transition: all 0.15s ease;
}

.le-undo-btn:hover:not(:disabled),
.le-redo-btn:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.2);
  opacity: 1;
}

.le-undo-btn:disabled,
.le-redo-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.le-history-count {
  font-size: 10px;
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  color: #fff;
}

/* Opacity Control */
.le-opacity-control {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: #f8f9fa;
  border-radius: 8px;
}

.le-opacity-control label {
  font-size: 12px;
  color: #666;
  white-space: nowrap;
}

.le-opacity-slider {
  flex: 1;
  height: 4px;
  -webkit-appearance: none;
  appearance: none;
  background: linear-gradient(to right, transparent, #333);
  border-radius: 2px;
  outline: none;
}

.le-opacity-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  background: #667eea;
  border-radius: 50%;
  cursor: pointer;
}

.le-opacity-control span {
  font-size: 12px;
  color: #333;
  min-width: 35px;
}

/* Border Control */
.le-border-control {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px;
  background: #f8f9fa;
  border-radius: 8px;
}

.le-border-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.le-border-row label {
  font-size: 12px;
  color: #666;
  min-width: 50px;
}

.le-border-row select {
  padding: 4px 8px;
  border: 1px solid #e0e0e0;
  border-radius: 4px;
  font-size: 12px;
}

.le-border-row input[type="range"] {
  flex: 1;
  height: 4px;
}

.le-border-row span {
  font-size: 12px;
  color: #333;
  min-width: 35px;
}

.le-border-color {
  width: 28px;
  height: 28px;
  border: 1px solid #e0e0e0;
  border-radius: 4px;
  padding: 0;
  cursor: pointer;
}

/* Smart Guides */
.le-smart-guides {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 50;
}

/* Element with rotation */
.ppt-element[style*="rotate"] {
  transform-origin: center center;
}

/* Animation keyframes for element animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInLeft {
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideInRight {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideInUp {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes slideInDown {
  from { transform: translateY(-100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes zoomIn {
  from { transform: scale(0.3); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes bounceIn {
  0% { transform: scale(0.3); opacity: 0; }
  50% { transform: scale(1.05); }
  70% { transform: scale(0.9); }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes flipInX {
  from { transform: perspective(400px) rotateX(90deg); opacity: 0; }
  40% { transform: perspective(400px) rotateX(-20deg); }
  60% { transform: perspective(400px) rotateX(10deg); }
  80% { transform: perspective(400px) rotateX(-5deg); }
  to { transform: perspective(400px); opacity: 1; }
}

@keyframes flipInY {
  from { transform: perspective(400px) rotateY(90deg); opacity: 0; }
  40% { transform: perspective(400px) rotateY(-20deg); }
  60% { transform: perspective(400px) rotateY(10deg); }
  80% { transform: perspective(400px) rotateY(-5deg); }
  to { transform: perspective(400px); opacity: 1; }
}

@keyframes rotateIn {
  from { transform: rotate(-200deg); opacity: 0; }
  to { transform: rotate(0); opacity: 1; }
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
  20%, 40%, 60%, 80% { transform: translateX(5px); }
}

@keyframes swing {
  20% { transform: rotate(15deg); }
  40% { transform: rotate(-10deg); }
  60% { transform: rotate(5deg); }
  80% { transform: rotate(-5deg); }
  100% { transform: rotate(0deg); }
}

@keyframes tada {
  0% { transform: scale(1); }
  10%, 20% { transform: scale(0.9) rotate(-3deg); }
  30%, 50%, 70%, 90% { transform: scale(1.1) rotate(3deg); }
  40%, 60%, 80% { transform: scale(1.1) rotate(-3deg); }
  100% { transform: scale(1) rotate(0); }
}

@keyframes heartbeat {
  0% { transform: scale(1); }
  14% { transform: scale(1.3); }
  28% { transform: scale(1); }
  42% { transform: scale(1.3); }
  70% { transform: scale(1); }
}

@keyframes rubberBand {
  0% { transform: scale(1); }
  30% { transform: scaleX(1.25) scaleY(0.75); }
  40% { transform: scaleX(0.75) scaleY(1.25); }
  50% { transform: scaleX(1.15) scaleY(0.85); }
  65% { transform: scaleX(0.95) scaleY(1.05); }
  75% { transform: scaleX(1.05) scaleY(0.95); }
  100% { transform: scale(1); }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slideOutLeft {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(-100%); opacity: 0; }
}

@keyframes slideOutRight {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}

@keyframes zoomOut {
  from { transform: scale(1); opacity: 1; }
  to { transform: scale(0.3); opacity: 0; }
}

/* Canvas Grid Overlay */
.ppt-canvas.show-grid::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(rgba(102, 126, 234, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(102, 126, 234, 0.1) 1px, transparent 1px);
  background-size: 5% 5%;
  pointer-events: none;
  z-index: 1;
}

/* Enhanced Status Bar */
.le-status-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 16px;
  background: #f8f9fa;
  border-top: 1px solid #e0e0e0;
  font-size: 12px;
  color: #666;
}

.le-status-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.le-status-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Enhanced Ribbon Tabs */
.ppt-tab {
  position: relative;
}

.ppt-tab.active::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 3px 3px 0 0;
}

/* Quick Templates Button in Ribbon */
.le-templates-trigger {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: none;
  border-radius: 8px;
  color: white;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.le-templates-trigger:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .le-quick-panel {
    width: calc(100vw - 48px);
    right: 24px;
    left: 24px;
  }

  .le-quick-panel-grid {
    grid-template-columns: repeat(4, 1fr);
  }

  .le-templates-panel {
    left: 16px;
    right: 16px;
    width: auto;
    top: 100px;
  }

  .le-layers-panel {
    right: 16px;
    left: 16px;
    width: auto;
  }

  .le-fab-layers {
    bottom: 80px;
  }

  .le-zoom-controls {
    display: none;
  }
}

/* ==================== CLASSROOM STYLES ==================== */

/* Classroom page layout */
.classroom-page {
  padding: var(--space-lg);
  max-width: 1200px;
  margin: 0 auto;
}

.classroom-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
  flex-wrap: wrap;
  gap: var(--space-md);
}

.classroom-header h1 {
  margin: 0;
  font-size: var(--font-size-xl);
  color: var(--dark);
}

/* Classroom grid */
.classroom-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--space-lg);
}

/* Classroom card */
.classroom-card {
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  cursor: pointer;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.classroom-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.classroom-card-header {
  padding: var(--space-md);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.classroom-level-badge {
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: var(--font-size-sm);
  font-weight: 600;
}

.classroom-inactive-badge {
  background: var(--gray);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: var(--font-size-xs);
}

.classroom-card-body {
  padding: var(--space-md);
}

.classroom-card-title {
  margin: 0 0 var(--space-sm);
  font-size: var(--font-size-lg);
  color: var(--dark);
}

.classroom-card-description {
  color: var(--gray-dark);
  font-size: var(--font-size-sm);
  margin-bottom: var(--space-md);
}

.classroom-card-info {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.classroom-info-item {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  color: var(--gray-dark);
  font-size: var(--font-size-sm);
}

.classroom-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: var(--space-md);
  border-top: 1px solid var(--border);
  margin-top: var(--space-md);
}

.classroom-code {
  font-family: monospace;
  font-size: var(--font-size-sm);
  color: var(--gray);
}

.classroom-card-actions {
  display: flex;
  gap: var(--space-xs);
}

/* Join classroom section */
.join-classroom-section {
  background: var(--light);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-lg);
}

.join-classroom-section h3 {
  margin: 0 0 var(--space-md);
  font-size: var(--font-size-lg);
}

.join-form {
  display: flex;
  gap: var(--space-md);
}

.join-input {
  flex: 1;
  max-width: 200px;
  text-transform: uppercase;
  font-family: monospace;
  font-size: var(--font-size-lg);
  letter-spacing: 4px;
  text-align: center;
}

/* Classroom tabs */
.classroom-tabs {
  display: flex;
  gap: var(--space-xs);
  border-bottom: 2px solid var(--border);
  margin-bottom: var(--space-lg);
  flex-wrap: wrap;
}

.classroom-tabs .tab-btn {
  padding: var(--space-sm) var(--space-md);
  background: none;
  border: none;
  cursor: pointer;
  font-size: var(--font-size-md);
  color: var(--gray-dark);
  position: relative;
  transition: color var(--transition-fast);
}

.classroom-tabs .tab-btn:hover {
  color: var(--primary);
}

.classroom-tabs .tab-btn.active {
  color: var(--primary);
  font-weight: 600;
}

.classroom-tabs .tab-btn.active::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--primary);
}

/* Classroom overview */
.classroom-overview {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--space-lg);
}

.overview-card {
  background: var(--white);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.overview-card h3 {
  margin: 0 0 var(--space-md);
  font-size: var(--font-size-md);
  color: var(--dark);
  padding-bottom: var(--space-sm);
  border-bottom: 1px solid var(--border);
}

.overview-info {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.info-label {
  color: var(--gray-dark);
  font-size: var(--font-size-sm);
}

.level-badge {
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: var(--font-size-sm);
  font-weight: 600;
}

.classroom-code-display {
  font-family: monospace;
  font-size: var(--font-size-lg);
  letter-spacing: 2px;
  background: var(--light);
  padding: 4px 12px;
  border-radius: var(--radius-sm);
}

/* Schedule display */
.schedule-display {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.schedule-display-item {
  display: flex;
  justify-content: space-between;
  padding: var(--space-sm);
  background: var(--light);
  border-radius: var(--radius-sm);
}

.schedule-day {
  font-weight: 600;
  color: var(--dark);
}

.schedule-time {
  color: var(--gray-dark);
}

/* Stats grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-md);
}

.stat-item {
  text-align: center;
}

.stat-value {
  display: block;
  font-size: var(--font-size-xl);
  font-weight: 700;
  color: var(--primary);
}

.stat-label {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

/* Members section */
.classroom-members {
  background: var(--white);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
}

.members-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
}

.members-header h3 {
  margin: 0;
}

.class-code-section {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-lg);
}

.class-code-label {
  color: var(--gray-dark);
}

.class-code-value {
  font-family: monospace;
  font-size: var(--font-size-lg);
  letter-spacing: 2px;
  font-weight: 600;
  color: var(--primary);
}

.current-members h4 {
  margin: 0 0 var(--space-md);
  color: var(--dark);
}

.members-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.member-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
}

.member-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.member-name {
  font-weight: 600;
  color: var(--dark);
}

.member-joined,
.member-method {
  font-size: var(--font-size-sm);
  color: var(--gray);
}

/* Invite modal */
.invite-modal {
  max-width: 500px;
}

.invite-section {
  margin-bottom: var(--space-lg);
}

.invite-section h3,
.invite-section h4 {
  margin: 0 0 var(--space-sm);
  color: var(--dark);
}

.invite-description {
  color: var(--gray-dark);
  font-size: var(--font-size-sm);
  margin-bottom: var(--space-md);
}

.invite-code-box {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
}

.invite-code {
  font-family: monospace;
  font-size: var(--font-size-xl);
  letter-spacing: 4px;
  font-weight: 700;
  color: var(--primary);
}

.invite-user-list {
  max-height: 300px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.invite-user-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-sm);
  background: var(--light);
  border-radius: var(--radius-md);
}

.invite-user-info {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.invite-user-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--primary);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}

.invite-user-details {
  display: flex;
  flex-direction: column;
}

.invite-user-name {
  font-weight: 500;
  color: var(--dark);
}

.invite-user-role {
  font-size: var(--font-size-xs);
  color: var(--gray);
}

/* Tests section */
.classroom-tests {
  background: var(--white);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
}

.tests-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
}

.tests-header h3 {
  margin: 0;
}

.tests-actions {
  display: flex;
  gap: var(--space-sm);
}

.tests-section {
  margin-bottom: var(--space-lg);
}

.tests-section h4 {
  margin: 0 0 var(--space-md);
  color: var(--dark);
  padding-bottom: var(--space-sm);
  border-bottom: 1px solid var(--border);
}

.tests-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.test-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
  transition: background var(--transition-fast);
}

.test-item:hover {
  background: var(--border);
}

.test-item.overdue {
  border-left: 3px solid var(--danger);
}

.test-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.test-title {
  font-weight: 600;
  color: var(--dark);
}

.test-meta {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  display: flex;
  gap: var(--space-md);
  align-items: center;
  flex-wrap: wrap;
}

.draft-badge {
  background: var(--warning);
  color: white;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: var(--font-size-xs);
  font-weight: 600;
}

.deadline {
  color: var(--warning);
}

.deadline.overdue {
  color: var(--danger);
  font-weight: 600;
}

.test-actions {
  display: flex;
  gap: var(--space-sm);
}

.test-status {
  color: var(--gray);
  font-size: var(--font-size-sm);
}

/* Test create modal */
.test-modal {
  max-width: 700px;
}

.test-modal-body {
  max-height: 70vh;
  overflow-y: auto;
}

.questions-section {
  margin-top: var(--space-lg);
}

.questions-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-md);
}

.questions-header h3 {
  margin: 0;
}

.questions-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

.question-item {
  background: var(--light);
  padding: var(--space-md);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.question-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-sm);
}

.question-number {
  font-weight: 600;
  color: var(--primary);
}

.question-row {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
  margin-bottom: var(--space-sm);
}

.question-type-select {
  flex: 0 0 150px;
}

.points-input {
  width: 80px;
}

.points-label {
  color: var(--gray-dark);
  font-size: var(--font-size-sm);
}

.question-text {
  margin-bottom: var(--space-sm);
}

.options-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  margin-top: var(--space-sm);
}

.option-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.option-radio {
  flex-shrink: 0;
}

.option-input {
  flex: 1;
}

.true-false-options {
  flex-direction: row;
  gap: var(--space-lg);
}

.true-false-options .option-item {
  cursor: pointer;
}

.true-false-options .option-item span {
  margin-left: var(--space-xs);
}

.text-answer-hint {
  margin-top: var(--space-sm);
}

.total-points {
  margin-top: var(--space-lg);
  padding: var(--space-md);
  background: var(--primary);
  color: white;
  border-radius: var(--radius-md);
  text-align: center;
  font-size: var(--font-size-lg);
}

/* Test taking interface */
.test-take {
  padding: var(--space-lg);
}

.test-take-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
  padding-bottom: var(--space-md);
  border-bottom: 2px solid var(--border);
}

.test-title {
  font-size: var(--font-size-xl);
  font-weight: 700;
  color: var(--dark);
}

.test-timer {
  font-family: monospace;
  font-size: var(--font-size-xl);
  font-weight: 700;
  padding: var(--space-sm) var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
  color: var(--dark);
}

.test-timer.warning {
  background: var(--warning-light);
  color: var(--warning);
}

.test-timer.critical {
  background: var(--danger-light);
  color: var(--danger);
  animation: pulse 1s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.test-progress {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  margin-bottom: var(--space-md);
}

.progress-bar {
  flex: 1;
  height: 8px;
  background: var(--border);
  border-radius: 4px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: var(--primary);
  transition: width var(--transition-normal);
}

.progress-text {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  white-space: nowrap;
}

.question-nav {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  margin-bottom: var(--space-lg);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
}

.question-nav-btn {
  width: 36px;
  height: 36px;
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--white);
  cursor: pointer;
  font-weight: 600;
  color: var(--gray-dark);
  transition: all var(--transition-fast);
}

.question-nav-btn:hover {
  border-color: var(--primary);
  color: var(--primary);
}

.question-nav-btn.current {
  background: var(--primary);
  border-color: var(--primary);
  color: white;
}

.question-nav-btn.answered {
  background: var(--success-light);
  border-color: var(--success);
  color: var(--success);
}

.question-nav-btn.answered.current {
  background: var(--primary);
  border-color: var(--primary);
  color: white;
}

.question-content {
  background: var(--white);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  margin-bottom: var(--space-lg);
}

.question-content .question-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: var(--space-md);
}

.question-content .question-number {
  font-size: var(--font-size-lg);
}

.question-points {
  color: var(--primary);
  font-weight: 600;
}

.question-content .question-text {
  font-size: var(--font-size-lg);
  color: var(--dark);
  margin-bottom: var(--space-lg);
  line-height: 1.8;
}

.answer-options {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.answer-option {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--light);
  border: 2px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.answer-option:hover {
  border-color: var(--primary-light);
  background: rgba(102, 126, 234, 0.05);
}

.answer-option.selected {
  border-color: var(--primary);
  background: rgba(102, 126, 234, 0.1);
}

.answer-option input[type="radio"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
}

.option-letter {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--white);
  border: 2px solid var(--border);
  border-radius: 50%;
  font-weight: 600;
  color: var(--gray-dark);
  flex-shrink: 0;
}

.answer-option.selected .option-letter {
  background: var(--primary);
  border-color: var(--primary);
  color: white;
}

.option-text {
  flex: 1;
  color: var(--dark);
}

.answer-options.true-false {
  flex-direction: row;
  gap: var(--space-lg);
}

.answer-options.true-false .answer-option {
  flex: 1;
  justify-content: center;
}

.answer-text textarea {
  min-height: 150px;
}

.test-take-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.nav-buttons,
.action-buttons {
  display: flex;
  gap: var(--space-sm);
}

/* Confirm modal */
.confirm-modal {
  max-width: 400px;
  text-align: center;
}

.confirm-modal h3 {
  margin-bottom: var(--space-md);
}

.confirm-modal .warning-text {
  color: var(--danger);
}

.confirm-buttons {
  display: flex;
  justify-content: center;
  gap: var(--space-md);
  margin-top: var(--space-lg);
}

/* Submission review */
.submission-review {
  padding: var(--space-lg);
}

.review-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
}

.review-header h2 {
  margin: 0;
}

.review-summary {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-lg);
  padding: var(--space-lg);
  background: var(--light);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-lg);
}

.summary-item {
  display: flex;
  gap: var(--space-sm);
}

.summary-label {
  color: var(--gray-dark);
}

.summary-value {
  font-weight: 600;
  color: var(--dark);
}

.summary-value.pass {
  color: var(--success);
}

.summary-value.fail {
  color: var(--danger);
}

.review-questions {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
  margin-bottom: var(--space-lg);
}

.review-question {
  background: var(--white);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  border: 2px solid var(--border);
}

.review-question.correct {
  border-color: var(--success);
  background: rgba(39, 174, 96, 0.05);
}

.review-question.incorrect {
  border-color: var(--danger);
  background: rgba(231, 76, 60, 0.05);
}

.review-question.ungraded {
  border-color: var(--warning);
  background: rgba(243, 156, 18, 0.05);
}

.answer-display {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  margin-top: var(--space-md);
}

.option-display {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-sm) var(--space-md);
  background: var(--light);
  border-radius: var(--radius-sm);
  border: 2px solid transparent;
}

.option-display.selected {
  background: rgba(102, 126, 234, 0.1);
  border-color: var(--primary);
}

.option-display.correct {
  background: rgba(39, 174, 96, 0.1);
  border-color: var(--success);
}

.option-display.selected.correct {
  background: rgba(39, 174, 96, 0.15);
}

.correct-badge {
  color: var(--success);
  font-weight: 700;
  margin-left: auto;
}

.wrong-badge {
  color: var(--danger);
  font-weight: 700;
  margin-left: auto;
}

.text-answer-display {
  margin-top: var(--space-md);
}

.student-answer,
.sample-answer {
  margin-bottom: var(--space-md);
}

.student-answer label,
.sample-answer label,
.grading-input label {
  display: block;
  font-weight: 600;
  color: var(--gray-dark);
  margin-bottom: var(--space-xs);
}

.student-answer p,
.sample-answer p {
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
  margin: 0;
}

.sample-answer {
  opacity: 0.8;
}

.grading-input {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-md);
  background: var(--warning-light);
  border-radius: var(--radius-md);
}

.grading-input .points-input {
  width: 80px;
}

.feedback-section {
  margin-top: var(--space-lg);
}

.feedback-section label {
  display: block;
  font-weight: 600;
  margin-bottom: var(--space-sm);
}

.feedback-display {
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
  color: var(--gray-dark);
}

.review-footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-md);
}

/* Grades table */
.classroom-grades {
  background: var(--white);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
}

.grades-header {
  margin-bottom: var(--space-lg);
}

.grades-header h3 {
  margin: 0;
}

.grades-table-wrapper {
  overflow-x: auto;
}

.grades-table {
  width: 100%;
  border-collapse: collapse;
}

.grades-table th,
.grades-table td {
  padding: var(--space-md);
  text-align: left;
  border-bottom: 1px solid var(--border);
}

.grades-table th {
  background: var(--light);
  font-weight: 600;
  color: var(--dark);
}

.grades-table tr:hover {
  background: rgba(102, 126, 234, 0.02);
}

.grade-percent {
  font-weight: 600;
  padding: 4px 8px;
  border-radius: 4px;
}

.grade-percent.pass {
  background: var(--success-light);
  color: var(--success);
}

.grade-percent.fail {
  background: var(--danger-light);
  color: var(--danger);
}

/* ============ ATTENDANCE PANEL ============ */

.attendance-panel {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
}

.attendance-tabs {
  display: flex;
  gap: var(--space-sm);
  margin-bottom: var(--space-lg);
  border-bottom: 1px solid var(--border);
  padding-bottom: var(--space-md);
}

.attendance-tabs .tab-btn {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-md);
  background: none;
  border: none;
  cursor: pointer;
  border-radius: var(--radius-md);
  color: var(--gray-dark);
  font-weight: 500;
  transition: all var(--transition-fast);
}

.attendance-tabs .tab-btn:hover {
  background: var(--light);
  color: var(--dark);
}

.attendance-tabs .tab-btn.active {
  background: var(--primary);
  color: white;
}

.attendance-date-section {
  margin-bottom: var(--space-lg);
}

.date-picker {
  display: flex;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

.date-picker .form-input {
  flex: 0 0 auto;
  width: 200px;
}

.recent-sessions {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  flex-wrap: wrap;
}

.recent-sessions .label {
  color: var(--gray-dark);
  font-size: var(--font-size-sm);
}

.session-chip {
  padding: 4px 12px;
  background: var(--light);
  border: 1px solid var(--border);
  border-radius: 20px;
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.session-chip:hover {
  background: var(--gray-light);
}

.session-chip.active {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

.attendance-stats {
  display: flex;
  gap: var(--space-md);
  margin-bottom: var(--space-lg);
}

.attendance-stats .stat-item {
  flex: 1;
  padding: var(--space-md);
  border-radius: var(--radius-md);
  text-align: center;
}

.attendance-stats .stat-item.present {
  background: rgba(39, 174, 96, 0.1);
  border: 1px solid #27ae60;
}

.attendance-stats .stat-item.late {
  background: rgba(243, 156, 18, 0.1);
  border: 1px solid #f39c12;
}

.attendance-stats .stat-item.absent {
  background: rgba(231, 76, 60, 0.1);
  border: 1px solid #e74c3c;
}

.attendance-stats .stat-item.excused {
  background: rgba(52, 152, 219, 0.1);
  border: 1px solid #3498db;
}

.attendance-stats .stat-value {
  display: block;
  font-size: var(--font-size-2xl);
  font-weight: 700;
  color: var(--dark);
}

.attendance-stats .stat-label {
  display: block;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.attendance-quick-actions {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-bottom: var(--space-lg);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
}

.attendance-quick-actions .label {
  color: var(--gray-dark);
  font-size: var(--font-size-sm);
}

.attendance-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.attendance-row {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
  transition: all var(--transition-fast);
}

.attendance-row.modified {
  background: rgba(102, 126, 234, 0.08);
  border-left: 3px solid var(--primary);
}

.attendance-row .student-info {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  flex: 0 0 200px;
}

.attendance-row .student-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--primary-gradient);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: var(--font-size-sm);
}

.attendance-row .student-name {
  font-weight: 500;
  color: var(--dark);
}

.status-buttons {
  display: flex;
  gap: var(--space-xs);
}

.status-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid var(--border);
  background: var(--white);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
  color: var(--gray-dark);
}

.status-btn:hover {
  border-color: var(--primary);
  color: var(--primary);
}

.status-btn.active {
  border-color: transparent;
}

.note-input {
  flex: 1;
  padding: var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
}

.note-input:disabled {
  background: var(--gray-light);
  cursor: not-allowed;
}

.attendance-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-sm);
  margin-top: var(--space-lg);
  padding-top: var(--space-lg);
  border-top: 1px solid var(--border);
}

.attendance-summary h3 {
  margin-bottom: var(--space-lg);
}

.summary-table {
  width: 100%;
  border-collapse: collapse;
}

.summary-table th,
.summary-table td {
  padding: var(--space-md);
  text-align: left;
  border-bottom: 1px solid var(--border);
}

.summary-table th {
  background: var(--light);
  font-weight: 600;
  color: var(--dark);
}

.summary-table td.center {
  text-align: center;
}

.summary-table .rate {
  font-weight: 600;
  padding: 4px 8px;
  border-radius: 4px;
}

.summary-table .rate.good {
  background: rgba(39, 174, 96, 0.1);
  color: #27ae60;
}

.summary-table .rate.warning {
  background: rgba(243, 156, 18, 0.1);
  color: #f39c12;
}

.summary-table .rate.bad {
  background: rgba(231, 76, 60, 0.1);
  color: #e74c3c;
}

/* ============ EVALUATION PANEL ============ */

.evaluation-panel {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
}

.evaluation-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
}

.evaluation-header h3 {
  margin: 0;
}

.evaluation-loading {
  text-align: center;
  padding: var(--space-xl);
  color: var(--gray-dark);
}

/* Rating stars */
.rating-stars {
  display: flex;
  align-items: center;
  gap: 2px;
}

.rating-stars .star-btn {
  background: none;
  border: none;
  padding: 2px;
  cursor: pointer;
  color: var(--gray);
  transition: all var(--transition-fast);
}

.rating-stars .star-btn:hover:not(:disabled) {
  transform: scale(1.1);
}

.rating-stars .star-btn.filled {
  color: #f39c12;
}

.rating-stars.readonly .star-btn {
  cursor: default;
}

.rating-stars .rating-label {
  margin-left: var(--space-sm);
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  font-weight: 500;
}

/* Evaluation form overlay */
.evaluation-form-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: var(--space-lg);
}

.evaluation-form {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-xl);
  width: 100%;
  max-width: 900px;
  max-height: 90vh;
  overflow-y: auto;
}

.evaluation-form h4 {
  margin: 0 0 var(--space-lg) 0;
  color: var(--dark);
}

.evaluation-form .form-group {
  margin-bottom: var(--space-lg);
}

.evaluation-form .form-group label {
  display: block;
  margin-bottom: var(--space-xs);
  font-weight: 500;
  color: var(--dark);
}

.evaluation-form .form-group .required {
  color: var(--danger);
}

.evaluation-form .form-row {
  display: flex;
  gap: var(--space-md);
}

.evaluation-form .form-row .form-group {
  flex: 1;
}

/* Criteria list in form */
.criteria-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.criteria-row {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
}

.criteria-info {
  flex: 1;
}

.criteria-info .criteria-name {
  display: block;
  font-weight: 500;
  color: var(--dark);
}

.criteria-info .criteria-desc {
  display: block;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.criteria-rating {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.range-input {
  width: 120px;
  cursor: pointer;
}

.rating-value {
  font-weight: 600;
  color: var(--primary);
  min-width: 50px;
  text-align: right;
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-sm);
  margin-top: var(--space-lg);
  padding-top: var(--space-lg);
  border-top: 1px solid var(--border);
}

/* Evaluation list */
.evaluation-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.evaluation-student-card {
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.evaluation-student-card .student-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md) var(--space-lg);
  background: var(--light);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.evaluation-student-card .student-header:hover {
  background: var(--gray-light);
}

.evaluation-student-card .student-info {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.evaluation-student-card .student-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: var(--primary-gradient);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: var(--font-size-lg);
}

.evaluation-student-card .student-details {
  display: flex;
  flex-direction: column;
}

.evaluation-student-card .student-name {
  font-weight: 600;
  color: var(--dark);
}

.evaluation-student-card .evaluation-count {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.evaluation-student-card .student-rating {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.evaluation-student-card .no-rating {
  color: var(--gray);
  font-size: var(--font-size-sm);
  font-style: italic;
}

.student-evaluations {
  padding: var(--space-lg);
  background: var(--white);
}

.evaluation-item {
  padding: var(--space-lg);
  background: var(--light);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-md);
}

.evaluation-item:last-child {
  margin-bottom: 0;
}

.evaluation-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-md);
}

.evaluation-period {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  font-weight: 500;
}

.evaluation-comment {
  margin: 0 0 var(--space-md) 0;
  color: var(--dark);
  line-height: 1.6;
}

.evaluation-section {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  margin-bottom: var(--space-sm);
}

.evaluation-section strong {
  color: var(--dark);
}

/* Criteria scores in evaluation item */
.evaluation-criteria {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--space-sm);
  margin-top: var(--space-md);
  padding-top: var(--space-md);
  border-top: 1px solid var(--border);
}

.criteria-score {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  font-size: var(--font-size-sm);
}

.criteria-score .criteria-name {
  flex: 0 0 auto;
  color: var(--gray-dark);
}

.score-bar {
  flex: 1;
  height: 6px;
  background: var(--gray-light);
  border-radius: 3px;
  overflow: hidden;
}

.score-fill {
  height: 100%;
  background: var(--primary-gradient);
  border-radius: 3px;
}

.score-value {
  flex: 0 0 50px;
  text-align: right;
  font-weight: 600;
  color: var(--dark);
}

.evaluation-actions {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-top: var(--space-md);
}

.evaluation-actions .delete-confirm-text {
  font-size: var(--font-size-sm);
  color: var(--danger);
}

.evaluation-footer {
  margin-top: var(--space-md);
  padding-top: var(--space-sm);
  border-top: 1px solid var(--border);
}

.evaluated-at {
  font-size: var(--font-size-xs);
  color: var(--gray);
}

/* Button icon styles */
.btn-icon {
  padding: var(--space-xs);
  border-radius: var(--radius-sm);
  background: none;
  border: 1px solid var(--border);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--gray-dark);
  transition: all var(--transition-fast);
}

.btn-icon:hover {
  background: var(--light);
  color: var(--primary);
  border-color: var(--primary);
}

.btn-icon.danger:hover {
  background: var(--danger-light);
  color: var(--danger);
  border-color: var(--danger);
}

/* ============ ENHANCED EVALUATION STYLES ============ */

/* Form header row */
.form-header-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
}

.form-header-row h4 {
  margin: 0;
}

.form-header-row .btn-close {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--gray);
  padding: var(--space-xs);
  border-radius: var(--radius-sm);
  transition: all var(--transition-fast);
}

.form-header-row .btn-close:hover {
  background: var(--light);
  color: var(--dark);
}

/* Quick level buttons */
.quick-level-buttons {
  display: flex;
  gap: var(--space-sm);
  flex-wrap: wrap;
}

.quick-level-btn {
  flex: 1;
  min-width: 80px;
  padding: var(--space-sm) var(--space-md);
  border: 2px solid var(--level-color);
  border-radius: var(--radius);
  background: transparent;
  color: var(--level-color);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.quick-level-btn:hover {
  background: var(--level-color);
  color: white;
}

/* Level selector mini buttons */
.level-selector {
  display: flex;
  gap: 4px;
}

.level-btn-mini {
  padding: 4px 8px;
  font-size: 0.7rem;
  font-weight: 500;
  border: 1px solid var(--level-color);
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--level-color);
  cursor: pointer;
  transition: all 0.2s;
}

.level-btn-mini:hover {
  background: var(--level-color);
  color: white;
}

.level-btn-mini.active {
  background: var(--level-color);
  color: white;
}

/* Enhanced criteria row */
.criteria-row-enhanced {
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.criteria-row-enhanced .criteria-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-sm);
}

.criteria-row-enhanced .criteria-info {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.criteria-row-enhanced .criteria-icon {
  font-size: 1.2rem;
}

.criteria-row-enhanced .criteria-name {
  font-weight: 600;
  color: var(--dark);
}

.criteria-rating-row {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.criteria-rating-row .range-input {
  flex: 1;
  height: 8px;
  -webkit-appearance: none;
  appearance: none;
  background: var(--gray-light);
  border-radius: 4px;
  outline: none;
}

.criteria-rating-row .range-input::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--level-color, var(--primary));
  cursor: pointer;
  transition: transform 0.2s;
}

.criteria-rating-row .range-input::-webkit-slider-thumb:hover {
  transform: scale(1.2);
}

.criteria-rating-row .range-input::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--level-color, var(--primary));
  cursor: pointer;
  border: none;
}

.criteria-rating-row .rating-value {
  min-width: 50px;
  text-align: right;
  font-weight: 700;
  font-size: 0.9rem;
}

/* Criteria suggestion tooltip */
.criteria-suggestion {
  display: flex;
  align-items: flex-start;
  gap: var(--space-xs);
  margin-top: var(--space-sm);
  padding: var(--space-sm);
  background: white;
  border-left: 3px solid;
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  font-size: 0.85rem;
  color: var(--gray-dark);
  animation: fadeIn 0.2s ease;
}

.criteria-suggestion svg {
  flex-shrink: 0;
  color: var(--gray);
  margin-top: 2px;
}

/* Suggestion toggle button */
.btn-toggle-suggestions {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  margin-left: var(--space-sm);
  padding: 2px 8px;
  font-size: 0.75rem;
  color: var(--primary);
  background: var(--primary-light);
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 0.2s;
}

.btn-toggle-suggestions:hover {
  background: var(--primary);
  color: white;
}

/* Suggestions panel */
.suggestions-panel {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  margin-bottom: var(--space-sm);
  padding: var(--space-sm);
  background: var(--light);
  border-radius: var(--radius);
  animation: slideDown 0.2s ease;
}

.suggestion-chip {
  padding: 4px 10px;
  font-size: 0.8rem;
  color: var(--gray-dark);
  background: white;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 0.2s;
}

.suggestion-chip:hover {
  border-color: var(--primary);
  color: var(--primary);
}

.suggestion-chip.selected {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

/* Comment suggestions */
.comment-suggestions {
  flex-direction: column;
}

.comment-level-group {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  align-items: center;
  padding: var(--space-xs) 0;
}

.comment-level-group .level-label {
  font-weight: 600;
  font-size: 0.85rem;
  min-width: 70px;
}

/* Evaluation section colors */
.evaluation-section.strengths {
  color: #27ae60;
}

.evaluation-section.improvements {
  color: #e74c3c;
}

/* Criteria icon in list */
.criteria-icon-small {
  font-size: 0.9rem;
  margin-right: 4px;
}

/* ============ EVALUATION PANEL - NEW FEATURES ============ */

/* Header actions row */
.evaluation-actions-header {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
}

.evaluation-actions-header .btn {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

/* Student select row with auto-fill button */
.student-select-row {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
}

.student-select-row .form-select {
  flex: 1;
}

/* Auto-fill button */
.btn-auto-fill {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: var(--space-sm) var(--space-md);
  background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.btn-auto-fill:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(243, 156, 18, 0.4);
}

.btn-auto-fill:active {
  transform: translateY(0);
}

/* Student stats preview (in form) */
.student-stats-preview {
  display: flex;
  gap: var(--space-lg);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius);
  margin-top: var(--space-sm);
}

.student-stats-preview .stat-item {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.student-stats-preview .stat-label {
  font-size: 0.85rem;
  color: var(--gray-dark);
}

.student-stats-preview .stat-value {
  font-weight: 700;
  font-size: 0.95rem;
  color: var(--dark);
}

.student-stats-preview .stat-value.good {
  color: #27ae60;
}

.student-stats-preview .stat-value.poor {
  color: #e74c3c;
}

/* Student stats mini (in list header) */
.student-stats-mini {
  display: flex;
  gap: var(--space-md);
  padding: var(--space-xs) var(--space-sm);
  background: white;
  border-radius: var(--radius);
  border: 1px solid var(--border);
}

.student-stats-mini .mini-stat {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--primary);
}

/* Student stats expanded (in expanded view) */
.student-stats-expanded {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius);
  margin-bottom: var(--space-md);
}

.student-stats-expanded .stat-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--space-sm);
  background: white;
  border-radius: var(--radius);
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.student-stats-expanded .stat-value-large {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary);
}

.student-stats-expanded .stat-label {
  font-size: 0.75rem;
  color: var(--gray-dark);
  text-align: center;
}

/* Student evaluation actions */
.student-evaluation-actions {
  display: flex;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
  padding-bottom: var(--space-md);
  border-bottom: 1px solid var(--border);
}

.student-evaluation-actions .btn {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* Success button */
.btn-success {
  background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
  color: white;
  border: none;
}

.btn-success:hover {
  background: linear-gradient(135deg, #219a52 0%, #27ae60 100%);
}

.btn-success:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Icon button success variant */
.btn-icon.success {
  border-color: #27ae60;
  color: #27ae60;
}

.btn-icon.success:hover {
  background: rgba(39, 174, 96, 0.1);
  color: #27ae60;
}

/* Send success badges */
.send-success-badge {
  display: inline-flex;
  align-items: center;
  padding: var(--space-xs) var(--space-sm);
  background: rgba(39, 174, 96, 0.1);
  color: #27ae60;
  font-size: 0.85rem;
  font-weight: 600;
  border-radius: var(--radius);
  animation: fadeIn 0.3s ease;
}

.send-success-mini {
  font-size: 0.75rem;
  color: #27ae60;
  font-weight: 600;
  animation: fadeIn 0.3s ease;
}

/* Responsive for new features */
@media (max-width: 600px) {
  .evaluation-actions-header {
    flex-direction: column;
    align-items: stretch;
  }

  .student-select-row {
    flex-direction: column;
  }

  .student-stats-preview {
    flex-direction: column;
    gap: var(--space-sm);
  }

  .student-stats-mini {
    flex-direction: column;
    gap: var(--space-xs);
    text-align: center;
  }

  .student-stats-expanded {
    grid-template-columns: repeat(2, 1fr);
  }

  .student-evaluation-actions {
    flex-wrap: wrap;
  }
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive for evaluation form */
@media (max-width: 600px) {
  .quick-level-buttons {
    flex-wrap: wrap;
  }

  .quick-level-btn {
    flex: 1 1 calc(50% - var(--space-sm));
    min-width: 0;
  }

  .level-selector {
    flex-wrap: wrap;
  }

  .criteria-row-enhanced .criteria-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-sm);
  }

  .evaluation-criteria {
    grid-template-columns: 1fr;
  }

  .evaluation-form {
    max-height: 85vh;
    padding: var(--space-md);
  }
}

/* Sidebar notifications */
.sidebar-notification-btn {
  position: relative;
  padding: var(--space-xs);
  background: none;
  border: none;
  cursor: pointer;
  color: var(--gray-dark);
  transition: color var(--transition-fast);
  margin-left: auto;
}

.sidebar-notification-btn:hover {
  color: var(--primary);
}

.notification-badge-count {
  position: absolute;
  top: -4px;
  right: -4px;
  min-width: 18px;
  height: 18px;
  background: var(--danger);
  color: white;
  font-size: 11px;
  font-weight: 600;
  border-radius: 9px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 4px;
}

.sidebar-notifications {
  position: absolute;
  top: calc(100% + 8px);
  left: var(--space-md);
  right: var(--space-md);
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  z-index: 100;
  max-height: 400px;
  overflow: hidden;
}

.sidebar-notifications-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md);
  border-bottom: 1px solid var(--border);
  font-weight: 600;
}

.sidebar-notifications-list {
  max-height: 320px;
  overflow-y: auto;
}

.sidebar-notification-item {
  padding: var(--space-md);
  border-bottom: 1px solid var(--border);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.sidebar-notification-item:hover {
  background: var(--light);
}

.sidebar-notification-item.unread {
  background: rgba(102, 126, 234, 0.05);
}

.sidebar-notification-item .notification-title {
  display: block;
  font-weight: 600;
  color: var(--dark);
  margin-bottom: 4px;
}

.sidebar-notification-item .notification-message {
  display: block;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.notification-badge-inline {
  background: var(--primary);
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: var(--font-size-sm);
}

/* Badge notification styling */
.sidebar-notification-item.badge-notification {
  background: linear-gradient(135deg, rgba(254, 211, 48, 0.1), rgba(252, 92, 101, 0.05));
  border-left: 3px solid #FED330;
}

.sidebar-notification-item.badge-notification.unread {
  background: linear-gradient(135deg, rgba(254, 211, 48, 0.15), rgba(252, 92, 101, 0.08));
}

.sidebar-notification-item .notification-badge-icon {
  display: inline-block;
  font-size: var(--font-size-xs);
  color: #f59e0b;
  font-weight: 500;
  margin-top: 4px;
}

/* Updated sidebar notification item with icon */
.sidebar-notification-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-sm);
}

.sidebar-notification-item .notification-icon {
  font-size: 20px;
  flex-shrink: 0;
  margin-top: 2px;
}

.sidebar-notification-item .notification-content {
  flex: 1;
  min-width: 0;
}

.sidebar-notification-item .notification-subtitle {
  display: block;
  font-size: var(--font-size-xs);
  color: #f59e0b;
  font-weight: 500;
  margin-top: 2px;
}

.sidebar-notifications-footer {
  padding: var(--space-sm) var(--space-md);
  border-top: 1px solid var(--border);
  text-align: center;
}

.sidebar-notifications-footer .btn-link {
  color: var(--primary);
  font-size: var(--font-size-sm);
}

/* ===== NOTIFICATIONS PAGE ===== */

.notifications-page {
  padding: var(--space-xl);
  max-width: 900px;
  margin: 0 auto;
}

.notifications-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-xl);
}

.notifications-header-left {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.notifications-header-left h1 {
  margin: 0;
  font-size: var(--font-size-2xl);
}

.notifications-header-left .unread-badge {
  background: var(--primary);
  color: white;
  padding: var(--space-xs) var(--space-md);
  border-radius: 20px;
  font-size: var(--font-size-sm);
  font-weight: 600;
}

/* Notifications tabs */
.notifications-tabs {
  display: flex;
  gap: var(--space-xs);
  margin-bottom: var(--space-lg);
  padding: var(--space-xs);
  background: var(--light);
  border-radius: var(--radius-lg);
  overflow-x: auto;
}

.notifications-tabs .tab-btn {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-lg);
  border: none;
  background: transparent;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--font-size-sm);
  font-weight: 500;
  color: var(--gray-dark);
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.notifications-tabs .tab-btn:hover {
  background: rgba(255,255,255,0.5);
}

.notifications-tabs .tab-btn.active {
  background: var(--white);
  color: var(--primary);
  box-shadow: var(--shadow-sm);
}

.notifications-tabs .tab-badge {
  background: var(--danger);
  color: white;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: var(--font-size-xs);
  font-weight: 600;
}

/* Notifications content */
.notifications-content {
  background: var(--white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

/* Notifications filter */
.notifications-filter {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-md) var(--space-lg);
  border-bottom: 1px solid var(--border);
  color: var(--gray-dark);
}

.notifications-filter select {
  padding: var(--space-xs) var(--space-md);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  background: var(--white);
}

/* Notifications list */
.notifications-list {
  max-height: 600px;
  overflow-y: auto;
}

.notifications-list .notification-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-md);
  padding: var(--space-lg);
  border-bottom: 1px solid var(--border);
  cursor: pointer;
  transition: background var(--transition-fast);
  position: relative;
}

.notifications-list .notification-item:hover {
  background: var(--light);
}

.notifications-list .notification-item.unread {
  background: rgba(102, 126, 234, 0.05);
}

.notifications-list .notification-item .notification-icon {
  font-size: 24px;
  flex-shrink: 0;
}

.notifications-list .notification-item .notification-body {
  flex: 1;
  min-width: 0;
}

.notifications-list .notification-item .notification-title {
  display: block;
  font-weight: 600;
  color: var(--dark);
  margin-bottom: 4px;
}

.notifications-list .notification-item .notification-message {
  display: block;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  margin-bottom: 4px;
}

.notifications-list .notification-item .notification-time {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--gray);
}

.notifications-list .notification-item .notification-arrow {
  color: var(--gray);
  flex-shrink: 0;
  align-self: center;
}

.notifications-list .notification-item .unread-dot {
  position: absolute;
  top: var(--space-lg);
  right: var(--space-lg);
  width: 8px;
  height: 8px;
  background: var(--primary);
  border-radius: 50%;
}

/* Empty state */
.notifications-page .empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-3xl);
  color: var(--gray);
  text-align: center;
}

.notifications-page .empty-state svg {
  margin-bottom: var(--space-md);
  opacity: 0.5;
}

/* Notification settings */
.notification-settings {
  padding: var(--space-xl);
}

.notification-settings h2 {
  margin: 0 0 var(--space-xl) 0;
  font-size: var(--font-size-xl);
}

.notification-settings .settings-section {
  margin-bottom: var(--space-xl);
}

.notification-settings .settings-section h3 {
  margin: 0 0 var(--space-md) 0;
  font-size: var(--font-size-md);
  color: var(--gray-dark);
}

.notification-settings .setting-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md) var(--space-lg);
  background: var(--light);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-sm);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.notification-settings .setting-item:hover {
  background: var(--border);
}

.notification-settings .setting-info {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.notification-settings .setting-info svg {
  color: var(--primary);
}

.notification-settings .setting-title {
  display: block;
  font-weight: 500;
  color: var(--dark);
}

.notification-settings .setting-desc {
  display: block;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.notification-settings input[type="checkbox"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
}

.notification-settings select {
  padding: var(--space-sm) var(--space-md);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
}

/* Gifts panel */
.gifts-panel {
  padding: var(--space-xl);
}

.gifts-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-lg);
  margin-bottom: var(--space-xl);
}

.gifts-stats .stat-card {
  display: flex;
  align-items: center;
  gap: var(--space-lg);
  padding: var(--space-xl);
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  border-radius: var(--radius-xl);
  color: white;
}

.gifts-stats .stat-card .stat-icon {
  opacity: 0.9;
}

.gifts-stats .stat-card .stat-info {
  display: flex;
  flex-direction: column;
}

.gifts-stats .stat-card .stat-value {
  font-size: var(--font-size-3xl);
  font-weight: 700;
}

.gifts-stats .stat-card .stat-label {
  font-size: var(--font-size-sm);
  opacity: 0.9;
}

/* Top gifters */
.top-gifters {
  margin-bottom: var(--space-xl);
}

.top-gifters h3 {
  margin: 0 0 var(--space-md) 0;
  font-size: var(--font-size-lg);
}

.gifters-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.gifter-item {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md) var(--space-lg);
  background: var(--light);
  border-radius: var(--radius-md);
}

.gifter-rank {
  font-weight: 700;
  color: var(--primary);
  width: 30px;
}

.gifter-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}

.gifter-name {
  flex: 1;
  font-weight: 500;
}

.gifter-count {
  color: var(--primary);
  font-weight: 600;
}

/* Gifts list */
.gifts-list h3 {
  margin: 0 0 var(--space-md) 0;
  font-size: var(--font-size-lg);
}

@media (max-width: 768px) {
  .notifications-page {
    padding: var(--space-md);
  }

  .notifications-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-md);
  }

  .notifications-tabs {
    flex-wrap: nowrap;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  .notifications-tabs .tab-btn {
    padding: var(--space-sm) var(--space-md);
  }

  .notifications-tabs .tab-btn span:not(.tab-badge) {
    display: none;
  }

  .gifts-stats {
    grid-template-columns: 1fr;
  }
}

/* Test take modal */
.test-take-modal {
  max-width: 900px;
  max-height: 90vh;
  overflow: hidden;
}

.test-take-modal .test-take {
  max-height: calc(90vh - 60px);
  overflow-y: auto;
}

.review-modal {
  max-width: 800px;
  max-height: 90vh;
  overflow: hidden;
}

.review-modal .submission-review {
  max-height: calc(90vh - 60px);
  overflow-y: auto;
}

/* Classroom modal */
.classroom-modal {
  max-width: 500px;
}

.schedule-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.schedule-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  flex-wrap: wrap;
}

.schedule-day {
  flex: 0 0 120px;
}

.schedule-time {
  width: 100px;
}

.schedule-separator {
  color: var(--gray);
}

/* Level buttons */
.level-buttons {
  display: flex;
  gap: var(--space-sm);
}

.level-btn {
  flex: 1;
  padding: var(--space-sm) var(--space-md);
  border: 2px solid var(--border);
  border-radius: var(--radius);
  background: var(--bg-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
}

.level-btn:hover {
  border-color: var(--primary);
  background: var(--bg-tertiary);
}

.level-btn.active {
  border-color: var(--primary);
  background: var(--primary);
  color: white;
}

.level-btn[data-level="basic"].active {
  background: #27ae60;
  border-color: #27ae60;
}

.level-btn[data-level="intermediate"].active {
  background: #3498db;
  border-color: #3498db;
}

.level-btn[data-level="advanced"].active {
  background: #e74c3c;
  border-color: #e74c3c;
}

/* Name suggestions */
.name-suggestions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  margin-top: var(--space-xs);
}

.suggestion-btn {
  padding: var(--space-xs) var(--space-sm);
  font-size: 0.85rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.suggestion-btn:hover {
  border-color: var(--primary);
  background: var(--primary-light);
}

/* Optional label */
.optional-label {
  font-size: 0.8rem;
  color: var(--gray);
  font-weight: normal;
}

/* Schedule templates */
.schedule-templates {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-xs);
  margin-bottom: var(--space-sm);
}

.template-label {
  font-size: 0.85rem;
  color: var(--gray);
}

.template-btn {
  padding: var(--space-xs) var(--space-sm);
  font-size: 0.8rem;
  border: 1px dashed var(--border);
  border-radius: var(--radius-sm);
  background: transparent;
  cursor: pointer;
  transition: all 0.2s;
}

.template-btn:hover {
  border-color: var(--primary);
  border-style: solid;
  background: var(--primary-light);
}

/* Day selector */
.day-selector {
  display: flex;
  gap: var(--space-xs);
  margin-bottom: var(--space-sm);
}

.day-btn {
  flex: 1;
  padding: var(--space-sm);
  font-size: 0.85rem;
  font-weight: 500;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.day-btn:hover {
  border-color: var(--primary);
  background: var(--bg-tertiary);
}

.day-btn.active {
  border-color: var(--primary);
  background: var(--primary);
  color: white;
}

/* Schedule times */
.schedule-times {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.schedule-time-row {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm);
  background: var(--bg-secondary);
  border-radius: var(--radius-sm);
}

.schedule-time-row .day-label {
  min-width: 70px;
  font-weight: 500;
  color: var(--text-secondary);
}

.time-input {
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg);
  font-size: 0.9rem;
}

.time-separator {
  color: var(--gray);
}

.schedule-hint {
  font-size: 0.85rem;
  color: var(--gray);
  text-align: center;
  padding: var(--space-md);
  border: 1px dashed var(--border);
  border-radius: var(--radius);
  margin-top: var(--space-xs);
}

/* Responsive adjustments for classroom */
@media (max-width: 768px) {
  .classroom-page {
    padding: var(--space-md);
  }

  .classroom-grid {
    grid-template-columns: 1fr;
  }

  .classroom-overview {
    grid-template-columns: 1fr;
  }

  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .join-form {
    flex-direction: column;
  }

  .join-input {
    max-width: 100%;
  }

  /* Responsive classroom create modal */
  .level-buttons {
    flex-wrap: wrap;
  }

  .level-btn {
    flex: 1 1 calc(33% - var(--space-sm));
    min-width: 80px;
  }

  .day-selector {
    flex-wrap: wrap;
  }

  .day-btn {
    flex: 1 1 calc(25% - var(--space-xs));
    min-width: 40px;
  }

  .schedule-templates {
    flex-direction: column;
    align-items: flex-start;
  }

  .schedule-time-row {
    flex-wrap: wrap;
  }

  .schedule-time-row .day-label {
    width: 100%;
    margin-bottom: var(--space-xs);
  }

  .test-take-header {
    flex-direction: column;
    gap: var(--space-md);
    text-align: center;
  }

  .test-take-footer {
    flex-direction: column;
    gap: var(--space-md);
  }

  .nav-buttons,
  .action-buttons {
    width: 100%;
    justify-content: center;
  }

  .question-nav {
    justify-content: center;
  }

  .answer-options.true-false {
    flex-direction: column;
  }

  .tests-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-md);
  }

  .tests-actions {
    width: 100%;
    flex-direction: column;
  }

  .tests-actions .btn {
    width: 100%;
  }

  .members-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-md);
  }

  .class-code-section {
    flex-wrap: wrap;
  }

  .sidebar-notifications {
    left: var(--space-sm);
    right: var(--space-sm);
  }
}

/* ===== TEACHER DASHBOARD ===== */

.teacher-dashboard {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

/* Dashboard Metrics Row */
.dashboard-metrics {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: var(--space-md);
}

.metric-card {
  background: white;
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  display: flex;
  align-items: center;
  gap: var(--space-md);
  box-shadow: var(--shadow-sm);
  border-left: 4px solid var(--border);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.metric-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.metric-card.primary { border-left-color: var(--primary); }
.metric-card.success { border-left-color: var(--success); }
.metric-card.info { border-left-color: var(--accent); }
.metric-card.warning { border-left-color: var(--warning); }
.metric-card.danger { border-left-color: var(--danger); }

.metric-icon {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--light);
  color: var(--primary);
}

.metric-card.primary .metric-icon { background: rgba(102, 126, 234, 0.1); color: var(--primary); }
.metric-card.success .metric-icon { background: rgba(39, 174, 96, 0.1); color: var(--success); }
.metric-card.info .metric-icon { background: rgba(52, 152, 219, 0.1); color: var(--accent); }
.metric-card.warning .metric-icon { background: rgba(243, 156, 18, 0.1); color: var(--warning); }
.metric-card.danger .metric-icon { background: rgba(231, 76, 60, 0.1); color: var(--danger); }

.metric-content {
  display: flex;
  flex-direction: column;
}

.metric-value {
  font-size: var(--font-size-xl);
  font-weight: 700;
  color: var(--dark);
  line-height: 1.2;
}

.metric-label {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

/* Dashboard Grid */
.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-lg);
}

.dashboard-panel {
  background: white;
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  box-shadow: var(--shadow-sm);
}

.dashboard-panel h3 {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  font-size: var(--font-size-lg);
  color: var(--dark);
  margin-bottom: var(--space-md);
  padding-bottom: var(--space-sm);
  border-bottom: 1px solid var(--border);
}

/* Alerts Panel */
.alerts-panel {
  grid-column: span 2;
}

.alerts-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.alert-item {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  border-radius: var(--radius-md);
  background: var(--light);
  transition: background var(--transition-fast);
}

.alert-item.warning { background: rgba(243, 156, 18, 0.1); }
.alert-item.danger { background: rgba(231, 76, 60, 0.1); }
.alert-item.info { background: rgba(52, 152, 219, 0.1); }

.alert-icon {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
}

.alert-item.warning .alert-icon { color: var(--warning); }
.alert-item.danger .alert-icon { color: var(--danger); }
.alert-item.info .alert-icon { color: var(--accent); }

.alert-content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.alert-title {
  font-weight: 600;
  color: var(--dark);
}

.alert-description {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

/* Performance Ranking */
.ranking-section {
  margin-bottom: var(--space-md);
}

.ranking-title {
  font-size: var(--font-size-sm);
  font-weight: 600;
  margin-bottom: var(--space-sm);
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.ranking-title.top { color: var(--success); }
.ranking-title.bottom { color: var(--warning); }

.ranking-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.ranking-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  background: var(--light);
  border-radius: var(--radius-sm);
}

.ranking-item.clickable {
  cursor: pointer;
  transition: background var(--transition-fast);
}

.ranking-item.clickable:hover {
  background: var(--border);
}

.rank-number {
  font-weight: 700;
  color: var(--primary);
  width: 32px;
}

.ranking-item .student-name {
  flex: 1;
  font-weight: 500;
}

.ranking-item .score {
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 12px;
}

.ranking-item .score.high {
  background: rgba(39, 174, 96, 0.1);
  color: var(--success);
}

.ranking-item .score.low {
  background: rgba(231, 76, 60, 0.1);
  color: var(--danger);
}

/* Recent Submissions Panel */
.recent-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.recent-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-sm);
  border-radius: var(--radius-sm);
  background: var(--light);
}

.recent-info {
  display: flex;
  flex-direction: column;
}

.recent-student {
  font-weight: 500;
  color: var(--dark);
}

.recent-test {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.recent-meta {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  text-align: right;
}

.recent-score {
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 12px;
}

.recent-score.pass {
  background: rgba(39, 174, 96, 0.1);
  color: var(--success);
}

.recent-score.fail {
  background: rgba(231, 76, 60, 0.1);
  color: var(--danger);
}

.recent-time {
  font-size: var(--font-size-sm);
  color: var(--gray);
}

/* Quick Actions Panel */
.quick-actions {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-sm);
}

.action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-md);
  background: var(--light);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
  color: var(--gray-dark);
}

.action-btn:hover {
  background: var(--primary);
  color: white;
  transform: translateY(-2px);
}

.action-btn span {
  font-size: var(--font-size-sm);
  font-weight: 500;
}

/* Stats Bars Panel */
.stats-bars {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.stat-bar-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.stat-bar-label {
  width: 120px;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.stat-bar {
  flex: 1;
  height: 8px;
  background: var(--border);
  border-radius: 4px;
  overflow: hidden;
}

.stat-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width var(--transition-slow);
}

.stat-bar-fill.success { background: var(--success); }
.stat-bar-fill.info { background: var(--accent); }
.stat-bar-fill.warning { background: var(--warning); }
.stat-bar-fill.primary { background: var(--primary); }

.stat-bar-value {
  width: 50px;
  text-align: right;
  font-weight: 600;
  font-size: var(--font-size-sm);
  color: var(--dark);
}

/* ===== STUDENT DETAIL MODAL ===== */

.student-detail-modal {
  max-width: 700px;
  max-height: 90vh;
  overflow: hidden;
}

.student-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-lg);
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
}

.student-identity {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.student-avatar-large {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--font-size-xl);
  font-weight: 700;
}

.student-name-section h2 {
  font-size: var(--font-size-xl);
  margin: 0;
}

.student-email {
  font-size: var(--font-size-sm);
  opacity: 0.8;
}

.student-header .header-actions {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.student-header .btn-export {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-xs) var(--space-md);
  background: rgba(255, 255, 255, 0.2);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: var(--radius);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all 0.2s;
}

.student-header .btn-export:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.3);
  border-color: rgba(255, 255, 255, 0.5);
}

.student-header .btn-export:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.student-header .btn-close {
  background: rgba(255, 255, 255, 0.2);
  color: white;
}

.student-tabs {
  display: flex;
  border-bottom: 1px solid var(--border);
  background: white;
}

.student-tabs .tab-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
  padding: var(--space-md);
  background: none;
  border: none;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  cursor: pointer;
  transition: all var(--transition-fast);
  border-bottom: 2px solid transparent;
}

.student-tabs .tab-btn:hover {
  color: var(--primary);
  background: var(--light);
}

.student-tabs .tab-btn.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
}

.student-body {
  max-height: calc(90vh - 200px);
  overflow-y: auto;
  padding: var(--space-lg);
}

/* Summary Cards */
.summary-cards {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-md);
  margin-bottom: var(--space-lg);
}

.summary-card {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
}

.summary-icon {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  color: var(--primary);
}

.summary-content {
  display: flex;
  flex-direction: column;
}

.summary-value {
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--dark);
}

.summary-label {
  font-size: var(--font-size-xs);
  color: var(--gray-dark);
}

.trend-up { color: var(--success); }
.trend-down { color: var(--danger); }

/* Quick Stats Grid */
.quick-stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--space-sm);
  margin-bottom: var(--space-lg);
}

.quick-stat {
  text-align: center;
  padding: var(--space-sm);
}

.quick-stat .stat-label {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--gray);
  margin-bottom: 4px;
}

.quick-stat .stat-value {
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--dark);
}

/* Latest Evaluation Preview */
.latest-evaluation {
  background: var(--light);
  border-radius: var(--radius-md);
  padding: var(--space-md);
}

.latest-evaluation h4 {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  margin-bottom: var(--space-sm);
}

.evaluation-preview .eval-rating {
  display: flex;
  gap: 2px;
  margin-bottom: var(--space-sm);
}

.evaluation-preview .eval-comment {
  font-size: var(--font-size-sm);
  color: var(--dark);
  margin-bottom: var(--space-xs);
}

.evaluation-preview .eval-date {
  font-size: var(--font-size-xs);
  color: var(--gray);
}

/* Student Grades Detail */
.student-grades-detail .grades-summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-lg);
  background: var(--light);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-lg);
}

.total-score .score-value {
  font-size: var(--font-size-2xl);
  font-weight: 700;
  color: var(--dark);
}

.total-score .score-label {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  display: block;
}

.average-badge {
  font-size: var(--font-size-xl);
  font-weight: 700;
  padding: var(--space-sm) var(--space-lg);
  border-radius: var(--radius-lg);
}

.average-badge.pass {
  background: rgba(39, 174, 96, 0.1);
  color: var(--success);
}

.average-badge.fail {
  background: rgba(231, 76, 60, 0.1);
  color: var(--danger);
}

/* Submissions List */
.submissions-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.submission-item {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
  align-items: center;
}

.submission-info {
  display: flex;
  flex-direction: column;
}

.submission-title {
  font-weight: 500;
  color: var(--dark);
}

.submission-type {
  font-size: var(--font-size-xs);
  color: var(--gray);
}

.submission-result {
  text-align: right;
}

.submission-score {
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 12px;
}

.submission-score.pass {
  background: rgba(39, 174, 96, 0.1);
  color: var(--success);
}

.submission-score.fail {
  background: rgba(231, 76, 60, 0.1);
  color: var(--danger);
}

.submission-percent {
  font-size: var(--font-size-sm);
  color: var(--gray);
  margin-left: 4px;
}

.submission-meta {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
  font-size: var(--font-size-xs);
  color: var(--gray);
}

.submission-time {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* Attendance Detail */
.student-attendance-detail .attendance-summary {
  display: flex;
  align-items: center;
  gap: var(--space-xl);
  padding: var(--space-lg);
  background: var(--light);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-lg);
}

.rate-circle {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.rate-circle::before {
  content: '';
  position: absolute;
  width: 70px;
  height: 70px;
  background: white;
  border-radius: 50%;
}

.rate-value {
  position: relative;
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--dark);
}

.attendance-breakdown {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.breakdown-item {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: var(--font-size-sm);
}

.breakdown-item.present { color: var(--success); }
.breakdown-item.late { color: var(--warning); }
.breakdown-item.absent { color: var(--danger); }
.breakdown-item.excused { color: var(--accent); }

/* Attendance History */
.attendance-history {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.attendance-record {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-sm) var(--space-md);
  background: var(--light);
  border-radius: var(--radius-sm);
}

.record-date {
  width: 100px;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.record-status {
  padding: 2px 12px;
  border-radius: 12px;
  font-size: var(--font-size-xs);
  color: white;
  font-weight: 500;
}

.record-note {
  flex: 1;
  font-size: var(--font-size-sm);
  color: var(--gray);
  font-style: italic;
}

/* Evaluations Detail */
.evaluations-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

.evaluation-card {
  background: var(--light);
  border-radius: var(--radius-md);
  padding: var(--space-lg);
}

.eval-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-md);
}

.eval-period {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.eval-rating-display {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.rating-text {
  font-size: var(--font-size-sm);
  font-weight: 500;
  color: var(--warning);
  margin-left: var(--space-xs);
}

.eval-comment {
  color: var(--dark);
  margin-bottom: var(--space-md);
}

.eval-section {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  margin-bottom: var(--space-sm);
}

.eval-section.strengths strong { color: var(--success); }
.eval-section.improvements strong { color: var(--warning); }

.eval-criteria-scores {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  margin-top: var(--space-md);
  padding-top: var(--space-md);
  border-top: 1px solid var(--border);
}

.criteria-score-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.criteria-score-item .criteria-name {
  width: 120px;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.criteria-bar {
  flex: 1;
  height: 6px;
  background: var(--border);
  border-radius: 3px;
  overflow: hidden;
}

.criteria-fill {
  height: 100%;
  background: var(--primary);
  border-radius: 3px;
}

.criteria-value {
  width: 50px;
  text-align: right;
  font-size: var(--font-size-sm);
  font-weight: 500;
}

.eval-footer {
  margin-top: var(--space-md);
  padding-top: var(--space-sm);
  border-top: 1px solid var(--border);
}

.eval-footer .eval-date {
  font-size: var(--font-size-xs);
  color: var(--gray);
}

/* ===== SUBMISSION TRACKER ===== */

.submission-tracker {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

.tracker-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--space-md);
}

.stat-card {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  background: white;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
}

.stat-card .stat-icon {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--light);
}

.stat-card .stat-icon.success { color: var(--success); background: rgba(39, 174, 96, 0.1); }
.stat-card .stat-icon.info { color: var(--accent); background: rgba(52, 152, 219, 0.1); }
.stat-card .stat-icon.warning { color: var(--warning); background: rgba(243, 156, 18, 0.1); }
.stat-card .stat-icon.danger { color: var(--danger); background: rgba(231, 76, 60, 0.1); }

.stat-card .stat-info {
  display: flex;
  flex-direction: column;
}

.stat-card .stat-value {
  font-size: var(--font-size-xl);
  font-weight: 700;
  color: var(--dark);
  line-height: 1.2;
}

.stat-card .stat-label {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.tracker-filters {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.filter-group {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  color: var(--gray-dark);
}

.filter-select {
  min-width: 150px;
}

/* Tests Tracker List */
.tests-tracker-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.tracker-test-card {
  background: white;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
}

.tracker-test-card.overdue {
  border-left: 3px solid var(--danger);
}

.test-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-md) var(--space-lg);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.test-card-header:hover {
  background: var(--light);
}

.test-card-header .test-info {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.test-type-badge {
  font-size: var(--font-size-xl);
}

.test-card-header .test-details {
  display: flex;
  flex-direction: column;
}

.test-card-header .test-title {
  font-weight: 600;
  color: var(--dark);
}

.test-card-header .test-meta {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
}

.test-card-header .deadline.overdue {
  color: var(--danger);
  font-weight: 500;
}

.test-progress {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.progress-bar-mini {
  width: 100px;
  height: 6px;
  background: var(--border);
  border-radius: 3px;
  overflow: hidden;
  position: relative;
}

.progress-fill {
  position: absolute;
  height: 100%;
  border-radius: 3px;
}

.progress-fill.graded {
  background: var(--success);
}

.progress-fill.submitted {
  background: var(--warning);
}

.progress-text {
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  white-space: nowrap;
}

/* Submissions List Compact */
.test-submissions {
  border-top: 1px solid var(--border);
  background: var(--light);
}

.submissions-header {
  padding: var(--space-sm) var(--space-lg);
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  border-bottom: 1px solid var(--border);
}

.submissions-list-compact {
  max-height: 400px;
  overflow-y: auto;
}

.submission-row {
  display: grid;
  grid-template-columns: 1fr 100px 80px 50px;
  align-items: center;
  padding: var(--space-sm) var(--space-lg);
  border-bottom: 1px solid var(--border);
  gap: var(--space-md);
}

.submission-row:last-child {
  border-bottom: none;
}

.submission-row:hover {
  background: rgba(255, 255, 255, 0.5);
}

.submission-row .student-info {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.status-icon {
  flex-shrink: 0;
}

.status-icon.graded { color: var(--success); }
.status-icon.submitted { color: var(--warning); }
.status-icon.in-progress { color: var(--accent); }
.status-icon.not-started { color: var(--gray-light); }

.submission-row .student-name {
  font-weight: 500;
  color: var(--dark);
}

.status-badge {
  font-size: var(--font-size-xs);
  padding: 2px 8px;
  border-radius: 12px;
  text-align: center;
}

.status-badge.graded {
  background: rgba(39, 174, 96, 0.1);
  color: var(--success);
}

.status-badge.submitted {
  background: rgba(243, 156, 18, 0.1);
  color: var(--warning);
}

.status-badge.in-progress {
  background: rgba(52, 152, 219, 0.1);
  color: var(--accent);
}

.status-badge.not_started,
.status-badge.not-started {
  background: var(--border);
  color: var(--gray);
}

.submission-score .score {
  font-weight: 600;
  font-size: var(--font-size-sm);
}

.submission-score .score.pass { color: var(--success); }
.submission-score .score.fail { color: var(--danger); }

.submission-actions .btn-icon {
  padding: 6px;
  background: white;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.submission-actions .btn-icon:hover {
  border-color: var(--primary);
  color: var(--primary);
}

/* Responsive Dashboard */
@media (max-width: 1024px) {
  .dashboard-grid {
    grid-template-columns: 1fr;
  }

  .alerts-panel {
    grid-column: span 1;
  }
}

@media (max-width: 768px) {
  .dashboard-metrics {
    grid-template-columns: repeat(2, 1fr);
  }

  .tracker-stats {
    grid-template-columns: repeat(2, 1fr);
  }

  .submission-row {
    grid-template-columns: 1fr auto;
  }

  .submission-status,
  .submission-actions {
    display: none;
  }

  .summary-cards {
    grid-template-columns: 1fr;
  }

  .quick-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .student-attendance-detail .attendance-summary {
    flex-direction: column;
    text-align: center;
  }
}

/* ===== FRIENDS & BADGES SYSTEM ===== */

/* Friends Tab Content */
.friends-tab-content {
  display: flex;
  flex-direction: column;
  gap: var(--space-xl);
}

.badge-stats-section,
.friends-panel-section {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
}

/* ===== PROFESSIONAL BADGE STATS DISPLAY ===== */

/* Empty State */
.badge-stats-empty-pro {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-2xl) var(--space-lg);
  text-align: center;
}

.badge-stats-empty-pro .empty-icon-wrapper {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--light) 0%, var(--border) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: var(--space-lg);
}

.badge-stats-empty-pro .empty-icon-wrapper svg {
  color: var(--gray);
}

.badge-stats-empty-pro h4 {
  margin: 0 0 var(--space-sm) 0;
  color: var(--dark);
}

.badge-stats-empty-pro p {
  margin: 0;
  color: var(--gray);
  font-size: var(--font-size-sm);
}

/* Compact View */
.badge-stats-compact-pro {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-md);
  padding: var(--space-sm);
}

.badge-stats-compact-pro .compact-summary {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.badge-stats-compact-pro .icon-gold {
  color: #f39c12;
}

.badge-stats-compact-pro .compact-total {
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--dark);
}

.badge-stats-compact-pro .compact-label {
  font-size: var(--font-size-sm);
  color: var(--gray);
}

.badge-stats-compact-pro .compact-badges {
  display: flex;
  gap: var(--space-xs);
}

.badge-stats-compact-pro .compact-badge-item {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--badge-color);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
}

.badge-stats-compact-pro .badge-emoji {
  font-size: 0.85rem;
}

.badge-stats-compact-pro .badge-count {
  position: absolute;
  top: -4px;
  right: -4px;
  background: var(--primary);
  color: white;
  font-size: 9px;
  font-weight: 600;
  padding: 1px 4px;
  border-radius: 8px;
  min-width: 14px;
  text-align: center;
}

/* Main Badge Stats Pro */
.badge-stats-pro {
  display: flex;
  flex-direction: column;
  gap: var(--space-xl);
}

/* Header Section */
.badge-header-section {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  flex-wrap: wrap;
  gap: var(--space-md);
}

.badge-header-section .header-title {
  display: flex;
  align-items: flex-start;
  gap: var(--space-md);
}

.badge-header-section .header-title svg {
  color: var(--primary);
  margin-top: 2px;
}

.badge-header-section .header-title h3 {
  margin: 0;
  font-size: var(--font-size-xl);
  color: var(--dark);
}

.badge-header-section .header-subtitle {
  margin: var(--space-xs) 0 0 0;
  font-size: var(--font-size-sm);
  color: var(--gray);
}

.badge-header-section .header-stats {
  display: flex;
  gap: var(--space-sm);
}

.badge-header-section .stat-pill {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-lg);
  font-size: var(--font-size-sm);
}

.badge-header-section .stat-pill.received {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
  color: var(--primary);
}

.badge-header-section .stat-pill.sent {
  background: rgba(39, 174, 96, 0.1);
  color: var(--success);
}

.badge-header-section .stat-pill span:not(.label) {
  font-weight: 700;
  font-size: var(--font-size-lg);
}

.badge-header-section .stat-pill .label {
  color: var(--gray);
}

/* Main Content Layout */
.badge-main-content {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--space-xl);
  align-items: start;
}

/* Radar Section */
.radar-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-sm);
}

.radar-section .radar-description {
  margin: 0;
  font-size: var(--font-size-xs);
  color: var(--gray);
  text-align: center;
}

/* Radar Chart */
.badge-radar-chart {
  position: relative;
}

.badge-radar-chart .radar-svg {
  display: block;
}

.badge-radar-chart .data-polygon {
  transition: all 0.3s ease;
}

.badge-radar-chart .data-dot {
  transition: all 0.2s ease;
  cursor: pointer;
}

.badge-radar-chart .data-dot:hover {
  transform-origin: center;
  r: 8;
}

.badge-radar-chart .radar-label .label-icon-bg {
  transition: transform 0.2s ease;
}

.badge-radar-chart .radar-label:hover .label-icon-bg {
  transform: scale(1.1);
}

.badge-radar-chart .label-text {
  pointer-events: none;
}

.badge-radar-chart .radar-scale {
  display: flex;
  justify-content: space-between;
  padding: var(--space-xs) var(--space-lg);
  font-size: var(--font-size-xs);
  color: var(--gray);
}

/* Stats Section */
.stats-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.stats-section .card-header {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--gray-dark);
  margin-bottom: var(--space-sm);
}

.stats-section .icon-gold {
  color: #f39c12;
}

/* Top Badge Card */
.top-badge-card {
  background: linear-gradient(135deg, #fff9e6 0%, #fff3cd 100%);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
  border: 1px solid rgba(243, 156, 18, 0.2);
}

.top-badge-content {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.top-badge-icon {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.top-badge-info {
  display: flex;
  flex-direction: column;
}

.top-badge-name {
  font-weight: 600;
  color: var(--dark);
  font-size: var(--font-size-md);
}

.top-badge-count {
  font-size: var(--font-size-2xl);
  font-weight: 700;
  color: var(--primary);
}

/* Completion Card */
.completion-card {
  background: var(--light);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
}

.completion-content {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.completion-bar {
  height: 8px;
  background: var(--border);
  border-radius: 4px;
  overflow: hidden;
}

.completion-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
  border-radius: 4px;
  transition: width 0.5s ease;
}

.completion-text {
  display: flex;
  justify-content: space-between;
  font-size: var(--font-size-sm);
}

.completion-count {
  color: var(--gray);
}

.completion-percent {
  font-weight: 700;
  color: var(--primary);
}

/* Badge Collection */
.badge-collection {
  background: var(--light);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
}

.badge-collection h4 {
  margin: 0 0 var(--space-md) 0;
  font-size: var(--font-size-md);
  color: var(--dark);
}

.collection-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: var(--space-sm);
}

.collection-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  background: var(--white);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
  position: relative;
  transition: all 0.2s ease;
}

.collection-item.earned {
  border-color: transparent;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.collection-item.earned:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

.collection-item.locked {
  opacity: 0.6;
}

.collection-item .item-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.collection-item.locked .item-icon {
  background: var(--border);
  filter: grayscale(1);
}

.collection-item .item-details {
  flex: 1;
  min-width: 0;
}

.collection-item .item-name {
  display: block;
  font-size: var(--font-size-sm);
  font-weight: 500;
  color: var(--dark);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.collection-item .item-count {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--gray);
}

.collection-item .item-badge-count {
  position: absolute;
  top: -6px;
  right: -6px;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 11px;
  font-weight: 700;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Recent Badges Section */
.recent-badges-section {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  border: 1px solid var(--border);
}

.recent-badges-section h4 {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin: 0 0 var(--space-md) 0;
  font-size: var(--font-size-md);
  color: var(--dark);
}

.recent-badges-section h4 svg {
  color: var(--primary);
}

.recent-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.recent-item {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-sm) var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
}

.recent-item .recent-icon {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  flex-shrink: 0;
}

.recent-item .recent-content {
  flex: 1;
  min-width: 0;
}

.recent-item .recent-name {
  display: block;
  font-weight: 500;
  color: var(--dark);
  font-size: var(--font-size-sm);
}

.recent-item .recent-from {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--gray);
}

.recent-item .recent-message {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--primary);
  font-style: italic;
  margin-top: 2px;
}

.recent-item .recent-time {
  font-size: var(--font-size-xs);
  color: var(--gray-light);
  white-space: nowrap;
}

/* Responsive for Badge Stats */
@media (max-width: 768px) {
  .badge-main-content {
    grid-template-columns: 1fr;
  }

  .radar-section {
    order: 2;
  }

  .stats-section {
    order: 1;
  }

  .collection-grid {
    grid-template-columns: 1fr;
  }

  .badge-header-section {
    flex-direction: column;
  }

  .badge-header-section .header-stats {
    width: 100%;
    justify-content: center;
  }
}

.badge-icon-mini {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  position: relative;
}

.badge-mini-count {
  position: absolute;
  top: -4px;
  right: -4px;
  background: var(--primary);
  color: white;
  font-size: 10px;
  padding: 1px 4px;
  border-radius: 8px;
  line-height: 1;
}

/* Shield-Shaped Badge Component */
.badge-shape-wrapper {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.badge-shape-wrapper:hover {
  transform: scale(1.08);
}

.badge-shape-wrapper.locked {
  cursor: default;
  opacity: 0.6;
}

.badge-shape-wrapper.locked:hover {
  transform: none;
}

.badge-shape-svg {
  filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.15));
  transition: filter 0.2s ease;
}

.badge-shape-wrapper:hover .badge-shape-svg {
  filter: drop-shadow(0 4px 10px rgba(0, 0, 0, 0.22));
}

.badge-shape-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  margin-top: -3%;
  text-align: center;
  line-height: 1;
  pointer-events: none;
}

.badge-shape-count {
  position: absolute;
  bottom: 0;
  right: -4px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  border-radius: 9px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 10px;
  font-weight: 700;
  border: 2px solid white;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Badge Tooltip */
.badge-tooltip {
  position: absolute;
  z-index: 1000;
  background: var(--dark);
  color: white;
  padding: 10px 14px;
  border-radius: 10px;
  white-space: nowrap;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
  pointer-events: none;
  animation: tooltipFade 0.2s ease;
  max-width: 200px;
}

.badge-tooltip.top {
  bottom: calc(100% + 12px);
  left: 50%;
  transform: translateX(-50%);
}

.badge-tooltip.bottom {
  top: calc(100% + 12px);
  left: 50%;
  transform: translateX(-50%);
}

.badge-tooltip::after {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
}

.badge-tooltip.top::after {
  top: 100%;
  border-top-color: var(--dark);
}

.badge-tooltip.bottom::after {
  bottom: 100%;
  border-bottom-color: var(--dark);
}

.badge-tooltip .tooltip-name {
  display: block;
  font-weight: 600;
  font-size: 13px;
  margin-bottom: 4px;
  white-space: normal;
}

.badge-tooltip .tooltip-desc {
  display: block;
  font-size: 11px;
  opacity: 0.85;
  line-height: 1.4;
  white-space: normal;
}

.badge-tooltip .tooltip-count {
  display: block;
  font-size: 11px;
  color: var(--success);
  margin-top: 6px;
  font-weight: 500;
}

.badge-tooltip .tooltip-locked {
  display: block;
  font-size: 11px;
  color: var(--warning);
  margin-top: 6px;
  font-style: italic;
}

@keyframes tooltipFade {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Mini Badge (Compact Shield) */
.mini-badge-wrapper {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.15s ease;
}

.mini-badge-wrapper:hover {
  transform: scale(1.1);
}

.mini-badge-wrapper svg {
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.15));
}

.mini-badge-icon {
  position: absolute;
  top: 46%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 12px;
  line-height: 1;
}

.mini-badge-count {
  position: absolute;
  bottom: -2px;
  right: -6px;
  background: var(--dark);
  color: white;
  font-size: 9px;
  font-weight: 700;
  padding: 1px 4px;
  border-radius: 8px;
  border: 1px solid white;
}

.mini-badge-tooltip {
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  background: var(--dark);
  color: white;
  font-size: 11px;
  padding: 6px 10px;
  border-radius: 6px;
  white-space: nowrap;
  z-index: 1000;
  animation: tooltipFade 0.15s ease;
}

.mini-badge-tooltip::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 5px solid transparent;
  border-top-color: var(--dark);
}

/* Shield Badge Collection Grid */
.collection-grid-shields {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
  gap: var(--space-md);
}

.collection-shield-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-md) var(--space-sm);
  background: var(--white);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  transition: all 0.2s ease;
}

.collection-shield-item.earned {
  border-color: transparent;
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08);
}

.collection-shield-item.earned:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.collection-shield-item.locked {
  background: var(--light);
}

.shield-item-details {
  text-align: center;
  width: 100%;
}

.shield-item-name {
  display: block;
  font-size: 11px;
  font-weight: 500;
  color: var(--dark);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
  cursor: help;
}

.collection-shield-item.locked .shield-item-name {
  color: var(--gray);
}

.shield-item-count {
  display: block;
  font-size: 10px;
  color: var(--gray);
  margin-top: 2px;
}

.collection-shield-item.earned .shield-item-count {
  color: var(--primary);
  font-weight: 600;
}

/* Compact Badge Stats */
.badge-stats-compact-pro {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-sm) var(--space-md);
  background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(255, 165, 0, 0.05));
  border-radius: var(--radius-md);
  border: 1px solid rgba(255, 215, 0, 0.2);
}

.compact-summary {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.compact-summary .icon-gold {
  color: #f59e0b;
}

.compact-total {
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--dark);
}

.compact-label {
  font-size: var(--font-size-sm);
  color: var(--gray);
}

.compact-badges {
  display: flex;
  gap: var(--space-xs);
  flex-wrap: wrap;
}

/* Empty Badge Stats State */
.badge-stats-empty-pro {
  text-align: center;
  padding: var(--space-xl);
  background: var(--light);
  border-radius: var(--radius-lg);
}

.badge-stats-empty-pro .empty-icon-wrapper {
  width: 80px;
  height: 80px;
  background: linear-gradient(135deg, var(--gray-light), var(--border));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto var(--space-md);
  color: var(--gray);
}

.badge-stats-empty-pro h4 {
  margin: 0 0 var(--space-xs) 0;
  color: var(--dark);
  font-size: var(--font-size-md);
}

.badge-stats-empty-pro p {
  margin: 0;
  color: var(--gray);
  font-size: var(--font-size-sm);
}

/* Responsive for Shield Badges */
@media (max-width: 768px) {
  .collection-grid-shields {
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-sm);
  }

  .collection-shield-item {
    padding: var(--space-sm);
  }

  .badge-stats-compact-pro {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-sm);
  }

  .compact-badges {
    width: 100%;
    justify-content: flex-start;
  }
}

@media (max-width: 480px) {
  .collection-grid-shields {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Friends Panel */
/* ===== PRO FRIENDS PANEL ===== */
.friends-panel {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

.friends-panel-loading {
  padding: var(--space-2xl);
  text-align: center;
  color: var(--gray);
}

/* Friends Tabs - Modern Pill Style */
.friends-tabs {
  display: flex;
  gap: var(--space-sm);
  background: var(--light);
  padding: 6px;
  border-radius: 16px;
}

.friends-tabs .tab-btn {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-lg);
  background: transparent;
  border: none;
  border-radius: 12px;
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  color: var(--gray);
  cursor: pointer;
  transition: all 0.2s;
}

.friends-tabs .tab-btn:hover {
  background: var(--light);
  color: var(--dark);
}

.friends-tabs .tab-btn.active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.friends-tabs .badge-count {
  background: linear-gradient(135deg, #fc5c65 0%, #eb3b5a 100%);
  color: white;
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 10px;
  margin-left: var(--space-xs);
  font-weight: 600;
  animation: badgePulse 2s ease-in-out infinite;
}

@keyframes badgePulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

/* Friends List */
.friends-list,
.requests-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.friend-item,
.request-item,
.user-search-item {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md) var(--space-lg);
  background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
  border-radius: 16px;
  border: 1px solid transparent;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.friend-item:hover,
.request-item:hover,
.user-search-item:hover {
  background: white;
  border-color: var(--border);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.friend-avatar,
.request-avatar,
.user-avatar {
  width: 48px;
  height: 48px;
  border-radius: 14px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.25);
  color: white;
  font-size: 1.2rem;
  font-weight: 600;
  flex-shrink: 0;
}

.friend-info,
.request-info,
.user-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.friend-name,
.request-name,
.user-name {
  font-weight: 600;
  font-size: 0.95rem;
  color: var(--dark);
}

.request-message {
  font-size: var(--font-size-xs);
  color: var(--primary);
  font-style: italic;
  background: rgba(102, 126, 234, 0.1);
  padding: 4px 10px;
  border-radius: 8px;
  display: inline-block;
  margin-top: 4px;
}

.request-time {
  font-size: var(--font-size-xs);
  color: var(--gray);
}

.friend-actions,
.request-actions {
  display: flex;
  gap: var(--space-sm);
}

.friend-actions .btn-icon {
  width: 36px;
  height: 36px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  background: var(--light);
  border: none;
  color: var(--gray-dark);
  cursor: pointer;
  transition: all 0.2s ease;
}

.friend-actions .btn-icon:hover {
  background: var(--primary);
  color: white;
  transform: scale(1.1);
}

.friend-actions .btn-icon.danger {
  color: var(--danger);
}

.friend-actions .btn-icon.danger:hover {
  background: var(--danger);
  color: white;
}

/* Find Friends */
.find-friends {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

.search-box {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md) var(--space-lg);
  background: white;
  border-radius: 16px;
  border: 2px solid var(--border);
  transition: all 0.2s ease;
}

.search-box:focus-within {
  border-color: var(--primary);
  box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15);
}

.search-box svg {
  color: var(--gray);
}

.search-box .search-input {
  flex: 1;
  border: none;
  background: none;
  font-size: var(--font-size-md);
  outline: none;
}

.users-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.hint-text {
  text-align: center;
  color: var(--gray);
  font-size: var(--font-size-sm);
  padding: var(--space-lg);
}

.add-friend-form {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
  flex-wrap: wrap;
}

.add-friend-form .form-input {
  flex: 1;
  min-width: 150px;
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
}

/* Pro Empty State */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-2xl) var(--space-lg);
  text-align: center;
  background: linear-gradient(180deg, rgba(102, 126, 234, 0.03) 0%, rgba(118, 75, 162, 0.02) 100%);
  border-radius: 20px;
  border: 2px dashed var(--border);
}

.empty-state svg {
  width: 64px;
  height: 64px;
  color: var(--primary);
  opacity: 0.5;
  margin-bottom: var(--space-lg);
}

.empty-state p {
  margin: 0 0 var(--space-lg) 0;
  font-size: 1rem;
  color: var(--gray-dark);
  font-weight: 500;
}

.empty-state h3 {
  margin: 0 0 var(--space-sm) 0;
  font-size: 1.25rem;
  color: var(--text);
  font-weight: 600;
}

.empty-state-icon {
  font-size: 48px;
  margin-bottom: var(--space-lg);
  opacity: 0.7;
}

/* Assignments Tab Content */
.assignments-tab-content {
  padding: var(--space-lg);
}

/* Badge Gift Modal */
/* ===== PRO BADGE GIFT MODAL ===== */
.badge-gift-modal {
  background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
  border-radius: 24px;
  width: 90%;
  max-width: 500px;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  animation: modalSlideIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.badge-gift-modal .modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-lg) var(--space-xl);
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.badge-gift-modal .modal-header h3 {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
}

.badge-gift-modal .modal-header .btn-close {
  background: rgba(255, 255, 255, 0.2);
  color: white;
  border: none;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
}

.badge-gift-modal .modal-header .btn-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: rotate(90deg);
}

.badge-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-md);
  padding: var(--space-lg);
  max-height: 320px;
  overflow-y: auto;
}

.badge-grid::-webkit-scrollbar {
  width: 6px;
}

.badge-grid::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
}

.badge-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-md);
  border: 2px solid transparent;
  border-radius: 16px;
  background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  overflow: hidden;
}

.badge-option::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--badge-color);
  opacity: 0;
  transition: opacity 0.2s;
  border-radius: 14px;
}

.badge-option:hover {
  transform: translateY(-4px) scale(1.02);
  border-color: var(--badge-color);
  box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.15);
}

.badge-option:hover::before {
  opacity: 0.08;
}

.badge-option.selected {
  border-color: var(--badge-color);
  background: white;
  box-shadow: 0 0 0 3px rgba(var(--badge-color), 0.2), 0 10px 30px -5px rgba(0, 0, 0, 0.2);
  transform: translateY(-2px);
}

.badge-option.selected::before {
  opacity: 0.12;
}

.badge-option .badge-icon {
  font-size: 2rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.badge-option:hover .badge-icon {
  transform: scale(1.15) rotate(-5deg);
}

.badge-option.selected .badge-icon {
  animation: badgeBounce 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes badgeBounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.3); }
}

.badge-option .badge-name {
  font-size: 0.75rem;
  font-weight: 600;
  text-align: center;
  color: var(--dark);
  line-height: 1.3;
}

.selected-badge-info {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  margin: 0 var(--space-lg);
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.05) 100%);
  border-radius: 16px;
  border: 1px solid rgba(102, 126, 234, 0.2);
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.selected-badge-preview {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
}

.selected-badge-details {
  display: flex;
  flex-direction: column;
}

.badge-title {
  font-weight: 600;
}

.badge-desc {
  font-size: var(--font-size-sm);
  color: var(--gray);
}

.message-input {
  padding: var(--space-md);
}

.message-input label {
  display: block;
  font-size: var(--font-size-sm);
  color: var(--gray);
  margin-bottom: var(--space-xs);
}

.message-input textarea {
  width: 100%;
  padding: var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  resize: none;
  font-family: inherit;
}

.badge-gift-modal .modal-actions {
  display: flex;
  gap: var(--space-sm);
  justify-content: flex-end;
  padding: var(--space-md);
  border-top: 1px solid var(--border);
}

.success-message {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-2xl);
  text-align: center;
}

.success-message .success-icon {
  font-size: 3rem;
  margin-bottom: var(--space-md);
}

/* Game Friend Invite Modal */
.game-friend-invite-modal {
  background: var(--white);
  border-radius: var(--radius-lg);
  width: 90%;
  max-width: 400px;
  max-height: 80vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.game-friend-invite-modal .modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-lg);
  border-bottom: 1px solid var(--border);
}

.game-friend-invite-modal .modal-header h3 {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin: 0;
  font-size: var(--font-size-lg);
}

.invite-info {
  padding: var(--space-md);
  background: var(--light);
  text-align: center;
}

.invite-info .game-title {
  font-weight: 600;
  margin: 0 0 var(--space-sm) 0;
}

.game-code-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
}

.game-code-display .label {
  color: var(--gray);
  font-size: var(--font-size-sm);
}

.game-code-display .code {
  font-weight: 700;
  font-size: var(--font-size-lg);
  color: var(--primary);
  letter-spacing: 1px;
}

.friends-invite-list {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-md);
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.empty-friends {
  text-align: center;
  padding: var(--space-lg);
  color: var(--gray);
}

.empty-friends .hint {
  font-size: var(--font-size-xs);
  margin-top: var(--space-sm);
}

.friend-invite-item {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-sm) var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
}

.friend-invite-item .friend-avatar {
  width: 36px;
  height: 36px;
  font-size: 1rem;
}

.friend-invite-item .friend-name {
  flex: 1;
  font-weight: 500;
}

.invited-badge {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  color: var(--success);
  font-size: var(--font-size-sm);
}

.game-friend-invite-modal .modal-footer {
  padding: var(--space-md);
  border-top: 1px solid var(--border);
  text-align: center;
}

.share-hint {
  font-size: var(--font-size-sm);
  color: var(--gray);
  margin: 0;
}

.share-hint strong {
  color: var(--primary);
}

/* Invite Friends Button in Lobby */
.invite-friends-btn {
  margin-top: var(--space-md);
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
}

/* Settings Tab Badge */
.settings-main-tab .tab-badge {
  background: var(--danger);
  color: white;
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 10px;
  margin-left: var(--space-xs);
}

/* Mobile Responsiveness for Friends */
@media (max-width: 768px) {
  .badge-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .badge-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .friends-tabs {
    flex-wrap: wrap;
  }

  .friends-tabs .tab-btn {
    flex: 1;
    justify-content: center;
  }

  .friend-actions {
    flex-wrap: wrap;
  }

  .add-friend-form {
    flex-direction: column;
  }

  .add-friend-form .form-input {
    width: 100%;
  }
}

/* ============ TEST BANK PANEL ============ */

.test-bank-panel {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
}

.test-bank-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
  flex-wrap: wrap;
  gap: var(--space-md);
}

.test-bank-header .header-title {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.test-bank-header h3,
.test-bank-header .panel-title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--dark);
}

.test-bank-header .template-count {
  background: var(--primary-light);
  color: var(--primary);
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
  font-weight: 600;
}

.test-bank-header .header-actions {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
}

.test-bank-header .filter-select {
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  font-size: 0.9rem;
}

/* Template list */
.template-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.template-card {
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  transition: all var(--transition-fast);
}

.template-card:hover {
  border-color: var(--primary);
}

.template-header {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md) var(--space-lg);
  background: var(--light);
  cursor: pointer;
}

.template-icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--primary-gradient);
  border-radius: var(--radius);
  color: white;
}

.template-info {
  flex: 1;
}

.template-title {
  margin: 0 0 var(--space-xs) 0;
  font-size: 1rem;
}

.template-meta {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
  font-size: 0.85rem;
  color: var(--gray-dark);
  align-items: center;
}

.template-meta .type-badge {
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
  font-weight: 600;
}

.template-meta .type-badge.test {
  background: rgba(102, 126, 234, 0.1);
  color: var(--primary);
}

.template-meta .type-badge.assignment {
  background: rgba(243, 156, 18, 0.1);
  color: #f39c12;
}

.template-meta .level-badge {
  background: var(--light);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  font-weight: 600;
}

.template-meta .time-limit {
  display: flex;
  align-items: center;
  gap: 2px;
}

.template-tags {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-top: var(--space-xs);
  color: var(--gray);
}

.tag-mini {
  padding: 1px 6px;
  background: var(--light);
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
}

.tag-more {
  font-size: 0.75rem;
  color: var(--gray);
}

.template-actions {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.template-detail {
  padding: var(--space-lg);
  border-top: 1px solid var(--border);
  animation: slideDown 0.2s ease;
}

.template-description {
  margin: 0 0 var(--space-md) 0;
  color: var(--gray-dark);
}

.questions-preview h5 {
  margin: 0 0 var(--space-sm) 0;
  font-size: 0.9rem;
}

.question-preview {
  display: flex;
  gap: var(--space-sm);
  padding: var(--space-xs) 0;
  border-bottom: 1px solid var(--border);
  font-size: 0.85rem;
}

.question-preview .q-number {
  flex-shrink: 0;
  font-weight: 600;
  color: var(--primary);
}

.question-preview .q-text {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.question-preview .q-points {
  flex-shrink: 0;
  color: var(--gray);
}

/* Test template form */
.test-form-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: var(--space-lg);
}

.test-template-form {
  background: var(--white);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 800px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.test-template-form .form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-lg);
  border-bottom: 1px solid var(--border);
}

.test-template-form .form-header h4 {
  margin: 0;
}

.test-template-form .form-header .btn-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: var(--gray);
  padding: 0;
  line-height: 1;
}

.test-template-form .form-body {
  padding: var(--space-lg);
  overflow-y: auto;
  flex: 1;
}

.test-template-form .form-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-sm);
  padding: var(--space-lg);
  border-top: 1px solid var(--border);
}

/* Tags input */
.tags-input {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  padding: var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  align-items: center;
}

.tags-input .tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
}

.tags-input .tag-item {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: var(--primary-light);
  color: var(--primary);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
}

.tags-input .tag-item button {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  color: var(--primary);
  font-size: 1rem;
  line-height: 1;
}

.tags-input input {
  border: none;
  outline: none;
  flex: 1;
  min-width: 100px;
  padding: var(--space-xs);
}

/* Question editor */
.question-editor {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.question-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.question-item {
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius);
  border: 1px solid var(--border);
}

.question-header {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-bottom: var(--space-sm);
}

.question-number {
  font-weight: 600;
  color: var(--primary);
}

.question-type-select {
  padding: 4px 8px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
}

.question-points {
  width: 60px;
  padding: 4px 8px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
  text-align: center;
}

.question-text {
  width: 100%;
  padding: var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  resize: vertical;
  font-family: inherit;
}

.question-options {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  margin-top: var(--space-sm);
}

.option-row {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.option-input {
  flex: 1;
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
}

.fill-blank-answer,
.question-explanation {
  width: 100%;
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  margin-top: var(--space-sm);
}

.add-question-btn {
  align-self: flex-start;
}

/* ============ ASSIGN TEST MODAL ============ */

.assign-test-modal {
  background: var(--white);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 700px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.assign-test-modal .modal-header {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-lg);
  border-bottom: 1px solid var(--border);
}

.assign-test-modal .modal-header h3 {
  margin: 0;
  flex: 1;
}

.assign-test-modal .classroom-name {
  font-size: 0.9rem;
  color: var(--primary);
  font-weight: 500;
}

.assign-test-modal .modal-body {
  padding: var(--space-lg);
  flex: 1;
  overflow-y: auto;
}

.assign-test-modal .modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-sm);
  padding: var(--space-lg);
  border-top: 1px solid var(--border);
}

/* Filter tabs */
.filter-tabs {
  display: flex;
  gap: var(--space-xs);
  margin-bottom: var(--space-lg);
  border-bottom: 1px solid var(--border);
  padding-bottom: var(--space-sm);
}

.filter-tab {
  padding: var(--space-xs) var(--space-md);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--gray-dark);
  cursor: pointer;
  font-size: 0.9rem;
  transition: all var(--transition-fast);
}

.filter-tab:hover {
  color: var(--primary);
}

.filter-tab.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
  font-weight: 600;
}

/* Template select list */
.template-select-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  max-height: 400px;
  overflow-y: auto;
}

.template-option {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  border: 2px solid var(--border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.template-option:hover {
  border-color: var(--primary);
  background: var(--light);
}

.template-option.selected {
  border-color: var(--primary);
  background: rgba(102, 126, 234, 0.05);
}

.template-option-icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--light);
  border-radius: var(--radius);
  color: var(--primary);
}

.template-option.selected .template-option-icon {
  background: var(--primary);
  color: white;
}

.template-option-info {
  flex: 1;
}

.template-option-title {
  display: block;
  font-weight: 600;
  margin-bottom: 4px;
}

.template-option-meta {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  font-size: 0.8rem;
  color: var(--gray-dark);
  align-items: center;
}

.template-option-tags {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-top: 4px;
  font-size: 0.75rem;
  color: var(--gray);
}

.selected-indicator {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--primary);
  border-radius: 50%;
  color: white;
}

/* Assign options */
.assign-options {
  margin-top: var(--space-lg);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius);
}

.assign-options .option-row {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  margin-bottom: var(--space-sm);
}

.assign-options .option-row:last-child {
  margin-bottom: 0;
}

.assign-options label {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  cursor: pointer;
}

.assign-options input[type="datetime-local"] {
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
}

/* Success message */
.assign-test-modal .success-message {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-xl);
  text-align: center;
}

.assign-test-modal .success-icon {
  color: #27ae60;
  margin-bottom: var(--space-md);
  animation: scaleIn 0.3s ease;
}

@keyframes scaleIn {
  from { transform: scale(0); }
  to { transform: scale(1); }
}

/* Responsive */
@media (max-width: 600px) {
  .test-bank-header {
    flex-direction: column;
    align-items: stretch;
  }

  .test-bank-header .header-actions {
    justify-content: space-between;
  }

  .template-header {
    flex-wrap: wrap;
  }

  .template-actions {
    width: 100%;
    justify-content: flex-end;
    margin-top: var(--space-sm);
  }

  .assign-test-modal {
    max-height: 95vh;
  }

  .filter-tabs {
    overflow-x: auto;
  }
}

/* True/False options */
.true-false-options {
  display: flex;
  gap: var(--space-lg);
  margin-top: var(--space-sm);
}

.true-false-options label {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  cursor: pointer;
}

/* ============ TEST BANK TABS & NAVIGATION ============ */

.test-bank-tabs {
  display: flex;
  gap: var(--space-sm);
  margin-bottom: var(--space-lg);
  border-bottom: 2px solid var(--border);
  padding-bottom: var(--space-sm);
}

.test-bank-tabs .tab-btn {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-md);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--gray-dark);
  cursor: pointer;
  font-size: 1rem;
  font-weight: 500;
  margin-bottom: -2px;
  transition: all var(--transition-fast);
}

.test-bank-tabs .tab-btn:hover {
  color: var(--primary);
}

.test-bank-tabs .tab-btn.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
  font-weight: 600;
}

.test-bank-content {
  min-height: 200px;
}

/* Folder navigation */
.test-bank-panel .folder-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--space-md);
}

.test-bank-panel .folder-item-wrapper {
  display: flex;
}

.test-bank-panel .folder-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all var(--transition-fast);
  width: 100%;
}

.test-bank-panel .folder-item:hover {
  background: var(--primary-light);
  transform: translateY(-2px);
}

.test-bank-panel .folder-icon,
.test-bank-panel .folder-icon-svg {
  font-size: 1.25rem;
  color: var(--primary);
}

.test-bank-panel .folder-name {
  flex: 1;
  font-weight: 500;
}

.test-bank-panel .folder-count {
  font-size: 0.85rem;
  color: var(--gray);
}

.folder-actions-inline {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  margin-left: auto;
}

.edit-folder-inline {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  width: 100%;
  padding: var(--space-sm);
}

.edit-folder-inline input {
  flex: 1;
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
}

/* Folder actions */
.test-bank-panel .folder-actions {
  display: flex;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

/* Add folder inline */
.add-folder-inline {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm);
  background: var(--light);
  border-radius: var(--radius);
  margin-bottom: var(--space-md);
}

.add-folder-inline .folder-input {
  flex: 1;
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
}

/* Back button */
.btn-back {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  margin-bottom: var(--space-md);
  padding: var(--space-xs) var(--space-sm);
  background: none;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--gray-dark);
  cursor: pointer;
  font-size: 0.9rem;
  transition: all var(--transition-fast);
}

.btn-back:hover {
  border-color: var(--primary);
  color: var(--primary);
}

/* Source badge */
.source-badge {
  padding: 2px 6px;
  background: rgba(46, 204, 113, 0.1);
  color: #27ae60;
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
  font-weight: 600;
}

/* Import buttons */
.import-buttons {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
  padding: var(--space-sm);
  background: var(--light);
  border-radius: var(--radius);
}

.import-buttons .import-label {
  font-weight: 500;
  margin-right: var(--space-sm);
}

/* Import modal */
.import-modal {
  background: var(--white);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 600px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
}

.import-modal .modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-lg);
  border-bottom: 1px solid var(--border);
}

.import-modal .modal-header h4 {
  margin: 0;
}

.import-modal .modal-body {
  padding: var(--space-lg);
  flex: 1;
  overflow-y: auto;
}

.import-modal .modal-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-lg);
  border-top: 1px solid var(--border);
}

.import-filter {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

.import-filter select {
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
}

.import-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  max-height: 400px;
  overflow-y: auto;
}

.import-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.import-item:hover {
  background: var(--light);
  border-color: var(--primary);
}

.import-item input[type="checkbox"] {
  flex-shrink: 0;
}

.import-item .item-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
  min-width: 0;
}

.import-item .item-text strong {
  font-weight: 600;
}

.import-item .item-text .kanji {
  color: var(--gray);
  font-size: 0.85rem;
  margin-left: var(--space-xs);
}

.import-item .item-text .meaning {
  font-size: 0.85rem;
  color: var(--gray-dark);
  display: block;
}

.import-item .item-text .question-text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.import-modal .empty-text {
  text-align: center;
  color: var(--gray);
  padding: var(--space-lg);
}

.import-modal .selected-count {
  font-weight: 500;
  color: var(--primary);
}

/* Import filter row */
.import-filter-row {
  display: flex;
  gap: var(--space-md);
  margin-bottom: var(--space-md);
}

.import-filter-row .import-filter {
  flex: 1;
}

/* Difficulty select */
.question-difficulty-select,
.difficulty-select {
  padding: 4px 8px;
  border-width: 2px;
  border-style: solid;
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

/* Points label */
.points-label {
  font-size: 0.85rem;
  color: var(--gray);
}

/* Import divider */
.import-divider {
  color: var(--border);
  margin: 0 var(--space-xs);
}

/* Button accent */
.btn-accent {
  background: linear-gradient(135deg, #f39c12, #e74c3c);
  color: white;
  border: none;
}

.btn-accent:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

/* ============ AUTO-GENERATE MODAL ============ */

.auto-generate-modal {
  background: var(--white);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 500px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.auto-generate-modal .modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-lg);
  border-bottom: 1px solid var(--border);
  background: linear-gradient(135deg, #f39c12 0%, #e74c3c 100%);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  color: white;
}

.auto-generate-modal .modal-header h4 {
  margin: 0;
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.auto-generate-modal .modal-header .btn-close {
  color: white;
  opacity: 0.8;
}

.auto-generate-modal .modal-header .btn-close:hover {
  opacity: 1;
}

.auto-generate-modal .modal-body {
  padding: var(--space-lg);
  overflow-y: auto;
}

.auto-generate-modal .modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-sm);
  padding: var(--space-lg);
  border-top: 1px solid var(--border);
}

.auto-gen-desc {
  margin: 0 0 var(--space-lg) 0;
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius);
  font-size: 0.9rem;
  color: var(--gray-dark);
}

.auto-gen-form .form-row {
  display: flex;
  gap: var(--space-md);
  margin-bottom: var(--space-md);
}

.auto-gen-form .form-group {
  flex: 1;
}

.auto-gen-form .form-group label {
  display: block;
  font-weight: 600;
  margin-bottom: var(--space-xs);
  font-size: 0.9rem;
}

.auto-gen-form select,
.auto-gen-form input {
  width: 100%;
  padding: var(--space-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  font-size: 0.95rem;
}

.auto-gen-form .available-count {
  display: block;
  margin-top: var(--space-xs);
  font-size: 0.8rem;
  color: var(--gray);
}

.auto-gen-form .source-selector {
  display: flex;
  gap: var(--space-xs);
}

.auto-gen-form .source-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
  padding: var(--space-sm);
  border: 2px solid var(--border);
  border-radius: var(--radius);
  background: var(--white);
  cursor: pointer;
  transition: all var(--transition-fast);
  font-size: 0.9rem;
}

.auto-gen-form .source-btn:hover {
  border-color: var(--primary);
}

.auto-gen-form .source-btn.active {
  border-color: var(--primary);
  background: var(--primary-light);
  color: var(--primary);
}

/* ============ PRO AUTO-GENERATE MODAL ============ */

.auto-generate-modal.pro {
  max-width: 680px;
  width: calc(100% - 32px);
}

.auto-generate-modal.pro .modal-body {
  padding: 0;
  max-height: 65vh;
  overflow-y: auto;
}

.auto-gen-section {
  padding: 16px 20px;
  border-bottom: 1px solid #e9ecef;
}

.auto-gen-section:last-of-type {
  border-bottom: none;
}

.section-title {
  margin: 0 0 12px 0;
  font-size: 0.9rem;
  font-weight: 600;
  color: #333;
  display: flex;
  align-items: center;
  gap: 6px;
}

/* Source cards */
.source-cards {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

.source-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-md);
  background: var(--light);
  border: 2px solid transparent;
  border-radius: var(--radius);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.source-card:hover {
  border-color: var(--primary);
  background: var(--primary-light);
}

.source-card.active {
  border-color: var(--primary);
  background: var(--primary-light);
  color: var(--primary);
}

.source-card .source-name {
  font-weight: 600;
}

.source-card .source-count {
  font-size: 0.8rem;
  color: var(--gray);
}

.source-card.active .source-count {
  color: var(--primary);
}

/* Source mode - similar to difficulty mode */
.source-mode {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.checkbox-card {
  flex: 1;
  min-width: 90px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px 8px;
  background: #f8f9fa;
  border: 2px solid #e9ecef;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s;
}

.checkbox-card:hover {
  border-color: #adb5bd;
}

.checkbox-card input {
  display: none;
}

.checkbox-card.checked {
  background: rgba(231, 76, 60, 0.08);
}

.checkbox-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  font-size: 0.8rem;
  font-weight: 500;
}

.checkbox-content small {
  font-size: 0.7rem;
  color: #888;
  font-weight: 400;
}

.checkbox-card.checked .checkbox-content {
  font-weight: 600;
}

/* Source mix config */
.source-mix-config {
  margin-top: 12px;
}

.source-sliders {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.slider.source-flashcard::-webkit-slider-thumb {
  background: #e74c3c;
}

.slider.source-jlpt::-webkit-slider-thumb {
  background: #9b59b6;
}

.slider.source-testbank::-webkit-slider-thumb {
  background: #3498db;
}

.bar-segment.source-flashcard {
  background: linear-gradient(90deg, #e74c3c, #c0392b);
}

.bar-segment.source-jlpt {
  background: linear-gradient(90deg, #9b59b6, #8e44ad);
}

.bar-segment.source-testbank {
  background: linear-gradient(90deg, #3498db, #2980b9);
}

/* Preview source mix */
.preview-source-mix {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px dashed #dee2e6;
}

.preview-source-mix .mix-label {
  font-size: 0.75rem;
  color: #888;
  font-weight: 500;
}

.source-chip {
  font-size: 0.7rem;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 12px;
  color: white;
}

.source-chip.flashcard {
  background: #e74c3c;
}

.source-chip.jlpt {
  background: #9b59b6;
}

.source-chip.testbank {
  background: #3498db;
}

/* Level chips */
.level-selector {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px dashed #e9ecef;
}

.level-selector label {
  font-weight: 500;
  font-size: 0.85rem;
  color: #666;
}

.level-chips {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.level-chip {
  padding: 5px 14px;
  background: #f8f9fa;
  border: 1px solid #dee2e6;
  border-radius: 16px;
  cursor: pointer;
  font-size: 0.8rem;
  font-weight: 600;
  transition: all 0.15s;
}

.level-chip:hover {
  border-color: var(--primary);
  background: rgba(231, 76, 60, 0.05);
}

.level-chip.active {
  background: var(--primary);
  border-color: var(--primary);
  color: white;
}

/* Difficulty mode */
.difficulty-mode {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.radio-card {
  flex: 1;
  min-width: 70px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px 10px;
  background: #f8f9fa;
  border: 2px solid #e9ecef;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s;
}

.radio-card:hover {
  border-color: #adb5bd;
}

.radio-card input {
  display: none;
}

.radio-card input:checked + .radio-content {
  font-weight: 600;
}

.radio-card:has(input:checked) {
  border-color: var(--primary);
  background: rgba(231, 76, 60, 0.08);
}

.radio-content {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 0.8rem;
}

/* Mixed config */
.mixed-config {
  margin-top: 12px;
  padding: 12px;
  background: #f8f9fa;
  border-radius: 8px;
}

.preset-buttons {
  display: flex;
  gap: 6px;
  margin-bottom: 12px;
}

.preset-btn {
  flex: 1;
  padding: 5px 8px;
  background: white;
  border: 1px solid #dee2e6;
  border-radius: 6px;
  font-size: 0.75rem;
  cursor: pointer;
  transition: all 0.15s;
  font-weight: 500;
}

.preset-btn:hover {
  border-color: var(--primary);
}

.preset-btn.active {
  background: var(--primary);
  border-color: var(--primary);
  color: white;
}

/* Difficulty sliders */
.difficulty-sliders {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.slider-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.slider-label {
  width: 28px;
  font-weight: 600;
  font-size: 0.8rem;
}

.slider-row input[type="range"] {
  flex: 1;
  height: 6px;
  -webkit-appearance: none;
  appearance: none;
  border-radius: 3px;
  outline: none;
}

.slider-row input[type="range"].easy {
  background: linear-gradient(to right, #27ae60 0%, #27ae60 var(--value, 30%), #e0e0e0 var(--value, 30%));
}

.slider-row input[type="range"].medium {
  background: linear-gradient(to right, #f39c12 0%, #f39c12 var(--value, 50%), #e0e0e0 var(--value, 50%));
}

.slider-row input[type="range"].hard {
  background: linear-gradient(to right, #e74c3c 0%, #e74c3c var(--value, 20%), #e0e0e0 var(--value, 20%));
}

.slider-row input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  background: white;
  border: 2px solid currentColor;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.slider-row input[type="range"].easy::-webkit-slider-thumb {
  border-color: #27ae60;
}

.slider-row input[type="range"].medium::-webkit-slider-thumb {
  border-color: #f39c12;
}

.slider-row input[type="range"].hard::-webkit-slider-thumb {
  border-color: #e74c3c;
}

.slider-value {
  width: 40px;
  text-align: right;
  font-weight: 600;
  font-size: 0.85rem;
}

/* Distribution bar */
.distribution-bar {
  display: flex;
  height: 8px;
  border-radius: 4px;
  overflow: hidden;
  margin-top: var(--space-md);
}

.bar-segment {
  transition: width var(--transition-fast);
}

.bar-segment.easy {
  background: #27ae60;
}

.bar-segment.medium {
  background: #f39c12;
}

.bar-segment.hard {
  background: #e74c3c;
}

/* Config grid */
.config-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.config-item label {
  display: block;
  font-weight: 600;
  margin-bottom: 6px;
  font-size: 0.85rem;
  color: #444;
}

.config-item small {
  display: block;
  margin-top: 4px;
  font-size: 0.75rem;
  color: #888;
}

/* Stepper */
.stepper {
  display: flex;
  align-items: center;
  border: 1px solid #dee2e6;
  border-radius: 8px;
  overflow: hidden;
  background: white;
}

.stepper button {
  padding: 8px 12px;
  background: #f8f9fa;
  border: none;
  cursor: pointer;
  font-weight: 600;
  color: #666;
  transition: all 0.15s;
}

.stepper button:hover {
  background: rgba(231, 76, 60, 0.1);
  color: var(--primary);
}

.stepper input {
  flex: 1;
  width: 50px;
  padding: 8px;
  border: none;
  text-align: center;
  font-weight: 700;
  font-size: 0.95rem;
}

.stepper input:focus {
  outline: none;
  background: rgba(231, 76, 60, 0.05);
}

/* Preview section */
.auto-gen-preview-section {
  padding: 12px 20px;
  background: linear-gradient(135deg, rgba(243, 156, 18, 0.05), rgba(231, 76, 60, 0.05));
}

.preview-card {
  background: white;
  border-radius: 10px;
  padding: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.preview-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 10px;
  font-weight: 600;
  font-size: 0.85rem;
  color: var(--primary);
}

.preview-stats {
  display: flex;
  justify-content: space-around;
  text-align: center;
}

.preview-stats .stat {
  display: flex;
  flex-direction: column;
}

.preview-stats .stat-value {
  font-size: 1.3rem;
  font-weight: 700;
  color: #333;
}

.preview-stats .stat-label {
  font-size: 0.7rem;
  color: #888;
}

.preview-distribution {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px dashed #e9ecef;
  font-size: 0.75rem;
  font-weight: 600;
}

/* Warning */
.auto-gen-warning {
  margin: 0 20px 16px;
  padding: 10px 14px;
  background: rgba(231, 76, 60, 0.08);
  border: 1px solid rgba(231, 76, 60, 0.2);
  border-radius: 8px;
  color: #e74c3c;
  font-size: 0.8rem;
  font-weight: 500;
}

/* Generate button */
.btn-generate {
  padding: 10px 20px;
  font-weight: 600;
  font-size: 0.9rem;
}

/* Responsive for test bank tabs */
@media (max-width: 600px) {
  .test-bank-tabs {
    overflow-x: auto;
  }

  .test-bank-panel .folder-list {
    grid-template-columns: 1fr;
  }

  .import-modal {
    max-height: 90vh;
  }
}

/* ==========================================
   HOMEPAGE - PROFESSIONAL MODERN DESIGN
   ========================================== */

.hp {
  padding: 1.5rem;
  max-width: 800px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

/* Welcome Section */
.hp-welcome {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
}

.hp-greeting h1 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--dark);
  margin: 0 0 0.25rem 0;
}

.hp-greeting p {
  font-size: 0.95rem;
  color: var(--gray);
  margin: 0;
}

.hp-user-stats {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.user-stat {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  background: var(--light);
  padding: 0.5rem 0.75rem;
  border-radius: var(--radius-lg);
}

.user-stat .stat-icon {
  opacity: 0.8;
}

.user-stat .stat-icon.fire {
  color: #f97316;
}

.user-stat .stat-icon.xp {
  color: #eab308;
}

.user-stat .stat-value {
  font-weight: 700;
  font-size: 0.95rem;
  color: var(--dark);
}

.user-stat .stat-label {
  font-size: 0.75rem;
  color: var(--gray);
}

.user-stat.lv {
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white;
}

.user-stat.lv .stat-value {
  color: white;
  font-size: 0.85rem;
}

/* Main CTA Button */
.hp-main-cta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 1.25rem 1.5rem;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  border: none;
  border-radius: var(--radius-xl);
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 4px 14px rgba(var(--primary-rgb), 0.3);
}

.hp-main-cta:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(var(--primary-rgb), 0.4);
}

.hp-main-cta:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.cta-content {
  display: flex;
  align-items: center;
  gap: 1rem;
  color: white;
}

.cta-content svg {
  background: rgba(255, 255, 255, 0.2);
  padding: 0.5rem;
  border-radius: var(--radius-md);
}

.cta-text {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  text-align: left;
}

.cta-title {
  font-size: 1.1rem;
  font-weight: 700;
}

.cta-sub {
  font-size: 0.85rem;
  opacity: 0.85;
}

.cta-due {
  background: rgba(255, 255, 255, 0.2);
  padding: 0.5rem 1rem;
  border-radius: var(--radius-lg);
  font-size: 0.85rem;
  font-weight: 600;
  color: white;
}

/* Stats Grid */
.hp-stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
}

.hp-stat-card {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  background: white;
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  transition: all 0.2s ease;
}

.hp-stat-card:hover {
  border-color: var(--primary-light);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.hp-stat-card svg {
  color: var(--gray);
  flex-shrink: 0;
}

.hp-stat-card.success svg {
  color: var(--success);
}

.hp-stat-card.primary svg {
  color: var(--primary);
}

.stat-info {
  display: flex;
  flex-direction: column;
}

.stat-num {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--dark);
  line-height: 1.2;
}

.stat-text {
  font-size: 0.75rem;
  color: var(--gray);
}

/* Quick Actions */
.hp-quick-actions {
  display: flex;
  gap: 0.75rem;
  justify-content: center;
  flex-wrap: wrap;
}

.quick-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.4rem;
  padding: 0.85rem 1.25rem;
  background: white;
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 80px;
}

.quick-btn:hover {
  background: var(--light);
  border-color: var(--primary);
  color: var(--primary);
}

.quick-btn svg {
  color: var(--gray);
}

.quick-btn:hover svg {
  color: var(--primary);
}

.quick-btn span {
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--dark);
}

.quick-btn:hover span {
  color: var(--primary);
}

/* Sections */
.hp-section {
  background: white;
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  overflow: hidden;
}

.hp-section-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--dark);
  margin: 0;
  padding: 1rem 1.25rem;
  border-bottom: 1px solid var(--border);
  background: var(--light);
}

/* JLPT Levels */
.hp-levels {
  display: flex;
  flex-direction: column;
}

.hp-level-item {
  border-bottom: 1px solid var(--border);
}

.hp-level-item:last-child {
  border-bottom: none;
}

.hp-level-btn {
  display: flex;
  align-items: center;
  gap: 1rem;
  width: 100%;
  padding: 1rem 1.25rem;
  background: white;
  border: none;
  border-left: 4px solid transparent;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.hp-level-btn:hover:not(:disabled) {
  background: var(--light);
}

.hp-level-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.level-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: var(--radius-md);
  font-size: 0.85rem;
  font-weight: 700;
  color: white;
  flex-shrink: 0;
}

.level-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.level-cards {
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--dark);
}

.level-progress {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.progress-bar {
  flex: 1;
  height: 6px;
  border-radius: 3px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.3s ease;
}

.progress-text {
  font-size: 0.75rem;
  font-weight: 600;
  min-width: 36px;
  text-align: right;
}

.level-chevron {
  color: var(--gray);
  transition: transform 0.2s ease;
}

.level-chevron.rotated {
  transform: rotate(90deg);
}

/* Lessons inside levels */
.hp-lessons {
  padding: 0.5rem 1rem 1rem;
  background: var(--light);
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.hp-lesson-group {
  display: flex;
  flex-direction: column;
}

.hp-lesson-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.6rem 0.75rem;
  background: white;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.hp-lesson-btn:hover:not(:disabled) {
  border-color: var(--primary);
  background: white;
}

.hp-lesson-btn.locked {
  opacity: 0.5;
  cursor: not-allowed;
}

.hp-lesson-btn .lesson-name {
  flex: 1;
  font-size: 0.85rem;
  color: var(--dark);
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.hp-lesson-btn .lesson-count {
  font-size: 0.75rem;
  color: var(--gray);
  background: var(--light);
  padding: 0.2rem 0.5rem;
  border-radius: var(--radius-sm);
}

.hp-lesson-btn.child {
  margin-left: 1.5rem;
  background: var(--light);
}

.hp-child-lessons {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  margin-top: 0.25rem;
}

.hp-study-all {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem;
  margin-top: 0.5rem;
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  color: white;
  transition: all 0.15s ease;
}

.hp-study-all:hover {
  filter: brightness(1.1);
}

/* Custom Study Toggle */
.hp-custom-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 1rem 1.25rem;
  background: white;
  border: none;
  cursor: pointer;
  transition: background 0.15s ease;
}

.hp-custom-toggle:hover {
  background: var(--light);
}

.hp-custom-toggle span:first-child {
  font-size: 1rem;
  font-weight: 600;
  color: var(--dark);
}

.hp-custom-toggle .custom-badge {
  background: var(--primary);
  color: white;
  padding: 0.25rem 0.6rem;
  border-radius: var(--radius-lg);
  font-size: 0.75rem;
  font-weight: 600;
}

.hp-custom-toggle svg {
  color: var(--gray);
  transition: transform 0.2s ease;
}

.hp-custom-toggle svg.rotated {
  transform: rotate(90deg);
}

/* Custom Panel */
.hp-custom-panel {
  padding: 1rem 1.25rem;
  border-top: 1px solid var(--border);
  background: var(--light);
}

.custom-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.custom-chip {
  padding: 0.5rem 1rem;
  border: 2px solid;
  border-radius: var(--radius-lg);
  background: white;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  transition: all 0.15s ease;
}

.custom-chip.selected {
  color: white !important;
}

.custom-chip:hover:not(.selected) {
  background: var(--light);
}

/* Custom Lessons */
.custom-lessons {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 1rem;
}

.custom-lesson-group {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.group-label {
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 0.25rem;
}

.custom-lesson-check {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.6rem 0.75rem;
  background: white;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.15s ease;
}

.custom-lesson-check:hover {
  border-color: var(--primary);
}

.custom-lesson-check input[type="checkbox"] {
  display: none;
}

.checkbox-custom {
  width: 18px;
  height: 18px;
  border: 2px solid var(--border);
  border-radius: 4px;
  flex-shrink: 0;
  position: relative;
  transition: all 0.15s ease;
}

.custom-lesson-check input:checked + .checkbox-custom {
  background: var(--primary);
  border-color: var(--primary);
}

.custom-lesson-check input:checked + .checkbox-custom::after {
  content: '';
  position: absolute;
  left: 5px;
  top: 2px;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.lesson-text {
  flex: 1;
  font-size: 0.85rem;
  color: var(--dark);
}

.lesson-num {
  font-size: 0.75rem;
  color: var(--gray);
  background: var(--light);
  padding: 0.2rem 0.5rem;
  border-radius: var(--radius-sm);
}

/* Custom Actions */
.custom-actions {
  display: flex;
  gap: 0.75rem;
  justify-content: flex-end;
}

.btn-clear {
  padding: 0.6rem 1rem;
  background: white;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: 0.85rem;
  color: var(--gray);
  transition: all 0.15s ease;
}

.btn-clear:hover {
  border-color: var(--danger);
  color: var(--danger);
}

.btn-start {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1.25rem;
  background: var(--primary);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  color: white;
  transition: all 0.15s ease;
}

.btn-start:hover:not(:disabled) {
  background: var(--primary-dark);
}

.btn-start:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Responsive - Tablet */
@media (max-width: 768px) {
  .hp {
    padding: 1rem;
    gap: 1rem;
  }

  .hp-welcome {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .hp-user-stats {
    width: 100%;
    justify-content: flex-start;
  }

  .user-stat {
    padding: 0.4rem 0.6rem;
  }

  .hp-stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
  }

  .hp-stat-card {
    padding: 0.75rem;
  }

  .stat-num {
    font-size: 1.1rem;
  }

  .hp-quick-actions {
    gap: 0.5rem;
  }

  .quick-btn {
    padding: 0.7rem 1rem;
    min-width: 70px;
  }

  .hp-main-cta {
    padding: 1rem;
  }

  .cta-content svg {
    display: none;
  }
}

/* Responsive - Mobile */
@media (max-width: 480px) {
  .hp {
    padding: 0.75rem;
  }

  .hp-greeting h1 {
    font-size: 1.25rem;
  }

  .hp-stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }

  .hp-stat-card {
    flex-direction: column;
    text-align: center;
    padding: 0.6rem;
  }

  .hp-stat-card svg {
    margin-bottom: 0.25rem;
  }

  .stat-num {
    font-size: 1rem;
  }

  .stat-text {
    font-size: 0.7rem;
  }

  .hp-quick-actions {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0.4rem;
  }

  .quick-btn {
    min-width: unset;
    padding: 0.6rem 0.5rem;
  }

  .quick-btn svg {
    width: 18px;
    height: 18px;
  }

  .quick-btn span {
    font-size: 0.65rem;
  }

  .level-badge {
    width: 36px;
    height: 36px;
    font-size: 0.8rem;
  }

  .hp-level-btn {
    padding: 0.85rem 1rem;
    gap: 0.75rem;
  }

  .custom-actions {
    flex-direction: column;
  }

  .btn-clear,
  .btn-start {
    width: 100%;
    justify-content: center;
  }
}

/* ==========================================
   HOMEPAGE PRO - PROFESSIONAL DESIGNER EDITION
   ========================================== */

.hp-pro {
  padding: 0;
  max-width: 900px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
}

/* Hero Section */
.hp-hero {
  background: linear-gradient(135deg, var(--primary) 0%, #6366f1 50%, #8b5cf6 100%);
  padding: 2rem 1.5rem 2.5rem;
  margin: -1rem -1rem 0;
  position: relative;
  overflow: hidden;
}

.hp-hero::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
  border-radius: 50%;
}

.hp-hero::after {
  content: '';
  position: absolute;
  bottom: -30%;
  left: -10%;
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 70%);
  border-radius: 50%;
}

.hp-hero-content {
  position: relative;
  z-index: 1;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1rem;
}

.hp-hero-text {
  flex: 1;
}

.hp-greeting-label {
  display: inline-block;
  font-size: 0.8rem;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.8);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 0.25rem;
}

.hp-hero-title {
  font-size: 1.75rem;
  font-weight: 800;
  color: white;
  margin: 0 0 0.35rem 0;
  line-height: 1.2;
}

.hp-hero-sub {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.85);
  margin: 0;
  font-weight: 400;
}

/* Hero Stats */
.hp-hero-stats {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.hp-hero-stat {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  padding: 0.4rem 0.75rem;
  border-radius: 20px;
  font-size: 0.85rem;
  color: white;
}

.hp-hero-stat.fire svg {
  color: #fbbf24;
}

.hp-hero-stat.xp svg {
  color: #a3e635;
}

.hp-hero-stat.level {
  background: rgba(255, 255, 255, 0.25);
}

.hp-hero-stat.level svg {
  color: #fcd34d;
}

.hp-hero-stat .stat-val {
  font-weight: 700;
}

.hp-hero-stat .stat-unit {
  font-size: 0.75rem;
  opacity: 0.85;
}

/* Main CTA Card */
.hp-cta-card {
  margin: -1.25rem 1rem 0;
  position: relative;
  z-index: 10;
}

.hp-cta-btn {
  display: flex;
  align-items: center;
  gap: 1rem;
  width: 100%;
  padding: 1rem 1.25rem;
  background: white;
  border: none;
  border-radius: 16px;
  cursor: pointer;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12), 0 2px 6px rgba(0, 0, 0, 0.08);
  transition: all 0.2s ease;
}

.hp-cta-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15), 0 4px 10px rgba(0, 0, 0, 0.1);
}

.hp-cta-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.hp-cta-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 52px;
  height: 52px;
  background: linear-gradient(135deg, var(--primary) 0%, #6366f1 100%);
  border-radius: 14px;
  color: white;
  flex-shrink: 0;
}

.hp-cta-info {
  flex: 1;
  text-align: left;
}

.hp-cta-title {
  display: block;
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--dark);
  margin-bottom: 0.2rem;
}

.hp-cta-meta {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.85rem;
  color: var(--gray);
}

.hp-cta-meta .dot {
  opacity: 0.5;
}

.hp-cta-badge {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  color: white;
  padding: 0.5rem 0.85rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  flex-shrink: 0;
}

/* Stats Row */
.hp-stats-row {
  display: flex;
  gap: 0.75rem;
  padding: 1.5rem 1rem 0;
}

.hp-stat-item {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 0.65rem;
  padding: 0.85rem;
  background: white;
  border-radius: 14px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
  border: 1px solid var(--border);
}

.hp-stat-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 10px;
  flex-shrink: 0;
}

.hp-stat-icon.total {
  background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
  color: #2563eb;
}

.hp-stat-icon.done {
  background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
  color: #16a34a;
}

.hp-stat-icon.progress {
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
  color: #d97706;
}

.hp-stat-icon .mini-ring {
  width: 28px;
  height: 28px;
}

.hp-stat-icon .mini-ring svg {
  width: 100%;
  height: 100%;
}

.hp-stat-data {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.hp-stat-value {
  font-size: 1.15rem;
  font-weight: 700;
  color: var(--dark);
  line-height: 1.2;
}

.hp-stat-label {
  font-size: 0.7rem;
  color: var(--gray);
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

/* Actions Bar */
.hp-actions-bar {
  display: flex;
  justify-content: space-between;
  gap: 0.5rem;
  padding: 1.25rem 1rem;
  background: white;
  margin: 1rem 1rem 0;
  border-radius: 16px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
  border: 1px solid var(--border);
}

.hp-action {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.4rem;
  padding: 0.6rem 0.25rem;
  background: transparent;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.hp-action:hover {
  background: var(--light);
}

.hp-action:active {
  transform: scale(0.96);
}

.hp-action-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  background: var(--light);
  border-radius: 12px;
  color: var(--dark);
  transition: all 0.15s ease;
}

.hp-action:hover .hp-action-icon {
  background: var(--primary);
  color: white;
}

.hp-action-label {
  font-size: 0.7rem;
  font-weight: 600;
  color: var(--gray);
}

.hp-action:hover .hp-action-label {
  color: var(--primary);
}

/* Section Pro */
.hp-section-pro {
  margin: 1rem 1rem 0;
  background: white;
  border-radius: 16px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
  border: 1px solid var(--border);
  overflow: hidden;
}

.hp-section-header {
  padding: 1rem 1.25rem;
  border-bottom: 1px solid var(--border);
}

.hp-section-header h2 {
  font-size: 1rem;
  font-weight: 700;
  color: var(--dark);
  margin: 0 0 0.15rem 0;
}

.hp-section-sub {
  font-size: 0.8rem;
  color: var(--gray);
}

/* JLPT Levels Grid */
.hp-levels-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 0.75rem;
  padding: 1rem;
}

.hp-level-card {
  position: relative;
}

.hp-level-card.expanded {
  grid-column: 1 / -1;
}

.hp-level-card-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 1rem 0.5rem;
  background: var(--level-gradient);
  border: none;
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  min-height: 140px;
}

.hp-level-card-btn:hover:not(:disabled) {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

.hp-level-card-btn:disabled {
  opacity: 0.45;
  cursor: not-allowed;
  filter: grayscale(0.5);
}

.hp-level-card.empty .hp-level-card-btn {
  background: var(--light);
}

.hp-level-emoji {
  font-size: 1.5rem;
  margin-bottom: 0.35rem;
}

.hp-level-badge {
  font-size: 1.1rem;
  font-weight: 800;
  color: white;
  margin-bottom: 0.15rem;
}

.hp-level-card.empty .hp-level-badge {
  color: var(--gray);
}

.hp-level-label {
  font-size: 0.65rem;
  color: rgba(255, 255, 255, 0.85);
  text-transform: uppercase;
  letter-spacing: 0.03em;
  margin-bottom: 0.5rem;
}

.hp-level-card.empty .hp-level-label {
  color: var(--gray);
}

.hp-level-count {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
}

.hp-level-card.empty .hp-level-count {
  color: var(--gray);
}

.hp-level-progress-ring {
  position: absolute;
  bottom: 8px;
  right: 8px;
  width: 36px;
  height: 36px;
}

.hp-level-progress-ring svg {
  width: 100%;
  height: 100%;
}

.ring-percent {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 0.55rem;
  font-weight: 700;
  color: white;
}

/* Level Dropdown */
.hp-level-dropdown {
  margin-top: 0.75rem;
  padding: 0.75rem;
  background: var(--light);
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.hp-lesson-item {
  display: flex;
  flex-direction: column;
}

.hp-lesson-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.65rem 0.85rem;
  background: white;
  border: 1px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.hp-lesson-row:hover:not(:disabled) {
  border-color: var(--primary);
  background: white;
}

.hp-lesson-row.locked {
  opacity: 0.5;
  cursor: not-allowed;
}

.hp-lesson-row.sub {
  margin-left: 1.5rem;
  background: var(--light);
}

.hp-lesson-row .lesson-chevron {
  color: var(--gray);
}

.hp-lesson-row .lesson-name {
  flex: 1;
  font-size: 0.85rem;
  color: var(--dark);
}

.hp-lesson-row .lock-icon {
  color: var(--gray);
}

.hp-lesson-row .lesson-badge {
  font-size: 0.75rem;
  color: var(--gray);
  background: var(--light);
  padding: 0.2rem 0.5rem;
  border-radius: 6px;
}

.hp-sub-lessons {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  margin-top: 0.25rem;
}

.hp-study-level-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem;
  margin-top: 0.5rem;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  color: white;
  transition: all 0.15s ease;
}

.hp-study-level-btn:hover {
  filter: brightness(1.1);
  transform: translateY(-1px);
}

/* Custom Study Header */
.hp-custom-header {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 1rem 1.25rem;
  background: white;
  border: none;
  cursor: pointer;
  transition: background 0.15s ease;
}

.hp-custom-header:hover {
  background: var(--light);
}

.hp-custom-header-left {
  flex: 1;
  text-align: left;
}

.hp-custom-header h2 {
  font-size: 1rem;
  font-weight: 700;
  color: var(--dark);
  margin: 0 0 0.15rem 0;
}

.hp-custom-sub {
  font-size: 0.8rem;
  color: var(--gray);
}

.hp-custom-count {
  background: var(--primary);
  color: white;
  padding: 0.3rem 0.7rem;
  border-radius: 12px;
  font-size: 0.8rem;
  font-weight: 700;
  margin-right: 0.75rem;
}

.hp-custom-chevron {
  color: var(--gray);
  transition: transform 0.2s ease;
}

.hp-custom-chevron.open {
  transform: rotate(90deg);
}

/* Custom Body */
.hp-custom-body {
  padding: 1rem 1.25rem;
  border-top: 1px solid var(--border);
  background: var(--light);
}

.hp-custom-chips {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.hp-custom-chip {
  padding: 0.5rem 1rem;
  border: 2px solid var(--border);
  border-radius: 20px;
  background: white;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--dark);
  transition: all 0.15s ease;
}

.hp-custom-chip:hover:not(.active) {
  border-color: var(--primary);
  color: var(--primary);
}

.hp-custom-chip.active {
  color: white;
  border-color: transparent;
}

/* Custom Lessons */
.hp-custom-lessons {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 1rem;
}

.hp-custom-group {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.hp-custom-group-label {
  font-size: 0.7rem;
  font-weight: 700;
  color: var(--primary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 0.25rem;
}

.hp-custom-checkbox {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.65rem 0.85rem;
  background: white;
  border: 1px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.hp-custom-checkbox:hover {
  border-color: var(--primary);
}

.hp-custom-checkbox input[type="checkbox"] {
  display: none;
}

.checkbox-box {
  width: 20px;
  height: 20px;
  border: 2px solid var(--border);
  border-radius: 6px;
  flex-shrink: 0;
  position: relative;
  transition: all 0.15s ease;
}

.hp-custom-checkbox input:checked + .checkbox-box {
  background: var(--primary);
  border-color: var(--primary);
}

.hp-custom-checkbox input:checked + .checkbox-box::after {
  content: '';
  position: absolute;
  left: 6px;
  top: 2px;
  width: 5px;
  height: 10px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.checkbox-text {
  flex: 1;
  font-size: 0.85rem;
  color: var(--dark);
}

.checkbox-count {
  font-size: 0.75rem;
  color: var(--gray);
  background: var(--light);
  padding: 0.2rem 0.5rem;
  border-radius: 6px;
}

/* Custom Footer */
.hp-custom-footer {
  display: flex;
  gap: 0.75rem;
  justify-content: flex-end;
}

.hp-btn-secondary {
  padding: 0.65rem 1.25rem;
  background: white;
  border: 1px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--gray);
  transition: all 0.15s ease;
}

.hp-btn-secondary:hover {
  border-color: var(--danger);
  color: var(--danger);
}

.hp-btn-primary {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.65rem 1.5rem;
  background: linear-gradient(135deg, var(--primary) 0%, #6366f1 100%);
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  color: white;
  transition: all 0.15s ease;
}

.hp-btn-primary:hover:not(:disabled) {
  filter: brightness(1.1);
  transform: translateY(-1px);
}

.hp-btn-primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Bottom spacing */
.hp-pro {
  padding-bottom: 2rem;
}

/* ====== RESPONSIVE DESIGN ====== */

/* Tablet */
@media (max-width: 768px) {
  .hp-hero {
    padding: 1.5rem 1rem 2rem;
    margin: -1rem -0.5rem 0;
  }

  .hp-hero-content {
    flex-direction: column;
    gap: 1rem;
  }

  .hp-hero-stats {
    flex-direction: row;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .hp-hero-title {
    font-size: 1.5rem;
  }

  .hp-cta-card {
    margin: -1rem 0.5rem 0;
  }

  .hp-stats-row {
    padding: 1.25rem 0.5rem 0;
  }

  .hp-stat-item {
    padding: 0.7rem;
  }

  .hp-stat-icon {
    width: 36px;
    height: 36px;
  }

  .hp-stat-value {
    font-size: 1rem;
  }

  .hp-actions-bar {
    margin: 0.75rem 0.5rem 0;
    padding: 1rem 0.5rem;
    gap: 0.25rem;
  }

  .hp-action-icon {
    width: 40px;
    height: 40px;
  }

  .hp-section-pro {
    margin: 0.75rem 0.5rem 0;
  }

  .hp-levels-grid {
    grid-template-columns: repeat(5, 1fr);
    gap: 0.5rem;
    padding: 0.75rem;
  }

  .hp-level-card-btn {
    padding: 0.75rem 0.35rem;
    min-height: 120px;
    border-radius: 12px;
  }

  .hp-level-emoji {
    font-size: 1.25rem;
  }

  .hp-level-badge {
    font-size: 1rem;
  }

  .hp-level-label {
    font-size: 0.55rem;
  }

  .hp-level-count {
    font-size: 0.65rem;
  }

  .hp-level-progress-ring {
    width: 30px;
    height: 30px;
    bottom: 6px;
    right: 6px;
  }

  .ring-percent {
    font-size: 0.5rem;
  }
}

/* Mobile */
@media (max-width: 480px) {
  .hp-hero {
    padding: 1.25rem 0.75rem 1.75rem;
  }

  .hp-hero-title {
    font-size: 1.35rem;
  }

  .hp-hero-sub {
    font-size: 0.85rem;
  }

  .hp-hero-stat {
    padding: 0.35rem 0.6rem;
    font-size: 0.8rem;
  }

  .hp-cta-card {
    margin: -0.85rem 0.5rem 0;
  }

  .hp-cta-btn {
    padding: 0.85rem 1rem;
  }

  .hp-cta-icon {
    width: 46px;
    height: 46px;
    border-radius: 12px;
  }

  .hp-cta-icon svg {
    width: 24px;
    height: 24px;
  }

  .hp-cta-title {
    font-size: 1rem;
  }

  .hp-cta-meta {
    font-size: 0.8rem;
  }

  .hp-cta-badge {
    padding: 0.4rem 0.7rem;
    font-size: 0.75rem;
  }

  .hp-stats-row {
    gap: 0.5rem;
    padding: 1rem 0.5rem 0;
  }

  .hp-stat-item {
    flex-direction: column;
    text-align: center;
    padding: 0.65rem 0.5rem;
    gap: 0.4rem;
  }

  .hp-stat-icon {
    width: 32px;
    height: 32px;
  }

  .hp-stat-value {
    font-size: 0.95rem;
  }

  .hp-stat-label {
    font-size: 0.6rem;
  }

  .hp-actions-bar {
    padding: 0.85rem 0.35rem;
    border-radius: 14px;
  }

  .hp-action {
    padding: 0.5rem 0.15rem;
  }

  .hp-action-icon {
    width: 38px;
    height: 38px;
    border-radius: 10px;
  }

  .hp-action-icon svg {
    width: 20px;
    height: 20px;
  }

  .hp-action-label {
    font-size: 0.6rem;
  }

  .hp-section-pro {
    border-radius: 14px;
  }

  .hp-section-header {
    padding: 0.85rem 1rem;
  }

  .hp-section-header h2 {
    font-size: 0.95rem;
  }

  .hp-levels-grid {
    grid-template-columns: repeat(5, 1fr);
    gap: 0.4rem;
    padding: 0.6rem;
  }

  .hp-level-card-btn {
    padding: 0.6rem 0.25rem;
    min-height: 100px;
    border-radius: 10px;
  }

  .hp-level-emoji {
    font-size: 1.1rem;
    margin-bottom: 0.25rem;
  }

  .hp-level-badge {
    font-size: 0.9rem;
  }

  .hp-level-label {
    font-size: 0.5rem;
    margin-bottom: 0.3rem;
  }

  .hp-level-count {
    font-size: 0.6rem;
  }

  .hp-level-progress-ring {
    width: 26px;
    height: 26px;
    bottom: 4px;
    right: 4px;
  }

  .ring-percent {
    font-size: 0.45rem;
  }

  .hp-level-dropdown {
    padding: 0.6rem;
    margin-top: 0.5rem;
  }

  .hp-lesson-row {
    padding: 0.55rem 0.7rem;
  }

  .hp-lesson-row .lesson-name {
    font-size: 0.8rem;
  }

  .hp-study-level-btn {
    padding: 0.65rem;
    font-size: 0.8rem;
    border-radius: 8px;
  }

  .hp-custom-header {
    padding: 0.85rem 1rem;
  }

  .hp-custom-header h2 {
    font-size: 0.95rem;
  }

  .hp-custom-body {
    padding: 0.85rem 1rem;
  }

  .hp-custom-chips {
    flex-wrap: wrap;
  }

  .hp-custom-chip {
    padding: 0.45rem 0.85rem;
    font-size: 0.8rem;
  }

  .hp-custom-checkbox {
    padding: 0.55rem 0.7rem;
  }

  .checkbox-box {
    width: 18px;
    height: 18px;
  }

  .checkbox-text {
    font-size: 0.8rem;
  }

  .hp-custom-footer {
    flex-direction: column;
  }

  .hp-btn-secondary,
  .hp-btn-primary {
    width: 100%;
    justify-content: center;
    padding: 0.7rem 1rem;
  }
}

/* ==========================================
   HOMEPAGE PRO V2 - EDGE TO EDGE + UPDATES
   ========================================== */

/* Edge to edge layout */
.hp-pro.edge {
  padding: 0;
  max-width: none;
}

.hp-pro.edge .hp-hero {
  margin: 0;
  border-radius: 0;
}

.hp-pro.edge .hp-cta-card {
  margin: -1.25rem 0 0;
  padding: 0 1rem;
}

.hp-pro.edge .hp-stats-row {
  padding: 1.5rem 1rem 0;
}

.hp-pro.edge .hp-section-pro {
  margin: 1rem 0 0;
  border-radius: 0;
  border-left: none;
  border-right: none;
}

/* Slogan styling */
.hp-slogan {
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.9);
  margin: 0.5rem 0 0;
  font-style: italic;
  font-weight: 400;
  letter-spacing: 0.02em;
  line-height: 1.5;
}

/* Styled section headers with gradient background */
.hp-section-header.styled {
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  border-bottom: 1px solid var(--border);
  position: relative;
  overflow: hidden;
}

.hp-section-header.styled::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: linear-gradient(180deg, var(--primary) 0%, #6366f1 100%);
}

.hp-section-header.styled h2 {
  padding-left: 0.5rem;
}

/* Custom header styled */
.hp-custom-header.styled {
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  position: relative;
  overflow: hidden;
}

.hp-custom-header.styled::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: linear-gradient(180deg, #8b5cf6 0%, #6366f1 100%);
}

.hp-custom-header.styled .hp-custom-header-left {
  padding-left: 0.5rem;
}

/* Horizontal lessons layout */
.hp-custom-lessons.horizontal {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.hp-custom-group.horizontal {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.hp-custom-lessons-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.hp-custom-checkbox.compact {
  flex: 0 0 auto;
  padding: 0.5rem 0.75rem;
  border-radius: 8px;
  background: white;
  border: 1px solid var(--border);
}

.hp-custom-checkbox.compact:hover {
  border-color: var(--primary);
}

.hp-custom-checkbox.compact .checkbox-box {
  width: 16px;
  height: 16px;
  border-radius: 4px;
}

.hp-custom-checkbox.compact .checkbox-text {
  font-size: 0.8rem;
  white-space: nowrap;
}

.hp-custom-checkbox.compact .checkbox-count {
  font-size: 0.7rem;
  padding: 0.15rem 0.4rem;
}

/* Responsive adjustments for edge layout */
@media (max-width: 768px) {
  .hp-pro.edge .hp-cta-card {
    padding: 0 0.75rem;
  }

  .hp-pro.edge .hp-stats-row {
    padding: 1.25rem 0.75rem 0;
  }

  .hp-slogan {
    font-size: 0.8rem;
  }

  .hp-custom-lessons-row {
    gap: 0.4rem;
  }

  .hp-custom-checkbox.compact {
    padding: 0.45rem 0.65rem;
  }
}

@media (max-width: 480px) {
  .hp-pro.edge .hp-cta-card {
    margin: -0.85rem 0 0;
    padding: 0 0.5rem;
  }

  .hp-pro.edge .hp-stats-row {
    padding: 1rem 0.5rem 0;
  }

  .hp-slogan {
    font-size: 0.75rem;
  }

  .hp-custom-lessons-row {
    flex-wrap: nowrap;
    overflow-x: auto;
    padding-bottom: 0.5rem;
    -webkit-overflow-scrolling: touch;
  }

  .hp-custom-checkbox.compact {
    flex-shrink: 0;
    padding: 0.4rem 0.6rem;
  }

  .hp-custom-checkbox.compact .checkbox-text {
    font-size: 0.75rem;
  }
}

/* ==========================================
   PROFESSIONAL TEXT EFFECTS - SLOGAN & ROLES
   ========================================== */

/* Enhanced Slogan */
.hp-slogan {
  font-size: 1.1rem;
  color: transparent;
  background: linear-gradient(90deg, #fef3c7 0%, #fde68a 25%, #fbbf24 50%, #fde68a 75%, #fef3c7 100%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  animation: slogan-shimmer 3s ease-in-out infinite;
  font-style: italic;
  font-weight: 500;
  letter-spacing: 0.03em;
  line-height: 1.6;
  margin: 0.75rem 0 0;
  text-shadow: 0 0 30px rgba(251, 191, 36, 0.3);
}

@keyframes slogan-shimmer {
  0% { background-position: 200% center; }
  100% { background-position: -200% center; }
}

/* Enhanced Role Badges - Super Admin */
.role-badge.super-admin {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
  background-size: 200% 200%;
  animation: badge-gradient 3s ease infinite;
  box-shadow: 0 0 10px rgba(102, 126, 234, 0.5), 0 0 20px rgba(118, 75, 162, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.3);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
}

.role-badge.super-admin::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 70%
  );
  animation: badge-shine 2s ease-in-out infinite;
}

/* Enhanced Role Badges - Admin */
.role-badge.admin {
  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 50%, #60a5fa 100%);
  background-size: 200% 200%;
  animation: badge-gradient 3s ease infinite;
  box-shadow: 0 0 8px rgba(59, 130, 246, 0.5), 0 0 16px rgba(29, 78, 216, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.25);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
}

.role-badge.admin::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.25) 50%,
    transparent 70%
  );
  animation: badge-shine 2.5s ease-in-out infinite;
}

/* Enhanced Role Badges - VIP */
.role-badge.vip {
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 25%, #d97706 50%, #f59e0b 75%, #fbbf24 100%);
  background-size: 300% 300%;
  animation: vip-gradient 2s ease infinite;
  box-shadow: 0 0 12px rgba(251, 191, 36, 0.6), 0 0 24px rgba(245, 158, 11, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.4);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
}

.role-badge.vip::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 25%,
    rgba(255, 255, 255, 0.4) 50%,
    transparent 75%
  );
  animation: badge-shine 1.5s ease-in-out infinite;
}

/* Animation keyframes */
@keyframes badge-gradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes vip-gradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes badge-shine {
  0% { transform: translateX(-100%) rotate(45deg); }
  100% { transform: translateX(100%) rotate(45deg); }
}

/* Responsive slogan */
@media (max-width: 768px) {
  .hp-slogan {
    font-size: 1rem;
  }
}

@media (max-width: 480px) {
  .hp-slogan {
    font-size: 0.9rem;
    line-height: 1.5;
  }
}

/* ==================== BRANCH MANAGEMENT STYLES ==================== */

/* Shared page styles for branch, teacher, salary pages */
.branch-page,
.teacher-page,
.salary-page,
.my-teaching-page {
  padding: var(--space-lg);
  max-width: 1400px;
  margin: 0 auto;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
  flex-wrap: wrap;
  gap: var(--space-md);
}

.page-header h1 {
  margin: 0;
  font-size: var(--font-size-xl);
  color: var(--dark);
}

.page-tabs {
  display: flex;
  gap: var(--space-xs);
  border-bottom: 2px solid var(--border);
  margin-bottom: var(--space-lg);
  flex-wrap: wrap;
}

.page-tabs .tab-btn {
  padding: var(--space-sm) var(--space-md);
  background: none;
  border: none;
  cursor: pointer;
  font-size: var(--font-size-md);
  color: var(--gray-dark);
  position: relative;
  transition: color var(--transition-fast);
}

.page-tabs .tab-btn:hover {
  color: var(--primary);
}

.page-tabs .tab-btn.active {
  color: var(--primary);
  font-weight: 600;
}

.page-tabs .tab-btn.active::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--primary);
}

.page-content {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  box-shadow: var(--shadow-sm);
}

/* Card component */
.card {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  box-shadow: var(--shadow-sm);
  margin-bottom: var(--space-lg);
}

.card h3 {
  margin: 0 0 var(--space-md);
  font-size: var(--font-size-lg);
  color: var(--dark);
}

.card h4 {
  margin: 0 0 var(--space-sm);
  font-size: var(--font-size-md);
  color: var(--gray-dark);
}

/* Info list */
.info-list {
  display: flex;
  flex-direction: column;
}

/* Section header */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
  flex-wrap: wrap;
  gap: var(--space-md);
}

.section-header h3 {
  margin: 0;
  font-size: var(--font-size-lg);
  color: var(--dark);
}

/* Status badges */
.status-badge {
  padding: 4px 12px;
  border-radius: 20px;
  font-size: var(--font-size-xs);
  font-weight: 600;
  text-transform: uppercase;
}

.status-badge.status-active {
  background: var(--success-light);
  color: var(--success);
}

.status-badge.status-inactive {
  background: var(--danger-light);
  color: var(--danger);
}

.status-badge.status-pending {
  background: var(--warning-light);
  color: var(--warning);
}

/* Role badges for new roles */
.role-badge.director {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.role-badge.branch-admin {
  background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
  color: white;
}

.role-badge.teacher {
  background: linear-gradient(135deg, #27ae60 0%, #219a52 100%);
  color: white;
}

.role-badge.assistant {
  background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
  color: white;
}

/* Settings section */
.settings-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.setting-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md) 0;
}

.setting-item strong {
  color: var(--dark);
}

.setting-item p {
  margin: 0;
}

/* Members table */
.members-table {
  overflow-x: auto;
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.members-table table {
  width: 100%;
  border-collapse: collapse;
}

.members-table th,
.members-table td {
  text-align: left;
  padding: var(--space-sm) var(--space-md);
}

.members-table th {
  background: var(--light);
  font-weight: 600;
  color: var(--gray-dark);
  font-size: var(--font-size-sm);
}

.members-table tr:not(:last-child) td {
  border-bottom: 1px solid var(--border);
}

.members-table tr:hover td {
  background: var(--light);
}

/* Branch selector */
.branch-selector {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.branch-selector select {
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
  background: var(--white);
  font-size: var(--font-size-sm);
  min-width: 180px;
}

/* Teacher schedule grid */
.schedule-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: var(--space-xs);
  margin-top: var(--space-md);
}

.schedule-day {
  background: var(--light);
  border-radius: var(--radius-md);
  padding: var(--space-sm);
  min-height: 100px;
}

.schedule-day-header {
  font-weight: 600;
  font-size: var(--font-size-sm);
  color: var(--gray-dark);
  padding-bottom: var(--space-xs);
  border-bottom: 1px solid var(--border);
  margin-bottom: var(--space-xs);
}

.schedule-slot {
  background: var(--primary);
  color: white;
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  margin-bottom: var(--space-xs);
}

/* Teaching log */
.teaching-log {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.session-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md);
  background: var(--light);
  border-radius: var(--radius-md);
  transition: background var(--transition-fast);
}

.session-item:hover {
  background: var(--border);
}

.session-status {
  padding: 2px 8px;
  border-radius: 10px;
  font-size: var(--font-size-xs);
  font-weight: 500;
}

.session-status.completed {
  background: var(--success-light);
  color: var(--success);
}

.session-status.scheduled {
  background: #e3f2fd;
  color: #1976d2;
}

.session-status.cancelled {
  background: var(--danger-light);
  color: var(--danger);
}

.session-status.absent {
  background: var(--warning-light);
  color: var(--warning);
}

/* Salary calculator styles */
.salary-table {
  width: 100%;
  border-collapse: collapse;
}

.salary-table th,
.salary-table td {
  padding: var(--space-sm) var(--space-md);
  text-align: left;
}

.salary-table th {
  background: var(--light);
  font-weight: 600;
  color: var(--gray-dark);
  font-size: var(--font-size-sm);
}

.salary-table tr:not(:last-child) td {
  border-bottom: 1px solid var(--border);
}

.salary-status {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: var(--font-size-xs);
  font-weight: 500;
}

.salary-status.draft {
  background: #f5f5f5;
  color: var(--gray);
}

.salary-status.approved {
  background: #e3f2fd;
  color: #1976d2;
}

.salary-status.paid {
  background: var(--success-light);
  color: var(--success);
}

/* Summary cards grid */
.summary-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: var(--space-md);
  margin-bottom: var(--space-lg);
}

.summary-card {
  padding: var(--space-md);
  border-radius: var(--radius-lg);
  background: var(--white);
  box-shadow: var(--shadow-sm);
}

.summary-card.highlight {
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  color: white;
}

.summary-card-value {
  font-size: var(--font-size-xl);
  font-weight: 700;
}

.summary-card-label {
  font-size: var(--font-size-xs);
  opacity: 0.8;
}

/* Responsive adjustments for management pages */
@media (max-width: 768px) {
  .branch-page,
  .teacher-page,
  .salary-page,
  .my-teaching-page {
    padding: var(--space-md);
  }

  .page-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .page-tabs {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    flex-wrap: nowrap;
    padding-bottom: var(--space-xs);
  }

  .page-tabs .tab-btn {
    white-space: nowrap;
    flex-shrink: 0;
  }

  .schedule-grid {
    grid-template-columns: 1fr;
  }

  .members-table {
    font-size: var(--font-size-sm);
  }

  .setting-item {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-sm);
  }
}

/* ==================== UNIFIED BRANCH MANAGEMENT STYLES ==================== */

/* Main container */
.branch-mgmt-page {
  padding: var(--space-lg);
  max-width: 1600px;
  margin: 0 auto;
  min-height: 100vh;
  background: var(--jp-washi);
}

/* Loading state */
.branch-mgmt-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  gap: var(--space-md);
  color: var(--jp-sumi-medium);
}

.branch-mgmt-loading .loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--jp-sakura-light);
  border-top-color: var(--jp-shu);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Header */
.branch-mgmt-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-xl);
  flex-wrap: wrap;
  gap: var(--space-md);
}

.branch-mgmt-header .header-title {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.branch-mgmt-header .jp-icon {
  font-family: var(--font-jp-display);
  font-size: 2rem;
  color: var(--jp-shu);
  background: var(--jp-sakura-light);
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-md);
}

.branch-mgmt-header h1 {
  margin: 0;
  font-size: var(--font-size-2xl);
  color: var(--jp-sumi);
  font-weight: 600;
}

.branch-detail-header h1 {
  font-size: var(--font-size-xl);
}

.branch-detail-header .status-badge {
  margin-left: var(--space-sm);
}

/* Stats cards - list view */
.branch-mgmt-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-md);
  margin-bottom: var(--space-xl);
}

.branch-mgmt-stats .stat-card {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-lg);
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  border-left: 4px solid var(--jp-ai);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.branch-mgmt-stats .stat-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.branch-mgmt-stats .stat-card.stat-success {
  border-left-color: var(--jp-matcha);
}

.branch-mgmt-stats .stat-card.stat-warning {
  border-left-color: var(--jp-kitsune);
}

.branch-mgmt-stats .stat-icon {
  font-size: 1.5rem;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--jp-washi);
  border-radius: var(--radius-md);
}

.branch-mgmt-stats .stat-info {
  display: flex;
  flex-direction: column;
}

.branch-mgmt-stats .stat-value {
  font-size: var(--font-size-2xl);
  font-weight: 700;
  color: var(--jp-sumi);
  line-height: 1;
}

.branch-mgmt-stats .stat-label {
  font-size: var(--font-size-sm);
  color: var(--jp-sumi-medium);
  margin-top: 4px;
}

/* Empty state */
.branch-mgmt-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-2xl) var(--space-lg);
  background: var(--white);
  border-radius: var(--radius-lg);
  text-align: center;
}

.branch-mgmt-empty .empty-icon {
  font-size: 4rem;
  margin-bottom: var(--space-md);
  opacity: 0.5;
}

.branch-mgmt-empty p {
  color: var(--jp-sumi-medium);
  margin: 0;
}

.branch-mgmt-empty .hint {
  font-size: var(--font-size-sm);
  margin-top: var(--space-xs);
  opacity: 0.7;
}

/* Branch grid */
.branch-mgmt-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  gap: var(--space-lg);
}

/* Main tabs */
.branch-mgmt-tabs {
  display: flex;
  gap: var(--space-xs);
  background: var(--white);
  padding: var(--space-xs);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-lg);
  box-shadow: var(--shadow-sm);
  flex-wrap: wrap;
}

.branch-mgmt-tabs .tab-btn {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-md);
  border: none;
  background: transparent;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--font-size-md);
  color: var(--jp-sumi-medium);
  transition: all var(--transition-fast);
  font-weight: 500;
}

.branch-mgmt-tabs .tab-btn:hover {
  background: var(--jp-washi);
  color: var(--jp-sumi);
}

.branch-mgmt-tabs .tab-btn.active {
  background: var(--jp-shu);
  color: white;
}

.branch-mgmt-tabs .tab-btn .tab-icon {
  font-size: 1.1rem;
}

/* Content area */
.branch-mgmt-content {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  box-shadow: var(--shadow-sm);
  min-height: 400px;
}

/* Sub-tabs */
.sub-tabs {
  display: flex;
  gap: var(--space-xs);
  border-bottom: 2px solid var(--border);
  margin-bottom: var(--space-lg);
  align-items: center;
  flex-wrap: wrap;
}

.sub-tab {
  padding: var(--space-sm) var(--space-md);
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: var(--font-size-sm);
  color: var(--jp-sumi-medium);
  position: relative;
  transition: color var(--transition-fast);
  font-weight: 500;
}

.sub-tab:hover {
  color: var(--jp-shu);
}

.sub-tab.active {
  color: var(--jp-shu);
}

.sub-tab.active::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--jp-shu);
}

.sub-tabs .btn-add {
  margin-left: auto;
}

/* Filter bar */
.filter-bar {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  margin-bottom: var(--space-lg);
  padding: var(--space-md);
  background: var(--jp-washi);
  border-radius: var(--radius-md);
}

.filter-bar label {
  font-size: var(--font-size-sm);
  font-weight: 500;
  color: var(--jp-sumi-medium);
}

.filter-bar select {
  padding: var(--space-sm) var(--space-md);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background: var(--white);
  font-size: var(--font-size-sm);
  min-width: 200px;
}

/* Overview tab - cards grid */
.tab-content-overview .overview-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-lg);
}

.tab-content-overview .card {
  background: var(--jp-washi-warm);
  border: 1px solid var(--border);
  margin-bottom: 0;
}

.tab-content-overview .card h3 {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  color: var(--jp-ai);
  border-bottom: 1px solid var(--border);
  padding-bottom: var(--space-sm);
  margin-bottom: var(--space-md);
}

.tab-content-overview .card h3 .card-icon {
  font-size: 1.2rem;
}

.tab-content-overview .card-monthly {
  grid-column: 1 / -1;
}

/* Info rows */
.tab-content-overview .info-row {
  display: flex;
  justify-content: space-between;
  padding: var(--space-sm) 0;
  border-bottom: 1px solid var(--border);
}

.tab-content-overview .info-row:last-child {
  border-bottom: none;
}

.tab-content-overview .info-row .label {
  color: var(--jp-sumi-medium);
  font-size: var(--font-size-sm);
}

.tab-content-overview .info-row .value {
  font-weight: 500;
  color: var(--jp-sumi);
}

/* Stats grid */
.tab-content-overview .stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-md);
}

.tab-content-overview .stat-box {
  padding: var(--space-md);
  background: var(--white);
  border-radius: var(--radius-md);
  text-align: center;
  border: 1px solid var(--border);
}

.tab-content-overview .stat-box.stat-active {
  border-color: var(--jp-matcha);
  background: var(--jp-matcha-light);
}

.tab-content-overview .stat-number {
  display: block;
  font-size: var(--font-size-2xl);
  font-weight: 700;
  color: var(--jp-ai);
  line-height: 1;
}

.tab-content-overview .stat-box.stat-active .stat-number {
  color: var(--jp-matcha-dark);
}

.tab-content-overview .stat-text {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--jp-sumi-medium);
  margin-top: 4px;
}

/* Monthly stats */
.tab-content-overview .monthly-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-md);
}

.tab-content-overview .monthly-item {
  padding: var(--space-md);
  background: var(--white);
  border-radius: var(--radius-md);
  text-align: center;
  border: 1px solid var(--border);
}

.tab-content-overview .monthly-label {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--jp-sumi-medium);
  margin-bottom: 4px;
}

.tab-content-overview .monthly-value {
  display: block;
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--jp-sumi);
}

.tab-content-overview .monthly-value.approved {
  color: var(--jp-ai);
}

.tab-content-overview .monthly-value.paid {
  color: var(--jp-matcha);
}

/* Staff tab */
.tab-content-staff .section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
}

.tab-content-staff .section-header h3 {
  margin: 0;
  font-size: var(--font-size-lg);
  color: var(--jp-sumi);
}

.tab-content-staff .add-staff-controls {
  display: flex;
  gap: var(--space-sm);
}

.tab-content-staff .add-staff-controls select {
  padding: var(--space-sm) var(--space-md);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  min-width: 200px;
}

/* Staff table */
.staff-table {
  overflow-x: auto;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
}

.staff-table table {
  width: 100%;
  border-collapse: collapse;
}

.staff-table th,
.staff-table td {
  padding: var(--space-md);
  text-align: left;
}

.staff-table th {
  background: var(--jp-washi);
  font-weight: 600;
  font-size: var(--font-size-sm);
  color: var(--jp-sumi-medium);
  border-bottom: 2px solid var(--border);
}

.staff-table tr:not(:last-child) td {
  border-bottom: 1px solid var(--border);
}

.staff-table tr:hover td {
  background: var(--jp-washi);
}

.staff-table .member-name {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.staff-table .avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--gradient-ai);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: var(--font-size-sm);
}

.staff-table .email {
  color: var(--jp-sumi-medium);
  font-size: var(--font-size-sm);
}

.staff-table .date {
  font-size: var(--font-size-sm);
  color: var(--jp-sumi-medium);
}

/* Role badges */
.role-badge {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: var(--font-size-xs);
  font-weight: 500;
}

.role-badge.role-branch_admin {
  background: linear-gradient(135deg, var(--jp-ai) 0%, var(--jp-ai-light) 100%);
  color: white;
}

.role-badge.role-main_teacher {
  background: linear-gradient(135deg, var(--jp-shu) 0%, var(--jp-shu-light) 100%);
  color: white;
}

.role-badge.role-part_time_teacher {
  background: linear-gradient(135deg, var(--jp-matcha) 0%, var(--jp-matcha-light) 100%);
  color: white;
}

.role-badge.role-assistant {
  background: var(--jp-kitsune-light);
  color: var(--jp-sumi);
}

/* Settings tab */
.tab-content-settings .card {
  background: var(--jp-washi-warm);
  border: 1px solid var(--border);
}

.tab-content-settings .card h3 {
  color: var(--jp-ai);
  border-bottom: 1px solid var(--border);
  padding-bottom: var(--space-sm);
  margin-bottom: var(--space-lg);
}

.tab-content-settings .settings-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.tab-content-settings .setting-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md);
  background: var(--white);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.tab-content-settings .setting-item.danger {
  border-color: var(--danger-light);
  background: #fff8f8;
}

.tab-content-settings .setting-info strong {
  display: block;
  color: var(--jp-sumi);
  margin-bottom: 4px;
}

.tab-content-settings .setting-item.danger .setting-info strong {
  color: var(--danger);
}

.tab-content-settings .setting-info p {
  margin: 0;
  font-size: var(--font-size-sm);
  color: var(--jp-sumi-medium);
}

/* Salary slips view */
.salary-slips-view .slips-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
}

.salary-slips-view .slips-header h3 {
  margin: 0;
  font-size: var(--font-size-lg);
  color: var(--jp-sumi);
}

.salary-slips-view .slips-header input[type="month"] {
  padding: var(--space-sm) var(--space-md);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
}

.salary-slips-view .slips-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  gap: var(--space-lg);
}

.salary-slips-view .slip-card {
  cursor: pointer;
  transition: transform var(--transition-fast);
}

.salary-slips-view .slip-card:hover {
  transform: translateY(-4px);
}

/* Loading and empty states */
.loading-state,
.empty-state {
  padding: var(--space-2xl);
  text-align: center;
  color: var(--jp-sumi-medium);
}

.empty-state .hint {
  font-size: var(--font-size-sm);
  margin-top: var(--space-xs);
  opacity: 0.7;
}

/* Responsive */
@media (max-width: 1024px) {
  .tab-content-overview .overview-grid {
    grid-template-columns: 1fr;
  }

  .tab-content-overview .monthly-stats {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 768px) {
  .branch-mgmt-page {
    padding: var(--space-md);
  }

  .branch-mgmt-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .branch-mgmt-tabs {
    overflow-x: auto;
    flex-wrap: nowrap;
    padding-bottom: var(--space-xs);
  }

  .branch-mgmt-tabs .tab-btn {
    white-space: nowrap;
    flex-shrink: 0;
  }

  .branch-mgmt-content {
    padding: var(--space-md);
  }

  .sub-tabs {
    overflow-x: auto;
    flex-wrap: nowrap;
    padding-bottom: var(--space-xs);
  }

  .sub-tab {
    white-space: nowrap;
    flex-shrink: 0;
  }

  .sub-tabs .btn-add {
    margin-left: var(--space-md);
  }

  .filter-bar {
    flex-direction: column;
    align-items: flex-start;
  }

  .filter-bar select {
    width: 100%;
  }

  .tab-content-overview .stats-grid {
    grid-template-columns: 1fr;
  }

  .tab-content-staff .section-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-md);
  }

  .tab-content-staff .add-staff-controls {
    width: 100%;
    flex-direction: column;
  }

  .tab-content-staff .add-staff-controls select {
    width: 100%;
  }

  .tab-content-settings .setting-item {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-md);
  }

  .tab-content-settings .setting-item button {
    width: 100%;
  }

  .salary-slips-view .slips-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-md);
  }
}

/* ============ JAPANESE UTILITY CLASSES (和) ============ */

/* Japanese Typography */
.jp-title {
  font-family: var(--font-jp-display);
  color: var(--jp-shu);
  font-weight: 700;
}

.jp-kanji-display {
  font-family: var(--font-jp-kanji);
  font-weight: 700;
}

.jp-body-text {
  font-family: var(--font-jp-body);
  line-height: var(--line-height-jp);
}

/* Japanese Divider */
.jp-divider {
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--border) 20%,
    var(--jp-shu) 50%,
    var(--border) 80%,
    transparent 100%
  );
  margin: var(--space-lg) 0;
}

/* Hanko (Stamp) Style Badge */
.hanko-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  background: var(--jp-shu);
  color: var(--jp-washi);
  font-family: var(--font-jp-kanji);
  font-size: 1.25rem;
  border-radius: 50%;
  transform: rotate(-5deg);
  box-shadow: inset 0 0 0 2px var(--jp-washi), inset 0 0 0 4px var(--jp-shu);
}

/* Shu Red accent bar */
.jp-accent-bar {
  position: relative;
  padding-left: 12px;
}

.jp-accent-bar::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--jp-shu);
  border-radius: 2px;
}

/* Japanese Animations */
@keyframes jp-brush-reveal {
  0% { clip-path: inset(0 100% 0 0); }
  100% { clip-path: inset(0 0 0 0); }
}

@keyframes jp-zen-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

@keyframes jp-sakura-sway {
  0%, 100% { transform: rotate(-2deg) translateX(0); }
  50% { transform: rotate(2deg) translateX(5px); }
}

.animate-brush-reveal {
  animation: jp-brush-reveal 0.5s ease-out;
}

.animate-zen-float {
  animation: jp-zen-float 3s ease-in-out infinite;
}

/* Washi Paper texture background */
.bg-washi {
  background: var(--jp-washi-warm);
}

.bg-washi-pattern {
  background: var(--jp-washi-warm);
  background-image:
    radial-gradient(circle at 25% 25%, rgba(0, 0, 0, 0.01) 0%, transparent 2%),
    radial-gradient(circle at 75% 75%, rgba(0, 0, 0, 0.01) 0%, transparent 2%);
  background-size: 20px 20px;
}

/* Sakura highlight on hover */
.hover-sakura:hover {
  background: var(--jp-sakura-light);
  border-color: var(--jp-sakura);
}

/* Shu link style */
a.jp-link {
  color: var(--jp-shu);
  text-decoration: none;
  transition: color var(--transition-fast);
}

a.jp-link:hover {
  color: var(--jp-shu-dark);
  text-decoration: underline;
}

/* Print styles for salary slip */
@media print {
  .no-print {
    display: none !important;
  }

  .salary-slip-print {
    background: white !important;
    box-shadow: none !important;
    padding: 0 !important;
  }

  body {
    background: white !important;
  }
}

/* ============ KAIWA MANAGEMENT STYLES ============ */

/* Main Container */
.kaiwa-management {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  padding: 1rem;
  background: var(--jp-washi);
  border-radius: var(--radius-lg);
  min-height: 500px;
}

/* Sub-tab Navigation */
.kaiwa-subtabs {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  padding: 0.75rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.kaiwa-subtabs .subtab {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  background: transparent;
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  color: var(--gray);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.kaiwa-subtabs .subtab:hover {
  background: var(--jp-washi);
  color: var(--dark);
}

.kaiwa-subtabs .subtab.active {
  background: var(--primary);
  color: var(--white);
  border-color: var(--primary);
  box-shadow: var(--shadow-shu);
}

.kaiwa-subtabs .subtab svg {
  flex-shrink: 0;
}

/* Overview Tab */
.kaiwa-overview {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

/* Stats Grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.stat-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.25rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  border-left: 4px solid var(--gray-light);
  transition: all var(--transition-fast);
}

.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.stat-card.primary { border-left-color: var(--primary); }
.stat-card.success { border-left-color: var(--success); }
.stat-card.warning { border-left-color: var(--warning); }
.stat-card.info { border-left-color: var(--secondary); }

.stat-card .stat-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  background: var(--jp-washi);
  border-radius: var(--radius-md);
  color: var(--gray);
}

.stat-card.primary .stat-icon { background: var(--primary-light); color: var(--primary); opacity: 0.15; }
.stat-card.primary .stat-icon { background: rgba(227, 66, 52, 0.1); color: var(--primary); }
.stat-card.success .stat-icon { background: rgba(123, 158, 107, 0.1); color: var(--success); }
.stat-card.warning .stat-icon { background: rgba(212, 168, 75, 0.1); color: var(--warning); }
.stat-card.info .stat-icon { background: rgba(38, 78, 115, 0.1); color: var(--secondary); }

.stat-card .stat-content {
  flex: 1;
}

.stat-card .stat-value {
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--dark);
  line-height: 1.2;
}

.stat-card .stat-label {
  font-size: 0.85rem;
  color: var(--gray);
  margin-top: 0.25rem;
}

/* Overview Section */
.overview-section {
  background: var(--white);
  padding: 1.25rem;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.overview-section h3 {
  font-size: 1rem;
  font-weight: 600;
  color: var(--dark);
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--border);
}

/* Level Distribution Bars */
.level-bars {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.level-bar-item {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.level-bar-label {
  display: flex;
  justify-content: space-between;
  font-size: 0.85rem;
}

.level-bar-label .level-name {
  font-weight: 600;
  color: var(--dark);
}

.level-bar-label .level-count {
  color: var(--gray);
}

.level-bar-track {
  height: 8px;
  background: var(--jp-washi);
  border-radius: 4px;
  overflow: hidden;
}

.level-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.5s ease;
}

.level-bar-fill.level-n5 { background: linear-gradient(90deg, #4CAF50, #81C784); }
.level-bar-fill.level-n4 { background: linear-gradient(90deg, #2196F3, #64B5F6); }
.level-bar-fill.level-n3 { background: linear-gradient(90deg, #FF9800, #FFB74D); }
.level-bar-fill.level-n2 { background: linear-gradient(90deg, #9C27B0, #BA68C8); }
.level-bar-fill.level-n1 { background: linear-gradient(90deg, #E34234, #FF6B5B); }

/* Topic Stats Grid */
.topic-stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 0.75rem;
}

.topic-stat-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.35rem;
  padding: 1rem 0.75rem;
  background: var(--jp-washi);
  border-radius: var(--radius-md);
  transition: all var(--transition-fast);
}

.topic-stat-card:hover {
  background: var(--jp-sakura-light);
}

.topic-stat-card .topic-icon {
  font-size: 1.5rem;
}

.topic-stat-card .topic-name {
  font-size: 0.8rem;
  color: var(--gray);
  text-align: center;
}

.topic-stat-card .topic-count {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--dark);
}

/* Quick Actions */
.quick-actions {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.quick-action-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  background: var(--jp-washi);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--dark);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.quick-action-btn:hover {
  background: var(--primary);
  color: var(--white);
  border-color: var(--primary);
}

/* Questions Tab */
.kaiwa-questions-tab {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Toolbar */
.questions-toolbar {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
  padding: 1rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.search-box {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
  min-width: 200px;
  padding: 0.5rem 0.75rem;
  background: var(--jp-washi);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.search-box svg {
  color: var(--gray);
  flex-shrink: 0;
}

.search-box input {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 0.9rem;
  color: var(--dark);
  outline: none;
}

.search-box input::placeholder {
  color: var(--gray-light);
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.filter-group svg {
  color: var(--gray);
}

.filter-group select {
  padding: 0.5rem 0.75rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background: var(--white);
  font-size: 0.85rem;
  color: var(--dark);
  cursor: pointer;
}

/* Breadcrumb */
.breadcrumb {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.75rem 1rem;
  background: var(--white);
  border-radius: var(--radius-md);
  font-size: 0.85rem;
  color: var(--gray);
}

.breadcrumb .clickable {
  cursor: pointer;
  color: var(--primary);
}

.breadcrumb .clickable:hover {
  text-decoration: underline;
}

.breadcrumb .current {
  font-weight: 600;
  color: var(--dark);
}

/* Back Button */
.btn-back {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem 1rem;
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--gray);
  font-size: 0.85rem;
  cursor: pointer;
  transition: all var(--transition-fast);
  width: fit-content;
}

.btn-back:hover {
  background: var(--jp-washi);
  color: var(--dark);
}

/* Level Grid */
.level-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 1rem;
}

.level-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1.5rem 1rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  border: 2px solid var(--border);
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
}

.level-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.level-card .level-badge {
  font-size: 2rem;
  font-weight: 800;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.level-card.level-n5 { border-color: #4CAF50; }
.level-card.level-n5:hover { background: rgba(76, 175, 80, 0.05); }
.level-card.level-n5 .level-badge { background: linear-gradient(135deg, #4CAF50, #81C784); -webkit-background-clip: text; background-clip: text; }

.level-card.level-n4 { border-color: #2196F3; }
.level-card.level-n4:hover { background: rgba(33, 150, 243, 0.05); }
.level-card.level-n4 .level-badge { background: linear-gradient(135deg, #2196F3, #64B5F6); -webkit-background-clip: text; background-clip: text; }

.level-card.level-n3 { border-color: #FF9800; }
.level-card.level-n3:hover { background: rgba(255, 152, 0, 0.05); }
.level-card.level-n3 .level-badge { background: linear-gradient(135deg, #FF9800, #FFB74D); -webkit-background-clip: text; background-clip: text; }

.level-card.level-n2 { border-color: #9C27B0; }
.level-card.level-n2:hover { background: rgba(156, 39, 176, 0.05); }
.level-card.level-n2 .level-badge { background: linear-gradient(135deg, #9C27B0, #BA68C8); -webkit-background-clip: text; background-clip: text; }

.level-card.level-n1 { border-color: #E34234; }
.level-card.level-n1:hover { background: rgba(227, 66, 52, 0.05); }
.level-card.level-n1 .level-badge { background: linear-gradient(135deg, #E34234, #FF6B5B); -webkit-background-clip: text; background-clip: text; }

.level-card .level-count {
  font-size: 0.85rem;
  color: var(--gray);
}

.level-card .level-arrow {
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  color: var(--gray-light);
  transition: all var(--transition-fast);
}

.level-card:hover .level-arrow {
  color: var(--primary);
  transform: translateY(-50%) translateX(4px);
}

/* Category Grid */
.category-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 1rem;
}

.category-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1.25rem 1rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.category-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  border-color: var(--primary);
}

.category-card .category-icon {
  font-size: 2rem;
}

.category-card .category-name {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--dark);
  text-align: center;
}

.category-card .category-count {
  font-size: 0.8rem;
  color: var(--gray);
}

/* Folder View */
.folder-view {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.folder-actions {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.add-folder-inline {
  display: flex;
  gap: 0.5rem;
  padding: 0.75rem;
  background: var(--white);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
}

.add-folder-inline input {
  flex: 1;
  padding: 0.5rem 0.75rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.9rem;
}

.folder-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.folder-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  background: var(--white);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
  transition: all var(--transition-fast);
}

.folder-item:hover {
  border-color: var(--primary);
  box-shadow: var(--shadow-sm);
}

.folder-info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex: 1;
  cursor: pointer;
}

.folder-info .folder-icon {
  color: var(--warning);
}

.folder-info .folder-name {
  font-weight: 500;
  color: var(--dark);
}

.folder-info .folder-count {
  font-size: 0.8rem;
  color: var(--gray);
  margin-left: auto;
  margin-right: 0.5rem;
}

.folder-actions-inline {
  display: flex;
  gap: 0.35rem;
}

.folder-edit {
  display: flex;
  gap: 0.5rem;
  flex: 1;
}

.folder-edit input {
  flex: 1;
  padding: 0.35rem 0.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
}

/* Empty State */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem 2rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  color: var(--gray);
  text-align: center;
}

.empty-state svg {
  margin-bottom: 1rem;
  opacity: 0.5;
}

.empty-state p {
  margin: 0;
  font-size: 1rem;
}

.empty-state p.sub {
  font-size: 0.85rem;
  margin-top: 0.35rem;
}

/* Filtered Results */
.filtered-results {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.results-count {
  font-size: 0.9rem;
  color: var(--gray);
  padding: 0.5rem 1rem;
  background: var(--white);
  border-radius: var(--radius-md);
}

/* Import Tab */
.kaiwa-import-tab {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.import-header {
  text-align: center;
  padding: 1.5rem;
  background: var(--white);
  border-radius: var(--radius-lg);
}

.import-header h3 {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-size: 1.25rem;
  color: var(--dark);
  margin-bottom: 0.5rem;
}

.import-header p {
  color: var(--gray);
  font-size: 0.9rem;
  margin: 0;
}

.import-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.import-option {
  padding: 1.25rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.import-option .option-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
  color: var(--dark);
  margin-bottom: 0.5rem;
}

.import-option p {
  font-size: 0.85rem;
  color: var(--gray);
  margin-bottom: 1rem;
}

.import-option textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: 0.9rem;
  font-family: inherit;
  resize: vertical;
  min-height: 120px;
  margin-bottom: 1rem;
}

.import-option textarea:focus {
  outline: none;
  border-color: var(--primary);
}

/* Import Preview */
.import-preview {
  padding: 1.25rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.import-preview h4 {
  font-size: 1rem;
  color: var(--dark);
  margin-bottom: 1rem;
}

.import-errors {
  margin-bottom: 1rem;
}

.import-errors .error-item {
  padding: 0.5rem 0.75rem;
  background: var(--danger-light);
  color: var(--danger);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
  margin-bottom: 0.35rem;
}

.preview-list {
  max-height: 300px;
  overflow-y: auto;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  margin-bottom: 1rem;
}

.preview-item {
  padding: 0.75rem;
  border-bottom: 1px solid var(--border);
}

.preview-item:last-child {
  border-bottom: none;
}

.preview-item .preview-ja {
  font-weight: 500;
  color: var(--dark);
}

.preview-item .preview-vi {
  font-size: 0.85rem;
  color: var(--gray);
  margin-top: 0.25rem;
}

.preview-more {
  padding: 0.75rem;
  text-align: center;
  font-size: 0.85rem;
  color: var(--gray);
  background: var(--jp-washi);
}

.import-actions {
  display: flex;
  gap: 0.75rem;
}

/* Settings Tab */
.kaiwa-settings-tab {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.settings-header {
  text-align: center;
  padding: 1.5rem;
  background: var(--white);
  border-radius: var(--radius-lg);
}

.settings-header h3 {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-size: 1.25rem;
  color: var(--dark);
  margin-bottom: 0.5rem;
}

.settings-header p {
  color: var(--gray);
  font-size: 0.9rem;
  margin: 0;
}

.settings-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1rem;
}

.setting-card {
  padding: 1.25rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.setting-card .setting-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
  color: var(--dark);
  margin-bottom: 0.35rem;
}

.setting-card .setting-desc {
  font-size: 0.85rem;
  color: var(--gray);
  margin-bottom: 1rem;
}

.setting-control {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.setting-control input[type="range"] {
  flex: 1;
  height: 6px;
  -webkit-appearance: none;
  background: var(--jp-washi);
  border-radius: 3px;
  outline: none;
}

.setting-control input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  background: var(--primary);
  border-radius: 50%;
  cursor: pointer;
  box-shadow: var(--shadow-sm);
}

.setting-value {
  min-width: 40px;
  font-weight: 600;
  color: var(--dark);
  text-align: right;
}

/* Toggle Switch */
.toggle {
  position: relative;
  display: inline-block;
  width: 48px;
  height: 26px;
}

.toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--gray-light);
  transition: all var(--transition-fast);
  border-radius: 26px;
}

.toggle-slider::before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background-color: var(--white);
  transition: all var(--transition-fast);
  border-radius: 50%;
  box-shadow: var(--shadow-sm);
}

.toggle input:checked + .toggle-slider {
  background-color: var(--success);
}

.toggle input:checked + .toggle-slider::before {
  transform: translateX(22px);
}

/* Challenges Tab */
.kaiwa-challenges-tab {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.challenges-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  background: var(--white);
  border-radius: var(--radius-lg);
}

.challenges-header h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 1.1rem;
  color: var(--dark);
  margin: 0;
}

.challenges-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.challenge-card {
  padding: 1.25rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  border-left: 4px solid var(--gray-light);
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-fast);
}

.challenge-card.active {
  border-left-color: var(--success);
}

.challenge-card.inactive {
  opacity: 0.7;
}

.challenge-card .challenge-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.challenge-card .challenge-header h4 {
  margin: 0;
  font-size: 1rem;
  color: var(--dark);
}

.challenge-card .status {
  font-size: 0.75rem;
  padding: 0.25rem 0.5rem;
  border-radius: var(--radius-sm);
  background: var(--gray-light);
  color: var(--gray);
}

.challenge-card .status.active {
  background: var(--success-light);
  color: var(--success-dark);
}

.challenge-card .challenge-desc {
  font-size: 0.9rem;
  color: var(--gray);
  margin-bottom: 0.75rem;
}

.challenge-card .challenge-meta {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.challenge-card .challenge-meta span {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.8rem;
  color: var(--gray);
}

.challenge-form {
  padding: 1.5rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
}

.challenge-form h4 {
  margin: 0 0 1rem;
  color: var(--dark);
}

.challenge-form .form-note {
  color: var(--gray);
  font-size: 0.9rem;
  margin-bottom: 1rem;
}

/* Rewards Tab */
.kaiwa-rewards-tab {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.rewards-header {
  text-align: center;
  padding: 1.5rem;
  background: var(--white);
  border-radius: var(--radius-lg);
}

.rewards-header h3 {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-size: 1.25rem;
  color: var(--dark);
  margin-bottom: 0.5rem;
}

.rewards-header p {
  color: var(--gray);
  font-size: 0.9rem;
  margin: 0;
}

.badges-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 1rem;
}

.badge-card {
  display: flex;
  gap: 1rem;
  padding: 1.25rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  transition: all var(--transition-fast);
}

.badge-card:hover {
  border-color: var(--warning);
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.badge-card .badge-icon {
  font-size: 2.5rem;
  flex-shrink: 0;
}

.badge-card .badge-info {
  flex: 1;
  min-width: 0;
}

.badge-card .badge-info h4 {
  margin: 0 0 0.25rem;
  font-size: 1rem;
  color: var(--dark);
}

.badge-card .badge-info p {
  margin: 0 0 0.5rem;
  font-size: 0.85rem;
  color: var(--gray);
}

.badge-card .badge-requirement {
  display: inline-block;
  font-size: 0.75rem;
  padding: 0.25rem 0.5rem;
  background: var(--jp-washi);
  border-radius: var(--radius-sm);
  color: var(--gray);
}

.rewards-note {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  background: var(--jp-sakura-light);
  border-radius: var(--radius-md);
  color: var(--jp-sakura-dark);
}

.rewards-note p {
  margin: 0;
  font-size: 0.9rem;
}

/* Question Form Enhancements */
.kaiwa-question-form .form-header {
  margin-bottom: 1rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid var(--border);
}

.kaiwa-question-form .form-header h3 {
  margin: 0;
  font-size: 1.1rem;
  color: var(--dark);
}

.kaiwa-question-form .form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.kaiwa-question-form .form-group {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.kaiwa-question-form .form-group.full {
  grid-column: 1 / -1;
}

.kaiwa-question-form .form-group label {
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--dark);
}

.kaiwa-question-form .form-group label .required {
  color: var(--danger);
}

.kaiwa-question-form textarea,
.kaiwa-question-form input[type="text"],
.kaiwa-question-form select {
  padding: 0.6rem 0.75rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: 0.9rem;
  font-family: inherit;
  transition: border-color var(--transition-fast);
}

.kaiwa-question-form textarea:focus,
.kaiwa-question-form input[type="text"]:focus,
.kaiwa-question-form select:focus {
  outline: none;
  border-color: var(--primary);
}

.suggested-answers-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.suggested-answer-row {
  display: flex;
  gap: 0.5rem;
}

.suggested-answer-row input {
  flex: 1;
}

.kaiwa-question-form .form-actions {
  display: flex;
  gap: 0.75rem;
  padding-top: 1rem;
  border-top: 1px solid var(--border);
}

/* Kaiwa Management Mobile Responsive */
@media (max-width: 768px) {
  .kaiwa-management {
    padding: 0.75rem;
    gap: 1rem;
  }

  .kaiwa-subtabs {
    padding: 0.5rem;
    gap: 0.35rem;
  }

  .kaiwa-subtabs .subtab {
    padding: 0.5rem 0.75rem;
    font-size: 0.8rem;
  }

  .kaiwa-subtabs .subtab span {
    display: none;
  }

  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }

  .stat-card {
    padding: 1rem;
    gap: 0.75rem;
  }

  .stat-card .stat-icon {
    width: 40px;
    height: 40px;
  }

  .stat-card .stat-value {
    font-size: 1.5rem;
  }

  .questions-toolbar {
    flex-direction: column;
    gap: 0.75rem;
  }

  .filter-group {
    flex-wrap: wrap;
  }

  .level-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .category-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .import-options {
    grid-template-columns: 1fr;
  }

  .settings-grid {
    grid-template-columns: 1fr;
  }

  .badges-grid {
    grid-template-columns: 1fr;
  }

  .kaiwa-question-form .form-grid {
    grid-template-columns: 1fr;
  }
}

/* ============ RACING GAME STYLES ============ */

/* Main Page */
.racing-game-page {
  min-height: 100vh;
  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
  padding: 1rem;
  position: relative;
}

/* Error Toast */
.racing-error-toast {
  position: fixed;
  top: 1rem;
  left: 50%;
  transform: translateX(-50%);
  background: var(--danger);
  color: white;
  padding: 0.75rem 1.25rem;
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  gap: 1rem;
  z-index: 1000;
  animation: slideDown 0.3s ease;
}

.racing-error-toast button {
  background: transparent;
  border: none;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  opacity: 0.8;
}

.racing-error-toast button:hover {
  opacity: 1;
}

@keyframes slideDown {
  from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
  to { transform: translateX(-50%) translateY(0); opacity: 1; }
}

/* Loading Overlay */
.racing-loading-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  z-index: 999;
  color: white;
}

.racing-loading-overlay .loading-spinner {
  width: 48px;
  height: 48px;
  border: 4px solid rgba(255, 255, 255, 0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

/* ============ RACING MENU ============ */
.racing-menu {
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

.racing-menu-header {
  text-align: center;
  margin-bottom: 2rem;
}

.racing-title {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.racing-title .racing-icon {
  font-size: 4rem;
  animation: bounce 2s ease infinite;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.racing-title h1 {
  font-size: 2.5rem;
  font-weight: 800;
  background: linear-gradient(135deg, #ffd700, #ff6b6b, #4ecdc4);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 4px 20px rgba(255, 215, 0, 0.3);
}

.racing-title .racing-subtitle {
  font-size: 1.1rem;
  color: #a0aec0;
  font-weight: 500;
}

.racing-desc {
  color: #718096;
  font-size: 1rem;
}

/* Race Type Section */
.race-type-section {
  margin-bottom: 2rem;
}

.race-type-section h2 {
  color: white;
  font-size: 1.25rem;
  margin-bottom: 1rem;
  text-align: center;
}

.race-type-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}

.race-type-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.75rem;
  padding: 1.5rem;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-xl);
  cursor: pointer;
  transition: all 0.3s ease;
}

.race-type-card:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.3);
  transform: translateY(-4px);
}

.race-type-card.boat:hover {
  border-color: #4ecdc4;
  box-shadow: 0 8px 32px rgba(78, 205, 196, 0.3);
}

.race-type-card.horse:hover {
  border-color: #ffd93d;
  box-shadow: 0 8px 32px rgba(255, 217, 61, 0.3);
}

.race-type-icon {
  position: relative;
  color: white;
}

.race-type-icon svg {
  opacity: 0.3;
}

.race-type-icon .race-emoji {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3rem;
}

.race-type-card h3 {
  color: white;
  font-size: 1.25rem;
  font-weight: 700;
}

.race-type-card p {
  color: #a0aec0;
  font-size: 0.85rem;
  text-align: center;
}

.race-type-action {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white;
  border-radius: var(--radius-md);
  font-size: 0.85rem;
  font-weight: 600;
}

/* Join Section */
.join-section {
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-xl);
  padding: 1.5rem;
  margin-bottom: 2rem;
}

.join-section h2 {
  color: white;
  font-size: 1.1rem;
  margin-bottom: 1rem;
  text-align: center;
}

.join-code-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  background: transparent;
  border: 2px dashed rgba(255, 255, 255, 0.3);
  border-radius: var(--radius-lg);
  color: white;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.join-code-btn:hover {
  border-color: white;
  background: rgba(255, 255, 255, 0.05);
}

.join-code-form {
  display: flex;
  gap: 0.5rem;
}

.join-code-form input {
  flex: 1;
  padding: 0.75rem 1rem;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-md);
  color: white;
  font-size: 1.25rem;
  letter-spacing: 0.5rem;
  text-align: center;
}

.join-code-form input::placeholder {
  letter-spacing: 0.1rem;
  color: #718096;
}

.join-code-form button {
  padding: 0.75rem 1.25rem;
  border-radius: var(--radius-md);
  font-weight: 600;
  cursor: pointer;
  border: none;
}

.join-code-form button[type="submit"] {
  background: linear-gradient(135deg, var(--success), var(--success-dark));
  color: white;
}

.join-code-form button[type="submit"]:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.join-code-form .cancel-btn {
  background: rgba(255, 255, 255, 0.1);
  color: white;
}

/* Rooms Section */
.rooms-section {
  margin-bottom: 2rem;
}

.rooms-section h2 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-size: 1.1rem;
  margin-bottom: 1rem;
}

.rooms-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.room-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all 0.2s ease;
}

.room-card:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
}

.room-icon {
  font-size: 2rem;
}

.room-info {
  flex: 1;
}

.room-info h4 {
  color: white;
  font-size: 1rem;
  margin-bottom: 0.25rem;
}

.room-meta {
  display: flex;
  gap: 0.5rem;
  color: #a0aec0;
  font-size: 0.8rem;
}

.room-join-btn {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem 1rem;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  border: none;
  border-radius: var(--radius-md);
  color: white;
  font-weight: 600;
  font-size: 0.85rem;
  cursor: pointer;
}

/* Features Section */
.features-section {
  display: flex;
  justify-content: center;
  gap: 2rem;
  padding: 1rem;
  color: #a0aec0;
}

.feature-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.85rem;
}

/* ============ RACING SETUP ============ */
.racing-setup {
  max-width: 600px;
  margin: 0 auto;
  padding: 1rem;
}

.racing-setup-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.racing-setup-header .back-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 52px;
  height: 52px;
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.08));
  border: 1px solid rgba(16, 185, 129, 0.25);
  border-radius: 14px;
  color: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(12px);
  box-shadow: 0 4px 20px rgba(16, 185, 129, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.racing-setup-header .back-btn svg {
  width: 22px;
  height: 22px;
}

.racing-setup-header .back-btn:hover {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.25), rgba(5, 150, 105, 0.15));
  border-color: rgba(16, 185, 129, 0.4);
  color: white;
  transform: translateX(-4px);
  box-shadow: 0 6px 28px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.setup-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.setup-title .setup-icon {
  font-size: 2rem;
}

.setup-title h2 {
  color: white;
  font-size: 1.5rem;
}

.setup-section {
  margin-bottom: 1.5rem;
}

.setup-section > label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
}

.setup-section > input[type="text"] {
  width: 100%;
  padding: 0.75rem 1rem;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-md);
  color: white;
  font-size: 1rem;
}

.setup-section > input[type="text"]::placeholder {
  color: #718096;
}

/* Vehicle Grid */
.vehicle-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

.vehicle-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.35rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all 0.2s ease;
}

.vehicle-card:hover:not(.locked) {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.3);
}

.vehicle-card.selected {
  border-color: var(--success);
  background: rgba(123, 158, 107, 0.2);
}

.vehicle-card.locked {
  opacity: 0.5;
  cursor: not-allowed;
}

.vehicle-emoji {
  font-size: 2.5rem;
}

.vehicle-name {
  color: white;
  font-weight: 600;
  font-size: 0.9rem;
}

.vehicle-stats {
  color: #a0aec0;
  font-size: 0.75rem;
}

.unlock-badge {
  padding: 0.25rem 0.5rem;
  background: rgba(255, 215, 0, 0.2);
  border-radius: var(--radius-sm);
  color: #ffd700;
  font-size: 0.7rem;
}

/* Level Selector */
.level-selector {
  display: flex;
  gap: 0.5rem;
}

.level-btn {
  flex: 1;
  padding: 0.75rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-md);
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.level-btn:hover {
  background: rgba(255, 255, 255, 0.1);
}

.level-btn.selected {
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  border-color: transparent;
}

/* Setting Row */
.setting-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.setting-row label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-size: 0.9rem;
}

.setting-control {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.setting-control input[type="range"] {
  width: 120px;
  height: 6px;
  -webkit-appearance: none;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.setting-control input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  background: var(--primary);
  border-radius: 50%;
  cursor: pointer;
}

.setting-value {
  min-width: 50px;
  color: white;
  font-weight: 600;
  text-align: right;
}

/* Advanced Toggle */
.advanced-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem;
  background: transparent;
  border: 1px dashed rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-md);
  color: #a0aec0;
  font-size: 0.85rem;
  cursor: pointer;
  margin-bottom: 1rem;
}

.advanced-toggle:hover {
  border-color: rgba(255, 255, 255, 0.4);
  color: white;
}

/* Setup Info */
.setup-info {
  background: rgba(255, 215, 0, 0.1);
  border: 1px solid rgba(255, 215, 0, 0.3);
  border-radius: var(--radius-lg);
  padding: 1rem;
  margin-bottom: 1.5rem;
}

.info-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: #ffd700;
  font-size: 0.85rem;
  margin-bottom: 0.5rem;
}

.info-item:last-child {
  margin-bottom: 0;
}

/* Create Button */
.create-race-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  background: linear-gradient(135deg, var(--success), var(--success-dark));
  border: none;
  border-radius: var(--radius-lg);
  color: white;
  font-size: 1.1rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
}

.create-race-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(123, 158, 107, 0.4);
}

.create-race-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ============ RACING LOBBY ============ */
.racing-lobby {
  max-width: 600px;
  margin: 0 auto;
  padding: 1rem;
}

.lobby-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.lobby-header .lobby-icon {
  font-size: 3rem;
}

.lobby-info h2 {
  color: white;
  font-size: 1.5rem;
  margin-bottom: 0.25rem;
}

.lobby-meta {
  display: flex;
  gap: 0.5rem;
  color: #a0aec0;
  font-size: 0.85rem;
}

/* Code Section */
.lobby-code-section {
  text-align: center;
  padding: 1.5rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-xl);
  margin-bottom: 1.5rem;
}

.code-label {
  color: #a0aec0;
  font-size: 0.85rem;
  display: block;
  margin-bottom: 0.5rem;
}

.code-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.code-value {
  font-size: 2.5rem;
  font-weight: 800;
  letter-spacing: 0.5rem;
  color: #ffd700;
  font-family: monospace;
}

.copy-btn {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 50%;
  color: white;
  cursor: pointer;
}

.copy-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

.share-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: var(--radius-md);
  color: white;
  font-size: 0.85rem;
  cursor: pointer;
}

.share-btn:hover {
  background: rgba(255, 255, 255, 0.1);
}

/* Players Section */
.lobby-players {
  margin-bottom: 1.5rem;
}

.players-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-weight: 600;
  margin-bottom: 1rem;
}

.players-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

.player-card {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-lg);
}

.player-card.current {
  border-color: var(--success);
  background: rgba(123, 158, 107, 0.1);
}

.player-card.host {
  border-color: #ffd700;
}

.player-card.empty {
  opacity: 0.5;
  justify-content: center;
}

.player-avatar {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 50%;
  font-size: 1.5rem;
}

.player-avatar.empty {
  color: #718096;
  font-size: 1rem;
}

.player-info {
  display: flex;
  flex-direction: column;
}

.player-name {
  color: white;
  font-weight: 600;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.host-badge {
  padding: 0.15rem 0.35rem;
  background: #ffd700;
  color: #1a1a2e;
  border-radius: var(--radius-sm);
  font-size: 0.65rem;
  font-weight: 700;
}

.player-vehicle {
  color: #a0aec0;
  font-size: 0.8rem;
}

/* Track Preview */
.track-preview {
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-lg);
  padding: 1rem;
  margin-bottom: 1.5rem;
}

.track-info {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-size: 0.9rem;
  margin-bottom: 0.75rem;
}

.track-visual {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.track-start, .track-finish {
  font-size: 0.8rem;
  color: #a0aec0;
}

.track-line {
  flex: 1;
  height: 40px;
  background: linear-gradient(90deg, rgba(78, 205, 196, 0.3), rgba(255, 217, 61, 0.3));
  border-radius: 20px;
  position: relative;
}

.track-player {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.5rem;
  transition: left 0.3s ease;
}

/* Lobby Actions */
.lobby-actions {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.start-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  background: linear-gradient(135deg, var(--success), var(--success-dark));
  border: none;
  border-radius: var(--radius-lg);
  color: white;
  font-size: 1.1rem;
  font-weight: 700;
  cursor: pointer;
}

.start-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.waiting-message {
  text-align: center;
  padding: 1rem;
  color: #a0aec0;
  font-size: 1rem;
}

.leave-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-md);
  color: #a0aec0;
  cursor: pointer;
}

.leave-btn:hover {
  background: rgba(255, 255, 255, 0.05);
  color: white;
}

/* ============ RACING PLAY ============ */
.racing-play {
  max-width: 600px;
  margin: 0 auto;
  padding: 0.75rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  min-height: 100vh;
}

/* Layout with leaderboard sidebar */
.racing-play.with-leaderboard {
  max-width: 1100px;
  flex-direction: row;
  gap: 1rem;
}

.racing-play-main {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.racing-play-sidebar {
  width: 280px;
  flex-shrink: 0;
}

.racing-play-sidebar .player-leaderboard {
  position: sticky;
  top: 1rem;
  max-height: calc(100vh - 2rem);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.racing-play-sidebar .leaderboard-list {
  flex: 1;
  overflow-y: auto;
}

/* Mobile: stack sidebar below */
@media (max-width: 900px) {
  .racing-play.with-leaderboard {
    flex-direction: column;
    max-width: 600px;
  }

  .racing-play-sidebar {
    width: 100%;
    order: -1;
  }

  .racing-play-sidebar .player-leaderboard {
    position: relative;
    max-height: none;
  }
}

.racing-play.starting {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 80vh;
}

.countdown-display {
  text-align: center;
}

.countdown-icon {
  font-size: 4rem;
  margin-bottom: 1rem;
}

.countdown-display h2 {
  color: white;
  font-size: 1.5rem;
  margin-bottom: 1rem;
}

.countdown-number {
  font-size: 6rem;
  font-weight: 800;
  color: #ffd700;
  animation: pulse 1s ease infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.countdown-display p {
  color: #a0aec0;
}

/* Mystery Box */
.racing-play.mystery-box {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 80vh;
}

.mystery-box-display {
  text-align: center;
}

.mystery-icon {
  font-size: 6rem;
  animation: shake 0.5s ease infinite;
}

@keyframes shake {
  0%, 100% { transform: rotate(-5deg); }
  50% { transform: rotate(5deg); }
}

.mystery-box-display h2 {
  color: #ffd700;
  font-size: 2rem;
  margin: 1rem 0;
}

.mystery-difficulty {
  color: #a0aec0;
  margin-bottom: 1.5rem;
}

.open-mystery-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem 2rem;
  background: linear-gradient(135deg, #ffd700, #ffb347);
  border: none;
  border-radius: var(--radius-lg);
  color: #1a1a2e;
  font-size: 1.1rem;
  font-weight: 700;
  cursor: pointer;
  animation: glow 1.5s ease infinite;
}

@keyframes glow {
  0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
  50% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.8); }
}

.mystery-reward {
  padding: 2rem;
}

.reward-reveal {
  animation: fadeInUp 0.5s ease;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.reward-emoji {
  font-size: 4rem;
  display: block;
  margin-bottom: 1rem;
}

.reward-reveal h3 {
  color: #ffd700;
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

.reward-reveal p {
  color: #a0aec0;
}

/* Race Track - Clean Design */
.race-track {
  background: linear-gradient(180deg, rgba(26, 26, 46, 0.95) 0%, rgba(22, 33, 62, 0.95) 100%);
  border-radius: 16px;
  padding: 0.875rem;
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.racing-play .track-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.75rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.track-label {
  color: rgba(255, 255, 255, 0.9);
  font-weight: 600;
  font-size: 0.85rem;
  display: flex;
  align-items: center;
  gap: 0.375rem;
}

.racing-play .question-counter {
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.75rem;
  background: rgba(255, 255, 255, 0.08);
  padding: 0.25rem 0.625rem;
  border-radius: 12px;
}

.track-visual-play {
  padding: 0;
}

.racing-play .track-lanes {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.racing-play .track-lane {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.375rem 0.5rem;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 10px;
  border: 1px solid transparent;
  transition: all 0.2s ease;
}

.racing-play .track-lane:has(.lane-vehicle.current) {
  background: rgba(78, 205, 196, 0.1);
  border-color: rgba(78, 205, 196, 0.2);
}

.lane-info {
  min-width: 85px;
  display: flex;
  align-items: center;
  gap: 0.375rem;
}

.lane-position {
  width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  font-weight: 700;
  color: white;
  background: rgba(255, 255, 255, 0.12);
  border-radius: 6px;
}

.lane-name {
  color: rgba(255, 255, 255, 0.85);
  font-size: 0.75rem;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 55px;
}

.racing-play .lane-track {
  flex: 1;
  height: 28px;
  background: rgba(255, 255, 255, 0.06);
  border-radius: 14px;
  position: relative;
  overflow: hidden;
}

.racing-play .lane-progress {
  height: 100%;
  background: linear-gradient(90deg, rgba(78, 205, 196, 0.6), rgba(78, 205, 196, 0.8));
  border-radius: 14px;
  position: relative;
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  min-width: 28px;
}

.lane-vehicle {
  position: absolute;
  right: 1px;
  top: 50%;
  transform: translateY(-50%);
  width: 24px;
  height: 24px;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  border-radius: 50%;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.lane-vehicle.current {
  background: linear-gradient(135deg, #fff 0%, #e8f5e9 100%);
  box-shadow: 0 2px 10px rgba(78, 205, 196, 0.4);
}

.lane-vehicle.frozen {
  filter: saturate(0.4) brightness(0.8);
  animation: frozenShake 0.4s ease infinite;
}

@keyframes frozenShake {
  0%, 100% { transform: translateY(-50%) translateX(0); }
  50% { transform: translateY(-50%) translateX(1px); }
}

.shield-indicator, .boost-indicator {
  position: absolute;
  top: -5px;
  right: -5px;
  font-size: 0.6rem;
}

.lane-finish {
  position: absolute;
  right: 5px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.75rem;
  opacity: 0.4;
}

.lane-stats {
  min-width: 60px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0.125rem;
}

.lane-speed {
  color: #4ecdc4;
  font-size: 0.7rem;
  font-weight: 600;
}

.lane-distance {
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.65rem;
}

/* Question Section - Clean Design */
.question-section {
  background: linear-gradient(180deg, rgba(26, 26, 46, 0.95) 0%, rgba(22, 33, 62, 0.95) 100%);
  border-radius: 16px;
  padding: 1rem;
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.question-timer {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  margin-bottom: 0.875rem;
  position: relative;
}

.question-timer.warning {
  color: #f59e0b;
}

.question-timer.warning .timer-bar {
  background: #f59e0b;
}

.timer-bar {
  flex: 1;
  height: 4px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 2px;
  overflow: hidden;
  position: relative;
}

.timer-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: var(--timer-progress, 100%);
  background: linear-gradient(90deg, #4ecdc4, #44a08d);
  border-radius: 2px;
  transition: width 1s linear;
}

.question-timer.warning .timer-bar::after {
  background: linear-gradient(90deg, #f59e0b, #d97706);
}

.question-display {
  text-align: center;
  padding: 0.75rem 0;
}

.question-difficulty {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.7rem;
  color: rgba(255, 255, 255, 0.5);
  margin-bottom: 0.5rem;
  background: rgba(255, 255, 255, 0.06);
  padding: 0.25rem 0.625rem;
  border-radius: 12px;
}

.question-text {
  color: white;
  font-size: 2.25rem;
  font-weight: 700;
  font-family: var(--font-jp-kanji);
  margin-bottom: 0.5rem;
  line-height: 1.3;
}

.speed-bonus {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  color: #4ecdc4;
  font-size: 0.8rem;
  font-weight: 600;
  background: rgba(78, 205, 196, 0.1);
  padding: 0.25rem 0.625rem;
  border-radius: 12px;
}

/* Answer Options - Cleaner Grid */
.answer-options-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.5rem;
}

.answer-option {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  padding: 0.875rem 1rem;
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  position: relative;
  overflow: hidden;
  text-align: left;
}

.answer-option:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
}

.answer-option:disabled {
  cursor: not-allowed;
  opacity: 0.7;
}

.answer-option.selected {
  transform: scale(0.99);
  box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.3);
}

.answer-option.correct {
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%) !important;
  animation: correctPop 0.3s ease;
}

@keyframes correctPop {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

.answer-option.wrong {
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
  animation: wrongShake 0.4s ease;
}

@keyframes wrongShake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-4px); }
  40% { transform: translateX(4px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}

.option-label {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 700;
  flex-shrink: 0;
}

.option-text {
  flex: 1;
  line-height: 1.4;
}

.correct-mark, .wrong-mark {
  position: absolute;
  right: 0.875rem;
  font-size: 1.25rem;
}

/* Host Controls */
.host-controls {
  display: flex;
  justify-content: center;
  gap: 0.625rem;
  margin-top: 1rem;
}

.reveal-btn, .next-btn {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.625rem 1.25rem;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.15s ease;
}

.reveal-btn {
  background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
  color: white;
}

.reveal-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.next-btn {
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
  color: white;
}

/* Player Stats Bar - Clean Design */
.player-stats-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  padding: 0.625rem 1rem;
  background: linear-gradient(180deg, rgba(26, 26, 46, 0.95) 0%, rgba(22, 33, 62, 0.95) 100%);
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  color: rgba(255, 255, 255, 0.8);
  font-size: 0.8rem;
  font-weight: 500;
}

.stat-item svg {
  width: 14px;
  height: 14px;
  opacity: 0.7;
}

.stat-item.correct {
  color: #4ecdc4;
}

.active-features {
  display: flex;
  gap: 0.375rem;
}

.feature-badge {
  position: relative;
  font-size: 1rem;
  background: rgba(255, 255, 255, 0.08);
  padding: 0.25rem;
  border-radius: 6px;
}

.feature-duration {
  position: absolute;
  bottom: -3px;
  right: -3px;
  background: #6366f1;
  color: white;
  font-size: 0.55rem;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}

/* ============ RACING RESULTS ============ */
.racing-results {
  max-width: 700px;
  margin: 0 auto;
  padding: 1rem;
}

.results-header {
  text-align: center;
  margin-bottom: 2.5rem;
  position: relative;
  z-index: 1;
}

.results-header .results-icon {
  font-size: 5rem;
  display: block;
  margin-bottom: 0.75rem;
  animation: iconPulse 2s ease-in-out infinite;
  filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
}

@keyframes iconPulse {
  0%, 100% { transform: scale(1); filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5)); }
  50% { transform: scale(1.1); filter: drop-shadow(0 0 35px rgba(255, 215, 0, 0.8)); }
}

.results-header h1 {
  color: white;
  font-size: 2.5rem;
  margin-bottom: 0.75rem;
  font-weight: 800;
  text-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  letter-spacing: 0.5px;
}

.results-header p {
  color: rgba(255, 255, 255, 0.75);
  font-size: 1.1rem;
}

/* Podium - Premium Esports Style */
.results-podium {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 0.75rem;
  margin-bottom: 2.5rem;
  padding: 1.5rem 1rem;
  position: relative;
  z-index: 1;
}

.podium-place {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  animation: podiumSlideUp 0.6s ease forwards;
  opacity: 0;
}

.podium-place.first { animation-delay: 0.3s; }
.podium-place.second { animation-delay: 0.1s; }
.podium-place.third { animation-delay: 0.2s; }

@keyframes podiumSlideUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

.podium-place.first {
  order: 2;
  transform: scale(1.1);
}

.podium-place.second {
  order: 1;
}

.podium-place.third {
  order: 3;
}

.winner-crown {
  font-size: 2.5rem;
  animation: crownFloat 2s ease infinite;
  filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.7));
}

.winner-crown svg {
  color: #ffd700;
}

@keyframes crownFloat {
  0%, 100% { transform: translateY(0) rotate(-5deg); }
  50% { transform: translateY(-12px) rotate(5deg); }
}

.podium-player {
  position: relative;
  margin-bottom: 0.75rem;
}

.podium-player .player-avatar {
  font-size: 3rem;
  display: block;
  filter: drop-shadow(0 4px 10px rgba(0, 0, 0, 0.3));
}

.podium-place.first .podium-player .player-avatar {
  font-size: 3.5rem;
  animation: avatarGlow 2s ease infinite;
}

@keyframes avatarGlow {
  0%, 100% { filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3)); }
  50% { filter: drop-shadow(0 0 25px rgba(255, 215, 0, 0.6)); }
}

.podium-player .player-vehicle {
  position: absolute;
  bottom: -8px;
  right: -8px;
  font-size: 1.25rem;
}

.podium-place .player-name {
  color: white;
  font-weight: 700;
  font-size: 1rem;
  margin-bottom: 0.5rem;
  max-width: 110px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

.podium-place.first .player-name {
  font-size: 1.15rem;
  color: #ffd700;
}

.podium-stats {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 0.5rem;
}

.podium-block {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 1.25rem 2rem;
  border-radius: 16px 16px 0 0;
  position: relative;
  overflow: hidden;
}

.podium-block::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: rgba(255, 255, 255, 0.5);
}

.podium-block::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
  animation: podiumShine 3s ease infinite;
}

@keyframes podiumShine {
  0% { left: -100%; }
  100% { left: 100%; }
}

.podium-place.first .podium-block {
  background: linear-gradient(180deg, #ffd700, #ffb300, #b8860b);
  height: 120px;
  box-shadow: 0 -10px 40px rgba(255, 215, 0, 0.4), inset 0 2px 0 rgba(255, 255, 255, 0.3);
}

.podium-place.second .podium-block {
  background: linear-gradient(180deg, #e8e8e8, #c0c0c0, #808080);
  height: 90px;
  box-shadow: 0 -8px 30px rgba(192, 192, 192, 0.3), inset 0 2px 0 rgba(255, 255, 255, 0.3);
}

.podium-place.third .podium-block {
  background: linear-gradient(180deg, #e8a865, #cd7f32, #8b4513);
  height: 70px;
  box-shadow: 0 -6px 25px rgba(205, 127, 50, 0.3), inset 0 2px 0 rgba(255, 255, 255, 0.3);
}

.podium-block .medal {
  font-size: 2rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
  position: relative;
  z-index: 1;
}

.podium-block .position {
  color: white;
  font-weight: 800;
  font-size: 1rem;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  position: relative;
  z-index: 1;
}

/* Your Result - Premium Card */
.your-result {
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
  border: 2px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  position: relative;
  z-index: 1;
  animation: resultCardAppear 0.5s ease forwards;
  animation-delay: 0.3s;
  opacity: 0;
}

@keyframes resultCardAppear {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.your-result.winner {
  border-color: rgba(255, 215, 0, 0.5);
  background: linear-gradient(145deg, rgba(255, 215, 0, 0.15), rgba(255, 193, 7, 0.08));
  box-shadow: 0 8px 30px rgba(255, 215, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.your-result.top-three {
  border-color: rgba(78, 205, 196, 0.4);
  background: linear-gradient(145deg, rgba(78, 205, 196, 0.12), rgba(78, 205, 196, 0.05));
}

.your-result-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-weight: 700;
  margin-bottom: 1.25rem;
  font-size: 1rem;
}

.your-result-header svg {
  color: #ffd700;
}

.your-result-content {
  display: flex;
  align-items: center;
  gap: 1.75rem;
}

.result-position {
  font-size: 3rem;
  font-weight: 800;
  color: #ffd700;
  text-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
  min-width: 80px;
  text-align: center;
}

.result-stats {
  flex: 1;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

.result-stat {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: rgba(255, 255, 255, 0.8);
  font-size: 0.9rem;
  padding: 0.5rem 0.75rem;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 10px;
}

.result-stat svg {
  opacity: 0.7;
}

.result-stat.points {
  color: #ffd700;
  font-weight: 600;
  background: rgba(255, 215, 0, 0.15);
}

/* Full Rankings */
.full-rankings {
  margin-bottom: 1.5rem;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: var(--radius-xl);
  padding: 1.25rem;
  animation: rankingsAppear 0.5s ease forwards;
  animation-delay: 0.4s;
  opacity: 0;
}

@keyframes rankingsAppear {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.full-rankings h3 {
  color: white;
  font-size: 1.2rem;
  font-weight: 700;
  margin-bottom: 1.25rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.full-rankings h3::before {
  content: '🏆';
  font-size: 1.3rem;
}

.rankings-list {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

.ranking-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.85rem 1rem;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-lg);
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  animation: rankItemSlide 0.4s ease forwards;
  opacity: 0;
  transform: translateX(-20px);
}

.ranking-item:nth-child(1) { animation-delay: 0.5s; }
.ranking-item:nth-child(2) { animation-delay: 0.55s; }
.ranking-item:nth-child(3) { animation-delay: 0.6s; }
.ranking-item:nth-child(4) { animation-delay: 0.65s; }
.ranking-item:nth-child(5) { animation-delay: 0.7s; }
.ranking-item:nth-child(6) { animation-delay: 0.75s; }
.ranking-item:nth-child(7) { animation-delay: 0.8s; }
.ranking-item:nth-child(8) { animation-delay: 0.85s; }
.ranking-item:nth-child(9) { animation-delay: 0.9s; }
.ranking-item:nth-child(10) { animation-delay: 0.95s; }

@keyframes rankItemSlide {
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.ranking-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  transition: left 0.5s ease;
}

.ranking-item:hover::before {
  left: 100%;
}

.ranking-item:hover {
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
  border-color: rgba(255, 255, 255, 0.2);
  transform: translateX(4px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.ranking-item.current {
  border-color: var(--success);
  background: linear-gradient(145deg, rgba(123, 158, 107, 0.2), rgba(123, 158, 107, 0.1));
  box-shadow: 0 4px 20px rgba(123, 158, 107, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.ranking-item.current::after {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg, var(--success), #4ecdc4);
  border-radius: 2px;
}

.ranking-position {
  min-width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  font-weight: 700;
  text-align: center;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
}

/* Top 3 medal styling */
.ranking-item:nth-child(1) .ranking-position {
  background: linear-gradient(145deg, #ffd700, #ffaa00);
  color: #1a1a2e;
  box-shadow: 0 2px 10px rgba(255, 215, 0, 0.4);
}

.ranking-item:nth-child(2) .ranking-position {
  background: linear-gradient(145deg, #c0c0c0, #a0a0a0);
  color: #1a1a2e;
  box-shadow: 0 2px 10px rgba(192, 192, 192, 0.4);
}

.ranking-item:nth-child(3) .ranking-position {
  background: linear-gradient(145deg, #cd7f32, #a0522d);
  color: white;
  box-shadow: 0 2px 10px rgba(205, 127, 50, 0.4);
}

.ranking-avatar {
  font-size: 1.75rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.ranking-info {
  flex: 1;
}

.ranking-name {
  color: white;
  font-weight: 600;
  font-size: 0.95rem;
  display: block;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.ranking-vehicle {
  color: #a0aec0;
  font-size: 0.75rem;
}

.ranking-stats {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0.15rem;
}

.ranking-distance {
  color: #4ecdc4;
  font-weight: 700;
  font-size: 0.9rem;
  text-shadow: 0 0 8px rgba(78, 205, 196, 0.5);
}

.ranking-accuracy {
  color: #a0aec0;
  font-size: 0.75rem;
}

.ranking-points {
  color: #ffd700;
  font-weight: 800;
  font-size: 1rem;
  min-width: 60px;
  text-align: right;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

/* Top 3 points glow */
.ranking-item:nth-child(1) .ranking-points {
  text-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
}

.ranking-item:nth-child(2) .ranking-points {
  color: #e0e0e0;
  text-shadow: 0 0 12px rgba(192, 192, 192, 0.6);
}

.ranking-item:nth-child(3) .ranking-points {
  color: #dda15e;
  text-shadow: 0 0 12px rgba(205, 127, 50, 0.6);
}

/* Results Actions */
.results-actions {
  display: flex;
  gap: 1rem;
  animation: actionsAppear 0.5s ease forwards;
  animation-delay: 0.6s;
  opacity: 0;
}

@keyframes actionsAppear {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.play-again-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  padding: 1.1rem 1.5rem;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  border: none;
  border-radius: var(--radius-lg);
  color: white;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  box-shadow: 0 6px 20px rgba(107, 142, 35, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.play-again-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
  animation: btnShine 2.5s ease infinite;
}

@keyframes btnShine {
  0%, 100% { left: -100%; }
  50% { left: 100%; }
}

.play-again-btn:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 10px 30px rgba(107, 142, 35, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.play-again-btn:active {
  transform: translateY(-1px) scale(0.98);
}

.go-home-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  padding: 1.1rem 1.5rem;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-lg);
  color: white;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.go-home-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  transition: left 0.5s ease;
}

.go-home-btn:hover::before {
  left: 100%;
}

.go-home-btn:hover {
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
  border-color: rgba(255, 255, 255, 0.25);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
}

.go-home-btn:active {
  transform: translateY(0);
}

/* ============ RACING GAME RESPONSIVE ============ */
@media (max-width: 768px) {
  .racing-title h1 {
    font-size: 1.75rem;
  }

  .race-type-grid {
    grid-template-columns: 1fr;
  }

  .vehicle-grid {
    grid-template-columns: 1fr;
  }

  .level-selector {
    flex-wrap: wrap;
  }

  .players-grid {
    grid-template-columns: 1fr;
  }

  .lane-info {
    min-width: 70px;
  }

  .lane-name {
    max-width: 50px;
  }

  .lane-stats {
    min-width: 60px;
  }

  .question-text {
    font-size: 1.75rem;
  }

  .answer-options-grid {
    grid-template-columns: 1fr;
  }

  .results-podium {
    flex-wrap: wrap;
  }

  .your-result-content {
    flex-direction: column;
    text-align: center;
  }

  .result-stats {
    grid-template-columns: 1fr;
  }

  .results-actions {
    flex-direction: column;
  }
}

/* ============ GOLDEN BELL GAME STYLES ============ */
/* Rung Chuông Vàng - Elimination Quiz Game */

/* Golden Bell Colors */
.golden-bell-page {
  --gb-primary: #f4c430;       /* Golden Yellow */
  --gb-primary-dark: #d4a420;
  --gb-primary-light: #ffe066;
  --gb-danger: #e74c3c;        /* Elimination Red */
  --gb-success: #27ae60;       /* Correct Green */
  --gb-bg-dark: #1a1a2e;
  --gb-bg-medium: #16213e;
  --gb-bg-light: #0f3460;
  --gb-text: #ffffff;
  --gb-text-muted: rgba(255, 255, 255, 0.7);
}

/* Golden Bell Page Container */
.golden-bell-page {
  min-height: 100vh;
  background: linear-gradient(135deg, var(--gb-bg-dark) 0%, var(--gb-bg-medium) 50%, var(--gb-bg-light) 100%);
  color: var(--gb-text);
  padding: 1rem;
}

/* Bell Icon Animation */
.bell-icon {
  animation: bellRing 2s ease-in-out infinite;
}

@keyframes bellRing {
  0%, 100% { transform: rotate(0); }
  10%, 30% { transform: rotate(15deg); }
  20%, 40% { transform: rotate(-15deg); }
  50% { transform: rotate(0); }
}

.bell-waiting {
  animation: bellRing 1s ease-in-out infinite;
}

/* Golden Bell Menu */
.golden-bell-menu {
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

.golden-bell-menu .menu-header {
  text-align: center;
  margin-bottom: 2rem;
}

.golden-bell-menu .header-icon {
  width: 100px;
  height: 100px;
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-dark));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1rem;
  box-shadow: 0 8px 32px rgba(244, 196, 48, 0.4);
}

.golden-bell-menu .header-icon svg {
  color: #1a1a2e;
}

.golden-bell-menu h1 {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-light));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.golden-bell-menu p {
  color: var(--gb-text-muted);
  font-size: 1.1rem;
}

/* Game Mode Button */
.golden-bell-mode {
  background: linear-gradient(135deg, var(--gb-bg-medium), var(--gb-bg-light));
  border: 2px solid var(--gb-primary);
  border-radius: 16px;
  padding: 1.5rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  width: 100%;
  cursor: pointer;
  transition: all 0.3s ease;
}

.golden-bell-mode:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(244, 196, 48, 0.3);
  border-color: var(--gb-primary-light);
}

.golden-bell-mode .mode-icon {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-dark));
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.golden-bell-mode .mode-icon svg {
  color: #1a1a2e;
}

.golden-bell-mode .mode-info {
  flex: 1;
  text-align: left;
}

.golden-bell-mode .mode-name {
  display: block;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--gb-text);
}

.golden-bell-mode .mode-desc {
  display: block;
  font-size: 0.9rem;
  color: var(--gb-text-muted);
}

.golden-bell-mode .mode-action {
  color: var(--gb-primary);
}

/* Golden Bell Setup */
.golden-bell-setup {
  max-width: 600px;
  margin: 0 auto;
  padding: 1rem;
}

.golden-bell-setup .setup-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.golden-bell-setup .setup-header .header-icon {
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-dark));
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.golden-bell-setup .setup-header .header-icon svg {
  color: #1a1a2e;
}

.golden-bell-setup .setup-form {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 16px;
  padding: 1.5rem;
}

.golden-bell-setup .form-group {
  margin-bottom: 1.5rem;
}

.golden-bell-setup .form-group label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: var(--gb-text-muted);
}

.golden-bell-setup .form-group input[type="text"] {
  width: 100%;
  padding: 0.75rem 1rem;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  color: var(--gb-text);
  font-size: 1rem;
}

.golden-bell-setup .form-group input[type="text"]:focus {
  outline: none;
  border-color: var(--gb-primary);
}

.golden-bell-setup .level-buttons,
.golden-bell-setup .category-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.golden-bell-setup .level-btn {
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  color: var(--gb-text);
  cursor: pointer;
  transition: all 0.2s ease;
}

.golden-bell-setup .level-btn.active {
  background: var(--gb-primary);
  border-color: var(--gb-primary);
  color: #1a1a2e;
}

.golden-bell-setup .category-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid transparent;
  border-radius: 8px;
  color: var(--gb-text);
  cursor: pointer;
  transition: all 0.2s ease;
}

.golden-bell-setup .category-btn.active {
  border-color: var(--cat-color);
  background: rgba(255, 255, 255, 0.15);
}

.golden-bell-setup .category-btn .cat-emoji {
  font-size: 1.25rem;
}

.golden-bell-setup input[type="range"] {
  width: 100%;
  height: 8px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
  -webkit-appearance: none;
}

.golden-bell-setup input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  background: var(--gb-primary);
  border-radius: 50%;
  cursor: pointer;
}

.golden-bell-setup .range-labels {
  display: flex;
  justify-content: space-between;
  font-size: 0.8rem;
  color: var(--gb-text-muted);
  margin-top: 0.25rem;
}

.golden-bell-setup .checkbox-group {
  margin-top: 1rem;
}

.golden-bell-setup .checkbox-label {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  cursor: pointer;
}

.golden-bell-setup .checkbox-label input[type="checkbox"] {
  width: 20px;
  height: 20px;
  accent-color: var(--gb-primary);
}

.golden-bell-setup .create-btn {
  width: 100%;
  padding: 1rem;
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-dark));
  border: none;
  border-radius: 12px;
  color: #1a1a2e;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: all 0.3s ease;
  margin-top: 1rem;
}

.golden-bell-setup .create-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(244, 196, 48, 0.4);
}

.golden-bell-setup .create-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Golden Bell Lobby */
.golden-bell-lobby {
  max-width: 800px;
  margin: 0 auto;
  padding: 1rem;
}

.golden-bell-lobby .lobby-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  background: rgba(255, 255, 255, 0.05);
  padding: 1rem;
  border-radius: 16px;
}

.golden-bell-lobby .lobby-icon {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-dark));
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.golden-bell-lobby .lobby-icon svg {
  color: #1a1a2e;
}

.golden-bell-lobby .lobby-info h2 {
  margin-bottom: 0.25rem;
}

.golden-bell-lobby .lobby-meta {
  display: flex;
  gap: 0.5rem;
  color: var(--gb-text-muted);
  font-size: 0.9rem;
}

.golden-bell-lobby .lobby-categories {
  display: flex;
  gap: 0.5rem;
  margin-top: 0.5rem;
  flex-wrap: wrap;
}

.golden-bell-lobby .category-tag {
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  color: #fff;
}

.golden-bell-code {
  text-align: center;
  background: rgba(244, 196, 48, 0.1);
  border: 2px solid var(--gb-primary);
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.golden-bell-code .code-value {
  font-size: 2.5rem;
  font-weight: 700;
  letter-spacing: 0.5rem;
  color: var(--gb-primary);
}

/* Golden Bell Players Grid */
.golden-bell-players {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 0.75rem;
}

.golden-bell-players .player-card {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 1rem;
  text-align: center;
  border: 2px solid transparent;
  transition: all 0.2s ease;
}

.golden-bell-players .player-card.current {
  border-color: var(--gb-primary);
  background: rgba(244, 196, 48, 0.1);
}

.golden-bell-players .player-card.host {
  border-color: var(--gb-primary-light);
}

.golden-bell-players .player-card .player-avatar {
  font-size: 2rem;
  display: block;
  margin-bottom: 0.5rem;
}

.golden-bell-players .player-card .player-status.alive {
  color: var(--gb-success);
  font-size: 0.8rem;
}

/* Lobby Rules */
.lobby-rules {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 1rem;
  margin: 1.5rem 0;
}

.lobby-rules h3 {
  margin-bottom: 0.75rem;
  color: var(--gb-primary);
}

.lobby-rules ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.lobby-rules li {
  padding: 0.5rem 0;
  padding-left: 1.5rem;
  position: relative;
  color: var(--gb-text-muted);
}

.lobby-rules li::before {
  content: '•';
  position: absolute;
  left: 0;
  color: var(--gb-primary);
}

/* Golden Bell Start Button */
.golden-bell-start {
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-dark)) !important;
  color: #1a1a2e !important;
}

.golden-bell-start:hover:not(:disabled) {
  box-shadow: 0 8px 24px rgba(244, 196, 48, 0.4);
}

/* Golden Bell Play */
.golden-bell-play {
  max-width: 900px;
  margin: 0 auto;
  padding: 1rem;
  position: relative;
}

.golden-bell-play.starting {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 80vh;
}

.golden-bell-play .countdown-display {
  text-align: center;
}

.golden-bell-play .countdown-display .countdown-icon {
  width: 160px;
  height: 160px;
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-dark));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 2rem;
  box-shadow: 0 12px 50px rgba(244, 196, 48, 0.5), inset 0 0 40px rgba(255, 255, 255, 0.2);
  border: 4px solid rgba(255, 255, 255, 0.2);
  animation: bellGlow 2s ease-in-out infinite;
}

@keyframes bellGlow {
  0%, 100% { box-shadow: 0 12px 50px rgba(244, 196, 48, 0.5), inset 0 0 40px rgba(255, 255, 255, 0.2); }
  50% { box-shadow: 0 16px 70px rgba(244, 196, 48, 0.7), inset 0 0 50px rgba(255, 255, 255, 0.3); }
}

.golden-bell-play .countdown-display .countdown-icon svg {
  color: #1a1a2e;
}

.golden-bell-play .countdown-number {
  font-size: 6rem;
  font-weight: 700;
  color: var(--gb-primary);
  line-height: 1;
  margin: 1rem 0;
  animation: pulse 1s ease-in-out infinite;
}

/* Game Status Bar */
.game-status-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.05));
  border-radius: 16px;
  padding: 1rem 1.5rem;
  margin-bottom: 1.25rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.game-status-bar .status-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 1rem;
}

.game-status-bar .alive-count {
  color: var(--gb-success);
  font-weight: 700;
  font-size: 1.1rem;
}

.game-status-bar .question-count {
  color: var(--gb-text-muted);
  font-weight: 500;
}

/* Golden Bell Question Section */
.golden-bell-question {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.02));
  border-radius: 24px;
  padding: 2rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

.golden-bell-question .question-timer {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding: 1rem 1.25rem;
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.2));
  border-radius: 16px;
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.golden-bell-question .question-timer .timer-value {
  font-size: 1.8rem;
  font-weight: 800;
  min-width: 2.5rem;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.golden-bell-question .question-timer .timer-bar {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 6px;
  background: linear-gradient(90deg, var(--gb-primary), var(--gb-primary-light));
  transition: width 1s linear;
  box-shadow: 0 0 15px rgba(244, 196, 48, 0.5);
}

.golden-bell-question .question-timer.warning .timer-value {
  color: #f39c12;
}

.golden-bell-question .question-timer.warning .timer-bar {
  background: linear-gradient(90deg, #f39c12, #f1c40f);
  box-shadow: 0 0 15px rgba(243, 156, 18, 0.5);
}

.golden-bell-question .question-timer.danger .timer-value {
  color: var(--gb-danger);
  animation: pulse 0.5s ease-in-out infinite;
}

.golden-bell-question .question-timer.danger .timer-bar {
  background: linear-gradient(90deg, var(--gb-danger), #ff6b6b);
  box-shadow: 0 0 20px rgba(231, 76, 60, 0.6);
}

.golden-bell-question .question-category {
  display: inline-block;
  padding: 0.6rem 1.5rem;
  border-radius: 25px;
  font-size: 0.9rem;
  margin-bottom: 1.25rem;
  font-weight: 600;
  letter-spacing: 1px;
  text-transform: uppercase;
  border: 1px solid rgba(255, 255, 255, 0.15);
}

.golden-bell-question .question-display {
  text-align: center;
  margin-bottom: 2rem;
}

.golden-bell-question .question-text {
  font-size: 2.2rem;
  margin: 0;
  line-height: 1.5;
  font-weight: 600;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* Golden Bell Answer Options */
.golden-bell-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.25rem;
}

.golden-bell-options .answer-option {
  position: relative;
  padding: 1.5rem;
  border: none;
  border-radius: 18px;
  color: white;
  font-size: 1.2rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  gap: 1.25rem;
  text-align: left;
  min-height: 100px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15);
  overflow: hidden;
}

.golden-bell-options .answer-option::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 50%;
  background: linear-gradient(to bottom, rgba(255, 255, 255, 0.1), transparent);
  border-radius: 18px 18px 0 0;
  pointer-events: none;
}

.golden-bell-options .answer-option:hover:not(:disabled) {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 12px 35px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.golden-bell-options .answer-option:active:not(:disabled) {
  transform: translateY(-2px) scale(1.01);
}

.golden-bell-options .answer-option:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.golden-bell-options .answer-option .option-label {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.golden-bell-options .answer-option .option-text {
  flex: 1;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.golden-bell-options .answer-option.selected {
  box-shadow: 0 0 0 5px rgba(255, 255, 255, 0.6), 0 12px 35px rgba(0, 0, 0, 0.4);
  transform: scale(1.02);
}

.golden-bell-options .answer-option.correct {
  box-shadow: 0 0 0 5px var(--gb-success), 0 0 40px rgba(46, 204, 113, 0.5);
  animation: correctPulseGB 0.5s ease;
}

@keyframes correctPulseGB {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.03); }
}

.golden-bell-options .answer-option.wrong {
  box-shadow: 0 0 0 5px var(--gb-danger);
  opacity: 0.5;
  transform: scale(0.98);
}

.golden-bell-options .answer-option .result-icon {
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
}

.golden-bell-options .answer-option.correct .result-icon {
  color: var(--gb-success);
}

.golden-bell-options .answer-option.wrong .result-icon {
  color: var(--gb-danger);
}

/* Answer Explanation */
.answer-explanation {
  text-align: center;
  padding: 1rem;
  margin-top: 1rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: var(--gb-text-muted);
  font-style: italic;
}

/* Elimination Results */
.elimination-results {
  margin-top: 1.5rem;
  padding: 1rem;
  background: rgba(231, 76, 60, 0.2);
  border: 2px solid var(--gb-danger);
  border-radius: 12px;
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.elimination-results .elimination-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
  color: var(--gb-danger);
  font-weight: 600;
  font-size: 1.1rem;
}

.eliminated-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}

.eliminated-player {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 20px;
}

.eliminated-player .avatar {
  font-size: 1.25rem;
}

.eliminated-player .name {
  font-size: 0.9rem;
  color: var(--gb-text-muted);
}

.more-eliminated {
  color: var(--gb-text-muted);
  font-size: 0.9rem;
  padding: 0.5rem;
}

/* Host Controls - Premium Styling */
.host-controls {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 1.75rem;
  animation: hostControlsAppear 0.4s ease forwards;
}

@keyframes hostControlsAppear {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.host-controls .reveal-btn,
.host-controls .next-btn {
  padding: 0.9rem 2.25rem;
  border: none;
  border-radius: 14px;
  font-size: 1.05rem;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.6rem;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.host-controls .reveal-btn::before,
.host-controls .next-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: hostBtnShine 2.5s ease infinite;
}

@keyframes hostBtnShine {
  0%, 100% { left: -100%; }
  50% { left: 100%; }
}

.host-controls .reveal-btn {
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-dark));
  color: #1a1a2e;
  box-shadow: 0 6px 20px rgba(244, 196, 48, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
  border: 2px solid rgba(255, 255, 255, 0.2);
}

.host-controls .next-btn {
  background: linear-gradient(135deg, var(--gb-success), #1e8449);
  color: white;
  box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.15);
}

.host-controls button:hover {
  transform: translateY(-3px) scale(1.02);
}

.host-controls .reveal-btn:hover {
  box-shadow: 0 10px 30px rgba(244, 196, 48, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.host-controls .next-btn:hover {
  box-shadow: 0 10px 30px rgba(39, 174, 96, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.host-controls button:active {
  transform: translateY(-1px) scale(0.98);
}

/* Golden Bell Stats Bar */
.golden-bell-stats {
  display: flex;
  justify-content: center;
  gap: 2rem;
  padding: 0.75rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  margin-top: 1rem;
}

.golden-bell-stats .stat-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.golden-bell-stats .stat-item.correct {
  color: var(--gb-success);
}

.golden-bell-stats .stat-item.status.alive {
  color: var(--gb-success);
  font-weight: 600;
}

/* Players Sidebar */
.players-sidebar {
  position: fixed;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  width: 200px;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 12px;
  padding: 1rem;
  max-height: 60vh;
  overflow-y: auto;
}

.players-sidebar .sidebar-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  color: var(--gb-text-muted);
  font-size: 0.9rem;
}

.players-sidebar .player-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  border-radius: 8px;
  margin-bottom: 0.25rem;
}

.players-sidebar .player-item.current {
  background: rgba(244, 196, 48, 0.2);
}

.players-sidebar .player-item.eliminated {
  opacity: 0.5;
}

.players-sidebar .player-item.eliminated .player-name {
  text-decoration: line-through;
}

.players-sidebar .player-item .player-avatar {
  font-size: 1.25rem;
}

.players-sidebar .player-item .player-name {
  flex: 1;
  font-size: 0.85rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.players-sidebar .player-item .player-status-icon {
  font-size: 0.8rem;
}

.players-sidebar .player-item.alive .player-status-icon {
  color: var(--gb-success);
}

.players-sidebar .player-item.eliminated .player-status-icon {
  color: var(--gb-danger);
}

.players-sidebar .more-players {
  text-align: center;
  font-size: 0.8rem;
  color: var(--gb-text-muted);
  padding-top: 0.5rem;
}

/* Eliminated View */
.eliminated-view {
  text-align: center;
  padding: 2rem;
}

.eliminated-banner {
  background: linear-gradient(135deg, rgba(231, 76, 60, 0.3), rgba(192, 57, 43, 0.3));
  border: 2px solid var(--gb-danger);
  border-radius: 20px;
  padding: 2rem;
  margin-bottom: 2rem;
}

.eliminated-banner svg {
  color: var(--gb-danger);
  margin-bottom: 1rem;
}

.eliminated-banner h2 {
  color: var(--gb-danger);
  margin-bottom: 0.5rem;
}

.eliminated-banner p {
  color: var(--gb-text-muted);
}

.spectator-info {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin-bottom: 2rem;
}

.spectator-info .spectator-stat {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
}

.spectator-question {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 16px;
  padding: 1.5rem;
  max-width: 600px;
  margin: 0 auto;
}

.spectator-question h3 {
  font-size: 1.5rem;
  margin-bottom: 1rem;
}

.spectator-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.75rem;
}

.spectator-option {
  padding: 0.75rem 1rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.spectator-option.correct {
  background: rgba(39, 174, 96, 0.3);
  border: 2px solid var(--gb-success);
}

.spectator-option .option-label {
  font-weight: 700;
  color: var(--gb-text-muted);
}

/* Golden Bell Results */
.golden-bell-results {
  max-width: 800px;
  margin: 0 auto;
  padding: 1rem;
}

.golden-bell-results .results-header {
  text-align: center;
  margin-bottom: 2rem;
}

.golden-bell-results .results-icon {
  width: 100px;
  height: 100px;
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-dark));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1rem;
  box-shadow: 0 8px 32px rgba(244, 196, 48, 0.4);
}

.golden-bell-results .results-icon svg {
  color: #1a1a2e;
}

/* Winner Announcement */
.winner-announcement {
  text-align: center;
  background: linear-gradient(145deg, rgba(255, 215, 0, 0.25), rgba(255, 193, 7, 0.15));
  border: 3px solid rgba(255, 215, 0, 0.6);
  border-radius: 28px;
  padding: 2.5rem 2rem;
  margin-bottom: 2rem;
  position: relative;
  overflow: hidden;
  box-shadow: 0 15px 50px rgba(255, 215, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  animation: winnerAppear 0.6s ease forwards;
}

@keyframes winnerAppear {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}

.winner-announcement::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: conic-gradient(from 0deg, transparent, rgba(255, 215, 0, 0.15), transparent, rgba(255, 215, 0, 0.1), transparent);
  animation: winnerSpin 4s linear infinite;
}

@keyframes winnerSpin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.winner-announcement::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  animation: winnerShine 2s ease infinite;
}

@keyframes winnerShine {
  0% { left: -100%; }
  100% { left: 100%; }
}

.winner-announcement .winner-crown {
  color: #ffd700;
  margin-bottom: 0.75rem;
  animation: winnerCrownBounce 1s ease-in-out infinite;
  position: relative;
  z-index: 1;
  filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.8));
}

.winner-announcement .winner-crown svg {
  width: 60px;
  height: 60px;
}

@keyframes winnerCrownBounce {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-15px) scale(1.1); }
}

.winner-announcement .winner-avatar {
  font-size: 5rem;
  margin-bottom: 0.75rem;
  position: relative;
  z-index: 1;
  animation: avatarPulse 2s ease infinite;
  filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.3));
}

@keyframes avatarPulse {
  0%, 100% { transform: scale(1); filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.4)); }
  50% { transform: scale(1.05); filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.7)); }
}

.winner-announcement h2 {
  font-size: 2.25rem;
  font-weight: 800;
  margin-bottom: 0.5rem;
  color: #ffffff;
  text-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  position: relative;
  z-index: 1;
}

.winner-announcement .winner-title {
  color: #ffd700;
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 1.25rem;
  text-shadow: 0 2px 10px rgba(255, 215, 0, 0.5);
  position: relative;
  z-index: 1;
  letter-spacing: 1px;
}

.winner-announcement .winner-stats {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 1.25rem;
  color: rgba(255, 255, 255, 0.85);
  font-size: 0.95rem;
  position: relative;
  z-index: 1;
}

.winner-announcement .winner-stats span {
  background: rgba(0, 0, 0, 0.2);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  backdrop-filter: blur(5px);
}

/* No Winner */
.no-winner {
  text-align: center;
  background: rgba(231, 76, 60, 0.1);
  border: 2px solid var(--gb-danger);
  border-radius: 20px;
  padding: 2rem;
  margin-bottom: 2rem;
}

.no-winner svg {
  color: var(--gb-danger);
  margin-bottom: 1rem;
}

.no-winner h2 {
  color: var(--gb-danger);
}

/* Golden Bell Podium */
.golden-bell-podium {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 1.5rem;
  margin-bottom: 2rem;
  padding: 1rem;
}

.golden-bell-podium .podium-place {
  text-align: center;
  padding: 1rem;
  animation: podiumSlideUp 0.6s ease forwards;
  opacity: 0;
}

.golden-bell-podium .podium-place.first {
  order: 2;
  animation-delay: 0.3s;
}

.golden-bell-podium .podium-place.second {
  order: 1;
  animation-delay: 0.5s;
}

.golden-bell-podium .podium-place.third {
  order: 3;
  animation-delay: 0.7s;
}

.golden-bell-podium .podium-player {
  margin-bottom: 0.75rem;
}

.golden-bell-podium .player-avatar {
  font-size: 2.5rem;
  display: block;
  filter: drop-shadow(0 4px 10px rgba(0, 0, 0, 0.3));
  transition: transform 0.3s ease;
}

.golden-bell-podium .podium-place:hover .player-avatar {
  transform: scale(1.15);
}

.golden-bell-podium .podium-place.first .player-avatar {
  font-size: 4rem;
  animation: goldAvatarFloat 2s ease-in-out infinite;
}

@keyframes goldAvatarFloat {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-8px) scale(1.05); }
}

.golden-bell-podium .podium-stats {
  font-size: 0.85rem;
  color: var(--gb-text-muted);
  margin-bottom: 0.5rem;
}

.golden-bell-podium .podium-block {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1rem 1.75rem;
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.golden-bell-podium .podium-block::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: podiumShine 3s ease infinite;
}

@keyframes podiumShine {
  0%, 100% { left: -100%; }
  50% { left: 100%; }
}

.golden-bell-podium .podium-place.first .podium-block {
  background: linear-gradient(145deg, #ffd700, #ffb300);
  color: #1a1a2e;
  padding: 1.25rem 2.5rem;
  box-shadow: 0 8px 30px rgba(255, 215, 0, 0.5), 0 4px 15px rgba(0, 0, 0, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.3);
}

.golden-bell-podium .podium-place.second .podium-block {
  background: linear-gradient(145deg, #e0e0e0, #c0c0c0);
  color: #1a1a2e;
  box-shadow: 0 6px 25px rgba(192, 192, 192, 0.5), 0 3px 12px rgba(0, 0, 0, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.4);
}

.golden-bell-podium .podium-place.third .podium-block {
  background: linear-gradient(145deg, #daa06d, #cd7f32);
  color: #1a1a2e;
  box-shadow: 0 6px 25px rgba(205, 127, 50, 0.5), 0 3px 12px rgba(0, 0, 0, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.2);
}

.golden-bell-podium .medal {
  font-size: 1.75rem;
  filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.3));
}

.golden-bell-podium .position {
  font-weight: 800;
  font-size: 1.1rem;
}

/* Golden Bell Rankings */
.golden-bell-rankings .ranking-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.9rem 1.1rem;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
  border-radius: 12px;
  margin-bottom: 0.6rem;
  border: 1px solid rgba(255, 255, 255, 0.08);
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  animation: gbRankSlide 0.4s ease forwards;
  opacity: 0;
}

.golden-bell-rankings .ranking-item:nth-child(1) { animation-delay: 0.2s; }
.golden-bell-rankings .ranking-item:nth-child(2) { animation-delay: 0.25s; }
.golden-bell-rankings .ranking-item:nth-child(3) { animation-delay: 0.3s; }
.golden-bell-rankings .ranking-item:nth-child(4) { animation-delay: 0.35s; }
.golden-bell-rankings .ranking-item:nth-child(5) { animation-delay: 0.4s; }

@keyframes gbRankSlide {
  from { opacity: 0; transform: translateX(-15px); }
  to { opacity: 1; transform: translateX(0); }
}

.golden-bell-rankings .ranking-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(244, 196, 48, 0.1), transparent);
  transition: left 0.5s ease;
}

.golden-bell-rankings .ranking-item:hover::before {
  left: 100%;
}

.golden-bell-rankings .ranking-item:hover {
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.05));
  transform: translateX(5px);
  border-color: rgba(244, 196, 48, 0.3);
}

.golden-bell-rankings .ranking-item.current {
  background: linear-gradient(145deg, rgba(244, 196, 48, 0.15), rgba(244, 196, 48, 0.08));
  border: 2px solid var(--gb-primary);
  box-shadow: 0 4px 20px rgba(244, 196, 48, 0.2);
}

.golden-bell-rankings .ranking-item.current::after {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg, var(--gb-primary), var(--gb-primary-dark));
}

.golden-bell-rankings .ranking-item.winner {
  background: linear-gradient(145deg, rgba(244, 196, 48, 0.25), rgba(212, 168, 32, 0.15));
  border-color: rgba(255, 215, 0, 0.5);
  box-shadow: 0 6px 25px rgba(255, 215, 0, 0.25);
}

.golden-bell-rankings .ranking-position {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-weight: 800;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
}

.golden-bell-rankings .ranking-item:nth-child(1) .ranking-position {
  background: linear-gradient(145deg, #ffd700, #ffaa00);
  color: #1a1a2e;
  box-shadow: 0 2px 12px rgba(255, 215, 0, 0.5);
}

.golden-bell-rankings .ranking-item:nth-child(2) .ranking-position {
  background: linear-gradient(145deg, #e0e0e0, #b0b0b0);
  color: #1a1a2e;
  box-shadow: 0 2px 10px rgba(192, 192, 192, 0.4);
}

.golden-bell-rankings .ranking-item:nth-child(3) .ranking-position {
  background: linear-gradient(145deg, #daa06d, #cd7f32);
  color: #1a1a2e;
  box-shadow: 0 2px 10px rgba(205, 127, 50, 0.4);
}

.golden-bell-rankings .ranking-avatar {
  font-size: 1.75rem;
  filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.2));
}

.golden-bell-rankings .ranking-info {
  flex: 1;
}

.golden-bell-rankings .ranking-name {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
  font-size: 0.95rem;
}

.golden-bell-rankings .ranking-name .winner-icon {
  color: var(--gb-primary);
  filter: drop-shadow(0 0 5px rgba(244, 196, 48, 0.5));
  animation: winnerIconPulse 1.5s ease infinite;
}

@keyframes winnerIconPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

.golden-bell-rankings .ranking-survived {
  font-size: 0.8rem;
  color: var(--gb-text-muted);
}

.golden-bell-rankings .ranking-stats {
  text-align: right;
}

.golden-bell-rankings .ranking-correct {
  display: block;
  font-weight: 700;
  color: var(--gb-success);
  text-shadow: 0 0 8px rgba(39, 174, 96, 0.4);
}

.golden-bell-rankings .ranking-accuracy {
  font-size: 0.8rem;
  color: var(--gb-text-muted);
}

/* Golden Bell Button */
.golden-bell-btn {
  background: linear-gradient(135deg, var(--gb-primary), var(--gb-primary-dark)) !important;
  color: #1a1a2e !important;
}

/* Error Toast */
.golden-bell-error-toast {
  position: fixed;
  top: 1rem;
  left: 50%;
  transform: translateX(-50%);
  background: var(--gb-danger);
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 1rem;
  z-index: 1000;
  animation: slideDown 0.3s ease;
}

@keyframes slideDown {
  from { transform: translate(-50%, -100%); opacity: 0; }
  to { transform: translate(-50%, 0); opacity: 1; }
}

.golden-bell-error-toast button {
  background: none;
  border: none;
  color: white;
  font-size: 1.25rem;
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

/* Loading Overlay */
.golden-bell-loading-overlay {
  position: fixed;
  inset: 0;
  background: rgba(26, 26, 46, 0.9);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  z-index: 1000;
}

.golden-bell-loading-overlay .bell-spinner {
  width: 60px;
  height: 60px;
  border: 4px solid rgba(244, 196, 48, 0.2);
  border-top-color: var(--gb-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

/* Responsive */
@media (max-width: 768px) {
  .golden-bell-menu h1 {
    font-size: 2rem;
  }

  .golden-bell-question .question-text {
    font-size: 1.5rem;
  }

  .golden-bell-options {
    grid-template-columns: 1fr;
  }

  .golden-bell-options .answer-option {
    min-height: 60px;
  }

  .players-sidebar {
    position: static;
    transform: none;
    width: 100%;
    max-height: 200px;
    margin-top: 1rem;
  }

  .golden-bell-podium {
    flex-wrap: wrap;
  }

  .golden-bell-podium .podium-place {
    width: 100%;
    order: unset !important;
  }

  .golden-bell-podium .podium-place.first {
    order: -1 !important;
  }

  .spectator-options {
    grid-template-columns: 1fr;
  }
}

/* ============ PICTURE GUESS GAME STYLES ============ */
/* Đuổi Hình Bắt Chữ - Image-based word guessing game */

/* Color scheme: Teal/Cyan - fresh, playful, creative */
:root {
  --pg-primary: #00ACC1;
  --pg-primary-dark: #00838F;
  --pg-primary-light: #4DD0E1;
  --pg-secondary: #26C6DA;
  --pg-accent: #FFB300;
  --pg-success: #66BB6A;
  --pg-error: #EF5350;
  --pg-background: linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 50%, #E0F2F1 100%);
}

.picture-guess-page {
  min-height: calc(100vh - 64px);
  background: var(--pg-background);
  padding: 2rem;
}

/* ============ Menu Styles ============ */
.picture-guess-menu {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem;
}

.pg-menu-hero {
  text-align: center;
  margin-bottom: 3rem;
  position: relative;
}

.pg-hero-icon {
  position: relative;
  display: inline-block;
  margin-bottom: 1rem;
  color: var(--pg-primary);
}

.pg-hero-icon .sparkle {
  position: absolute;
  color: var(--pg-accent);
  animation: sparkle 1.5s ease-in-out infinite;
}

.pg-hero-icon .sparkle-1 {
  top: -10px;
  right: -15px;
  animation-delay: 0.3s;
}

.pg-hero-icon .sparkle-2 {
  bottom: 0;
  left: -10px;
  animation-delay: 0.8s;
}

@keyframes sparkle {
  0%, 100% { opacity: 0.3; transform: scale(0.8) rotate(0deg); }
  50% { opacity: 1; transform: scale(1.2) rotate(15deg); }
}

.pg-hero-title {
  font-size: 2.5rem;
  font-weight: 800;
  color: var(--pg-primary-dark);
  margin-bottom: 0.5rem;
  text-shadow: 2px 2px 4px rgba(0, 172, 193, 0.2);
}

.pg-hero-subtitle {
  font-size: 1.2rem;
  color: var(--pg-primary);
  opacity: 0.9;
}

.pg-error-banner {
  background: linear-gradient(135deg, var(--pg-error), #C62828);
  color: white;
  padding: 1rem;
  border-radius: 12px;
  text-align: center;
  margin-bottom: 2rem;
  animation: shake 0.5s ease;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.pg-menu-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
  margin-bottom: 2rem;
}

.pg-menu-card {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  box-shadow: 0 8px 32px rgba(0, 172, 193, 0.15);
  cursor: pointer;
  transition: all 0.3s ease;
  border: 3px solid transparent;
}

.pg-menu-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 40px rgba(0, 172, 193, 0.25);
}

.pg-menu-card.single-player {
  border-color: var(--pg-primary-light);
}

.pg-menu-card.single-player:hover {
  border-color: var(--pg-primary);
}

.pg-menu-card.multiplayer {
  border-color: var(--pg-secondary);
}

.pg-menu-card.multiplayer:hover {
  border-color: var(--pg-primary-dark);
}

.pg-card-icon {
  width: 70px;
  height: 70px;
  background: linear-gradient(135deg, var(--pg-primary), var(--pg-secondary));
  border-radius: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  margin-bottom: 1.5rem;
}

.pg-menu-card h3 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--pg-primary-dark);
  margin-bottom: 0.5rem;
}

.pg-menu-card > p {
  color: #666;
  margin-bottom: 1rem;
}

.pg-card-features {
  list-style: none;
  padding: 0;
  margin: 0 0 1.5rem;
}

.pg-card-features li {
  padding: 0.5rem 0;
  padding-left: 1.5rem;
  position: relative;
  color: #555;
  font-size: 0.9rem;
}

.pg-card-features li::before {
  content: '✓';
  position: absolute;
  left: 0;
  color: var(--pg-success);
  font-weight: bold;
}

.pg-card-btn {
  width: 100%;
  padding: 0.875rem 1.5rem;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pg-card-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.pg-menu-card.single-player .pg-card-btn {
  background: linear-gradient(135deg, var(--pg-primary), var(--pg-primary-dark));
  color: white;
}

.pg-menu-card.single-player .pg-card-btn:hover:not(:disabled) {
  background: linear-gradient(135deg, var(--pg-primary-dark), var(--pg-primary));
  transform: translateY(-2px);
}

.pg-card-buttons {
  display: flex;
  gap: 0.75rem;
}

.pg-card-buttons .pg-card-btn {
  flex: 1;
}

.pg-card-btn.primary {
  background: linear-gradient(135deg, var(--pg-primary), var(--pg-primary-dark));
  color: white;
}

.pg-card-btn.primary:hover:not(:disabled) {
  background: linear-gradient(135deg, var(--pg-primary-dark), var(--pg-primary));
}

.pg-card-btn.secondary {
  background: white;
  border: 2px solid var(--pg-primary);
  color: var(--pg-primary);
}

.pg-card-btn.secondary:hover:not(:disabled) {
  background: var(--pg-primary-light);
  color: white;
  border-color: var(--pg-primary-light);
}

.pg-menu-actions {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.pg-action-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: white;
  border: 2px solid var(--pg-primary-light);
  border-radius: 12px;
  color: var(--pg-primary-dark);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pg-action-btn:hover {
  background: var(--pg-primary-light);
  color: white;
  border-color: var(--pg-primary);
}

.pg-menu-actions .pg-action-btn.primary {
  background: linear-gradient(135deg, var(--pg-primary), var(--pg-primary-dark));
  color: white;
  border-color: transparent;
}

.pg-menu-actions .pg-action-btn.primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 172, 193, 0.3);
}

/* Modal Styles */
.pg-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(4px);
}

.pg-modal {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  max-width: 500px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  animation: modalSlide 0.3s ease;
}

@keyframes modalSlide {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.pg-modal h3 {
  font-size: 1.5rem;
  color: var(--pg-primary-dark);
  margin-bottom: 0.5rem;
}

.pg-modal > p {
  color: #666;
  margin-bottom: 1.5rem;
}

.pg-code-input {
  width: 100%;
  padding: 1rem;
  font-size: 2rem;
  text-align: center;
  letter-spacing: 0.5rem;
  border: 3px solid var(--pg-primary-light);
  border-radius: 12px;
  font-family: 'Monaco', monospace;
  transition: border-color 0.2s ease;
}

.pg-code-input:focus {
  outline: none;
  border-color: var(--pg-primary);
}

.pg-modal-actions {
  display: flex;
  gap: 1rem;
  margin-top: 1.5rem;
}

.pg-modal-actions .btn {
  flex: 1;
  padding: 0.875rem;
  border-radius: 12px;
  font-weight: 600;
}

/* Instructions Modal */
.instructions-modal {
  max-width: 600px;
}

.instruction-section {
  margin-bottom: 1.5rem;
}

.instruction-section h4 {
  font-size: 1.1rem;
  color: var(--pg-primary-dark);
  margin-bottom: 0.5rem;
}

.instruction-section p,
.instruction-section li {
  color: #555;
  line-height: 1.6;
}

.instruction-section ol,
.instruction-section ul {
  padding-left: 1.5rem;
}

.instruction-section li {
  margin-bottom: 0.5rem;
}

/* ============ Setup Styles ============ */
.picture-guess-setup {
  max-width: 600px;
  margin: 0 auto;
  background: white;
  border-radius: 20px;
  padding: 2rem;
  box-shadow: 0 8px 32px rgba(0, 172, 193, 0.15);
}

.pg-back-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 52px;
  height: 52px;
  background: linear-gradient(135deg, rgba(0, 172, 193, 0.08), rgba(0, 137, 155, 0.04));
  border: 1px solid rgba(0, 172, 193, 0.2);
  border-radius: 14px;
  color: var(--jp-sumi-medium);
  cursor: pointer;
  margin-bottom: 1.5rem;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 16px rgba(0, 172, 193, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

.pg-back-btn svg {
  width: 22px;
  height: 22px;
}

.pg-back-btn:hover {
  background: linear-gradient(135deg, rgba(0, 172, 193, 0.15), rgba(0, 137, 155, 0.08));
  border-color: var(--pg-primary);
  color: var(--pg-primary);
  transform: translateX(-4px);
  box-shadow: 0 6px 24px rgba(0, 172, 193, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

.pg-setup-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
  color: var(--pg-primary-dark);
}

.pg-setup-header h2 {
  font-size: 1.5rem;
  font-weight: 700;
}

.pg-setup-form {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.pg-form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.pg-form-group label {
  font-weight: 600;
  color: var(--pg-primary-dark);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.pg-form-group input[type="text"] {
  padding: 0.875rem 1rem;
  border: 2px solid #E0E0E0;
  border-radius: 12px;
  font-size: 1rem;
  transition: border-color 0.2s ease;
}

.pg-form-group input[type="text"]:focus {
  outline: none;
  border-color: var(--pg-primary);
}

.pg-level-buttons {
  display: flex;
  gap: 0.5rem;
}

.pg-level-btn {
  flex: 1;
  padding: 0.75rem;
  border: 2px solid var(--pg-primary-light);
  background: white;
  border-radius: 10px;
  font-weight: 600;
  color: var(--pg-primary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.pg-level-btn:hover {
  background: var(--pg-primary-light);
  color: white;
}

.pg-level-btn.active {
  background: var(--pg-primary);
  border-color: var(--pg-primary);
  color: white;
}

.pg-form-group input[type="range"] {
  width: 100%;
  height: 8px;
  border-radius: 4px;
  background: #E0E0E0;
  appearance: none;
  cursor: pointer;
}

.pg-form-group input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--pg-primary);
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}

.pg-range-labels {
  display: flex;
  justify-content: space-between;
  font-size: 0.85rem;
  color: #888;
}

.pg-form-toggles {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1rem;
  background: #F5F5F5;
  border-radius: 12px;
}

.pg-toggle {
  display: flex;
  align-items: center;
  gap: 1rem;
  cursor: pointer;
}

.pg-toggle input[type="checkbox"] {
  display: none;
}

.pg-toggle-slider {
  width: 48px;
  height: 26px;
  background: #CCC;
  border-radius: 13px;
  position: relative;
  transition: background 0.2s ease;
  flex-shrink: 0;
}

.pg-toggle-slider::after {
  content: '';
  position: absolute;
  width: 22px;
  height: 22px;
  background: white;
  border-radius: 50%;
  top: 2px;
  left: 2px;
  transition: transform 0.2s ease;
}

.pg-toggle input:checked + .pg-toggle-slider {
  background: var(--pg-primary);
}

.pg-toggle input:checked + .pg-toggle-slider::after {
  transform: translateX(22px);
}

.pg-toggle-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: #444;
}

.pg-start-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  width: 100%;
  padding: 1rem;
  background: linear-gradient(135deg, var(--pg-primary), var(--pg-primary-dark));
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-top: 1rem;
}

.pg-start-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 172, 193, 0.4);
}

.pg-start-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ============ Lobby Styles ============ */
.picture-guess-lobby {
  max-width: 600px;
  margin: 0 auto;
  background: white;
  border-radius: 20px;
  padding: 2rem;
  box-shadow: 0 8px 32px rgba(0, 172, 193, 0.15);
}

.pg-lobby-header {
  text-align: center;
  margin-bottom: 2rem;
}

.pg-room-icon {
  width: 80px;
  height: 80px;
  background: linear-gradient(135deg, var(--pg-primary), var(--pg-secondary));
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  margin: 0 auto 1rem;
}

.pg-room-title {
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--pg-primary-dark);
}

.pg-room-subtitle {
  color: #888;
}

.pg-room-code-section {
  text-align: center;
  margin-bottom: 2rem;
  padding: 1.5rem;
  background: linear-gradient(135deg, #E0F7FA, #B2EBF2);
  border-radius: 16px;
}

.pg-code-label {
  font-size: 0.9rem;
  color: var(--pg-primary-dark);
  margin-bottom: 0.5rem;
}

.pg-code-display {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  background: white;
  padding: 0.75rem 1.5rem;
  border-radius: 12px;
  cursor: pointer;
  border: 2px solid var(--pg-primary-light);
  transition: all 0.2s ease;
}

.pg-code-display:hover {
  border-color: var(--pg-primary);
}

.pg-code-value {
  font-size: 2rem;
  font-weight: 700;
  color: var(--pg-primary-dark);
  letter-spacing: 0.25rem;
  font-family: 'Monaco', monospace;
}

.pg-copy-btn {
  background: none;
  border: none;
  color: var(--pg-primary);
  cursor: pointer;
  padding: 0.25rem;
}

.pg-copied-text {
  display: block;
  color: var(--pg-success);
  font-size: 0.9rem;
  margin-top: 0.5rem;
}

.pg-code-hint {
  font-size: 0.85rem;
  color: #666;
  margin-top: 0.75rem;
}

.pg-lobby-settings {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
  margin-bottom: 2rem;
}

.pg-setting-item {
  text-align: center;
  padding: 1rem;
  background: #F5F5F5;
  border-radius: 12px;
}

.pg-setting-label {
  display: block;
  font-size: 0.8rem;
  color: #888;
  margin-bottom: 0.25rem;
}

.pg-setting-value {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--pg-primary-dark);
}

.pg-lobby-players {
  margin-bottom: 2rem;
}

.pg-players-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--pg-primary-dark);
  font-weight: 600;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #E0E0E0;
}

.pg-players-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.pg-player-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  background: #FAFAFA;
  border-radius: 10px;
  border: 2px solid transparent;
  transition: all 0.2s ease;
}

.pg-player-item.current {
  background: #E0F7FA;
  border-color: var(--pg-primary-light);
}

.pg-player-item.empty {
  opacity: 0.5;
  border: 2px dashed #CCC;
  background: transparent;
}

.pg-player-avatar {
  font-size: 1.5rem;
}

.pg-player-name {
  flex: 1;
  font-weight: 500;
  color: #333;
}

.pg-host-badge {
  color: var(--pg-accent);
}

.pg-lobby-actions {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.pg-waiting-host {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  padding: 1rem;
  color: #666;
}

.pg-waiting-spinner {
  width: 24px;
  height: 24px;
  border: 3px solid var(--pg-primary-light);
  border-top-color: var(--pg-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.pg-leave-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem;
  background: white;
  border: 2px solid #E57373;
  border-radius: 12px;
  color: #E57373;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pg-leave-btn:hover {
  background: #FFEBEE;
}

/* ============ Play Styles ============ */
.picture-guess-play {
  max-width: 800px;
  margin: 0 auto;
  position: relative;
  min-height: 600px;
}

.picture-guess-play.starting {
  display: flex;
  align-items: center;
  justify-content: center;
}

.pg-countdown-display {
  text-align: center;
  background: linear-gradient(135deg, white, #f8f9fa);
  padding: 4rem;
  border-radius: 28px;
  box-shadow: 0 15px 60px rgba(0, 172, 193, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(0, 172, 193, 0.1);
}

.pg-countdown-icon {
  color: var(--pg-primary);
  margin-bottom: 1.5rem;
  animation: pulse 1s ease-in-out infinite;
  filter: drop-shadow(0 4px 15px rgba(0, 172, 193, 0.3));
}

.pg-countdown-display h2 {
  font-size: 2rem;
  color: var(--pg-primary-dark);
  margin-bottom: 1.25rem;
  font-weight: 700;
}

.pg-countdown-number {
  font-size: 6rem;
  font-weight: 900;
  color: var(--pg-primary);
  animation: countPulse 1s ease-in-out infinite;
  text-shadow: 0 4px 20px rgba(0, 172, 193, 0.3);
}

@keyframes countPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.picture-guess-play.guessed {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.pg-guessed-display {
  text-align: center;
  background: white;
  padding: 3rem;
  border-radius: 24px;
  box-shadow: 0 12px 40px rgba(0, 172, 193, 0.2);
  margin-bottom: 2rem;
}

.pg-guessed-display svg {
  color: var(--pg-success);
  margin-bottom: 1rem;
}

.pg-guessed-display h2 {
  font-size: 2rem;
  color: var(--pg-success);
  margin-bottom: 0.5rem;
}

.pg-your-score {
  margin-top: 1rem;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--pg-primary-dark);
}

.pg-mini-leaderboard {
  background: white;
  padding: 1.5rem;
  border-radius: 16px;
  width: 100%;
  max-width: 400px;
}

.pg-mini-leaderboard h4 {
  color: var(--pg-primary-dark);
  margin-bottom: 1rem;
  text-align: center;
}

.pg-mini-player {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem;
  border-radius: 8px;
}

.pg-mini-player.current {
  background: #E0F7FA;
}

.pg-mini-player .rank {
  font-weight: 600;
  color: var(--pg-primary);
  width: 32px;
}

.pg-mini-player .avatar {
  font-size: 1.25rem;
}

.pg-mini-player .name {
  flex: 1;
}

.pg-mini-player .score {
  font-weight: 600;
  color: var(--pg-primary-dark);
}

/* Status Bar */
.pg-status-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.25rem 1.5rem;
  background: linear-gradient(135deg, white, #f8f9fa);
  border-radius: 16px;
  margin-bottom: 1.5rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(0, 172, 193, 0.1);
}

.pg-status-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--pg-primary-dark);
  font-weight: 600;
  font-size: 1rem;
}

/* Puzzle Section */
.pg-puzzle-section {
  background: linear-gradient(135deg, white, #fafafa);
  border-radius: 24px;
  padding: 2.5rem;
  box-shadow: 0 12px 50px rgba(0, 172, 193, 0.18), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(0, 172, 193, 0.08);
}

/* Timer */
.pg-timer {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.25rem 1.5rem;
  background: linear-gradient(135deg, var(--pg-primary), var(--pg-secondary));
  border-radius: 16px;
  color: white;
  margin-bottom: 1.75rem;
  position: relative;
  overflow: hidden;
  box-shadow: 0 6px 25px rgba(0, 172, 193, 0.35);
}

.pg-timer.warning {
  background: linear-gradient(135deg, #FFA726, #FF9800);
  box-shadow: 0 6px 25px rgba(255, 167, 38, 0.4);
}

.pg-timer.danger {
  background: linear-gradient(135deg, var(--pg-error), #C62828);
  animation: timerPulse 0.5s ease-in-out infinite;
  box-shadow: 0 6px 25px rgba(229, 57, 53, 0.5);
}

@keyframes timerPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}

.pg-timer-value {
  font-size: 2rem;
  font-weight: 800;
  min-width: 55px;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.pg-timer-bar {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 6px;
  background: rgba(255, 255, 255, 0.6);
  transition: width 1s linear;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
}

/* Emoji Display */
.pg-emoji-display {
  text-align: center;
  padding: 3rem 2rem;
  background: linear-gradient(135deg, #E0F7FA, #B2EBF2);
  border-radius: 20px;
  margin-bottom: 1.5rem;
  position: relative;
}

.pg-emoji-container {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.pg-emoji {
  font-size: 4rem;
  animation: emojiFloat 2s ease-in-out infinite;
}

.pg-emoji:nth-child(2) { animation-delay: 0.3s; }
.pg-emoji:nth-child(3) { animation-delay: 0.6s; }
.pg-emoji:nth-child(4) { animation-delay: 0.9s; }

@keyframes emojiFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.pg-points-badge {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: var(--pg-accent);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-weight: 600;
  font-size: 0.9rem;
}

/* Hints Section */
.pg-hints-section {
  margin-bottom: 1.5rem;
}

.pg-hints-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--pg-primary-dark);
  font-weight: 600;
  margin-bottom: 0.75rem;
}

.pg-hints-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

.pg-hint-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.75rem;
  background: white;
  border: 2px solid var(--pg-primary-light);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.pg-hint-btn:hover:not(:disabled) {
  border-color: var(--pg-primary);
  background: #E0F7FA;
}

.pg-hint-btn:disabled {
  cursor: not-allowed;
}

.pg-hint-btn.used {
  background: #F5F5F5;
  border-color: #E0E0E0;
}

.pg-hint-btn .hint-emoji {
  font-size: 1.5rem;
  margin-bottom: 0.25rem;
}

.pg-hint-btn .hint-label {
  font-size: 0.85rem;
  color: #666;
}

.pg-hint-btn .hint-cost {
  position: absolute;
  top: 0.25rem;
  right: 0.5rem;
  font-size: 0.75rem;
  color: var(--pg-error);
  font-weight: 600;
}

.pg-hint-btn .hint-content {
  margin-top: 0.5rem;
  padding: 0.5rem;
  background: var(--pg-primary-light);
  color: white;
  border-radius: 6px;
  font-size: 0.9rem;
  font-weight: 600;
}

/* Answer Form */
.pg-answer-form {
  margin-bottom: 1rem;
}

.pg-input-wrapper {
  display: flex;
  gap: 0.5rem;
  border: 3px solid var(--pg-primary-light);
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s ease;
}

.pg-input-wrapper:focus-within {
  border-color: var(--pg-primary);
}

.pg-input-wrapper.correct {
  border-color: var(--pg-success);
  animation: correctPulse 0.5s ease;
}

.pg-input-wrapper.wrong {
  border-color: var(--pg-error);
  animation: shake 0.5s ease;
}

@keyframes correctPulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(102, 187, 106, 0.5); }
  50% { box-shadow: 0 0 0 10px rgba(102, 187, 106, 0); }
}

.pg-input-wrapper input {
  flex: 1;
  padding: 1rem 1.25rem;
  border: none;
  font-size: 1.25rem;
  outline: none;
}

.pg-submit-btn {
  padding: 1rem 1.5rem;
  background: var(--pg-primary);
  border: none;
  color: white;
  cursor: pointer;
  transition: background 0.2s ease;
}

.pg-submit-btn:hover:not(:disabled) {
  background: var(--pg-primary-dark);
}

.pg-submit-btn:disabled {
  background: #CCC;
  cursor: not-allowed;
}

.pg-result-text {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 0.5rem;
  font-weight: 500;
}

.pg-result-text.wrong {
  color: var(--pg-error);
}

/* Answer Reveal */
.pg-answer-reveal {
  text-align: center;
  animation: fadeIn 0.5s ease;
}

.pg-answer-card {
  background: linear-gradient(135deg, var(--pg-primary), var(--pg-secondary));
  color: white;
  padding: 2rem;
  border-radius: 16px;
  margin-bottom: 1.5rem;
}

.pg-answer-label {
  font-size: 0.9rem;
  opacity: 0.9;
  margin-bottom: 0.5rem;
}

.pg-answer-word {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
}

.pg-answer-reading {
  font-size: 1.25rem;
  opacity: 0.9;
  margin-bottom: 0.5rem;
}

.pg-answer-meaning {
  font-size: 1.1rem;
  margin-bottom: 0.5rem;
}

.pg-answer-sino {
  font-size: 0.9rem;
  opacity: 0.8;
}

.pg-round-results {
  background: #FAFAFA;
  padding: 1.5rem;
  border-radius: 12px;
  margin-bottom: 1.5rem;
}

.pg-round-results h4 {
  color: var(--pg-primary-dark);
  margin-bottom: 1rem;
}

.pg-results-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.pg-result-player {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem 0.75rem;
  background: white;
  border-radius: 8px;
}

.pg-result-player.correct svg {
  color: var(--pg-success);
}

.pg-result-player .avatar {
  font-size: 1.25rem;
}

.pg-result-player .name {
  flex: 1;
  color: #333;
}

.pg-result-player .time {
  color: #888;
  font-size: 0.9rem;
}

.pg-timeout-count {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--pg-error);
  padding: 0.5rem;
  justify-content: center;
}

.pg-next-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem 2rem;
  background: linear-gradient(135deg, var(--pg-primary), var(--pg-primary-dark));
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pg-next-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 172, 193, 0.4);
}

/* Score Bar */
.pg-score-bar {
  display: flex;
  justify-content: space-around;
  padding: 1rem;
  background: white;
  border-radius: 12px;
  margin-top: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.pg-score-item {
  text-align: center;
}

.pg-score-item .label {
  display: block;
  font-size: 0.8rem;
  color: #888;
  margin-bottom: 0.25rem;
}

.pg-score-item .value {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--pg-primary-dark);
}

/* Players Sidebar */
.pg-players-sidebar {
  position: fixed;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  width: 200px;
  background: white;
  border-radius: 12px;
  padding: 1rem;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  max-height: 400px;
  overflow-y: auto;
}

.pg-sidebar-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--pg-primary-dark);
  font-weight: 600;
  margin-bottom: 0.75rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid #E0E0E0;
}

.pg-sidebar-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.pg-sidebar-player {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  border-radius: 8px;
  font-size: 0.85rem;
  transition: background 0.2s ease;
}

.pg-sidebar-player.current {
  background: #E0F7FA;
}

.pg-sidebar-player .rank {
  color: var(--pg-primary);
  font-weight: 600;
  width: 28px;
}

.pg-sidebar-player .avatar {
  font-size: 1.1rem;
}

.pg-sidebar-player .name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.pg-sidebar-player .score {
  font-weight: 600;
  color: var(--pg-primary-dark);
}

/* ============ Results Styles ============ */
.picture-guess-results {
  max-width: 700px;
  margin: 0 auto;
  padding: 2rem;
}

.pg-results-hero {
  text-align: center;
  background: white;
  padding: 3rem;
  border-radius: 24px;
  margin-bottom: 2rem;
  box-shadow: 0 8px 32px rgba(0, 172, 193, 0.15);
  position: relative;
  overflow: hidden;
}

.pg-results-hero.winner {
  background: linear-gradient(135deg, #FFF9C4, #FFECB3);
}

.pg-confetti {
  position: absolute;
  inset: 0;
  background-image: 
    radial-gradient(circle, var(--pg-accent) 2px, transparent 2px),
    radial-gradient(circle, var(--pg-primary) 2px, transparent 2px),
    radial-gradient(circle, var(--pg-success) 2px, transparent 2px);
  background-size: 50px 50px, 40px 40px, 60px 60px;
  background-position: 0 0, 25px 25px, 10px 35px;
  opacity: 0.3;
  animation: confettiFall 3s linear infinite;
}

@keyframes confettiFall {
  0% { background-position: 0 0, 25px 25px, 10px 35px; }
  100% { background-position: 0 100px, 25px 125px, 10px 135px; }
}

.pg-winner-trophy {
  color: var(--pg-accent);
  margin-bottom: 1rem;
  animation: trophyBounce 1s ease-in-out infinite;
}

@keyframes trophyBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.pg-star-icon {
  color: var(--pg-primary);
  margin-bottom: 1rem;
}

.pg-results-hero h1 {
  font-size: 2.5rem;
  color: var(--pg-primary-dark);
  margin-bottom: 0.5rem;
}

.pg-winner-avatar {
  font-size: 4rem;
  margin-bottom: 1rem;
}

.pg-your-stats {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.pg-your-stats h3 {
  color: var(--pg-primary-dark);
  margin-bottom: 1rem;
  text-align: center;
}

.pg-stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
}

.pg-stat-box {
  text-align: center;
  padding: 1rem;
  background: #F5F5F5;
  border-radius: 12px;
}

.pg-stat-box .stat-value {
  display: block;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--pg-primary);
}

.pg-stat-box .stat-label {
  font-size: 0.8rem;
  color: #888;
}

.pg-rankings {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.pg-rankings h3 {
  color: var(--pg-primary-dark);
  margin-bottom: 1rem;
}

.pg-rankings-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.pg-ranking-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: #FAFAFA;
  border-radius: 12px;
  border: 2px solid transparent;
  transition: all 0.2s ease;
}

.pg-ranking-item.current {
  background: #E0F7FA;
  border-color: var(--pg-primary-light);
}

.pg-ranking-item.first {
  background: linear-gradient(135deg, #FFF9C4, #FFECB3);
}

.pg-ranking-item.second {
  background: linear-gradient(135deg, #F5F5F5, #E0E0E0);
}

.pg-ranking-item.third {
  background: linear-gradient(135deg, #FFCCBC, #FFAB91);
}

.pg-ranking-item .rank-cell {
  width: 40px;
}

.pg-ranking-item .rank-icon {
  font-size: 1.5rem;
}

.pg-ranking-item .rank-icon.gold { color: #FFD700; }
.pg-ranking-item .rank-icon.silver { color: #C0C0C0; }
.pg-ranking-item .rank-icon.bronze { color: #CD7F32; }

.pg-ranking-item .rank-number {
  font-weight: 600;
  color: #888;
}

.pg-ranking-item .player-cell {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex: 1;
}

.pg-ranking-item .avatar {
  font-size: 1.5rem;
}

.pg-ranking-item .name {
  font-weight: 500;
}

.pg-ranking-item .score-cell {
  font-weight: 700;
  color: var(--pg-primary);
}

.pg-ranking-item .stats-cell {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  font-size: 0.85rem;
  color: #888;
}

/* Vocabulary Review */
.pg-vocabulary-review {
  background: white;
  border-radius: 16px;
  padding: 1rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.pg-vocab-toggle {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  width: 100%;
  padding: 1rem;
  background: none;
  border: none;
  color: var(--pg-primary-dark);
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
  border-radius: 12px;
}

.pg-vocab-toggle:hover {
  background: #F5F5F5;
}

.pg-vocab-list {
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-height: 400px;
  overflow-y: auto;
}

.pg-vocab-item {
  padding: 1rem;
  background: #FAFAFA;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pg-vocab-item:hover {
  background: #F0F0F0;
}

.pg-vocab-item.expanded {
  background: #E0F7FA;
}

.vocab-main {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.vocab-emoji {
  font-size: 1.5rem;
}

.vocab-word {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--pg-primary-dark);
}

.vocab-meaning {
  flex: 1;
  color: #666;
}

.vocab-details {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid #E0E0E0;
}

.detail-row {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.detail-label {
  font-weight: 500;
  color: #888;
  min-width: 80px;
}

.detail-value {
  color: #333;
}

.detail-value.difficulty-easy { color: var(--pg-success); }
.detail-value.difficulty-medium { color: #FF9800; }
.detail-value.difficulty-hard { color: var(--pg-error); }

/* Results Actions */
.pg-results-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
}

.pg-results-actions .pg-action-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem 1.5rem;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pg-results-actions .pg-action-btn.primary {
  background: linear-gradient(135deg, var(--pg-primary), var(--pg-primary-dark));
  border: none;
  color: white;
}

.pg-results-actions .pg-action-btn.primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 172, 193, 0.4);
}

.pg-results-actions .pg-action-btn.secondary {
  background: white;
  border: 2px solid var(--pg-primary);
  color: var(--pg-primary);
}

.pg-results-actions .pg-action-btn.secondary:hover {
  background: var(--pg-primary-light);
  color: white;
}

.pg-results-actions .pg-action-btn.share {
  background: white;
  border: 2px solid var(--pg-accent);
  color: var(--pg-accent);
}

.pg-results-actions .pg-action-btn.share:hover {
  background: var(--pg-accent);
  color: white;
}

/* Login Prompt */
.pg-login-prompt {
  text-align: center;
  padding: 4rem 2rem;
  background: white;
  border-radius: 20px;
  max-width: 500px;
  margin: 2rem auto;
  box-shadow: 0 8px 32px rgba(0, 172, 193, 0.15);
}

.pg-login-prompt h2 {
  color: var(--pg-primary-dark);
  margin-bottom: 0.5rem;
}

.pg-login-prompt p {
  color: #666;
}

/* ============ Puzzle Editor Styles ============ */
.pg-puzzle-editor {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 100vh;
  background: linear-gradient(135deg, #e8f5e9 0%, #f3e5f5 100%);
}

.pg-editor-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 1.5rem;
  background: white;
  border-bottom: 1px solid #e0e0e0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

/* pg-back-btn already defined above - this extends for puzzle editor context */
.puzzle-editor-header .pg-back-btn {
  margin-bottom: 0;
}

.pg-editor-header h2 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
  margin: 0;
  font-size: 1.25rem;
  color: #333;
}

.pg-editor-stats {
  padding: 0.5rem 1rem;
  background: linear-gradient(135deg, #00acc1, #00897b);
  color: white;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
}

.pg-editor-content {
  flex: 1;
  display: flex;
  gap: 1rem;
  padding: 1rem;
  overflow: hidden;
}

.pg-editor-list-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.pg-editor-toolbar {
  display: flex;
  gap: 0.75rem;
  padding: 1rem;
  border-bottom: 1px solid #eee;
}

.pg-search-box {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: #f5f5f5;
  border-radius: 8px;
}

.pg-search-box input {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 0.9rem;
  outline: none;
}

.pg-category-filter {
  padding: 0.5rem 0.75rem;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 0.9rem;
  background: white;
  cursor: pointer;
}

.pg-editor-actions {
  display: flex;
  gap: 0.5rem;
  padding: 0 1rem 1rem;
}

.pg-action-btn {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.5rem 0.75rem;
  border: 1px solid #ddd;
  border-radius: 8px;
  background: white;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
}

.pg-action-btn:hover:not(:disabled) {
  background: #f5f5f5;
}

.pg-action-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.pg-action-btn.primary {
  background: linear-gradient(135deg, #00acc1, #00897b);
  color: white;
  border-color: transparent;
}

.pg-action-btn.primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 172, 193, 0.3);
}

.pg-action-btn.success {
  background: #27ae60;
  color: white;
  border-color: transparent;
}

.pg-puzzle-list {
  flex: 1;
  overflow-y: auto;
  padding: 0.5rem;
}

.pg-empty-list {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  color: #999;
  text-align: center;
}

.pg-empty-list svg {
  opacity: 0.3;
  margin-bottom: 1rem;
}

.pg-empty-list button {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  margin-top: 1rem;
  padding: 0.5rem 1rem;
  border: none;
  background: linear-gradient(135deg, #00acc1, #00897b);
  color: white;
  border-radius: 8px;
  cursor: pointer;
}

.pg-puzzle-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.pg-puzzle-item:hover {
  background: #f5f5f5;
}

.pg-puzzle-item.selected {
  background: #e3f2fd;
  border: 1px solid #2196f3;
}

.pg-puzzle-item input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.pg-puzzle-emojis {
  font-size: 1.5rem;
  min-width: 60px;
  text-align: center;
}

.pg-puzzle-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  min-width: 0;
}

.pg-puzzle-word {
  font-weight: 600;
  color: #333;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.pg-puzzle-meaning {
  font-size: 0.85rem;
  color: #666;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.pg-difficulty-badge {
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 600;
  color: white;
}

.pg-difficulty-badge.easy { background: #27ae60; }
.pg-difficulty-badge.medium { background: #f39c12; }
.pg-difficulty-badge.hard { background: #e74c3c; }

.pg-puzzle-actions {
  display: flex;
  gap: 0.25rem;
  opacity: 0;
  transition: opacity 0.2s;
}

.pg-puzzle-item:hover .pg-puzzle-actions {
  opacity: 1;
}

.pg-puzzle-actions button {
  padding: 0.35rem;
  border: none;
  background: #f0f0f0;
  border-radius: 6px;
  cursor: pointer;
  color: #666;
  transition: all 0.2s;
}

.pg-puzzle-actions button:hover {
  background: #e0e0e0;
  color: #333;
}

.pg-puzzle-actions button.delete:hover {
  background: #ffebee;
  color: #e74c3c;
}

/* Editor Form Panel */
.pg-editor-form-panel {
  width: 400px;
  display: flex;
  flex-direction: column;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.pg-form-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid #eee;
}

.pg-form-header h3 {
  margin: 0;
  font-size: 1.1rem;
}

.pg-close-btn {
  padding: 0.35rem;
  border: none;
  background: transparent;
  cursor: pointer;
  color: #666;
  border-radius: 6px;
  transition: all 0.2s;
}

.pg-close-btn:hover {
  background: #f0f0f0;
}

.pg-editor-form {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.pg-form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.pg-form-group label {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.9rem;
  font-weight: 500;
  color: #333;
}

.pg-form-group input {
  padding: 0.65rem 0.75rem;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 0.95rem;
  transition: border-color 0.2s;
}

.pg-form-group input:focus {
  outline: none;
  border-color: #00acc1;
}

.pg-emoji-input-wrapper {
  display: flex;
  gap: 0.5rem;
}

.pg-emoji-input {
  flex: 1;
}

.pg-emoji-picker-btn {
  padding: 0 1rem;
  border: 1px solid #00acc1;
  background: #e0f7fa;
  color: #00838f;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  white-space: nowrap;
}

.pg-emoji-picker {
  max-height: 200px;
  overflow-y: auto;
  border: 1px solid #eee;
  border-radius: 8px;
  padding: 0.5rem;
  background: #fafafa;
}

.pg-emoji-category {
  margin-bottom: 0.5rem;
}

.pg-emoji-category-label {
  display: block;
  font-size: 0.75rem;
  color: #999;
  text-transform: capitalize;
  margin-bottom: 0.25rem;
}

.pg-emoji-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
}

.pg-emoji-btn {
  width: 32px;
  height: 32px;
  border: none;
  background: white;
  border-radius: 6px;
  cursor: pointer;
  font-size: 1.1rem;
  transition: all 0.15s;
}

.pg-emoji-btn:hover {
  background: #e3f2fd;
  transform: scale(1.1);
}

.pg-emoji-preview {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  background: #f5f5f5;
  border-radius: 8px;
}

.preview-label {
  font-size: 0.8rem;
  color: #666;
}

.preview-emojis {
  font-size: 1.5rem;
}

/* Image Upload Zone */
.pg-image-upload-zone {
  border: 2px dashed #ccc;
  border-radius: 12px;
  padding: 1rem;
  cursor: pointer;
  transition: all 0.2s;
  background: #fafafa;
  min-height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pg-image-upload-zone:hover {
  border-color: #00acc1;
  background: #e0f7fa;
}

.pg-upload-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  color: #999;
  text-align: center;
}

.pg-upload-placeholder svg {
  color: #ccc;
}

.pg-upload-placeholder small {
  font-size: 0.75rem;
  color: #bbb;
}

.pg-hint-images-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  width: 100%;
}

.pg-hint-image-item {
  position: relative;
  width: 80px;
  height: 80px;
  border-radius: 8px;
  overflow: hidden;
  border: 2px solid #ddd;
}

.pg-hint-image-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.pg-remove-image-btn {
  position: absolute;
  top: 2px;
  right: 2px;
  width: 20px;
  height: 20px;
  padding: 0;
  border: none;
  background: rgba(231, 76, 60, 0.9);
  color: white;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pg-add-more-image {
  width: 80px;
  height: 80px;
  border: 2px dashed #ccc;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  color: #999;
  font-size: 0.7rem;
}

.pg-add-more-image:hover {
  border-color: #00acc1;
  color: #00acc1;
}

/* Text Hint Input */
.pg-hint-text-input {
  padding: 0.65rem 0.75rem;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 0.95rem;
  resize: vertical;
  min-height: 60px;
  font-family: inherit;
  transition: border-color 0.2s;
}

.pg-hint-text-input:focus {
  outline: none;
  border-color: #00acc1;
}

/* Hint Preview Box */
.pg-hint-preview-box {
  padding: 0.75rem;
  background: linear-gradient(135deg, #f5f5f5 0%, #eeeeee 100%);
  border-radius: 10px;
  border: 1px solid #ddd;
}

.pg-hint-preview-box > label {
  display: block;
  font-size: 0.8rem;
  color: #666;
  margin-bottom: 0.5rem;
  font-weight: 500;
}

.pg-hint-preview-content {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.pg-preview-images {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.pg-preview-images img {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 6px;
  border: 1px solid #ddd;
}

.pg-preview-text {
  margin: 0;
  font-size: 0.9rem;
  color: #555;
  font-style: italic;
}

.pg-preview-emojis {
  font-size: 1.25rem;
}

/* Puzzle List Hint Preview */
.pg-puzzle-hint-preview {
  width: 60px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f5f5f5;
  border-radius: 6px;
  overflow: hidden;
  flex-shrink: 0;
}

.pg-puzzle-thumb {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.pg-puzzle-text-hint {
  font-size: 0.7rem;
  color: #666;
  text-align: center;
  padding: 0.25rem;
  line-height: 1.2;
}

.pg-puzzle-hint-preview .pg-puzzle-emojis {
  font-size: 1.2rem;
  min-width: auto;
}

.pg-difficulty-options {
  display: flex;
  gap: 0.5rem;
}

.pg-difficulty-btn {
  flex: 1;
  padding: 0.5rem;
  border: 2px solid #ddd;
  background: white;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
}

.pg-difficulty-btn.easy { border-color: #c8e6c9; }
.pg-difficulty-btn.easy.active { background: #27ae60; color: white; border-color: #27ae60; }
.pg-difficulty-btn.easy:hover:not(.active) { background: #e8f5e9; }

.pg-difficulty-btn.medium { border-color: #ffe0b2; }
.pg-difficulty-btn.medium.active { background: #f39c12; color: white; border-color: #f39c12; }
.pg-difficulty-btn.medium:hover:not(.active) { background: #fff3e0; }

.pg-difficulty-btn.hard { border-color: #ffcdd2; }
.pg-difficulty-btn.hard.active { background: #e74c3c; color: white; border-color: #e74c3c; }
.pg-difficulty-btn.hard:hover:not(.active) { background: #ffebee; }

.pg-form-actions {
  display: flex;
  gap: 0.75rem;
  margin-top: auto;
  padding-top: 1rem;
  border-top: 1px solid #eee;
}

.pg-cancel-btn {
  flex: 1;
  padding: 0.75rem;
  border: 1px solid #ddd;
  background: white;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.95rem;
  transition: all 0.2s;
}

.pg-cancel-btn:hover {
  background: #f5f5f5;
}

.pg-save-btn {
  flex: 2;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem;
  border: none;
  background: linear-gradient(135deg, #00acc1, #00897b);
  color: white;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.95rem;
  font-weight: 600;
  transition: all 0.2s;
}

.pg-save-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 172, 193, 0.3);
}

.pg-save-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Full width list styles */
.pg-editor-content-full {
  padding: 1rem 2rem;
}

.pg-editor-list-full {
  max-width: 1200px;
  margin: 0 auto;
}

/* ============ Slide Modal Styles ============ */
.pg-slide-modal {
  width: 90%;
  max-width: 900px;
  max-height: 90vh;
  background: white;
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.pg-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.5rem;
  border-bottom: 1px solid #eee;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.pg-modal-header h3 {
  margin: 0;
  font-size: 1.2rem;
  font-weight: 600;
}

.pg-modal-header .pg-close-btn {
  color: white;
  background: rgba(255, 255, 255, 0.2);
}

.pg-modal-header .pg-close-btn:hover {
  background: rgba(255, 255, 255, 0.3);
}

.pg-modal-content {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

/* Slide Section */
.pg-slide-section {
  padding: 1rem;
  background: #f8f9fa;
  border-bottom: 1px solid #eee;
}

.pg-slide-toolbar {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 0.75rem;
}

.pg-slide-label {
  font-weight: 600;
  color: #333;
  font-size: 0.95rem;
}

.pg-slide-tools {
  display: flex;
  gap: 0.5rem;
  margin-left: auto;
}

.pg-slide-tools button {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem 0.75rem;
  border: 1px solid #ddd;
  background: white;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
}

.pg-slide-tools button:hover {
  background: #e3f2fd;
  border-color: #2196f3;
  color: #1976d2;
}

.pg-slide-tools button.delete-btn {
  border-color: #ffcdd2;
  color: #e74c3c;
}

.pg-slide-tools button.delete-btn:hover {
  background: #ffebee;
}

/* Slide Canvas */
.pg-slide-canvas {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.2);
}

.pg-slide-placeholder {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: rgba(255, 255, 255, 0.4);
  gap: 0.75rem;
}

.pg-slide-placeholder p {
  margin: 0;
  font-size: 0.95rem;
}

/* Slide Elements */
.pg-slide-element {
  position: absolute;
  cursor: move;
  border: 2px solid transparent;
  border-radius: 8px;
  transition: border-color 0.2s;
}

.pg-slide-element:hover {
  border-color: rgba(255, 255, 255, 0.5);
}

.pg-slide-element.selected {
  border-color: #2196f3;
  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.3);
}

.pg-slide-element.image img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 6px;
  pointer-events: none;
}

.pg-slide-element.text textarea {
  width: 100%;
  height: 100%;
  border: none;
  background: transparent;
  color: white;
  resize: none;
  outline: none;
  font-family: inherit;
  padding: 0.5rem;
  text-align: center;
}

.pg-element-handle {
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 24px;
  height: 24px;
  background: #2196f3;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  cursor: grab;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Answer Section */
.pg-answer-section {
  padding: 1rem 1.5rem;
}

.pg-answer-header {
  margin-bottom: 1rem;
}

.pg-answer-header span {
  font-weight: 600;
  color: #333;
  font-size: 0.95rem;
}

.pg-answer-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
}

.pg-answer-grid .pg-form-group {
  margin: 0;
}

.pg-answer-grid .pg-form-group label {
  font-size: 0.8rem;
  margin-bottom: 0.35rem;
}

.pg-answer-grid .pg-form-group input {
  padding: 0.5rem 0.65rem;
  font-size: 0.9rem;
}

.pg-answer-grid .pg-difficulty-options {
  gap: 0.35rem;
}

.pg-answer-grid .pg-difficulty-btn {
  padding: 0.4rem;
  font-size: 0.8rem;
}

/* Modal Footer */
.pg-modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  border-top: 1px solid #eee;
  background: #fafafa;
}

.pg-modal-footer .pg-cancel-btn,
.pg-modal-footer .pg-save-btn {
  padding: 0.65rem 1.5rem;
}

/* ============ Responsive Styles ============ */
@media (max-width: 768px) {
  .picture-guess-page {
    padding: 1rem;
  }

  .pg-hero-title {
    font-size: 2rem;
  }

  .pg-menu-cards {
    grid-template-columns: 1fr;
  }

  .pg-lobby-settings {
    grid-template-columns: repeat(2, 1fr);
  }

  .pg-hints-grid {
    grid-template-columns: 1fr;
  }

  .pg-players-sidebar {
    position: static;
    transform: none;
    width: 100%;
    margin-top: 1.5rem;
    max-height: 200px;
  }

  .pg-emoji {
    font-size: 3rem;
  }

  .pg-answer-word {
    font-size: 2rem;
  }

  .pg-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .pg-ranking-item {
    flex-wrap: wrap;
  }

  .pg-ranking-item .stats-cell {
    width: 100%;
    flex-direction: row;
    justify-content: flex-end;
    gap: 1rem;
    margin-top: 0.5rem;
  }
}

@media (max-width: 480px) {
  .pg-card-buttons {
    flex-direction: column;
  }

  .pg-menu-actions {
    flex-direction: column;
  }

  .pg-results-actions {
    flex-direction: column;
  }

  .pg-results-actions .pg-action-btn {
    width: 100%;
    justify-content: center;
  }
}

/* ============ GAME HUB STYLES ============ */
/* Unified Game Center - Professional game selection interface */

/* --- Shared Game Notification Toast --- */
.game-notification {
  position: fixed;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  z-index: 1000;
  animation: slideUp 0.3s ease-out;
  backdrop-filter: blur(10px);
}

.game-notification.info {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.95), rgba(37, 99, 235, 0.95));
  color: white;
}

.game-notification.warning {
  background: linear-gradient(135deg, rgba(245, 158, 11, 0.95), rgba(217, 119, 6, 0.95));
  color: white;
}

.game-notification .notification-icon {
  font-size: 1.25rem;
}

.game-notification .notification-text {
  font-weight: 500;
  max-width: 300px;
}

.game-notification .notification-close {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  transition: background 0.2s;
}

.game-notification .notification-close:hover {
  background: rgba(255, 255, 255, 0.3);
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* --- Game Loading Fallback --- */
.game-loading-fallback {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 60vh;
  gap: 1rem;
  color: white;
}

.game-loading-fallback .loading-spinner {
  width: 48px;
  height: 48px;
  border: 4px solid rgba(255, 255, 255, 0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.game-loading-fallback p {
  font-size: 1rem;
  opacity: 0.8;
}

/* --- Player Leaderboard Component - Premium Edition --- */
.player-leaderboard {
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
  backdrop-filter: blur(15px);
  border-radius: 20px;
  padding: 1.25rem;
  min-width: 280px;
  max-width: 320px;
  max-height: calc(100vh - 200px);
  overflow-y: auto;
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  animation: leaderboardAppear 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  position: relative;
  overflow-x: hidden;
}

@keyframes leaderboardAppear {
  from { opacity: 0; transform: translateX(20px); }
  to { opacity: 1; transform: translateX(0); }
}

.player-leaderboard::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #6366f1, #8b5cf6, #a855f7);
  border-radius: 20px 20px 0 0;
}

.player-leaderboard.compact {
  min-width: 220px;
  max-width: 260px;
  padding: 0.75rem;
}

.leaderboard-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.12);
  margin-bottom: 1rem;
  color: white;
}

.leaderboard-header svg {
  color: #fbbf24;
  filter: drop-shadow(0 2px 4px rgba(251, 191, 36, 0.4));
}

.leaderboard-header h4 {
  flex: 1;
  margin: 0;
  font-size: 1.05rem;
  font-weight: 700;
  letter-spacing: 0.02em;
}

.leaderboard-header .player-count {
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.3), rgba(139, 92, 246, 0.3));
  padding: 0.25rem 0.6rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 700;
  border: 1px solid rgba(139, 92, 246, 0.3);
}

.leaderboard-list {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

.leaderboard-item {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  padding: 0.6rem 0.85rem;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
  border-radius: 14px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.08);
  animation: itemSlideIn 0.4s ease forwards;
  opacity: 0;
  transform: translateX(10px);
}

.leaderboard-item:nth-child(1) { animation-delay: 0.05s; }
.leaderboard-item:nth-child(2) { animation-delay: 0.1s; }
.leaderboard-item:nth-child(3) { animation-delay: 0.15s; }
.leaderboard-item:nth-child(4) { animation-delay: 0.2s; }
.leaderboard-item:nth-child(5) { animation-delay: 0.25s; }
.leaderboard-item:nth-child(6) { animation-delay: 0.3s; }
.leaderboard-item:nth-child(7) { animation-delay: 0.35s; }
.leaderboard-item:nth-child(8) { animation-delay: 0.4s; }
.leaderboard-item:nth-child(9) { animation-delay: 0.45s; }
.leaderboard-item:nth-child(10) { animation-delay: 0.5s; }

@keyframes itemSlideIn {
  to { opacity: 1; transform: translateX(0); }
}

.leaderboard-item:hover {
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.18), rgba(255, 255, 255, 0.1));
  transform: translateX(3px);
  border-color: rgba(255, 255, 255, 0.15);
}

.leaderboard-item.current-user {
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.35), rgba(139, 92, 246, 0.35));
  border: 1px solid rgba(139, 92, 246, 0.5);
  box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.leaderboard-item.current-user:hover {
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.45), rgba(139, 92, 246, 0.45));
}

.leaderboard-item.eliminated {
  opacity: 0.45;
  filter: grayscale(0.5);
}

.leaderboard-item.eliminated .player-name {
  text-decoration: line-through;
}

.leaderboard-item.just-correct {
  animation: itemSlideIn 0.4s ease forwards, flashCorrect 0.6s ease;
}

.leaderboard-item.just-wrong {
  animation: itemSlideIn 0.4s ease forwards, flashWrong 0.6s ease;
}

@keyframes flashCorrect {
  0%, 100% { box-shadow: none; }
  50% {
    background: linear-gradient(145deg, rgba(34, 197, 94, 0.35), rgba(34, 197, 94, 0.2));
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
    border-color: rgba(34, 197, 94, 0.6);
  }
}

@keyframes flashWrong {
  0%, 100% { box-shadow: none; }
  50% {
    background: linear-gradient(145deg, rgba(239, 68, 68, 0.35), rgba(239, 68, 68, 0.2));
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
    border-color: rgba(239, 68, 68, 0.6);
  }
}

.player-rank {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.08);
}

.player-rank.rank-1 {
  background: linear-gradient(145deg, rgba(255, 215, 0, 0.3), rgba(255, 180, 0, 0.2));
  border: 1px solid rgba(255, 215, 0, 0.4);
}

.player-rank.rank-2 {
  background: linear-gradient(145deg, rgba(192, 192, 192, 0.3), rgba(150, 150, 150, 0.2));
  border: 1px solid rgba(192, 192, 192, 0.4);
}

.player-rank.rank-3 {
  background: linear-gradient(145deg, rgba(205, 127, 50, 0.3), rgba(180, 100, 30, 0.2));
  border: 1px solid rgba(205, 127, 50, 0.4);
}

.player-rank .rank-number {
  font-size: 0.8rem;
  font-weight: 700;
  opacity: 0.8;
}

.player-rank .rank-icon.gold {
  color: #ffd700;
  filter: drop-shadow(0 2px 4px rgba(255, 215, 0, 0.5));
}
.player-rank .rank-icon.silver {
  color: #e0e0e0;
  filter: drop-shadow(0 2px 4px rgba(200, 200, 200, 0.5));
}
.player-rank .rank-icon.bronze {
  color: #cd7f32;
  filter: drop-shadow(0 2px 4px rgba(205, 127, 50, 0.5));
}

.player-avatar {
  position: relative;
  flex-shrink: 0;
}

.player-avatar .avatar-emoji {
  font-size: 1.6rem;
  line-height: 1;
  display: block;
}

.player-avatar .bot-badge {
  position: absolute;
  bottom: -4px;
  right: -6px;
  background: linear-gradient(135deg, rgba(107, 114, 128, 0.95), rgba(75, 85, 99, 0.95));
  color: white;
  font-size: 0.5rem;
  padding: 2px 4px;
  border-radius: 6px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Avatar image support */
.player-avatar .avatar-emoji img {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}

/* ====== VIP Player Styling ====== */
/* VIP Avatar Frame Effects */
.player-avatar.vip-avatar {
  position: relative;
}

.player-avatar.vip-avatar .vip-frame {
  position: absolute;
  inset: -4px;
  border-radius: 50%;
  pointer-events: none;
}

/* VIP User - Purple shimmer */
.player-avatar.role-vip_user .vip-frame {
  background: conic-gradient(from 0deg, #a855f7, #ec4899, #a855f7);
  animation: vipFrameSpin 3s linear infinite;
  opacity: 0.8;
}

.player-avatar.role-vip_user .vip-frame::before {
  content: '';
  position: absolute;
  inset: 2px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.8);
}

/* Super Admin - Rainbow fire effect */
.player-avatar.role-super_admin .vip-frame {
  background: conic-gradient(from 0deg, #ff6b6b, #ffd93d, #6bcb77, #4d96ff, #9b59b6, #ff6b6b);
  animation: vipFrameSpin 2s linear infinite;
  opacity: 0.9;
}

.player-avatar.role-super_admin .vip-frame::before {
  content: '';
  position: absolute;
  inset: 2px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.8);
}

.player-avatar.role-super_admin::after {
  content: '👑';
  position: absolute;
  top: -12px;
  right: -8px;
  font-size: 0.7rem;
  animation: crownBounce 1.5s ease infinite;
}

/* Director - Gold flame */
.player-avatar.role-director .vip-frame {
  background: conic-gradient(from 0deg, #ffd700, #ffb347, #ffd700);
  animation: vipFrameSpin 2.5s linear infinite, vipGlow 1.5s ease infinite;
  opacity: 0.85;
}

.player-avatar.role-director .vip-frame::before {
  content: '';
  position: absolute;
  inset: 2px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.8);
}

/* Admin - Red glow */
.player-avatar.role-admin .vip-frame {
  background: conic-gradient(from 0deg, #e34234, #ff6b6b, #e34234);
  animation: vipFrameSpin 3s linear infinite;
  opacity: 0.8;
}

.player-avatar.role-admin .vip-frame::before {
  content: '';
  position: absolute;
  inset: 2px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.8);
}

@keyframes vipFrameSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes vipGlow {
  0%, 100% { filter: brightness(1) drop-shadow(0 0 5px currentColor); }
  50% { filter: brightness(1.2) drop-shadow(0 0 15px currentColor); }
}

@keyframes crownBounce {
  0%, 100% { transform: translateY(0) rotate(-10deg); }
  50% { transform: translateY(-3px) rotate(10deg); }
}

/* VIP Player Item highlight */
.leaderboard-item.vip-player {
  position: relative;
}

.leaderboard-item.vip-player::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  border-radius: 3px 0 0 3px;
}

.leaderboard-item.vip-player:has(.role-vip_user)::before {
  background: linear-gradient(180deg, #a855f7, #ec4899);
}

.leaderboard-item.vip-player:has(.role-super_admin)::before {
  background: linear-gradient(180deg, #ff6b6b, #ffd93d, #6bcb77);
}

.leaderboard-item.vip-player:has(.role-director)::before {
  background: linear-gradient(180deg, #ffd700, #ffb347);
}

.leaderboard-item.vip-player:has(.role-admin)::before {
  background: linear-gradient(180deg, #e34234, #ff6b6b);
}

/* VIP Name Styles in Leaderboard (reuse sidebar styles) */
.player-name.vip-name.role-name-super_admin {
  background: linear-gradient(135deg, #ff6b6b, #ffd93d, #6bcb77, #4d96ff, #9b59b6);
  background-size: 300% 300%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: rainbow-text 3s ease infinite;
  font-weight: 800;
}

.player-name.vip-name.role-name-director {
  background: linear-gradient(135deg, #ffd700, #ffb347);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 800;
}

.player-name.vip-name.role-name-admin {
  color: #e34234;
  font-weight: 700;
}

.player-name.vip-name.role-name-vip_user {
  background: linear-gradient(135deg, #a855f7, #ec4899);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
}

.player-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.player-name {
  font-weight: 600;
  font-size: 0.9rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.player-extra {
  font-size: 0.7rem;
  opacity: 0.65;
  font-weight: 500;
}

.player-score {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  flex-shrink: 0;
}

.player-score .score-value {
  font-weight: 800;
  font-size: 0.95rem;
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.player-score .streak-badge {
  font-size: 0.7rem;
  background: linear-gradient(135deg, #f97316, #ef4444);
  padding: 2px 6px;
  border-radius: 10px;
  font-weight: 700;
  box-shadow: 0 2px 8px rgba(249, 115, 22, 0.4);
  animation: streakPulse 1.5s ease infinite;
}

@keyframes streakPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.answer-indicator {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 0.85rem;
  flex-shrink: 0;
  transition: all 0.3s ease;
}

.answer-indicator.correct {
  background: linear-gradient(145deg, rgba(34, 197, 94, 0.4), rgba(22, 163, 74, 0.3));
  color: #4ade80;
  border: 2px solid rgba(34, 197, 94, 0.5);
  box-shadow: 0 0 12px rgba(34, 197, 94, 0.4);
  animation: indicatorBounce 0.4s ease;
}

.answer-indicator.wrong {
  background: linear-gradient(145deg, rgba(239, 68, 68, 0.4), rgba(220, 38, 38, 0.3));
  color: #f87171;
  border: 2px solid rgba(239, 68, 68, 0.5);
  box-shadow: 0 0 12px rgba(239, 68, 68, 0.4);
  animation: indicatorShake 0.4s ease;
}

.answer-indicator.pending {
  background: linear-gradient(145deg, rgba(250, 204, 21, 0.35), rgba(234, 179, 8, 0.25));
  color: #fde047;
  border: 2px solid rgba(250, 204, 21, 0.4);
  animation: pendingPulse 1.2s ease infinite;
}

@keyframes indicatorBounce {
  0% { transform: scale(0); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

@keyframes indicatorShake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-3px); }
  40% { transform: translateX(3px); }
  60% { transform: translateX(-2px); }
  80% { transform: translateX(2px); }
}

@keyframes pendingPulse {
  0%, 100% {
    box-shadow: 0 0 8px rgba(250, 204, 21, 0.3);
    opacity: 1;
  }
  50% {
    box-shadow: 0 0 16px rgba(250, 204, 21, 0.5);
    opacity: 0.8;
  }
}

.leaderboard-more {
  text-align: center;
  padding: 0.75rem;
  font-size: 0.8rem;
  opacity: 0.65;
  color: white;
  font-weight: 500;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  margin-top: 0.5rem;
}

/* Compact mode adjustments */
.player-leaderboard.compact .leaderboard-item {
  padding: 0.4rem 0.6rem;
}

.player-leaderboard.compact .player-avatar .avatar-emoji {
  font-size: 1.3rem;
}

.player-leaderboard.compact .player-name {
  font-size: 0.8rem;
}

.player-leaderboard.compact .player-score .score-value {
  font-size: 0.85rem;
}

.player-leaderboard.compact .player-rank {
  width: 24px;
  height: 24px;
}

/* Responsive */
@media (max-width: 768px) {
  .player-leaderboard {
    min-width: unset;
    max-width: unset;
    width: 100%;
    max-height: 300px;
    animation: none;
  }

  .leaderboard-item {
    animation-delay: 0s !important;
    opacity: 1;
    transform: none;
  }
}

.game-hub-page {
  min-height: calc(100vh - 64px);
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
  padding: 0;
  position: relative;
}

.game-hub-page.game-active {
  padding: 0;
}

/* Login Prompt */
.game-hub-login-prompt {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 60vh;
  text-align: center;
  color: white;
}

.game-hub-login-prompt .prompt-icon {
  font-size: 5rem;
  margin-bottom: 1.5rem;
}

.game-hub-login-prompt h2 {
  font-size: 1.75rem;
  margin-bottom: 0.5rem;
}

.game-hub-login-prompt p {
  color: rgba(255, 255, 255, 0.7);
}

/* Leave Room Button - Top Left */
.game-hub-leave-btn {
  position: fixed;
  top: 80px;
  left: 90px;
  z-index: 100;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.65rem 1rem;
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(185, 28, 28, 0.15));
  border: 1px solid rgba(239, 68, 68, 0.35);
  border-radius: 12px;
  color: rgba(255, 255, 255, 0.95);
  font-weight: 600;
  font-size: 0.85rem;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(239, 68, 68, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

.game-hub-leave-btn svg {
  width: 18px;
  height: 18px;
  color: #f87171;
}

.game-hub-leave-btn:hover {
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.35), rgba(185, 28, 28, 0.25));
  border-color: rgba(239, 68, 68, 0.5);
  color: white;
  transform: scale(1.02);
  box-shadow: 0 6px 20px rgba(239, 68, 68, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.game-hub-leave-btn:hover svg {
  color: #fca5a5;
}

/* Game Selector */
.game-selector {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}

/* Hero Header */
.game-hub-hero {
  text-align: center;
  padding: 3rem 2rem;
  margin-bottom: 2rem;
  position: relative;
}

.game-hub-hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, rgba(255, 107, 107, 0.1) 0%, transparent 70%);
  pointer-events: none;
}

.hero-content {
  position: relative;
  z-index: 1;
}

.hero-title {
  font-size: 3rem;
  font-weight: 800;
  color: white;
  margin-bottom: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
}

.hero-icon {
  font-size: 3.5rem;
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.hero-subtitle {
  font-size: 1.25rem;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 1.5rem;
}

.hero-stats {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin-top: 1.5rem;
}

.hero-stats .stat-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: rgba(255, 255, 255, 0.8);
  font-weight: 500;
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  backdrop-filter: blur(10px);
}

/* Search Section */
.game-search-section {
  margin-bottom: 2rem;
}

.game-search-wrapper {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  max-width: 500px;
  margin: 0 auto;
  padding: 1rem 1.5rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
}

.game-search-wrapper svg {
  color: rgba(255, 255, 255, 0.5);
}

.game-search-wrapper input {
  flex: 1;
  background: none;
  border: none;
  color: white;
  font-size: 1rem;
  outline: none;
}

.game-search-wrapper input::placeholder {
  color: rgba(255, 255, 255, 0.5);
}

/* Game Sections */
.game-section {
  margin-bottom: 3rem;
}

.section-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: white;
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 1.5rem;
  padding-bottom: 0.75rem;
  border-bottom: 2px solid rgba(255, 255, 255, 0.1);
}

.section-title svg {
  color: #FFD93D;
}

/* Featured Games Grid */
.featured-games-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 1.5rem;
}

/* Featured Game Card */
.game-card-featured {
  position: relative;
  border-radius: 24px;
  padding: 2rem;
  color: white;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
}

.game-card-featured::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.3) 100%);
  pointer-events: none;
}

.game-card-featured:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
}

.game-card-featured .badge-new,
.game-card-featured .badge-popular {
  position: absolute;
  top: 1rem;
  right: 1rem;
  padding: 0.375rem 0.75rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.badge-new {
  background: #00E676;
  color: #1a1a2e;
}

.badge-popular {
  background: #FF5252;
  color: white;
}

.game-card-featured .card-content {
  position: relative;
  z-index: 1;
}

.game-card-featured .card-icon {
  font-size: 4rem;
  margin-bottom: 1rem;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

.game-card-featured .card-icon .icon-image {
  width: 120px;
  height: 120px;
  object-fit: contain;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.4));
  transform: translateY(14px);
}

.game-card-featured .card-title {
  font-size: 1.75rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
}

.game-card-featured .card-description {
  font-size: 1rem;
  opacity: 0.9;
  margin-bottom: 1rem;
  line-height: 1.5;
}

.game-card-featured .card-meta {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
}

.game-card-featured .meta-item {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.9rem;
  opacity: 0.9;
}

.game-card-featured .meta-item.difficulty {
  font-weight: 600;
  opacity: 1;
}

.card-features {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

.feature-tag {
  padding: 0.375rem 0.75rem;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  font-size: 0.8rem;
  backdrop-filter: blur(4px);
}

.game-card-featured .card-actions {
  display: flex;
  gap: 0.75rem;
  position: relative;
  z-index: 1;
}

.game-card-featured .btn-play {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem 1.5rem;
  background: white;
  border: none;
  border-radius: 12px;
  color: #1a1a2e;
  font-weight: 700;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.game-card-featured .btn-play:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(255, 255, 255, 0.3);
}

.game-card-featured .btn-join-room {
  padding: 1rem 1.5rem;
  background: rgba(255, 255, 255, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(4px);
}

.game-card-featured .btn-join-room:hover {
  background: rgba(255, 255, 255, 0.3);
  border-color: rgba(255, 255, 255, 0.5);
}

/* All Games Grid */
.all-games-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.5rem;
}

/* Regular Game Card */
.game-card {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 20px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

.game-card:hover {
  transform: translateY(-5px);
  border-color: rgba(255, 255, 255, 0.2);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.game-card .card-header {
  padding: 1.5rem;
  text-align: center;
  position: relative;
}

.game-card .card-header .card-icon {
  font-size: 3rem;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

.game-card .card-header .card-icon .icon-image {
  width: 85px;
  height: 85px;
  object-fit: contain;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4));
  transform: translateY(10px);
}

.game-card .badge-new.small {
  position: absolute;
  top: 0.75rem;
  right: 0.75rem;
  padding: 0.25rem 0.5rem;
  font-size: 0.65rem;
}

.game-card .card-body {
  padding: 1rem 1.5rem;
}

.game-card .card-title {
  color: white;
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
}

.game-card .card-description {
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.9rem;
  line-height: 1.4;
  margin-bottom: 0.75rem;
}

.game-card .card-meta {
  display: flex;
  gap: 0.75rem;
  align-items: center;
}

.game-card .meta-item {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.8rem;
}

.game-card .meta-item.difficulty {
  padding: 0.25rem 0.5rem;
  border-radius: 10px;
  color: white;
  font-weight: 600;
  font-size: 0.7rem;
}

.game-card .card-actions {
  display: flex;
  gap: 0.5rem;
  padding: 1rem 1.5rem;
  background: rgba(0, 0, 0, 0.2);
}

.game-card .btn-play-small {
  flex: 1;
  padding: 0.75rem;
  border: none;
  border-radius: 10px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.game-card .btn-play-small:hover {
  filter: brightness(1.1);
  transform: translateY(-2px);
}

.game-card .btn-join-small {
  padding: 0.75rem 1rem;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  color: white;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.game-card .btn-join-small:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* Join Modal */
.game-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(8px);
}

.game-modal {
  background: #1a1a2e;
  border-radius: 24px;
  overflow: hidden;
  width: 90%;
  max-width: 400px;
  animation: modalSlideUp 0.3s ease;
}

@keyframes modalSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.game-modal .modal-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.5rem;
  color: white;
}

.game-modal .modal-icon {
  font-size: 2.5rem;
}

.game-modal .modal-icon .icon-image {
  width: 56px;
  height: 56px;
  object-fit: contain;
  filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.3));
  transform: translateY(4px);
}

.game-modal .modal-header h3 {
  font-size: 1.25rem;
  font-weight: 700;
}

.game-modal .modal-body {
  padding: 1.5rem;
  text-align: center;
}

.game-modal .modal-body p {
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 1.5rem;
}

.join-code-input {
  width: 100%;
  padding: 1.25rem;
  font-size: 2rem;
  text-align: center;
  letter-spacing: 0.5rem;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-family: 'Monaco', monospace;
  outline: none;
  transition: border-color 0.2s ease;
}

.join-code-input:focus {
  border-color: rgba(255, 255, 255, 0.5);
}

.join-code-input::placeholder {
  color: rgba(255, 255, 255, 0.3);
}

.game-modal .modal-actions {
  display: flex;
  gap: 1rem;
  padding: 1.5rem;
  background: rgba(0, 0, 0, 0.3);
}

.game-modal .btn-cancel {
  flex: 1;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 12px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.game-modal .btn-cancel:hover {
  background: rgba(255, 255, 255, 0.2);
}

.game-modal .btn-join {
  flex: 1;
  padding: 1rem;
  border: none;
  border-radius: 12px;
  color: white;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
}

.game-modal .btn-join:hover:not(:disabled) {
  filter: brightness(1.1);
  transform: translateY(-2px);
}

.game-modal .btn-join:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Responsive Styles */
@media (max-width: 768px) {
  .game-hub-leave-btn {
    left: 1rem;
    top: 70px;
    padding: 0.5rem 0.75rem;
    font-size: 0.8rem;
  }

  .game-selector {
    padding: 1rem;
  }

  .hero-title {
    font-size: 2rem;
    flex-direction: column;
    gap: 0.5rem;
  }

  .hero-icon {
    font-size: 2.5rem;
  }

  .hero-stats {
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .featured-games-grid {
    grid-template-columns: 1fr;
  }

  .game-card-featured .card-icon {
    font-size: 3rem;
  }

  .game-card-featured .card-title {
    font-size: 1.5rem;
  }

  .game-card-featured .card-actions {
    flex-direction: column;
  }

  .all-games-grid {
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  }
}

@media (max-width: 480px) {
  .game-hub-hero {
    padding: 2rem 1rem;
  }

  .hero-title {
    font-size: 1.75rem;
  }

  .hero-subtitle {
    font-size: 1rem;
  }

  .all-games-grid {
    grid-template-columns: 1fr;
  }
}

/* ===================================
   HERO ACTIONS & BROWSE ROOMS BUTTON
   =================================== */

.hero-actions {
  margin-top: 1.5rem;
}

.hero-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  border-radius: 12px;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.hero-btn.browse-rooms {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.hero-btn.browse-rooms:hover {
  background: rgba(255, 255, 255, 0.25);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* ===================================
   RACING GAMES SECTION
   =================================== */

.racing-section {
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(78, 205, 196, 0.1));
  border-radius: 20px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  border: 1px solid rgba(139, 92, 246, 0.2);
}

.racing-section .section-title {
  color: #fff;
}

.racing-section .section-title .racing-icon {
  font-size: 1.5rem;
}

.racing-games-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 1.5rem;
}

.racing-game-card {
  background: linear-gradient(135deg, rgba(30, 30, 50, 0.95), rgba(20, 20, 40, 0.95));
  border-radius: 16px;
  overflow: hidden;
  border: 2px solid;
  transition: all 0.3s ease;
  position: relative;
}

.racing-game-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
}

.racing-card-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.25rem;
  position: relative;
}

.racing-card-icon {
  font-size: 3rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.racing-card-info {
  flex: 1;
}

.racing-card-info h3 {
  font-size: 1.25rem;
  font-weight: 700;
  color: white;
  margin-bottom: 0.25rem;
}

.racing-card-info p {
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.85);
  margin: 0;
}

.racing-card-features {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  background: rgba(0, 0, 0, 0.2);
}

.feature-chip {
  padding: 0.25rem 0.75rem;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 100px;
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.9);
  white-space: nowrap;
}

.racing-card-actions {
  display: flex;
  gap: 0.75rem;
  padding: 1rem 1.25rem;
}

.racing-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  border-radius: 10px;
  font-weight: 600;
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  white-space: nowrap;
}

.racing-btn.primary {
  flex: 1;
  color: white;
}

.racing-btn.primary:hover {
  filter: brightness(1.1);
  transform: translateY(-2px);
}

.racing-btn.secondary {
  background: rgba(255, 255, 255, 0.15);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.25);
}

.racing-btn.secondary:hover {
  background: rgba(255, 255, 255, 0.25);
}

.racing-btn.tertiary {
  background: rgba(78, 205, 196, 0.2);
  color: #4ECDC4;
  border: 1px solid rgba(78, 205, 196, 0.3);
}

.racing-btn.tertiary:hover {
  background: rgba(78, 205, 196, 0.3);
}

.racing-card-meta {
  display: flex;
  justify-content: space-between;
  padding: 0.75rem 1.25rem;
  background: rgba(0, 0, 0, 0.25);
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.7);
}

.racing-card-meta span {
  display: flex;
  align-items: center;
  gap: 0.35rem;
}

/* ===================================
   WAITING ROOM STYLES
   =================================== */

.waiting-room {
  padding: 1rem;
  max-width: 1000px;
  margin: 0 auto;
}

.waiting-room-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.waiting-room-back {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s ease;
}

.waiting-room-back:hover {
  background: rgba(255, 255, 255, 0.2);
}

.waiting-room-title {
  flex: 1;
  font-size: 1.5rem;
  font-weight: 700;
  color: white;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.waiting-room-title .game-icon {
  font-size: 1.75rem;
}

.waiting-room-refresh {
  background: rgba(78, 205, 196, 0.2);
  border: 1px solid rgba(78, 205, 196, 0.3);
  color: #4ECDC4;
  padding: 0.5rem;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.waiting-room-refresh:hover:not(:disabled) {
  background: rgba(78, 205, 196, 0.3);
}

.waiting-room-refresh:disabled {
  opacity: 0.5;
}

.waiting-room-refresh .spinning {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.waiting-room-controls {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.waiting-room-search {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 12px;
  padding: 0.75rem 1rem;
}

.waiting-room-search svg {
  color: rgba(255, 255, 255, 0.5);
}

.waiting-room-search input {
  flex: 1;
  background: none;
  border: none;
  color: white;
  font-size: 1rem;
  outline: none;
}

.waiting-room-search input::placeholder {
  color: rgba(255, 255, 255, 0.4);
}

.waiting-room-filters {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.waiting-room-filters svg {
  color: rgba(255, 255, 255, 0.5);
}

.filter-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 100px;
  color: rgba(255, 255, 255, 0.8);
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.filter-chip:hover {
  background: rgba(255, 255, 255, 0.15);
}

.filter-chip.active {
  background: rgba(139, 92, 246, 0.3);
  border-color: rgba(139, 92, 246, 0.5);
  color: white;
}

.waiting-room-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.waiting-room-loading,
.waiting-room-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  text-align: center;
  color: rgba(255, 255, 255, 0.7);
}

.waiting-room-loading .loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid rgba(255, 255, 255, 0.2);
  border-top-color: #8B5CF6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

.waiting-room-empty .empty-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
}

.waiting-room-empty h3 {
  color: white;
  margin-bottom: 0.5rem;
}

.waiting-room-card {
  background: linear-gradient(135deg, rgba(30, 30, 50, 0.9), rgba(20, 20, 40, 0.9));
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  overflow: hidden;
  transition: all 0.2s ease;
}

.waiting-room-card:hover {
  border-color: rgba(139, 92, 246, 0.4);
  transform: translateX(4px);
}

.game-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1rem;
  background: rgba(0, 0, 0, 0.2);
}

.game-type-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.35rem 0.75rem;
  border-radius: 100px;
  font-size: 0.8rem;
  font-weight: 600;
  color: white;
}

.game-code {
  font-family: monospace;
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.7);
  background: rgba(255, 255, 255, 0.1);
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.game-card-body {
  padding: 1rem;
}

.game-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: white;
  margin-bottom: 0.75rem;
}

.game-host {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}

.host-avatar {
  font-size: 1.25rem;
}

.host-name {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.8);
}

.game-meta {
  display: flex;
  gap: 1rem;
}

.game-meta .meta-item {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.6);
}

.game-join-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.875rem;
  background: linear-gradient(135deg, #8B5CF6, #A855F7);
  border: none;
  color: white;
  font-weight: 600;
  font-size: 0.95rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.game-join-btn:hover:not(:disabled) {
  filter: brightness(1.1);
}

.game-join-btn:disabled {
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.4);
  cursor: not-allowed;
}

.waiting-room-footer {
  display: flex;
  justify-content: center;
  gap: 0.75rem;
  padding: 1.5rem;
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.9rem;
}

/* Create Room Modal */
.create-room-modal .form-group {
  margin-bottom: 1rem;
}

.create-room-modal .form-group label {
  display: block;
  margin-bottom: 0.5rem;
  color: rgba(255, 255, 255, 0.8);
  font-weight: 500;
}

.room-title-input {
  width: 100%;
  padding: 0.875rem 1rem;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  color: white;
  font-size: 1rem;
  outline: none;
  transition: border-color 0.2s ease;
}

.room-title-input:focus {
  border-color: rgba(139, 92, 246, 0.5);
}

.create-room-info {
  background: rgba(78, 205, 196, 0.1);
  border: 1px solid rgba(78, 205, 196, 0.2);
  border-radius: 10px;
  padding: 1rem;
  margin-top: 1rem;
}

.create-room-info p {
  margin: 0.5rem 0;
  color: rgba(255, 255, 255, 0.8);
  font-size: 0.9rem;
}

.create-room-info p:first-child {
  margin-top: 0;
}

.create-room-info p:last-child {
  margin-bottom: 0;
}

.btn-create {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
  justify-content: center;
  padding: 1rem;
  border: none;
  border-radius: 12px;
  color: white;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-create:hover:not(:disabled) {
  filter: brightness(1.1);
  transform: translateY(-2px);
}

.btn-create:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Responsive Waiting Room */
@media (max-width: 768px) {
  .waiting-room-header {
    flex-wrap: wrap;
  }

  .waiting-room-title {
    order: -1;
    width: 100%;
    margin-bottom: 0.5rem;
    font-size: 1.25rem;
  }

  .racing-games-grid {
    grid-template-columns: 1fr;
  }

  .racing-card-actions {
    flex-wrap: wrap;
  }

  .racing-btn {
    flex: 1;
    min-width: calc(50% - 0.375rem);
  }

  .racing-btn.primary {
    min-width: 100%;
  }
}

/* ===================================
   PROFESSIONAL RACING GAME STYLES
   =================================== */

/* Base Racing Page Styles */
.boat-racing-page,
.horse-racing-page {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.boat-racing-page {
  background: linear-gradient(180deg, #0a1628 0%, #1a3a5c 50%, #0d2137 100%);
}

.horse-racing-page {
  background: linear-gradient(180deg, #1a2f0a 0%, #2d4a16 50%, #1a2f0a 100%);
}

.boat-racing-page.racing-active,
.horse-racing-page.racing-active {
  padding: 0;
}

/* Racing Headers */
.boat-racing-header,
.horse-racing-header {
  text-align: center;
  padding: 2rem 1rem;
}

.boat-racing-header .header-icon,
.horse-racing-header .header-icon {
  font-size: 4rem;
  margin-bottom: 1rem;
  display: block;
  animation: floatIcon 3s ease-in-out infinite;
}

@keyframes floatIcon {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.boat-racing-header h1,
.horse-racing-header h1 {
  font-size: 2.5rem;
  font-weight: 800;
  color: white;
  margin-bottom: 0.5rem;
}

.boat-racing-header h1 {
  background: linear-gradient(135deg, #4ecdc4, #44a08d);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.horse-racing-header h1 {
  background: linear-gradient(135deg, #8B5CF6, #a855f7);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.boat-racing-header p,
.horse-racing-header p {
  color: rgba(255, 255, 255, 0.7);
  font-size: 1.1rem;
}

/* ===================================
   RACE COUNTDOWN STYLES
   =================================== */

.race-countdown {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  overflow: hidden;
}

.countdown-bg-elements {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.bg-element {
  position: absolute;
  font-size: 2rem;
  opacity: 0.3;
  animation: floatElement 4s ease-in-out infinite;
}

@keyframes floatElement {
  0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.2; }
  50% { transform: translateY(-30px) rotate(10deg); opacity: 0.4; }
}

.countdown-content {
  text-align: center;
  z-index: 1;
}

.countdown-icon-large {
  font-size: 6rem;
  margin-bottom: 1rem;
  animation: pulse 1s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.countdown-title {
  font-size: 2.5rem;
  font-weight: 800;
  color: white;
  margin-bottom: 0.5rem;
  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.countdown-subtitle {
  font-size: 1.2rem;
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 2rem;
}

.countdown-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto 2rem;
}

.countdown-circle svg {
  position: absolute;
  inset: 0;
  transform: rotate(-90deg);
}

.countdown-progress {
  transition: stroke-dashoffset 1s linear;
}

.countdown-number {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 4rem;
  font-weight: 900;
  animation: countPulse 1s ease-in-out;
}

@keyframes countPulse {
  0% { transform: scale(0.5); opacity: 0; }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); opacity: 1; }
}

.countdown-go {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  font-weight: 900;
  color: #4ecdc4;
  animation: goAnimation 0.8s ease-out forwards;
}

@keyframes goAnimation {
  0% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1.5); }
  100% { transform: scale(1); opacity: 1; }
}

.countdown-tip {
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.95rem;
}

/* ===================================
   PROFESSIONAL RACE TRACK STYLES
   =================================== */

.pro-race-track {
  background: linear-gradient(180deg, rgba(26, 26, 46, 0.95) 0%, rgba(22, 33, 62, 0.95) 100%);
  border-radius: 16px;
  overflow: hidden;
  margin: 0.75rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.pro-race-track.horse {
  background: linear-gradient(180deg, rgba(45, 25, 60, 0.95) 0%, rgba(30, 20, 50, 0.95) 100%);
}

.pro-race-track .track-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.875rem 1rem;
  background: rgba(0, 0, 0, 0.25);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.track-info {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.track-icon {
  font-size: 1.25rem;
}

.track-distance {
  font-size: 0.95rem;
  font-weight: 600;
  color: white;
}

.question-progress {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.progress-label {
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.75rem;
}

.progress-numbers {
  font-weight: 600;
  color: white;
  font-size: 0.85rem;
}

.question-progress .progress-bar {
  width: 80px;
  height: 5px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 3px;
  overflow: hidden;
}

.question-progress .progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #4ecdc4, #44a08d);
  border-radius: 3px;
  transition: width 0.3s ease;
}

.pro-race-track.horse .question-progress .progress-fill {
  background: linear-gradient(90deg, #8B5CF6, #a855f7);
}

.track-body {
  position: relative;
  padding: 0.75rem;
  background: transparent;
}

/* Hide track zones - they cause visual chaos */
.track-zones {
  display: none !important;
}

.track-decorations {
  display: none;
}

.race-lanes {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.race-lane {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.625rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

.race-lane.current-player {
  background: rgba(78, 205, 196, 0.12);
  border-color: rgba(78, 205, 196, 0.25);
}

.pro-race-track.horse .race-lane.current-player {
  background: rgba(139, 92, 246, 0.12);
  border-color: rgba(139, 92, 246, 0.25);
}

/* Bots look same as players - no visual difference */
.race-lane.bot {
  opacity: 1;
}

.position-badge {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  font-weight: 700;
  color: white;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  flex-shrink: 0;
}

.position-badge.pos-1 {
  background: linear-gradient(135deg, #ffd700 0%, #f5b800 100%);
  color: #1a1a1a;
  box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
}
.position-badge.pos-2 {
  background: linear-gradient(135deg, #e8e8e8 0%, #b8b8b8 100%);
  color: #1a1a1a;
}
.position-badge.pos-3 {
  background: linear-gradient(135deg, #cd7f32 0%, #a0622a 100%);
  color: #fff;
}

.player-info {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  min-width: 90px;
}

.player-avatar {
  width: 26px;
  height: 26px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 50%;
  flex-shrink: 0;
}

.player-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

.player-name {
  font-size: 0.8rem;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.9);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 70px;
}

/* Hidden - bots should not be identifiable */
.bot-tag {
  display: none;
}

.lane-track {
  flex: 1;
  height: 32px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  position: relative;
  overflow: hidden;
}

.lane-progress {
  height: 100%;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding-right: 2px;
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  min-width: 32px;
}

.vehicle {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 26px;
  height: 26px;
  background: white;
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  flex-shrink: 0;
}

.vehicle.frozen {
  filter: brightness(0.7) saturate(0.5);
  animation: shake 0.5s ease-in-out infinite;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}

.vehicle-emoji {
  font-size: 0.9rem;
}

.effect-shield,
.effect-boost {
  position: absolute;
  font-size: 0.55rem;
}

.effect-shield { top: -3px; right: -3px; }
.effect-boost { bottom: -3px; right: -3px; animation: boostPulse 0.5s ease-in-out infinite; }

@keyframes boostPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

.finish-line {
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.85rem;
  opacity: 0.5;
}

.player-stats {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  min-width: 70px;
  justify-content: flex-end;
}

.player-stats .stat {
  font-size: 0.7rem;
  color: rgba(255, 255, 255, 0.6);
}

.player-stats .stat.speed {
  color: #ffd93d;
  display: flex;
  align-items: center;
  gap: 0.15rem;
  font-weight: 500;
}

.stat-icon {
  font-size: 0.65rem;
}

/* Hide decorative overlay */
.track-overlay {
  display: none;
}

/* ===================================
   PROFESSIONAL RACE QUESTION STYLES
   =================================== */

.pro-race-question {
  padding: 1rem;
  margin: 1rem;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 16px;
  backdrop-filter: blur(10px);
}

.pro-race-question .question-timer {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.timer-circle {
  position: relative;
  width: 60px;
  height: 60px;
  flex-shrink: 0;
}

.timer-circle svg {
  position: absolute;
  inset: 0;
  transform: rotate(-90deg);
}

.timer-progress {
  transition: stroke-dashoffset 1s linear, stroke 0.3s ease;
}

.timer-content {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.timer-content svg {
  color: rgba(255, 255, 255, 0.6);
  width: 14px;
  height: 14px;
  transform: none;
  position: static;
}

.timer-value {
  font-size: 1.1rem;
  font-weight: 700;
  color: white;
}

.question-timer .timer-bar {
  flex: 1;
  height: 8px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
  overflow: hidden;
}

.question-timer .timer-fill {
  height: 100%;
  background: linear-gradient(90deg, #4ecdc4, #44a08d);
  border-radius: 4px;
  transition: width 1s linear, background 0.3s ease;
}

.question-timer.warning .timer-fill {
  background: linear-gradient(90deg, #ffd93d, #f5c400);
}

.question-timer.critical .timer-fill {
  background: linear-gradient(90deg, #ff4757, #c62828);
  animation: timerPulse 0.5s ease-in-out infinite;
}

@keyframes timerPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.question-card {
  background: rgba(255, 255, 255, 0.08);
  border-radius: 12px;
  padding: 1.25rem;
  margin-bottom: 1rem;
}

.question-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.difficulty-badge {
  font-size: 0.85rem;
  color: #ffd93d;
}

.speed-bonus {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.85rem;
  color: #4ecdc4;
  font-weight: 600;
}

.question-text {
  font-size: 1.5rem;
  font-weight: 700;
  color: white;
  text-align: center;
  line-height: 1.4;
}

.answer-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.answer-option {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}

.answer-option:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.answer-option:disabled {
  cursor: default;
}

.answer-option.selected {
  transform: scale(0.98);
  box-shadow: inset 0 0 0 3px rgba(255, 255, 255, 0.5);
}

.answer-option.correct {
  animation: correctPulse 0.5s ease-out;
}

.answer-option.wrong {
  animation: wrongShake 0.5s ease-out;
}

@keyframes correctPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

@keyframes wrongShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.answer-label {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 700;
  flex-shrink: 0;
}

.option-text {
  flex: 1;
  text-align: left;
}

.result-icon {
  position: absolute;
  right: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  animation: iconPop 0.3s ease-out;
}

@keyframes iconPop {
  0% { transform: scale(0); }
  100% { transform: scale(1); }
}

.result-icon.correct {
  background: rgba(255, 255, 255, 0.3);
  color: white;
}

.result-icon.wrong {
  background: rgba(0, 0, 0, 0.3);
  color: white;
}

.waiting-result {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  padding: 1rem;
  color: rgba(255, 255, 255, 0.7);
}

.waiting-spinner {
  width: 20px;
  height: 20px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-top-color: #4ecdc4;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.host-controls {
  display: flex;
  justify-content: center;
  gap: 1rem;
}

.control-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.875rem 1.5rem;
  border: none;
  border-radius: 10px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.control-btn.reveal {
  background: linear-gradient(135deg, #ffd93d, #f5c400);
  color: #1a1a1a;
}

.control-btn.next {
  background: linear-gradient(135deg, #4ecdc4, #44a08d);
  color: white;
}

.control-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

/* ===================================
   PROFESSIONAL MYSTERY BOX STYLES
   =================================== */

.pro-mystery-box {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.pro-mystery-box.boat {
  background: linear-gradient(180deg, #0077b6 0%, #00b4d8 100%);
}

.pro-mystery-box.horse {
  background: linear-gradient(180deg, #4a7c23 0%, #7cb342 100%);
}

.mystery-particles {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.particle {
  position: absolute;
  width: 8px;
  height: 8px;
  background: rgba(255, 255, 255, 0.5);
  border-radius: 50%;
  left: var(--x);
  top: var(--y);
  animation: particleFloat 3s ease-in-out infinite;
  animation-delay: var(--delay);
}

@keyframes particleFloat {
  0%, 100% { transform: translateY(0) scale(1); opacity: 0.5; }
  50% { transform: translateY(-20px) scale(1.5); opacity: 0.8; }
}

.mystery-content {
  text-align: center;
  z-index: 1;
  padding: 2rem;
}

.mystery-box-icon {
  position: relative;
  display: inline-block;
  margin-bottom: 1.5rem;
}

.mystery-box-icon svg {
  color: #ffd93d;
}

.mystery-box-icon.shake {
  animation: boxShake 0.3s ease-in-out infinite;
}

@keyframes boxShake {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-10deg); }
  75% { transform: rotate(10deg); }
}

.mystery-box-icon .sparkle {
  position: absolute;
  color: #ffd93d;
  animation: sparkleAnim 1.5s ease-in-out infinite;
}

.sparkle.top-left { top: -10px; left: -10px; animation-delay: 0s; }
.sparkle.top-right { top: -10px; right: -10px; animation-delay: 0.5s; }
.sparkle.bottom { bottom: -10px; left: 50%; transform: translateX(-50%); animation-delay: 1s; }

@keyframes sparkleAnim {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.3); opacity: 0.5; }
}

.mystery-title {
  font-size: 2.5rem;
  font-weight: 800;
  color: white;
  margin-bottom: 0.5rem;
  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.mystery-difficulty {
  font-size: 1.1rem;
  margin-bottom: 1rem;
}

.mystery-hint {
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 2rem;
}

.open-box-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 2rem;
  background: linear-gradient(135deg, #ffd93d, #f5c400);
  border: none;
  border-radius: 12px;
  font-size: 1.1rem;
  font-weight: 700;
  color: #1a1a1a;
  cursor: pointer;
  transition: all 0.2s ease;
}

.open-box-btn:hover:not(:disabled) {
  transform: scale(1.05);
  box-shadow: 0 8px 30px rgba(255, 217, 61, 0.4);
}

.open-box-btn:disabled {
  opacity: 0.7;
  cursor: wait;
}

.btn-spinner {
  width: 20px;
  height: 20px;
  border: 2px solid rgba(0, 0, 0, 0.2);
  border-top-color: #1a1a1a;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.reward-reveal {
  animation: rewardPop 0.5s ease-out;
}

@keyframes rewardPop {
  0% { transform: scale(0); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

.reward-glow {
  position: absolute;
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(255, 217, 61, 0.3) 0%, transparent 70%);
  border-radius: 50%;
  animation: glowPulse 2s ease-in-out infinite;
}

@keyframes glowPulse {
  0%, 100% { transform: scale(1); opacity: 0.5; }
  50% { transform: scale(1.2); opacity: 0.8; }
}

.reward-icon {
  width: 100px;
  height: 100px;
  margin: 0 auto 1.5rem;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.reward-emoji {
  font-size: 3rem;
}

.reward-name {
  font-size: 1.75rem;
  font-weight: 700;
  color: #ffd93d;
  margin-bottom: 0.5rem;
}

.reward-description {
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 1rem;
}

.reward-stats {
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
}

.reward-stats .stat {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.reward-stats .label {
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.6);
}

.reward-stats .value {
  font-size: 1.1rem;
  font-weight: 600;
  color: white;
}

.reward-applied {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: rgba(78, 205, 196, 0.3);
  border-radius: 100px;
  color: #4ecdc4;
  font-weight: 600;
}

/* ===================================
   PROFESSIONAL PLAYER STATS STYLES
   =================================== */

.pro-player-stats {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(10px);
  padding: 1rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  z-index: 100;
}

.pro-player-stats.boat {
  border-top-color: rgba(78, 205, 196, 0.3);
}

.pro-player-stats.horse {
  border-top-color: rgba(139, 92, 246, 0.3);
}

.stats-player {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}

.stats-player .position-badge {
  width: 36px;
  height: 36px;
}

.player-identity {
  display: flex;
  align-items: center;
  gap: 0.35rem;
}

.stats-player .player-avatar {
  font-size: 1.5rem;
}

.stats-player .player-vehicle {
  font-size: 1.25rem;
}

.stats-player .player-name {
  font-size: 1rem;
  font-weight: 600;
  color: white;
}

.stats-grid {
  display: flex;
  gap: 1rem;
  margin-bottom: 0.75rem;
  overflow-x: auto;
  padding-bottom: 0.5rem;
}

.stats-grid .stat-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  flex-shrink: 0;
}

.stats-grid .stat-item.speed .stat-icon {
  color: #ffd93d;
}

.stats-grid .stat-item.streak .stat-icon {
  color: #ff6b6b;
}

.stats-grid .stat-item.streak.hot {
  background: rgba(255, 107, 107, 0.2);
  animation: hotStreak 0.5s ease-in-out infinite;
}

@keyframes hotStreak {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.stats-grid .stat-item.accuracy .stat-icon {
  color: #4ecdc4;
}

.stats-grid .stat-item.distance .stat-icon {
  font-size: 1.25rem;
}

.stat-content {
  display: flex;
  flex-direction: column;
}

.stat-content .stat-value {
  font-size: 1rem;
  font-weight: 700;
  color: white;
}

.stat-content .stat-label {
  font-size: 0.7rem;
  color: rgba(255, 255, 255, 0.6);
}

.active-powerups {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
  flex-wrap: wrap;
}

.powerup {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.35rem 0.75rem;
  background: rgba(139, 92, 246, 0.2);
  border: 1px solid rgba(139, 92, 246, 0.3);
  border-radius: 100px;
  font-size: 0.8rem;
  color: white;
}

.powerup.shield {
  background: rgba(78, 205, 196, 0.2);
  border-color: rgba(78, 205, 196, 0.3);
}

.powerup-icon {
  font-size: 1rem;
}

.powerup-name {
  font-weight: 500;
}

.powerup-duration {
  background: rgba(255, 255, 255, 0.2);
  padding: 0.1rem 0.35rem;
  border-radius: 3px;
  font-size: 0.7rem;
}

.progress-section {
  position: relative;
}

.progress-section .progress-bar {
  height: 8px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
  position: relative;
  overflow: visible;
}

.progress-section .progress-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.5s ease-out;
}

.pro-player-stats.boat .progress-fill {
  background: linear-gradient(90deg, #4ecdc4, #44a08d);
}

.pro-player-stats.horse .progress-fill {
  background: linear-gradient(90deg, #8B5CF6, #a855f7);
}

.progress-marker {
  position: absolute;
  top: -8px;
  transform: translateX(-50%);
  font-size: 1.25rem;
  transition: left 0.5s ease-out;
}

.progress-labels {
  display: flex;
  justify-content: space-between;
  margin-top: 0.35rem;
  font-size: 0.7rem;
  color: rgba(255, 255, 255, 0.5);
}

/* Loading State */
.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 50vh;
  gap: 1rem;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid rgba(255, 255, 255, 0.2);
  border-top-color: #4ecdc4;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

/* Responsive Styles */
@media (max-width: 768px) {
  .boat-racing-header h1,
  .horse-racing-header h1 {
    font-size: 2rem;
  }

  .countdown-title {
    font-size: 2rem;
  }

  .countdown-circle {
    width: 120px;
    height: 120px;
  }

  .countdown-number {
    font-size: 3rem;
  }

  .pro-race-track {
    margin: 0.5rem;
  }

  .question-text {
    font-size: 1.25rem;
  }

  .answer-grid {
    grid-template-columns: 1fr;
  }

  .answer-option {
    padding: 0.875rem;
  }

  .pro-player-stats {
    padding: 0.75rem;
  }

  .stats-grid {
    gap: 0.5rem;
  }

  .stats-grid .stat-item {
    padding: 0.35rem 0.5rem;
  }
}

/* ================================
   ĐƯỜNG ĐUA - NEW RACING FEATURES
   ================================ */

/* === Game Mode Selector === */
.mode-selector {
  display: flex;
  gap: 1rem;
  margin-top: 0.5rem;
}

.mode-btn {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  background: var(--bg-secondary);
  border: 2px solid transparent;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.mode-btn:hover {
  background: var(--bg-hover);
}

.mode-btn.selected {
  border-color: var(--primary);
  background: rgba(139, 92, 246, 0.1);
}

.mode-icon {
  font-size: 2rem;
}

.mode-name {
  font-weight: 600;
  color: var(--text-primary);
}

.mode-desc {
  font-size: 0.75rem;
  color: var(--text-secondary);
}

/* === Team Count Selector === */
.team-count-selector {
  display: flex;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.team-count-btn {
  flex: 1;
  padding: 0.75rem;
  background: var(--bg-secondary);
  border: 2px solid transparent;
  border-radius: 8px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.team-count-btn:hover {
  background: var(--bg-hover);
}

.team-count-btn.selected {
  border-color: var(--primary);
  background: rgba(139, 92, 246, 0.1);
}

/* === Trap Toggle === */
.trap-toggle {
  display: flex;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.toggle-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem;
  background: var(--bg-secondary);
  border: 2px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.toggle-btn:hover {
  background: var(--bg-hover);
}

.toggle-btn.selected {
  border-color: var(--primary);
  background: rgba(139, 92, 246, 0.1);
}

.trap-info {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 0.75rem;
  padding: 0.75rem;
  background: rgba(245, 158, 11, 0.1);
  border-radius: 8px;
  font-size: 0.85rem;
  color: var(--text-secondary);
}

/* === Track Zones Preview === */
.track-zones-preview {
  display: flex;
  height: 40px;
  border-radius: 8px;
  overflow: hidden;
  margin-top: 0.5rem;
}

.zone-preview {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 0;
}

.zone-deco {
  font-size: 1.25rem;
}

.zone-labels {
  display: flex;
  justify-content: space-between;
  margin-top: 0.5rem;
  font-size: 0.7rem;
  color: var(--text-secondary);
}

/* === Team Cards === */
.team-card {
  background: var(--bg-secondary);
  border: 2px solid transparent;
  border-radius: 12px;
  padding: 1rem;
  cursor: pointer;
  transition: all 0.2s;
  border-left: 4px solid var(--team-color, var(--primary));
}

.team-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.team-card.selected {
  border-color: var(--team-color, var(--primary));
  background: rgba(var(--team-color-rgb, 139, 92, 246), 0.1);
}

.team-card-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}

.team-emoji {
  font-size: 1.5rem;
}

.team-name {
  font-weight: 600;
}

.team-members {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}

.team-member {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.85rem;
}

.member-avatar {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--bg-hover);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
}

.member-avatar img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
}

.team-stats {
  display: flex;
  justify-content: space-between;
  font-size: 0.75rem;
  color: var(--text-secondary);
}

/* === Team Selector in Lobby === */
.lobby-teams {
  margin: 1.5rem 0;
  padding: 1rem;
  background: var(--bg-secondary);
  border-radius: 12px;
}

.teams-header {
  margin-bottom: 1rem;
}

.teams-title {
  font-weight: 600;
  font-size: 1.1rem;
}

.teams-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
}

.team-select-card {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding: 1rem;
  background: var(--bg-primary);
  border: 2px solid transparent;
  border-left: 4px solid var(--team-color, var(--primary));
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.team-select-card:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.team-select-card.selected {
  border-color: var(--team-color, var(--primary));
  background: rgba(var(--team-color-rgb, 139, 92, 246), 0.05);
}

.team-select-card:disabled {
  cursor: default;
}

.team-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.check-icon {
  color: var(--success);
}

.team-members-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
  min-height: 28px;
}

.member-mini {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--bg-hover);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  overflow: hidden;
}

.member-mini img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.no-members {
  font-size: 0.75rem;
  color: var(--text-secondary);
  font-style: italic;
}

.team-count {
  font-size: 0.75rem;
  color: var(--text-secondary);
}

.player-team-indicator {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
}

/* === Team Scoreboard === */
.team-scoreboard {
  background: var(--bg-secondary);
  border-radius: 12px;
  padding: 1rem;
}

.scoreboard-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--border);
}

.scoreboard-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.scoreboard-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: var(--bg-primary);
  border-radius: 8px;
  border-left: 4px solid var(--team-color, var(--primary));
}

.scoreboard-item.current {
  background: rgba(var(--team-color-rgb, 139, 92, 246), 0.1);
}

.item-position {
  font-size: 1.25rem;
  min-width: 30px;
}

.item-team {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
}

.item-stats {
  display: flex;
  gap: 0.75rem;
  font-size: 0.8rem;
  color: var(--text-secondary);
}

.team-scoreboard-mini {
  position: fixed;
  top: 80px;
  right: 1rem;
  width: 250px;
  z-index: 100;
  max-height: 300px;
  overflow-y: auto;
}

/* === Trap Markers on Track === */
.track-traps {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
}

.trap-marker {
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
}

.trap-emoji {
  font-size: 1.5rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.trap-pulse {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: rgba(239, 68, 68, 0.3);
  animation: trap-pulse 1.5s infinite;
}

@keyframes trap-pulse {
  0% { transform: translate(-50%, -50%) scale(0.8); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
}

.trap-marker.trap-imprisonment .trap-pulse { background: rgba(107, 114, 128, 0.3); }
.trap-marker.trap-freeze .trap-pulse { background: rgba(59, 130, 246, 0.3); }
.trap-marker.trap-sinkhole .trap-pulse { background: rgba(75, 85, 99, 0.3); }

/* === Trap Triggered Overlay === */
.trap-triggered-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: overlay-fade-in 0.3s ease-out;
}

@keyframes overlay-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.trap-triggered-content {
  background: var(--bg-primary);
  border-radius: 20px;
  padding: 2rem;
  text-align: center;
  max-width: 400px;
  width: 90%;
  transform: scale(0.9);
  opacity: 0;
  transition: all 0.3s ease-out;
}

.trap-triggered-content.show {
  transform: scale(1);
  opacity: 1;
}

.trap-triggered-icon {
  font-size: 4rem;
  margin-bottom: 1rem;
}

.trap-triggered-icon.shake {
  animation: shake 0.5s ease-out;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-10px); }
  40%, 80% { transform: translateX(10px); }
}

.trap-triggered-title {
  font-size: 1.75rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
}

.trap-triggered-desc {
  color: var(--text-secondary);
  margin-bottom: 1rem;
}

.trap-duration {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: var(--bg-secondary);
  border-radius: 25px;
  font-weight: 500;
}

/* === Escape Mini Game === */
.escape-mini-game {
  margin-top: 1.5rem;
}

.escape-instruction {
  font-weight: 500;
  margin-bottom: 1rem;
}

.escape-progress-bar {
  height: 12px;
  background: var(--bg-secondary);
  border-radius: 6px;
  overflow: hidden;
  margin-bottom: 1rem;
}

.escape-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #22c55e, #16a34a);
  border-radius: 6px;
  transition: width 0.1s;
}

.escape-tap-button {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
  padding: 1.5rem 3rem;
  background: linear-gradient(135deg, #f59e0b, #d97706);
  border: none;
  border-radius: 16px;
  color: white;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.1s;
  box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
}

.escape-tap-button:active {
  transform: scale(0.95);
}

.tap-icon {
  font-size: 2rem;
}

.tap-text {
  font-size: 1.25rem;
}

.tap-count {
  font-size: 0.85rem;
  opacity: 0.8;
}

.escape-success {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--success);
}

/* === Trap Warning === */
.trap-warning {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: rgba(239, 68, 68, 0.9);
  color: white;
  border-radius: 25px;
  font-weight: 500;
  animation: warning-pulse 1s infinite;
  z-index: 100;
}

@keyframes warning-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* === Trap Effect Notification === */
.trap-effect-notification {
  position: fixed;
  top: 100px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  z-index: 100;
}

.effect-notice {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: rgba(107, 114, 128, 0.9);
  color: white;
  border-radius: 25px;
  font-weight: 500;
  animation: slide-down 0.3s ease-out;
}

@keyframes slide-down {
  from { transform: translateY(-20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.effect-notice.effect-imprisonment { background: rgba(107, 114, 128, 0.9); }
.effect-notice.effect-freeze { background: rgba(59, 130, 246, 0.9); }

/* === Trap Effects in Stats Bar === */
.trap-effects {
  display: flex;
  gap: 0.25rem;
  margin-left: 0.5rem;
}

.trap-effect-badge {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.5rem;
  background: rgba(239, 68, 68, 0.2);
  border-radius: 12px;
  font-size: 0.85rem;
}

.trap-effect-badge.effect-imprisonment { background: rgba(107, 114, 128, 0.2); }
.trap-effect-badge.effect-freeze { background: rgba(59, 130, 246, 0.2); }
.trap-effect-badge.effect-sinkhole { background: rgba(75, 85, 99, 0.2); }

/* === Inventory Bar === */
.inventory-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem 1rem;
  background: var(--bg-secondary);
  border-top: 1px solid var(--border);
  z-index: 100;
}

.inventory-bar.disabled {
  opacity: 0.6;
  pointer-events: none;
}

.inventory-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
}

.inventory-slots {
  display: flex;
  gap: 0.5rem;
  flex: 1;
}

.inventory-slot {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-primary);
  border: 2px solid var(--border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
}

.inventory-slot:hover:not(:disabled):not(.empty) {
  transform: scale(1.05);
  border-color: var(--primary);
}

.inventory-slot.empty {
  cursor: default;
  opacity: 0.5;
}

.inventory-slot.powerup {
  border-color: rgba(139, 92, 246, 0.5);
}

.inventory-slot.trap {
  border-color: rgba(239, 68, 68, 0.5);
}

.slot-emoji {
  font-size: 1.5rem;
}

.slot-category {
  position: absolute;
  bottom: 2px;
  right: 2px;
  font-size: 0.6rem;
}

.empty-icon {
  color: var(--text-secondary);
  font-size: 1.5rem;
}

/* === Trap Placement Modal === */
.trap-placement-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.trap-placement-modal {
  background: var(--bg-primary);
  border-radius: 16px;
  padding: 1.5rem;
  max-width: 400px;
  width: 90%;
}

.modal-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.modal-icon {
  font-size: 2rem;
}

.modal-content {
  margin-bottom: 1.5rem;
}

.placement-desc {
  color: var(--text-secondary);
  margin-bottom: 1rem;
}

.placement-track-preview {
  padding: 1rem 0;
}

.track-line {
  position: relative;
  height: 20px;
  background: var(--bg-secondary);
  border-radius: 10px;
}

.your-position,
.trap-position,
.finish-line {
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.25rem;
}

.trap-position {
  animation: bounce 0.5s infinite alternate;
}

@keyframes bounce {
  from { transform: translate(-50%, -60%); }
  to { transform: translate(-50%, -40%); }
}

.placement-slider {
  margin-top: 1rem;
}

.placement-slider label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
}

.placement-slider input[type="range"] {
  width: 100%;
}

.slider-labels {
  display: flex;
  justify-content: space-between;
  font-size: 0.75rem;
  color: var(--text-secondary);
  margin-top: 0.25rem;
}

.modal-actions {
  display: flex;
  gap: 0.75rem;
}

.modal-actions button {
  flex: 1;
  padding: 0.75rem;
  border-radius: 8px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.cancel-btn {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
}

.place-btn {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  color: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

/* === Milestone Question === */
.milestone-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  color: #78350f;
  border-radius: 25px;
  font-weight: 700;
  font-size: 0.85rem;
  animation: glow 2s infinite;
  margin-bottom: 0.5rem;
}

@keyframes glow {
  0%, 100% { box-shadow: 0 0 10px rgba(251, 191, 36, 0.5); }
  50% { box-shadow: 0 0 20px rgba(251, 191, 36, 0.8); }
}

.badge-icon {
  font-size: 1rem;
}

.question-display.milestone {
  border: 3px solid #fbbf24;
  border-radius: 16px;
  padding: 1.5rem;
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05));
}

.milestone-bonus {
  color: #f59e0b;
  font-weight: 600;
}

.milestone-reward-preview {
  margin-top: 1rem;
  padding: 1rem;
  background: rgba(251, 191, 36, 0.1);
  border-radius: 12px;
}

.reward-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
}

.reward-items {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.reward-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.85rem;
}

/* === Milestone Overlay === */
.milestone-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.milestone-overlay-content {
  text-align: center;
  animation: milestone-pop 0.5s ease-out;
}

@keyframes milestone-pop {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.milestone-sparkles {
  font-size: 2rem;
  animation: sparkle 1s infinite;
}

@keyframes sparkle {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.2); }
}

.milestone-icon {
  font-size: 4rem;
  margin: 1rem 0;
}

.milestone-title {
  font-size: 2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.milestone-subtitle {
  color: var(--text-secondary);
  margin-bottom: 1rem;
}

.milestone-desc {
  color: var(--text-primary);
  margin-bottom: 1.5rem;
}

.milestone-rewards-summary {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  font-size: 0.9rem;
}

.milestone-continue-btn {
  padding: 1rem 2rem;
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  color: #78350f;
  border: none;
  border-radius: 12px;
  font-weight: 700;
  font-size: 1.1rem;
  cursor: pointer;
  transition: transform 0.2s;
}

.milestone-continue-btn:hover {
  transform: scale(1.05);
}

/* === Team Results === */
.team-results {
  margin: 1.5rem 0;
  padding: 1.5rem;
  background: var(--bg-secondary);
  border-radius: 16px;
}

.team-podium {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 1rem;
  margin: 2rem 0;
}

.team-podium .podium-place {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.team-podium .podium-item {
  text-align: center;
}

.team-podium .podium-emoji {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
}

.team-podium .podium-name {
  font-weight: 600;
  margin-bottom: 0.25rem;
}

.team-podium .podium-stats {
  font-size: 0.8rem;
  color: var(--text-secondary);
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.team-podium .podium-block {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1rem;
  background: var(--bg-primary);
  border-radius: 8px;
  margin-top: 0.5rem;
}

.team-podium .first .podium-block {
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  color: #78350f;
  min-height: 80px;
}

.team-podium .second .podium-block {
  background: linear-gradient(135deg, #9ca3af, #6b7280);
  color: white;
  min-height: 60px;
}

.team-podium .third .podium-block {
  background: linear-gradient(135deg, #d97706, #b45309);
  color: white;
  min-height: 40px;
}

.team-rankings-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-top: 1.5rem;
}

/* === Track Zones === */
.track-zones {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
}

.track-zone {
  position: absolute;
  top: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.zone-decorations {
  display: flex;
  gap: 1rem;
  opacity: 0.5;
}

.zone-deco {
  font-size: 1.5rem;
}

.pro-race-track.multi-zone .track-body {
  position: relative;
}

/* === Mode Badge === */
.mode-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.75rem;
  background: rgba(139, 92, 246, 0.2);
  color: var(--primary);
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 500;
}

.mode-badge.team {
  background: rgba(59, 130, 246, 0.2);
  color: #3b82f6;
}

/* === Team Colors === */
.team-red { --team-color: #ef4444; --team-color-rgb: 239, 68, 68; }
.team-blue { --team-color: #3b82f6; --team-color-rgb: 59, 130, 246; }
.team-yellow { --team-color: #eab308; --team-color-rgb: 234, 179, 8; }
.team-purple { --team-color: #a855f7; --team-color-rgb: 168, 85, 247; }

/* === Team Indicator in Lanes === */
.team-indicator {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  margin-right: 0.25rem;
}

/* === Ranking Team Indicator === */
.ranking-team-indicator {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  margin-right: 0.5rem;
}

.ranking-traps {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  color: #f59e0b;
}

/* === Vehicle Trap Effects === */
.vehicle.escaping {
  animation: escaping-shake 0.3s infinite;
}

@keyframes escaping-shake {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

.effect-trap {
  position: absolute;
  top: -8px;
  right: -8px;
  font-size: 0.75rem;
  animation: trap-effect-bounce 0.5s infinite alternate;
}

@keyframes trap-effect-bounce {
  from { transform: scale(1); }
  to { transform: scale(1.2); }
}

/* === Race Lane with Trap === */
.race-lane.trapped {
  opacity: 0.7;
}

.race-lane.trapped .vehicle {
  filter: grayscale(0.5);
}

/* === Responsive for New Features === */
@media (max-width: 768px) {
  .mode-selector {
    flex-direction: column;
  }

  .teams-grid {
    grid-template-columns: 1fr 1fr;
  }

  .team-scoreboard-mini {
    position: static;
    width: 100%;
    margin-bottom: 1rem;
  }

  .inventory-bar {
    padding: 0.5rem;
  }

  .inventory-slot {
    width: 40px;
    height: 40px;
  }

  .trap-triggered-content {
    padding: 1.5rem;
  }

  .trap-triggered-icon {
    font-size: 3rem;
  }

  .milestone-title {
    font-size: 1.5rem;
  }
}

/* ================================================================
   RACING GAME V2 - Professional Vertical Track Design
   ================================================================ */

.racing-play-v2 {
  min-height: 100vh;
  background: linear-gradient(180deg, #0f172a 0%, #1e293b 50%, #334155 100%);
  position: relative;
  overflow: hidden;
}

.leave-btn-v2 {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 100;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  background: rgba(0, 0, 0, 0.5);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
}

.leave-btn-v2:hover {
  background: #ef4444;
  transform: scale(1.1);
}

/* === TRACK VIEW === */
.race-v2-track {
  min-height: 100vh;
  padding: 1rem;
  display: flex;
  flex-direction: column;
}

.track-v2-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1rem;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 12px;
  margin-bottom: 0.75rem;
}

.track-v2-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-weight: 600;
  font-size: 0.9rem;
}

.track-icon {
  font-size: 1.25rem;
}

.special-badge {
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  color: #1a1a1a;
  padding: 0.375rem 0.75rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 700;
  animation: pulse-glow 1.5s ease-in-out infinite;
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 10px rgba(251, 191, 36, 0.5); }
  50% { box-shadow: 0 0 25px rgba(251, 191, 36, 0.8); }
}

/* Track lanes container - vertical */
.track-v2-lanes {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: linear-gradient(180deg,
    rgba(34, 197, 94, 0.2) 0%,
    rgba(34, 197, 94, 0.1) 5%,
    rgba(139, 92, 246, 0.05) 50%,
    rgba(239, 68, 68, 0.1) 95%,
    rgba(239, 68, 68, 0.2) 100%
  );
  border-radius: 16px;
  position: relative;
  overflow: hidden;
  min-height: 60vh;
}

.finish-line-v2 {
  padding: 0.75rem;
  background: linear-gradient(90deg, #22c55e, #16a34a);
  text-align: center;
  color: white;
  font-weight: 700;
  font-size: 0.85rem;
  letter-spacing: 2px;
}

.start-line-v2 {
  padding: 0.5rem;
  background: linear-gradient(90deg, #ef4444, #dc2626);
  text-align: center;
  color: white;
  font-weight: 600;
  font-size: 0.75rem;
  letter-spacing: 1px;
}

.track-v2-area {
  flex: 1;
  position: relative;
  display: flex;
  padding: 0 0.5rem;
}

/* Player lane - vertical */
.player-lane-v2 {
  flex: 1;
  position: relative;
  border-right: 1px dashed rgba(255, 255, 255, 0.1);
}

.player-lane-v2:last-child {
  border-right: none;
}

.player-lane-v2.is-me {
  background: rgba(99, 102, 241, 0.1);
}

.player-lane-v2.frozen .player-marker-v2 {
  filter: saturate(0.4) brightness(0.7);
}

.lane-line-v2 {
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 2px;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.1) 0px,
    rgba(255, 255, 255, 0.1) 10px,
    transparent 10px,
    transparent 20px
  );
}

/* Player marker */
.player-marker-v2 {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  transition: bottom 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 10;
}

.vehicle-v2 {
  width: 44px;
  height: 44px;
  background: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  position: relative;
}

.vehicle-v2.current {
  background: linear-gradient(135deg, #818cf8, #6366f1);
  box-shadow: 0 4px 20px rgba(99, 102, 241, 0.5);
}

.effect-icon {
  position: absolute;
  font-size: 0.8rem;
}

.effect-icon.shield { top: -8px; right: -8px; }
.effect-icon.frozen { top: -8px; left: -8px; animation: frost 1s infinite; }
.effect-icon.boost { bottom: -8px; right: -8px; animation: rocket 0.5s infinite; }

@keyframes frost {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

@keyframes rocket {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

.player-tag-v2 {
  margin-top: 0.375rem;
  background: rgba(0, 0, 0, 0.7);
  padding: 0.25rem 0.5rem;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.125rem;
  min-width: 60px;
}

.rank-v2 {
  font-size: 0.65rem;
  color: #fbbf24;
  font-weight: 700;
}

.name-v2 {
  font-size: 0.7rem;
  color: white;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 50px;
}

.speed-v2 {
  font-size: 0.6rem;
  color: #4ecdc4;
}

/* My stats bar */
.my-stats-v2 {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  padding: 0.75rem;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 12px;
  margin-top: 0.75rem;
}

.stat-v2 {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  color: white;
  font-size: 0.85rem;
  font-weight: 500;
}

.stat-v2.correct {
  color: #4ecdc4;
}

.stat-v2.shield {
  color: #fbbf24;
}

.next-question-btn {
  width: 100%;
  margin-top: 0.75rem;
  padding: 1rem;
  background: linear-gradient(135deg, #6366f1, #4f46e5);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.next-question-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
}

/* === QUESTION VIEW === */
.race-v2-question {
  min-height: 100vh;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.timer-v2 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 12px;
  color: white;
}

.timer-v2.warning {
  background: rgba(239, 68, 68, 0.3);
  animation: timer-flash 0.5s infinite;
}

@keyframes timer-flash {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.timer-bar-v2 {
  flex: 1;
  height: 6px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
  overflow: hidden;
}

.timer-fill-v2 {
  height: 100%;
  background: linear-gradient(90deg, #22c55e, #16a34a);
  border-radius: 3px;
  transition: width 1s linear;
}

.timer-v2.warning .timer-fill-v2 {
  background: linear-gradient(90deg, #ef4444, #dc2626);
}

.special-question-badge {
  text-align: center;
  padding: 0.625rem;
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  color: #1a1a1a;
  border-radius: 12px;
  font-weight: 700;
  font-size: 0.85rem;
  animation: pulse-glow 1.5s ease-in-out infinite;
}

.question-card-v2 {
  background: rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  padding: 1.5rem;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.question-card-v2.special {
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.1));
  border-color: rgba(251, 191, 36, 0.3);
}

.difficulty-v2 {
  margin-bottom: 0.5rem;
  font-size: 0.85rem;
}

.question-text-v2 {
  font-size: 2.5rem;
  font-weight: 700;
  color: white;
  font-family: var(--font-jp-kanji);
  margin-bottom: 0.75rem;
  line-height: 1.2;
}

.speed-bonus-v2 {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  background: rgba(78, 205, 196, 0.2);
  color: #4ecdc4;
  padding: 0.375rem 0.75rem;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
}

/* Answer options - White background design */
.options-v2 {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 0 0.5rem;
}

.option-v2 {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 1.25rem;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  color: #1f2937;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.option-v2:hover:not(:disabled):not(.correct):not(.wrong) {
  border-color: #9ca3af;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.option-v2:disabled {
  cursor: not-allowed;
}

/* Selected state - Light red background */
.option-v2.selected {
  background: #fee2e2;
  border-color: #fca5a5;
}

/* Correct answer - Bold green border + green background */
.option-v2.correct {
  background: #dcfce7 !important;
  border: 3px solid #16a34a !important;
  animation: correct-pop 0.4s ease;
}

@keyframes correct-pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

/* Wrong answer - Bold dark red border */
.option-v2.wrong {
  background: #fee2e2 !important;
  border: 3px solid #dc2626 !important;
  animation: wrong-shake 0.4s ease;
}

@keyframes wrong-shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-4px); }
  40% { transform: translateX(4px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}

/* Option label (A, B, C, D) */
.option-label {
  width: 36px;
  height: 36px;
  background: #f3f4f6;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  font-weight: 700;
  color: #374151;
  flex-shrink: 0;
  transition: all 0.2s ease;
}

.option-v2.selected .option-label {
  background: #fca5a5;
  color: #991b1b;
}

.option-v2.correct .option-label {
  background: #16a34a;
  color: white;
}

.option-v2.wrong .option-label {
  background: #dc2626;
  color: white;
}

/* Option text */
.option-text {
  flex: 1;
  text-align: left;
  font-size: 1rem;
}

/* Option mark (checkmark/cross) */
.option-mark {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  font-weight: 700;
  flex-shrink: 0;
}

.option-mark.correct {
  background: #16a34a;
  color: white;
}

.option-mark.wrong {
  background: #dc2626;
  color: white;
}

/* Submit answer button */
.submit-answer-btn {
  margin-top: 1rem;
  padding: 1rem 2rem;
  font-size: 1.1rem;
  font-weight: 700;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  width: 100%;
}

.submit-answer-btn.ready {
  background: linear-gradient(135deg, var(--jp-shu), var(--jp-shu-dark));
  color: white;
  box-shadow: 0 4px 12px rgba(227, 66, 52, 0.3);
}

.submit-answer-btn.ready:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(227, 66, 52, 0.4);
}

.submit-answer-btn.ready:active {
  transform: translateY(0);
}

.submit-answer-btn.disabled {
  background: #e5e7eb;
  color: #9ca3af;
  cursor: not-allowed;
}

.mark-v2 {
  font-size: 1.5rem;
}

/* Result section */
.result-v2 {
  text-align: center;
  padding: 1rem;
  animation: fade-in 0.3s ease;
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.result-correct {
  color: #22c55e;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 1rem;
}

.result-wrong {
  color: #ef4444;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 1rem;
}

.proceed-btn-v2 {
  padding: 0.875rem 2rem;
  background: linear-gradient(135deg, #6366f1, #4f46e5);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.proceed-btn-v2:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
}

/* === WHEEL VIEW === */
.race-v2-wheel {
  min-height: 100vh;
  padding: 2rem 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2rem;
}

.race-v2-wheel h2 {
  color: white;
  font-size: 1.5rem;
  text-align: center;
}

.wheel-container {
  width: 280px;
  height: 280px;
  border-radius: 50%;
  background: conic-gradient(
    #ef4444 0deg 60deg,
    #22c55e 60deg 120deg,
    #3b82f6 120deg 180deg,
    #f59e0b 180deg 240deg,
    #8b5cf6 240deg 300deg,
    #06b6d4 300deg 360deg
  );
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 40px rgba(99, 102, 241, 0.4);
}

.wheel-container.spinning {
  animation: spin 2s cubic-bezier(0.2, 0.8, 0.3, 1) forwards;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(1800deg); }
}

.wheel-segment {
  position: absolute;
  width: 50%;
  height: 50%;
  transform-origin: 100% 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 1.5rem;
  color: white;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.wheel-segment:nth-child(1) { transform: rotate(-30deg) skewY(30deg); }
.wheel-segment:nth-child(2) { transform: rotate(30deg) skewY(30deg); }
.wheel-segment:nth-child(3) { transform: rotate(90deg) skewY(30deg); }
.wheel-segment:nth-child(4) { transform: rotate(150deg) skewY(30deg); }
.wheel-segment:nth-child(5) { transform: rotate(210deg) skewY(30deg); }
.wheel-segment:nth-child(6) { transform: rotate(270deg) skewY(30deg); }

.wheel-segment.winner {
  animation: winner-glow 0.5s ease infinite alternate;
}

@keyframes winner-glow {
  from { filter: brightness(1); }
  to { filter: brightness(1.3); }
}

.segment-emoji {
  font-size: 1.5rem;
}

.segment-name {
  font-size: 0.6rem;
  font-weight: 600;
}

.wheel-center {
  position: absolute;
  width: 60px;
  height: 60px;
  background: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  z-index: 10;
}

.spin-btn {
  padding: 1rem 3rem;
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  color: #1a1a1a;
  border: none;
  border-radius: 30px;
  font-size: 1.25rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 4px 20px rgba(251, 191, 36, 0.4);
}

.spin-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 8px 30px rgba(251, 191, 36, 0.6);
}

.wheel-result {
  text-align: center;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  animation: fade-in 0.3s ease;
}

.wheel-result h3 {
  color: #fbbf24;
  font-size: 1.25rem;
  margin-bottom: 0.5rem;
}

.wheel-result p {
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.9rem;
}

/* === TARGET VIEW === */
.race-v2-target {
  min-height: 100vh;
  padding: 2rem 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
}

.race-v2-target h2 {
  color: white;
  font-size: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.effect-preview {
  color: #fbbf24;
  font-size: 1.1rem;
  font-weight: 600;
  padding: 0.75rem 1.5rem;
  background: rgba(251, 191, 36, 0.1);
  border-radius: 20px;
}

.target-list {
  width: 100%;
  max-width: 400px;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.target-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.08);
  border: 2px solid transparent;
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.target-item:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(99, 102, 241, 0.5);
}

.target-item.selected {
  border-color: #ef4444;
  background: rgba(239, 68, 68, 0.2);
}

.target-item.shielded {
  opacity: 0.5;
  cursor: not-allowed;
}

.target-avatar {
  width: 48px;
  height: 48px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
}

.target-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

.target-name {
  flex: 1;
  color: white;
  font-weight: 500;
  font-size: 1rem;
}

.target-speed {
  color: #4ecdc4;
  font-size: 0.85rem;
}

.shield-badge {
  font-size: 1.25rem;
}

.target-applied {
  padding: 1rem;
  background: rgba(239, 68, 68, 0.2);
  color: #ef4444;
  border-radius: 12px;
  font-weight: 600;
  text-align: center;
  animation: fade-in 0.3s ease;
}

/* === SINKHOLE VIEW === */
.race-v2-sinkhole {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(circle at center, #1a1a1a 0%, #0a0a0a 100%);
  cursor: pointer;
  user-select: none;
}

.sinkhole-bg {
  text-align: center;
  padding: 2rem;
  animation: sinkhole-shake 0.3s infinite;
}

@keyframes sinkhole-shake {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

.sinkhole-icon {
  font-size: 5rem;
  margin-bottom: 1rem;
  animation: sinkhole-pulse 0.5s infinite alternate;
}

@keyframes sinkhole-pulse {
  from { transform: scale(1); }
  to { transform: scale(1.1); }
}

.race-v2-sinkhole h2 {
  color: #ef4444;
  font-size: 1.75rem;
  margin-bottom: 0.5rem;
}

.race-v2-sinkhole p {
  color: rgba(255, 255, 255, 0.7);
  font-size: 1rem;
  margin-bottom: 1.5rem;
}

.escape-progress {
  width: 200px;
  height: 16px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  overflow: hidden;
  margin: 0 auto 0.5rem;
}

.escape-fill {
  height: 100%;
  background: linear-gradient(90deg, #22c55e, #16a34a);
  border-radius: 8px;
  transition: width 0.1s ease;
}

.escape-count {
  color: white;
  font-size: 1.25rem;
  font-weight: 700;
}

.tap-indicator {
  margin-top: 2rem;
  animation: tap-bounce 0.5s infinite;
}

@keyframes tap-bounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.tap-indicator span {
  color: #fbbf24;
  font-size: 1.5rem;
  font-weight: 700;
}

/* === RESPONSIVE === */
@media (max-width: 480px) {
  .vehicle-v2 {
    width: 36px;
    height: 36px;
    font-size: 1.2rem;
  }

  .player-tag-v2 {
    min-width: 50px;
    padding: 0.2rem 0.35rem;
  }

  .name-v2 {
    max-width: 40px;
    font-size: 0.6rem;
  }

  .question-text-v2 {
    font-size: 2rem;
  }

  .wheel-container {
    width: 240px;
    height: 240px;
  }
}

/* ========================================
   BINGO GAME STYLES
   ======================================== */

/* Bingo Page */
.bingo-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 1rem;
}

.bingo-page.playing {
  padding: 0;
}

.bingo-header {
  text-align: center;
  padding: 2rem 1rem;
  color: white;
}

.bingo-header .header-icon {
  font-size: 4rem;
  margin-bottom: 0.5rem;
}

.bingo-header h1 {
  font-size: 2.5rem;
  font-weight: 800;
  margin: 0 0 0.5rem;
}

.bingo-header p {
  font-size: 1.1rem;
  opacity: 0.9;
}

/* Bingo Countdown */
.bingo-countdown {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  color: white;
}

.countdown-circle {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 1.5rem;
  animation: countdown-pulse 1s ease infinite;
}

.countdown-number {
  font-size: 5rem;
  font-weight: 800;
}

@keyframes countdown-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

/* Bingo Menu */
.bingo-menu {
  max-width: 500px;
  margin: 0 auto;
}

.bingo-menu-actions {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.bingo-menu-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  padding: 1.25rem;
  border: none;
  border-radius: 16px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.bingo-menu-btn.primary {
  background: white;
  color: #764ba2;
}

.bingo-menu-btn.secondary {
  background: rgba(255, 255, 255, 0.2);
  color: white;
  border: 2px solid rgba(255, 255, 255, 0.4);
}

.bingo-menu-btn.guide {
  background: rgba(255, 255, 255, 0.1);
  color: white;
}

.bingo-menu-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.bingo-error {
  background: rgba(239, 68, 68, 0.2);
  border: 1px solid rgba(239, 68, 68, 0.4);
  color: white;
  padding: 0.75rem 1rem;
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

/* Bingo Modal */
.bingo-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 1rem;
}

.bingo-modal {
  background: white;
  border-radius: 20px;
  padding: 1.5rem;
  width: 100%;
  max-width: 360px;
  text-align: center;
}

.bingo-modal h3 {
  margin: 0 0 1rem;
  color: #1f2937;
}

.bingo-code-input {
  width: 100%;
  padding: 1rem;
  font-size: 1.5rem;
  font-weight: 700;
  text-align: center;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  letter-spacing: 0.5rem;
}

.bingo-code-input:focus {
  outline: none;
  border-color: #764ba2;
}

.bingo-modal-actions {
  display: flex;
  gap: 0.75rem;
  margin-top: 1.5rem;
}

.bingo-modal-actions .btn-cancel {
  flex: 1;
  padding: 0.875rem;
  border: 2px solid #e5e7eb;
  background: white;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
}

.bingo-modal-actions .btn-join {
  flex: 1;
  padding: 0.875rem;
  border: none;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
}

.bingo-modal-actions .btn-join:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Bingo Setup */
.bingo-setup {
  max-width: 500px;
  margin: 0 auto;
  background: white;
  border-radius: 20px;
  overflow: hidden;
}

.bingo-setup-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 1.25rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
}

.bingo-setup-header .back-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 52px;
  height: 52px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 14px;
  color: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(12px);
  box-shadow: 0 4px 20px rgba(102, 126, 234, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.bingo-setup-header .back-btn svg {
  width: 22px;
  height: 22px;
}

.bingo-setup-header .back-btn:hover {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.22), rgba(255, 255, 255, 0.12));
  border-color: rgba(255, 255, 255, 0.35);
  color: white;
  transform: translateX(-4px);
  box-shadow: 0 6px 28px rgba(102, 126, 234, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.bingo-setup-header h2 {
  margin: 0;
  font-size: 1.25rem;
}

.bingo-setup-form {
  padding: 1.5rem;
}

.bingo-setup-form .form-group {
  margin-bottom: 1.5rem;
}

.bingo-setup-form label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.5rem;
}

.bingo-setup-form input[type="text"] {
  width: 100%;
  padding: 0.875rem;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  font-size: 1rem;
}

.bingo-setup-form input[type="text"]:focus {
  outline: none;
  border-color: #764ba2;
}

.player-selector {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.player-option {
  padding: 0.625rem 1rem;
  border: 2px solid #e5e7eb;
  background: white;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.player-option.selected {
  background: linear-gradient(135deg, #667eea, #764ba2);
  border-color: transparent;
  color: white;
}

.toggle-group {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
}

.toggle-description {
  flex-basis: 100%;
  font-size: 0.875rem;
  color: #6b7280;
  margin-bottom: 0.5rem;
}

.toggle-btn {
  width: 56px;
  height: 32px;
  border-radius: 16px;
  background: #e5e7eb;
  border: none;
  cursor: pointer;
  position: relative;
  transition: background 0.2s ease;
}

.toggle-btn.active {
  background: linear-gradient(135deg, #667eea, #764ba2);
}

.toggle-knob {
  position: absolute;
  width: 24px;
  height: 24px;
  background: white;
  border-radius: 50%;
  top: 4px;
  left: 4px;
  transition: transform 0.2s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.toggle-btn.active .toggle-knob {
  transform: translateX(24px);
}

.rules-preview {
  background: #f3f4f6;
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: 1.5rem;
}

.rules-preview h4 {
  margin: 0 0 0.5rem;
  color: #374151;
}

.rules-preview ul {
  margin: 0;
  padding-left: 1.25rem;
  color: #6b7280;
}

.rules-preview li {
  margin-bottom: 0.25rem;
}

.create-game-btn {
  width: 100%;
  padding: 1rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.create-game-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(118, 75, 162, 0.4);
}

.create-game-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* Bingo Lobby */
.bingo-lobby {
  max-width: 500px;
  margin: 0 auto;
  background: white;
  border-radius: 20px;
  overflow: hidden;
}

.lobby-header {
  background: linear-gradient(135deg, #667eea, #764ba2);
  padding: 1.5rem;
  color: white;
  text-align: center;
}

.lobby-header h2 {
  margin: 0 0 1rem;
}

.room-code-display {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(255, 255, 255, 0.2);
  padding: 0.5rem 1rem;
  border-radius: 12px;
  cursor: pointer;
}

.code-label {
  font-size: 0.875rem;
  opacity: 0.9;
}

.code-value {
  font-size: 1.25rem;
  font-weight: 700;
  letter-spacing: 0.15rem;
}

.copy-btn {
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  padding: 0.25rem;
}

.lobby-settings {
  display: flex;
  justify-content: center;
  gap: 1rem;
  padding: 1rem;
  border-bottom: 1px solid #f3f4f6;
}

.setting-item {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.875rem;
  color: #6b7280;
}

.lobby-players {
  padding: 1.5rem;
}

.lobby-players h3 {
  margin: 0 0 1rem;
  color: #374151;
}

.players-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 0.75rem;
}

.player-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1rem 0.5rem;
  background: #f9fafb;
  border-radius: 12px;
  position: relative;
}

.player-card.is-me {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
  border: 2px solid #764ba2;
}

.player-card.empty {
  border: 2px dashed #e5e7eb;
  background: white;
  opacity: 0.6;
}

.player-avatar {
  font-size: 2rem;
  margin-bottom: 0.375rem;
}

.player-name {
  font-size: 0.75rem;
  font-weight: 500;
  color: #374151;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.host-badge {
  position: absolute;
  top: -8px;
  right: -8px;
}

.lobby-waiting {
  text-align: center;
  padding: 1rem;
  color: #6b7280;
  background: #f9fafb;
}

.lobby-actions {
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.start-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
}

.start-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.waiting-for-host {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  background: #f3f4f6;
  border-radius: 12px;
  color: #6b7280;
}

.leave-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.875rem;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  color: #6b7280;
  font-weight: 500;
  cursor: pointer;
}

/* Bingo Play */
.bingo-play {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  flex-direction: column;
}

/* Layout with leaderboard sidebar */
.bingo-play.with-leaderboard .bingo-play-content {
  display: flex;
  gap: 1rem;
  flex: 1;
  padding: 1rem;
  max-width: 1100px;
  margin: 0 auto;
  width: 100%;
}

.bingo-play .bingo-play-main {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.bingo-play-sidebar {
  width: 280px;
  flex-shrink: 0;
}

.bingo-play-sidebar .player-leaderboard {
  position: sticky;
  top: 1rem;
  max-height: calc(100vh - 6rem);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.bingo-play-sidebar .leaderboard-list {
  flex: 1;
  overflow-y: auto;
}

/* Mobile: stack sidebar below */
@media (max-width: 900px) {
  .bingo-play.with-leaderboard .bingo-play-content {
    flex-direction: column;
  }

  .bingo-play-sidebar {
    width: 100%;
    order: -1;
  }

  .bingo-play-sidebar .player-leaderboard {
    position: relative;
    max-height: none;
  }
}

.bingo-play-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.25rem;
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.15));
  backdrop-filter: blur(10px);
  color: white;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.turn-info {
  display: flex;
  align-items: baseline;
  gap: 0.375rem;
}

.turn-label {
  font-size: 0.75rem;
  opacity: 0.8;
}

.turn-number {
  font-size: 1.25rem;
  font-weight: 700;
}

.drawn-count {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.875rem;
}

.header-actions {
  display: flex;
  gap: 0.5rem;
}

.guide-btn,
.leave-btn-small {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  border-radius: 8px;
  padding: 0.5rem;
  color: white;
  cursor: pointer;
}

/* Drawn number popup animation */
.drawn-number-popup {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  z-index: 100;
  animation: popup-fade-in 0.3s ease;
}

@keyframes popup-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.number-ball {
  width: 160px;
  height: 160px;
  background: linear-gradient(145deg, #ffd700, #ffaa00, #ff8c00);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 15px 50px rgba(255, 215, 0, 0.5), 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 -6px 20px rgba(0, 0, 0, 0.2), inset 0 6px 20px rgba(255, 255, 255, 0.3);
  animation: ball-pop 0.5s ease;
  border: 4px solid rgba(255, 255, 255, 0.3);
}

@keyframes ball-pop {
  0% { transform: scale(0); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.number-ball span {
  font-size: 4rem;
  font-weight: 800;
  color: #1a1a2e;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Bingo Play Main */
.bingo-play-main {
  flex: 1;
  padding: 1rem;
  overflow-y: auto;
}

/* My Bingo Card */
.my-bingo-card {
  background: linear-gradient(145deg, #ffffff, #f9f9f9);
  border-radius: 20px;
  padding: 1.25rem;
  margin-bottom: 1rem;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.5);
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.75rem;
}

.card-title {
  font-weight: 700;
  color: #374151;
}

.marked-count {
  font-size: 0.875rem;
  color: #16a34a;
  font-weight: 600;
}

.bingo-rows {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.bingo-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.bingo-row.complete {
  background: rgba(22, 163, 74, 0.1);
  border-radius: 8px;
  padding: 0.25rem;
  margin: -0.25rem;
}

.row-number {
  width: 20px;
  font-size: 0.75rem;
  color: #9ca3af;
  text-align: center;
}

.row-cells {
  display: flex;
  gap: 0.375rem;
  flex: 1;
}

.bingo-cell {
  flex: 1;
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(145deg, #f8f8f8, #f0f0f0);
  border-radius: 10px;
  font-weight: 700;
  font-size: 0.9rem;
  color: #374151;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  border: 2px solid rgba(0, 0, 0, 0.05);
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
}

.bingo-cell.marked {
  background: linear-gradient(145deg, #667eea, #764ba2);
  color: white;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.2);
  transform: scale(1.05);
}

.bingo-cell.just-marked {
  animation: cell-mark 0.5s ease;
}

@keyframes cell-mark {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); background: #ffd700; }
  100% { transform: scale(1); }
}

.row-complete {
  color: #16a34a;
  font-weight: 700;
}

.player-status-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 0.75rem;
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.625rem;
  border-radius: 999px;
  font-size: 0.75rem;
  font-weight: 600;
}

.status-badge.blocked {
  background: #fef2f2;
  color: #dc2626;
}

.status-badge.lucky {
  background: #f0fdf4;
  color: #16a34a;
}

.status-badge.fifty {
  background: #eff6ff;
  color: #2563eb;
}

/* Drawn Numbers Section */
.drawn-numbers-section {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
  backdrop-filter: blur(8px);
  border-radius: 16px;
  padding: 1.25rem;
  margin-bottom: 1rem;
  border: 1px solid rgba(255, 255, 255, 0.12);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.drawn-numbers-section h4 {
  margin: 0 0 0.75rem;
  color: white;
  font-size: 0.875rem;
}

.drawn-numbers-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 0.375rem;
}

.drawn-number {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  color: white;
}

.drawn-number.latest {
  background: #ffd700;
  color: #1a1a2e;
  animation: pulse-latest 1s ease infinite;
}

@keyframes pulse-latest {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

/* Other Players Section */
.other-players-section {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 1rem;
}

.other-players-section h4 {
  margin: 0 0 0.75rem;
  color: white;
  font-size: 0.875rem;
}

.players-mini-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.5rem;
}

.player-mini-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.5rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  gap: 0.25rem;
}

.mini-avatar {
  font-size: 1.25rem;
}

.mini-name {
  font-size: 0.625rem;
  color: white;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.mini-progress {
  font-size: 0.625rem;
  color: rgba(255, 255, 255, 0.7);
}

.mini-progress .danger {
  color: #fbbf24;
}

/* Bingo Play Actions */
.bingo-play-actions {
  padding: 1.25rem;
  display: flex;
  gap: 1rem;
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.15));
  backdrop-filter: blur(10px);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.draw-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  padding: 1.25rem;
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  border: none;
  border-radius: 18px;
  font-size: 1.35rem;
  font-weight: 700;
  color: #374151;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.draw-btn:hover:not(:disabled) {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.draw-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.draw-icon {
  font-size: 1.5rem;
}

.bingo-btn {
  flex: 1;
  padding: 1.25rem;
  background: linear-gradient(145deg, #ffd700, #ffaa00, #ff8c00);
  border: none;
  border-radius: 18px;
  cursor: pointer;
  animation: bingo-pulse 0.6s ease infinite;
  box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5), inset 0 2px 0 rgba(255, 255, 255, 0.3);
  border: 2px solid rgba(255, 255, 255, 0.3);
  position: relative;
  overflow: hidden;
}

.bingo-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  animation: bingo-shine 1.5s ease infinite;
}

@keyframes bingo-shine {
  0% { left: -100%; }
  100% { left: 100%; }
}

@keyframes bingo-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.bingo-text {
  font-size: 1.35rem;
  font-weight: 800;
  color: #1a1a2e;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
  position: relative;
  z-index: 1;
}

/* Skill Phase Overlay */
.skill-phase-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
  padding: 1rem;
}

.skill-phase-content {
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  border-radius: 24px;
  padding: 2rem;
  width: 100%;
  max-width: 420px;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.5);
}

.skill-phase-content h3 {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  margin: 0 0 0.5rem;
  color: #764ba2;
}

.skill-phase-content p {
  color: #6b7280;
  margin-bottom: 1.5rem;
}

.skills-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.skill-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1.25rem;
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  border: 2px solid rgba(229, 231, 235, 0.8);
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  position: relative;
  overflow: hidden;
}

.skill-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  transition: left 0.4s ease;
}

.skill-card:hover::before {
  left: 100%;
}

.skill-card:hover {
  border-color: #764ba2;
  background: linear-gradient(145deg, rgba(118, 75, 162, 0.08), rgba(118, 75, 162, 0.02));
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 8px 20px rgba(118, 75, 162, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.skill-emoji {
  font-size: 1.5rem;
  margin-bottom: 0.375rem;
}

.skill-name {
  font-size: 0.875rem;
  font-weight: 600;
  color: #374151;
}

.skill-desc {
  font-size: 0.625rem;
  color: #9ca3af;
  margin-top: 0.25rem;
}

.skip-skill-btn {
  padding: 0.75rem 1.5rem;
  background: #f3f4f6;
  border: none;
  border-radius: 10px;
  color: #6b7280;
  font-weight: 500;
  cursor: pointer;
}

/* Target Selection */
.target-selection h4 {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  margin: 0 0 0.5rem;
  color: #374151;
}

.targets-grid {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin: 1rem 0;
}

.target-card {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.25rem;
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  border: 2px solid rgba(229, 231, 235, 0.8);
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.target-card:hover {
  border-color: #764ba2;
  transform: translateY(-3px);
  box-shadow: 0 6px 18px rgba(118, 75, 162, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.target-card.selected {
  border-color: #764ba2;
  background: rgba(118, 75, 162, 0.1);
}

.target-avatar {
  font-size: 1.5rem;
}

.target-name {
  flex: 1;
  text-align: left;
  font-weight: 500;
  color: #374151;
}

.target-stats {
  font-size: 0.75rem;
  color: #9ca3af;
}

.cancel-skill-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  padding: 0.75rem 1.5rem;
  background: #f3f4f6;
  border: none;
  border-radius: 10px;
  color: #6b7280;
  font-weight: 500;
  cursor: pointer;
  margin: 0 auto;
}

/* Bingo Results */
.bingo-results {
  max-width: 500px;
  margin: 0 auto;
  padding: 1rem;
}

.winner-celebration {
  text-align: center;
  padding: 2rem 1rem;
  color: white;
  position: relative;
}

.winner-trophy {
  color: #ffd700;
  margin-bottom: 1rem;
}

.winner-celebration h1 {
  font-size: 2rem;
  margin: 0 0 1.5rem;
}

.winner-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: rgba(255, 255, 255, 0.15);
  padding: 1.5rem 2rem;
  border-radius: 20px;
  margin: 0 auto;
  max-width: 200px;
}

.winner-avatar {
  font-size: 3rem;
  margin-bottom: 0.5rem;
}

.winner-name {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 0.25rem;
}

.winner-label {
  font-size: 0.875rem;
  opacity: 0.9;
}

.game-stats {
  display: flex;
  justify-content: center;
  gap: 2rem;
  padding: 1.5rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  margin-bottom: 1.5rem;
}

.game-stats .stat-item {
  text-align: center;
  color: white;
}

.game-stats .stat-value {
  display: block;
  font-size: 1.5rem;
  font-weight: 700;
}

.game-stats .stat-label {
  font-size: 0.75rem;
  opacity: 0.8;
}

.rankings-section {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.rankings-section h3 {
  margin: 0 0 1rem;
  color: #374151;
}

.rankings-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.ranking-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: #f9fafb;
  border-radius: 12px;
}

.ranking-item.winner {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
  border: 2px solid #764ba2;
}

.rank-badge {
  width: 32px;
  text-align: center;
  font-weight: 700;
}

.ranking-avatar {
  font-size: 1.5rem;
}

.ranking-info {
  flex: 1;
}

.ranking-name {
  display: block;
  font-weight: 600;
  color: #374151;
}

.ranking-stats {
  font-size: 0.75rem;
  color: #9ca3af;
}

.results-actions {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.play-again-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  background: white;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  color: #764ba2;
  cursor: pointer;
}

.go-home-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.4);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  cursor: pointer;
}

/* Bingo Guide */
.bingo-guide-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 1rem;
}

.bingo-guide {
  background: white;
  border-radius: 20px;
  width: 100%;
  max-width: 500px;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.guide-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.25rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
}

.guide-header h2 {
  margin: 0;
  font-size: 1.1rem;
}

.guide-header .close-btn {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  border-radius: 8px;
  padding: 0.375rem;
  color: white;
  cursor: pointer;
}

.guide-content {
  flex: 1;
  overflow-y: auto;
  padding: 1.5rem;
}

.guide-section {
  margin-bottom: 1.5rem;
}

.guide-section h3 {
  margin: 0 0 0.75rem;
  color: #374151;
  font-size: 1rem;
}

.guide-section ul {
  margin: 0;
  padding-left: 1.25rem;
  color: #6b7280;
}

.guide-section li {
  margin-bottom: 0.5rem;
}

.step-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.step {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
}

.step-number {
  width: 28px;
  height: 28px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.875rem;
  flex-shrink: 0;
}

.step-text {
  color: #6b7280;
  line-height: 1.5;
}

.skills-list {
  display: flex;
  flex-direction: column;
  gap: 0.625rem;
}

.skill-intro {
  color: #6b7280;
  margin-bottom: 0.75rem;
}

.skill-item {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  padding: 0.75rem;
  background: #f9fafb;
  border-radius: 10px;
}

.skill-icon {
  font-size: 1.25rem;
}

.skill-info {
  flex: 1;
}

.skill-info strong {
  display: block;
  color: #374151;
  margin-bottom: 0.125rem;
}

.skill-info span {
  font-size: 0.75rem;
  color: #9ca3af;
}

.guide-section.tips ul {
  background: #fef3c7;
  border-radius: 10px;
  padding: 1rem 1.25rem 1rem 2.25rem;
}

.guide-section.tips li {
  color: #92400e;
}

.guide-footer {
  padding: 1rem 1.5rem;
  border-top: 1px solid #f3f4f6;
}

.understand-btn {
  width: 100%;
  padding: 0.875rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
}

/* Bingo Mobile Responsive */
@media (max-width: 480px) {
  .bingo-header h1 {
    font-size: 2rem;
  }

  .bingo-cell {
    font-size: 0.75rem;
  }

  .players-mini-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .skills-grid {
    grid-template-columns: 1fr;
  }
}

/* ========================================
   BINGO GAME MANAGER STYLES
   ======================================== */

.bingo-manager {
  background: white;
  border-radius: 16px;
  overflow: hidden;
  min-height: 400px;
}

.bingo-manager .manager-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 1.25rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
}

.bingo-manager .back-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 52px;
  height: 52px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 14px;
  color: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(12px);
  box-shadow: 0 4px 20px rgba(102, 126, 234, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.bingo-manager .back-btn svg {
  width: 22px;
  height: 22px;
}

.bingo-manager .back-btn:hover {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.22), rgba(255, 255, 255, 0.12));
  border-color: rgba(255, 255, 255, 0.35);
  color: white;
  transform: translateX(-4px);
  box-shadow: 0 6px 28px rgba(102, 126, 234, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.bingo-manager .header-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.bingo-manager .header-title h3 {
  margin: 0;
  font-size: 1.1rem;
}

.bingo-manager .header-icon {
  font-size: 1.5rem;
}

.bingo-manager .manager-cards {
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.bingo-manager .manager-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: #f9fafb;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.bingo-manager .manager-card:hover {
  border-color: #764ba2;
  background: rgba(118, 75, 162, 0.05);
}

.bingo-manager .card-icon {
  width: 56px;
  height: 56px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}

.bingo-manager .card-icon.settings {
  background: linear-gradient(135deg, #667eea, #764ba2);
}

.bingo-manager .card-icon.rooms {
  background: linear-gradient(135deg, #10b981, #059669);
}

.bingo-manager .card-icon.history {
  background: linear-gradient(135deg, #f59e0b, #d97706);
}

.bingo-manager .card-info {
  flex: 1;
}

.bingo-manager .card-info h4 {
  margin: 0 0 0.25rem;
  color: #374151;
}

.bingo-manager .card-info p {
  margin: 0;
  font-size: 0.8rem;
  color: #9ca3af;
}

.bingo-manager .card-arrow {
  color: #9ca3af;
  font-size: 1.25rem;
}

.bingo-manager .manager-stats {
  padding: 1rem;
  margin: 0 1rem;
  background: #f3f4f6;
  border-radius: 12px;
}

.bingo-manager .manager-stats h4 {
  margin: 0 0 0.75rem;
  font-size: 0.875rem;
  color: #6b7280;
}

.bingo-manager .stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.75rem;
}

.bingo-manager .stats-grid .stat-value {
  display: block;
  font-size: 1.5rem;
  font-weight: 700;
  color: #374151;
  text-align: center;
}

.bingo-manager .stats-grid .stat-label {
  font-size: 0.7rem;
  color: #9ca3af;
  text-align: center;
  display: block;
}

.bingo-manager .manager-info {
  padding: 1rem;
  margin: 1rem;
  background: #faf5ff;
  border-radius: 12px;
  border: 1px solid #e9d5ff;
}

.bingo-manager .manager-info h4 {
  margin: 0 0 0.75rem;
  font-size: 0.875rem;
  color: #7c3aed;
}

.bingo-manager .info-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.bingo-manager .info-item {
  display: flex;
  justify-content: space-between;
  font-size: 0.8rem;
}

.bingo-manager .info-label {
  color: #6b7280;
}

.bingo-manager .info-value {
  font-weight: 600;
  color: #374151;
}

.bingo-manager .settings-form {
  padding: 1rem;
}

.bingo-manager .setting-group {
  margin-bottom: 1.25rem;
}

.bingo-manager .setting-group label {
  display: block;
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.5rem;
  font-size: 0.875rem;
}

.bingo-manager .setting-options {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.bingo-manager .option-btn {
  padding: 0.5rem 1rem;
  border: 2px solid #e5e7eb;
  background: white;
  border-radius: 8px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.bingo-manager .option-btn.selected {
  background: linear-gradient(135deg, #667eea, #764ba2);
  border-color: transparent;
  color: white;
}

.bingo-manager .setting-group.toggle {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem;
  background: #f9fafb;
  border-radius: 10px;
}

.bingo-manager .toggle-info label {
  margin-bottom: 0.125rem;
}

.bingo-manager .toggle-info p {
  margin: 0;
  font-size: 0.75rem;
  color: #9ca3af;
}

.bingo-manager .save-btn {
  width: 100%;
  padding: 0.875rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: all 0.2s ease;
}

.bingo-manager .save-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.bingo-manager .save-btn:disabled {
  opacity: 0.7;
  cursor: wait;
}

.bingo-manager .save-btn.saved {
  background: linear-gradient(135deg, #10b981, #059669);
}

.bingo-manager .empty-state {
  padding: 3rem 1rem;
  text-align: center;
}

.bingo-manager .empty-icon {
  font-size: 3rem;
  display: block;
  margin-bottom: 1rem;
}

.bingo-manager .empty-state h4 {
  margin: 0 0 0.5rem;
  color: #374151;
}

.bingo-manager .empty-state p {
  margin: 0;
  color: #9ca3af;
  font-size: 0.875rem;
}

.bingo-manager .rooms-list,
.bingo-manager .history-list {
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.bingo-manager .room-item,
.bingo-manager .history-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  background: #f9fafb;
  border-radius: 10px;
}

.bingo-manager .room-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.25rem;
}

.bingo-manager .room-status {
  font-size: 0.65rem;
  padding: 0.125rem 0.5rem;
  border-radius: 999px;
  font-weight: 500;
}

.bingo-manager .room-status.waiting {
  background: #fef3c7;
  color: #92400e;
}

.bingo-manager .room-status.playing {
  background: #dcfce7;
  color: #166534;
}

.bingo-manager .room-meta,
.bingo-manager .history-meta {
  font-size: 0.75rem;
  color: #9ca3af;
  display: flex;
  gap: 0.375rem;
}

.bingo-manager .room-actions {
  display: flex;
  gap: 0.5rem;
}

.bingo-manager .action-btn {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.bingo-manager .action-btn.view {
  background: #e0e7ff;
  color: #4f46e5;
}

.bingo-manager .action-btn.danger {
  background: #fee2e2;
  color: #dc2626;
}

.bingo-manager .history-title {
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.25rem;
}

.bingo-manager .view-btn {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.5rem 0.875rem;
  background: #e0e7ff;
  color: #4f46e5;
  border: none;
  border-radius: 8px;
  font-size: 0.8rem;
  font-weight: 500;
  cursor: pointer;
}

/* ============================================ */
/* SPEED QUIZ - "AI NHANH HON AI" GAME STYLES */
/* ============================================ */

.speed-quiz-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #FF5722 0%, #FF9800 100%);
}

/* Common button styles */
.speed-quiz-btn {
  padding: 0.75rem 1.5rem;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.speed-quiz-btn.primary {
  background: linear-gradient(135deg, #FF5722 0%, #FF9800 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(255, 87, 34, 0.4);
}

.speed-quiz-btn.primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(255, 87, 34, 0.5);
}

.speed-quiz-btn.primary.saved {
  background: linear-gradient(135deg, #10b981, #059669);
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
}

.speed-quiz-btn.primary:disabled {
  opacity: 0.7;
  cursor: wait;
}

.speed-quiz-btn.secondary {
  background: white;
  color: #FF5722;
  border: 2px solid #FF5722;
}

.speed-quiz-btn.secondary:hover:not(:disabled) {
  background: #fff5f2;
}

.speed-quiz-btn.outline {
  background: transparent;
  color: white;
  border: 2px solid white;
}

.speed-quiz-btn.outline:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.1);
}

.speed-quiz-btn.danger {
  background: #dc2626;
  color: white;
}

.speed-quiz-btn.small {
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
}

.speed-quiz-btn.large {
  padding: 1rem 2rem;
  font-size: 1.125rem;
}

.speed-quiz-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.speed-quiz-close-btn,
.speed-quiz-back-btn {
  position: absolute;
  top: 1.25rem;
  left: 1.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 52px;
  height: 52px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.05));
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 14px;
  color: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.speed-quiz-back-btn svg,
.speed-quiz-close-btn svg {
  width: 22px;
  height: 22px;
}

.speed-quiz-close-btn {
  left: auto;
  right: 1.25rem;
}

.speed-quiz-back-btn:hover {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
  border-color: rgba(255, 255, 255, 0.3);
  color: white;
  transform: translateX(-4px);
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.speed-quiz-close-btn:hover {
  background: linear-gradient(135deg, rgba(255, 82, 82, 0.25), rgba(255, 82, 82, 0.15));
  border-color: rgba(255, 82, 82, 0.5);
  color: #ff6b6b;
  box-shadow: 0 6px 25px rgba(255, 82, 82, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* ============ MENU STYLES ============ */
.speed-quiz-menu {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  position: relative;
}

.speed-quiz-menu-header {
  text-align: center;
  color: white;
  margin-bottom: 3rem;
}

.speed-quiz-menu-icon {
  font-size: 5rem;
  margin-bottom: 1rem;
  animation: lightning 1.5s ease-in-out infinite;
}

@keyframes lightning {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.1); opacity: 0.8; }
}

.speed-quiz-menu-header h1 {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.speed-quiz-menu-header p {
  font-size: 1.125rem;
  opacity: 0.9;
}

.speed-quiz-menu-actions {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  width: 100%;
  max-width: 320px;
}

.speed-quiz-menu-actions .speed-quiz-btn {
  width: 100%;
}

.speed-quiz-join-input {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.speed-quiz-join-input input {
  flex: 1;
  padding: 0.75rem 1rem;
  border-radius: 12px;
  border: 2px solid transparent;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  text-align: center;
  font-weight: 600;
}

.speed-quiz-menu-features {
  display: flex;
  gap: 1.5rem;
  margin-top: 3rem;
  flex-wrap: wrap;
  justify-content: center;
}

.speed-quiz-menu-features .feature {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-size: 0.9rem;
  opacity: 0.9;
}

.speed-quiz-menu-features .feature-icon {
  font-size: 1.5rem;
}

/* ============ SETUP STYLES ============ */
.speed-quiz-setup {
  min-height: 100vh;
  padding: 4rem 2rem 2rem;
  position: relative;
}

.speed-quiz-setup-header {
  margin-bottom: 2rem;
}

.speed-quiz-setup-header h2 {
  color: white;
  font-size: 1.75rem;
  text-align: center;
  margin-top: 1rem;
}

.speed-quiz-setup-form {
  background: white;
  border-radius: 20px;
  padding: 1.5rem;
  max-width: 400px;
  margin: 0 auto 1.5rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.speed-quiz-setup-form .form-group {
  margin-bottom: 1.25rem;
}

.speed-quiz-setup-form .form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: #374151;
  font-size: 0.9rem;
}

.speed-quiz-setup-form .form-group input[type="text"],
.speed-quiz-setup-form .form-group input[type="number"] {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 2px solid #e5e7eb;
  border-radius: 10px;
  font-size: 1rem;
  transition: border-color 0.2s;
}

.speed-quiz-setup-form .form-group input[type="text"]:focus,
.speed-quiz-setup-form .form-group input[type="number"]:focus {
  border-color: #FF5722;
  outline: none;
}

.speed-quiz-setup-form .form-group input[type="range"] {
  width: 100%;
  accent-color: #FF5722;
}

.speed-quiz-setup-form .range-labels {
  display: flex;
  justify-content: space-between;
  font-size: 0.75rem;
  color: #9ca3af;
  margin-top: 0.25rem;
}

.speed-quiz-setup-form .form-group.checkbox label {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  cursor: pointer;
}

.speed-quiz-setup-form .form-group.checkbox input[type="checkbox"] {
  width: 20px;
  height: 20px;
  accent-color: #FF5722;
}

.speed-quiz-setup-preview {
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 1.25rem;
  max-width: 400px;
  margin: 0 auto 1.5rem;
  color: white;
}

.speed-quiz-setup-preview h3 {
  margin-bottom: 1rem;
  font-size: 1rem;
}

.speed-quiz-setup-preview .preview-items {
  display: grid;
  gap: 0.5rem;
}

.speed-quiz-setup-preview .preview-item {
  display: flex;
  justify-content: space-between;
  font-size: 0.9rem;
}

.speed-quiz-setup-preview .preview-item .label {
  opacity: 0.8;
}

.speed-quiz-setup-actions {
  text-align: center;
}

/* ============ LOBBY STYLES ============ */
.speed-quiz-lobby {
  min-height: 100vh;
  padding: 4rem 2rem 2rem;
  position: relative;
}

.speed-quiz-lobby-header {
  margin-bottom: 2rem;
}

.speed-quiz-lobby-header .room-info {
  text-align: center;
  margin-top: 1rem;
  color: white;
}

.speed-quiz-lobby-header .room-info h2 {
  font-size: 1.75rem;
  margin-bottom: 0.75rem;
}

.speed-quiz-lobby-header .room-code {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(255, 255, 255, 0.2);
  padding: 0.5rem 1rem;
  border-radius: 10px;
}

.speed-quiz-lobby-header .room-code .code {
  font-size: 1.5rem;
  font-weight: 700;
  letter-spacing: 3px;
}

.speed-quiz-lobby-header .copy-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 1rem;
}

.speed-quiz-lobby-settings {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.speed-quiz-lobby-settings .setting-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(255, 255, 255, 0.15);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  color: white;
  font-size: 0.875rem;
}

.speed-quiz-lobby-players {
  background: white;
  border-radius: 20px;
  padding: 1.5rem;
  max-width: 600px;
  margin: 0 auto 2rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.speed-quiz-lobby-players .players-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.speed-quiz-lobby-players .players-header h3 {
  font-size: 1rem;
  color: #374151;
}

.speed-quiz-lobby-players .players-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 0.75rem;
}

.speed-quiz-lobby-players .player-card {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: #f9fafb;
  border-radius: 12px;
  border: 2px solid transparent;
}

.speed-quiz-lobby-players .player-card.host {
  border-color: #FF5722;
  background: #fff5f2;
}

.speed-quiz-lobby-players .player-card.bot {
  background: #f0f9ff;
  border-color: #0ea5e9;
}

.speed-quiz-lobby-players .player-card.empty {
  background: #f3f4f6;
  opacity: 0.5;
}

.speed-quiz-lobby-players .player-avatar {
  font-size: 2rem;
}

.speed-quiz-lobby-players .player-info {
  display: flex;
  flex-direction: column;
  gap: 0.125rem;
}

.speed-quiz-lobby-players .player-name {
  font-weight: 600;
  font-size: 0.9rem;
  color: #374151;
}

.speed-quiz-lobby-players .host-badge {
  font-size: 0.7rem;
  color: #FF5722;
}

.speed-quiz-lobby-players .bot-badge {
  font-size: 0.75rem;
}

.speed-quiz-lobby-actions {
  text-align: center;
}

.speed-quiz-lobby-actions .waiting-message {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  color: white;
  font-size: 1rem;
}

.speed-quiz-lobby-actions .spinner {
  animation: spin 1s linear infinite;
}

/* ============ PLAY STYLES ============ */
.speed-quiz-play {
  min-height: 100vh;
  padding: 2rem;
  position: relative;
}

/* Layout with leaderboard sidebar */
.speed-quiz-play.with-leaderboard {
  display: flex;
  gap: 1.5rem;
  max-width: 1100px;
  margin: 0 auto;
}

.speed-quiz-main {
  flex: 1;
  min-width: 0;
}

.speed-quiz-sidebar {
  width: 280px;
  flex-shrink: 0;
}

.speed-quiz-sidebar .player-leaderboard {
  position: sticky;
  top: 1rem;
  max-height: calc(100vh - 4rem);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.speed-quiz-sidebar .leaderboard-list {
  flex: 1;
  overflow-y: auto;
}

/* Mobile: stack sidebar below */
@media (max-width: 900px) {
  .speed-quiz-play.with-leaderboard {
    flex-direction: column;
  }

  .speed-quiz-sidebar {
    width: 100%;
    order: -1;
  }

  .speed-quiz-sidebar .player-leaderboard {
    position: relative;
    max-height: none;
  }
}

.speed-quiz-play .play-header {
  margin-bottom: 1.5rem;
}

.speed-quiz-play .round-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.18), rgba(255, 255, 255, 0.08));
  backdrop-filter: blur(10px);
  padding: 1rem 1.5rem;
  border-radius: 16px;
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.speed-quiz-play .round {
  font-weight: 600;
  font-size: 1.125rem;
}

.speed-quiz-play .timer {
  display: flex;
  align-items: baseline;
  gap: 0.25rem;
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  color: #FF5722;
  padding: 0.75rem 1.25rem;
  border-radius: 14px;
  font-weight: 700;
  box-shadow: 0 4px 15px rgba(255, 87, 34, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 2px solid rgba(255, 87, 34, 0.15);
  transition: all 0.3s ease;
}

.speed-quiz-play .timer.warning {
  background: linear-gradient(145deg, #fef3c7, #fde68a);
  color: #f59e0b;
  box-shadow: 0 4px 15px rgba(245, 158, 11, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border-color: rgba(245, 158, 11, 0.3);
}

.speed-quiz-play .timer.danger {
  background: linear-gradient(145deg, #fecaca, #fca5a5);
  color: #dc2626;
  animation: pulse 0.5s ease-in-out infinite;
  box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border-color: rgba(220, 38, 38, 0.3);
}

.speed-quiz-play .time-value {
  font-size: 1.5rem;
}

.speed-quiz-play .time-label {
  font-size: 0.75rem;
  opacity: 0.8;
}

.speed-quiz-play .active-effects {
  display: flex;
  flex-wrap: wrap;
  gap: 0.6rem;
  margin-bottom: 1.25rem;
  justify-content: center;
  animation: effectsSlide 0.4s ease forwards;
}

@keyframes effectsSlide {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.speed-quiz-play .effect {
  padding: 0.5rem 1rem;
  border-radius: 25px;
  font-size: 0.85rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.3rem;
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);
  position: relative;
  overflow: hidden;
  animation: effectPulse 2s ease infinite;
}

@keyframes effectPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}

.speed-quiz-play .effect::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  animation: effectShine 2s ease infinite;
}

@keyframes effectShine {
  0%, 100% { left: -100%; }
  50% { left: 100%; }
}

.speed-quiz-play .effect.double {
  background: linear-gradient(135deg, #fef3c7, #fde68a);
  color: #b45309;
  border: 2px solid rgba(245, 158, 11, 0.3);
  box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
}

.speed-quiz-play .effect.shield {
  background: linear-gradient(135deg, #dbeafe, #bfdbfe);
  color: #1d4ed8;
  border: 2px solid rgba(59, 130, 246, 0.3);
  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.speed-quiz-play .effect.slowed {
  background: linear-gradient(135deg, #fee2e2, #fecaca);
  color: #b91c1c;
  border: 2px solid rgba(220, 38, 38, 0.3);
  box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
  animation: effectPulse 1s ease infinite;
}

.speed-quiz-play .question-area {
  background: linear-gradient(145deg, #ffffff, #f9f9f9);
  border-radius: 24px;
  padding: 2.5rem;
  text-align: center;
  margin-bottom: 1.5rem;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.5);
  position: relative;
  overflow: hidden;
}

.speed-quiz-play .question-area::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #FF5722, #FF9800, #FFC107);
  border-radius: 24px 24px 0 0;
}

.speed-quiz-play .question-display {
  margin-bottom: 1rem;
}

.speed-quiz-play .question-text {
  font-size: 3rem;
  font-weight: 700;
  color: #1f2937;
}

.speed-quiz-play .question-meta {
  display: flex;
  justify-content: center;
  gap: 1rem;
  font-size: 0.875rem;
  color: #6b7280;
}

.speed-quiz-play .hints-revealed {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid #e5e7eb;
}

.speed-quiz-play .hint-item {
  padding: 0.5rem 1rem;
  background: #fef3c7;
  border-radius: 8px;
  margin-bottom: 0.5rem;
  font-size: 0.9rem;
  color: #92400e;
}

.speed-quiz-play .answer-form {
  display: flex;
  gap: 1rem;
  max-width: 550px;
  margin: 0 auto 1.5rem;
}

.speed-quiz-play .answer-form input {
  flex: 1;
  padding: 1.25rem 1.5rem;
  border: 3px solid rgba(255, 87, 34, 0.2);
  border-radius: 16px;
  font-size: 1.35rem;
  text-align: center;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12), inset 0 2px 4px rgba(0, 0, 0, 0.05);
  background: linear-gradient(145deg, #ffffff, #fafafa);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.speed-quiz-play .answer-form input:focus {
  outline: none;
  border-color: #FF5722;
  box-shadow: 0 6px 25px rgba(255, 87, 34, 0.25), 0 0 0 4px rgba(255, 87, 34, 0.1);
  transform: translateY(-2px);
}

.speed-quiz-play .answer-form input.answered {
  background: linear-gradient(145deg, #d1fae5, #a7f3d0);
  border-color: #10b981;
  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

.speed-quiz-play .hint-section {
  text-align: center;
  margin-bottom: 1.5rem;
}

.speed-quiz-play .hint-btn {
  background: #fef3c7;
  color: #92400e;
  border: none;
}

.speed-quiz-play .hint-btn:hover:not(:disabled) {
  background: #fde68a;
}

.speed-quiz-play .delay-overlay {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 12px;
  color: white;
  margin-bottom: 1rem;
}

.speed-quiz-play .delay-icon {
  font-size: 3rem;
  margin-bottom: 0.5rem;
}

.speed-quiz-play .delay-text {
  font-size: 1.25rem;
  font-weight: 600;
}

.speed-quiz-play .live-scoreboard {
  background: white;
  border-radius: 16px;
  padding: 1rem;
  max-width: 400px;
  margin: 0 auto;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.speed-quiz-play .live-scoreboard h3 {
  font-size: 0.9rem;
  color: #6b7280;
  margin-bottom: 0.75rem;
  text-align: center;
}

.speed-quiz-play .scoreboard-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.speed-quiz-play .score-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: #f9fafb;
  border-radius: 8px;
  font-size: 0.875rem;
}

.speed-quiz-play .score-row.current {
  background: #fff5f2;
  border: 2px solid #FF5722;
}

.speed-quiz-play .score-row.answered {
  background: #d1fae5;
}

.speed-quiz-play .score-row .rank {
  width: 28px;
  text-align: center;
}

.speed-quiz-play .score-row .avatar {
  font-size: 1.25rem;
}

.speed-quiz-play .score-row .name {
  flex: 1;
  font-weight: 500;
  color: #374151;
}

.speed-quiz-play .score-row .streak {
  color: #f59e0b;
  font-size: 0.8rem;
}

.speed-quiz-play .score-row .status {
  color: #10b981;
  font-weight: 600;
}

.speed-quiz-play .score-row .score {
  font-weight: 700;
  color: #FF5722;
  min-width: 50px;
  text-align: right;
}

/* ============ SKILL PHASE STYLES ============ */
.speed-quiz-play.skill-phase {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.speed-quiz-play .skill-phase-header {
  text-align: center;
  color: white;
  margin-bottom: 2rem;
}

.speed-quiz-play .skill-phase-header h2 {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.speed-quiz-play .skills-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
  max-width: 600px;
  margin-bottom: 2rem;
}

.speed-quiz-play .skill-card {
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  border-radius: 20px;
  padding: 1.5rem;
  text-align: center;
  cursor: pointer;
  border: 3px solid rgba(255, 255, 255, 0.5);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  position: relative;
  overflow: hidden;
}

.speed-quiz-play .skill-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  transition: left 0.5s ease;
}

.speed-quiz-play .skill-card:hover::before {
  left: 100%;
}

.speed-quiz-play .skill-card:hover {
  transform: translateY(-6px) scale(1.02);
  border-color: #FF5722;
  box-shadow: 0 12px 35px rgba(255, 87, 34, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.speed-quiz-play .skill-emoji {
  font-size: 2.5rem;
  display: block;
  margin-bottom: 0.5rem;
}

.speed-quiz-play .skill-name {
  font-weight: 700;
  color: #374151;
  display: block;
  margin-bottom: 0.25rem;
}

.speed-quiz-play .skill-desc {
  font-size: 0.75rem;
  color: #6b7280;
}

.speed-quiz-play .target-selection {
  text-align: center;
  color: white;
}

.speed-quiz-play .target-selection h3 {
  margin-bottom: 1.5rem;
}

.speed-quiz-play .targets-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.speed-quiz-play .target-card {
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  border-radius: 16px;
  padding: 1.25rem 1.75rem;
  text-align: center;
  cursor: pointer;
  border: 3px solid rgba(255, 255, 255, 0.5);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.speed-quiz-play .target-card:hover {
  border-color: #FF5722;
  transform: translateY(-4px) scale(1.05);
  box-shadow: 0 10px 30px rgba(255, 87, 34, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.speed-quiz-play .target-avatar {
  font-size: 2rem;
  display: block;
  margin-bottom: 0.25rem;
}

.speed-quiz-play .target-name {
  font-weight: 600;
  color: #374151;
  display: block;
}

.speed-quiz-play .target-score {
  font-size: 0.8rem;
  color: #6b7280;
}

.speed-quiz-play .scoreboard-mini {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 0.75rem;
  background: rgba(255, 255, 255, 0.15);
  padding: 1rem;
  border-radius: 12px;
  max-width: 600px;
}

.speed-quiz-play .scoreboard-mini .score-item {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  background: rgba(255, 255, 255, 0.9);
  padding: 0.375rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
}

.speed-quiz-play .scoreboard-mini .score-item.current {
  background: #FF5722;
  color: white;
}

/* ============ RESULT PHASE STYLES ============ */
.speed-quiz-play.result-phase {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 3rem;
}

.speed-quiz-play .result-header {
  text-align: center;
  color: white;
  margin-bottom: 1.5rem;
}

.speed-quiz-play .result-header h2 {
  font-size: 1.5rem;
}

.speed-quiz-play .correct-answer {
  background: linear-gradient(145deg, #ffffff, #f9f9f9);
  border-radius: 18px;
  padding: 1.25rem 2.5rem;
  text-align: center;
  margin-bottom: 1.25rem;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 2px solid rgba(16, 185, 129, 0.2);
}

.speed-quiz-play .correct-answer .label {
  font-size: 0.8rem;
  color: #6b7280;
  display: block;
  margin-bottom: 0.25rem;
}

.speed-quiz-play .correct-answer .answer {
  font-size: 1.5rem;
  font-weight: 700;
  color: #10b981;
}

.speed-quiz-play .your-result {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1.25rem 1.75rem;
  border-radius: 16px;
  margin-bottom: 1.25rem;
  font-weight: 600;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.5);
  transition: all 0.3s ease;
}

.speed-quiz-play .your-result.correct {
  background: linear-gradient(145deg, #d1fae5, #a7f3d0);
  color: #047857;
  border: 2px solid rgba(4, 120, 87, 0.2);
}

.speed-quiz-play .your-result.wrong {
  background: linear-gradient(145deg, #fee2e2, #fecaca);
  color: #dc2626;
  border: 2px solid rgba(220, 38, 38, 0.2);
}

.speed-quiz-play .your-result .icon {
  font-size: 1.5rem;
}

.speed-quiz-play .your-result .time {
  font-size: 0.8rem;
  opacity: 0.8;
}

.speed-quiz-play .fastest-player {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  margin-bottom: 1.5rem;
  font-size: 0.9rem;
}

.speed-quiz-play .all-results {
  background: linear-gradient(145deg, #ffffff, #f9f9f9);
  border-radius: 20px;
  padding: 1.25rem;
  width: 100%;
  max-width: 500px;
  margin-bottom: 1.5rem;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.5);
}

.speed-quiz-play .all-results h3 {
  font-size: 0.9rem;
  color: #6b7280;
  margin-bottom: 0.75rem;
}

.speed-quiz-play .results-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.speed-quiz-play .result-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: #f9fafb;
  border-radius: 8px;
  font-size: 0.8rem;
}

.speed-quiz-play .result-item.correct {
  background: #d1fae5;
}

.speed-quiz-play .result-item.wrong {
  background: #fee2e2;
}

.speed-quiz-play .result-item.current {
  border: 2px solid #FF5722;
}

.speed-quiz-play .result-item .rank {
  width: 28px;
  font-weight: 600;
}

.speed-quiz-play .result-item .avatar {
  font-size: 1.125rem;
}

.speed-quiz-play .result-item .name {
  flex: 1;
  font-weight: 500;
}

.speed-quiz-play .result-item .answer-text {
  color: #6b7280;
  max-width: 80px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.speed-quiz-play .result-item .time {
  color: #6b7280;
  min-width: 50px;
}

.speed-quiz-play .result-item .points {
  font-weight: 700;
  min-width: 40px;
  text-align: right;
}

.speed-quiz-play .result-item.correct .points {
  color: #10b981;
}

.speed-quiz-play .result-item.wrong .points {
  color: #dc2626;
}

/* ============ RESULTS STYLES ============ */
.speed-quiz-results {
  min-height: 100vh;
  padding: 2rem;
  text-align: center;
}

.speed-quiz-results .results-header {
  color: white;
  margin-bottom: 2rem;
}

.speed-quiz-results .results-header h1 {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.speed-quiz-results .results-header p {
  opacity: 0.9;
}

.speed-quiz-results .winner-section {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  margin-bottom: 2rem;
  position: relative;
  overflow: hidden;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
}

.speed-quiz-results .confetti {
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 2rem;
  animation: bounce 1s ease-in-out infinite;
}

.speed-quiz-results .winner-trophy {
  font-size: 4rem;
  margin-bottom: 1rem;
}

.speed-quiz-results .winner-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.speed-quiz-results .winner-avatar {
  font-size: 4rem;
}

.speed-quiz-results .winner-name {
  font-size: 1.75rem;
  font-weight: 700;
  color: #374151;
}

.speed-quiz-results .winner-score {
  font-size: 1.25rem;
  color: #FF5722;
  font-weight: 600;
}

.speed-quiz-results .winner-label {
  margin-top: 1rem;
  font-size: 0.9rem;
  font-weight: 700;
  color: white;
  background: linear-gradient(135deg, #FF5722 0%, #FF9800 100%);
  padding: 0.5rem 1.5rem;
  border-radius: 20px;
}

.speed-quiz-results .podium {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 1rem;
  margin-bottom: 2rem;
}

.speed-quiz-results .podium-place {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.speed-quiz-results .podium-player {
  background: white;
  border-radius: 12px;
  padding: 1rem;
  text-align: center;
  min-width: 100px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.speed-quiz-results .podium-player .medal {
  font-size: 1.5rem;
  display: block;
  margin-bottom: 0.25rem;
}

.speed-quiz-results .podium-player .avatar {
  font-size: 2rem;
  display: block;
}

.speed-quiz-results .podium-player .name {
  font-weight: 600;
  font-size: 0.85rem;
  color: #374151;
  display: block;
  max-width: 80px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.speed-quiz-results .podium-player .score {
  font-weight: 700;
  color: #FF5722;
  font-size: 0.9rem;
}

.speed-quiz-results .podium-stand {
  width: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  font-weight: 700;
  color: white;
  margin-top: 0.5rem;
  border-radius: 8px 8px 0 0;
}

.speed-quiz-results .podium-place.first .podium-stand {
  background: linear-gradient(180deg, #FFD700 0%, #FFA500 100%);
  height: 80px;
}

.speed-quiz-results .podium-place.second .podium-stand {
  background: linear-gradient(180deg, #C0C0C0 0%, #A0A0A0 100%);
  height: 60px;
}

.speed-quiz-results .podium-place.third .podium-stand {
  background: linear-gradient(180deg, #CD7F32 0%, #A0522D 100%);
  height: 40px;
}

.speed-quiz-results .your-final-result {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  max-width: 500px;
  margin-left: auto;
  margin-right: auto;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.speed-quiz-results .your-final-result h3 {
  margin-bottom: 1rem;
  color: #374151;
}

.speed-quiz-results .result-stats {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
}

.speed-quiz-results .stat {
  text-align: center;
  min-width: 70px;
}

.speed-quiz-results .stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: #FF5722;
  display: block;
}

.speed-quiz-results .stat-label {
  font-size: 0.75rem;
  color: #6b7280;
}

.speed-quiz-results .full-rankings {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
  text-align: left;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.speed-quiz-results .full-rankings h3 {
  margin-bottom: 1rem;
  color: #374151;
  text-align: center;
}

.speed-quiz-results .rankings-table {
  font-size: 0.85rem;
}

.speed-quiz-results .rankings-header,
.speed-quiz-results .rankings-row {
  display: grid;
  grid-template-columns: 40px 1fr 60px 50px 70px 80px;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  align-items: center;
}

.speed-quiz-results .rankings-header {
  font-weight: 600;
  color: #6b7280;
  border-bottom: 1px solid #e5e7eb;
}

.speed-quiz-results .rankings-row {
  border-radius: 8px;
}

.speed-quiz-results .rankings-row:nth-child(even) {
  background: #f9fafb;
}

.speed-quiz-results .rankings-row.current {
  background: #fff5f2;
  border: 2px solid #FF5722;
}

.speed-quiz-results .rankings-row.winner {
  background: #fef3c7;
}

.speed-quiz-results .col-player {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.speed-quiz-results .col-player .avatar {
  font-size: 1.25rem;
}

.speed-quiz-results .col-player .name {
  font-weight: 500;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.speed-quiz-results .col-score {
  font-weight: 700;
  color: #FF5722;
}

.speed-quiz-results .results-actions {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

/* ============ GUIDE STYLES ============ */
.speed-quiz-guide {
  min-height: 100vh;
  padding: 2rem;
  position: relative;
}

.speed-quiz-guide .guide-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
}

.speed-quiz-guide .guide-header h1 {
  color: white;
  font-size: 1.75rem;
}

.speed-quiz-guide .guide-content {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  max-width: 700px;
  margin: 0 auto 2rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.speed-quiz-guide .guide-section {
  margin-bottom: 2rem;
}

.speed-quiz-guide .guide-section:last-child {
  margin-bottom: 0;
}

.speed-quiz-guide .guide-section h2 {
  font-size: 1.25rem;
  color: #FF5722;
  margin-bottom: 0.75rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #fff5f2;
}

.speed-quiz-guide .guide-section p {
  color: #4b5563;
  line-height: 1.6;
  margin-bottom: 0.75rem;
}

.speed-quiz-guide .steps {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.speed-quiz-guide .step {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
}

.speed-quiz-guide .step-number {
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #FF5722 0%, #FF9800 100%);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  flex-shrink: 0;
}

.speed-quiz-guide .step-content strong {
  display: block;
  color: #374151;
  margin-bottom: 0.25rem;
}

.speed-quiz-guide .step-content p {
  font-size: 0.9rem;
  margin-bottom: 0;
}

.speed-quiz-guide .scoring-rules {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.speed-quiz-guide .rule {
  display: flex;
  gap: 0.75rem;
  padding: 0.75rem;
  border-radius: 10px;
}

.speed-quiz-guide .rule.correct {
  background: #d1fae5;
}

.speed-quiz-guide .rule.wrong {
  background: #fee2e2;
}

.speed-quiz-guide .rule.timeout {
  background: #f3f4f6;
}

.speed-quiz-guide .rule .icon {
  font-size: 1.5rem;
}

.speed-quiz-guide .rule-text strong {
  display: block;
  color: #374151;
}

.speed-quiz-guide .rule-text p {
  font-size: 0.8rem;
  margin: 0;
}

.speed-quiz-guide ul {
  padding-left: 1.5rem;
  color: #4b5563;
}

.speed-quiz-guide ul li {
  margin-bottom: 0.5rem;
}

.speed-quiz-guide .hint-warning {
  background: #fef3c7;
  padding: 0.75rem;
  border-radius: 8px;
  font-size: 0.9rem;
  color: #92400e;
}

.speed-quiz-guide .skills-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.speed-quiz-guide .skill-item {
  display: flex;
  gap: 0.75rem;
  padding: 0.75rem;
  background: #f9fafb;
  border-radius: 10px;
}

.speed-quiz-guide .skill-emoji {
  font-size: 1.5rem;
}

.speed-quiz-guide .skill-info strong {
  display: block;
  color: #374151;
}

.speed-quiz-guide .skill-info p {
  font-size: 0.85rem;
  margin: 0;
}

.speed-quiz-guide .target-badge {
  display: inline-block;
  margin-top: 0.25rem;
  padding: 0.125rem 0.5rem;
  background: #fee2e2;
  color: #dc2626;
  border-radius: 4px;
  font-size: 0.7rem;
  font-weight: 600;
}

.speed-quiz-guide .tips {
  background: #f0fdf4;
  padding: 1rem;
  border-radius: 10px;
}

.speed-quiz-guide .tips h3 {
  color: #166534;
  margin-bottom: 0.5rem;
  font-size: 1rem;
}

.speed-quiz-guide .tips ul {
  margin: 0;
  color: #166534;
}

.speed-quiz-guide .guide-footer {
  text-align: center;
}

/* ============ MANAGER STYLES ============ */
.speed-quiz-manager {
  padding: 1.5rem;
}

.speed-quiz-manager .manager-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.speed-quiz-manager .manager-header .back-btn {
  padding: 0.5rem 1rem;
  background: #f3f4f6;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  color: #374151;
}

.speed-quiz-manager .manager-header h2 {
  font-size: 1.25rem;
  color: #374151;
}

.speed-quiz-manager .manager-nav {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.speed-quiz-manager .nav-btn {
  padding: 0.5rem 1rem;
  background: #f3f4f6;
  border: 2px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  color: #6b7280;
  transition: all 0.2s;
}

.speed-quiz-manager .nav-btn:hover {
  background: #e5e7eb;
}

.speed-quiz-manager .nav-btn.active {
  background: #fff5f2;
  border-color: #FF5722;
  color: #FF5722;
}

.speed-quiz-manager .manager-content {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  border: 1px solid #e5e7eb;
}

/* Manager Overview */
.speed-quiz-manager .stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.speed-quiz-manager .stat-card {
  background: linear-gradient(135deg, #fff5f2 0%, #fee2e2 100%);
  border-radius: 12px;
  padding: 1.25rem;
  text-align: center;
}

.speed-quiz-manager .stat-icon {
  font-size: 2rem;
  display: block;
  margin-bottom: 0.5rem;
}

.speed-quiz-manager .stat-value {
  font-size: 2rem;
  font-weight: 700;
  color: #FF5722;
  display: block;
}

.speed-quiz-manager .stat-label {
  font-size: 0.8rem;
  color: #6b7280;
}

.speed-quiz-manager .quick-actions h3 {
  font-size: 1rem;
  color: #374151;
  margin-bottom: 1rem;
}

.speed-quiz-manager .actions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 0.75rem;
  margin-bottom: 2rem;
}

.speed-quiz-manager .action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  background: #f9fafb;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.speed-quiz-manager .action-btn:hover {
  border-color: #FF5722;
  background: #fff5f2;
}

.speed-quiz-manager .action-btn .icon {
  font-size: 1.5rem;
}

.speed-quiz-manager .action-btn span:last-child {
  font-size: 0.85rem;
  font-weight: 500;
  color: #374151;
}

.speed-quiz-manager .active-rooms-preview h3 {
  font-size: 1rem;
  color: #374151;
  margin-bottom: 1rem;
}

.speed-quiz-manager .rooms-preview-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.speed-quiz-manager .room-preview-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem 1rem;
  background: #f9fafb;
  border-radius: 8px;
}

.speed-quiz-manager .room-title {
  flex: 1;
  font-weight: 500;
  color: #374151;
}

.speed-quiz-manager .room-code {
  font-family: monospace;
  background: #e5e7eb;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.8rem;
}

.speed-quiz-manager .room-players {
  font-size: 0.85rem;
  color: #6b7280;
}

.speed-quiz-manager .room-status {
  font-size: 0.8rem;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.speed-quiz-manager .room-status.playing {
  background: #d1fae5;
  color: #047857;
}

.speed-quiz-manager .room-status.waiting {
  background: #fef3c7;
  color: #92400e;
}

.speed-quiz-manager .no-data {
  text-align: center;
  color: #9ca3af;
  padding: 2rem;
}

/* Manager Settings */
.speed-quiz-manager .manager-settings h3 {
  font-size: 1rem;
  color: #374151;
  margin-bottom: 1.5rem;
}

.speed-quiz-manager .settings-form {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.speed-quiz-manager .settings-form .form-group {
  display: flex;
  flex-direction: column;
  gap: 0.375rem;
}

.speed-quiz-manager .settings-form label {
  font-size: 0.85rem;
  font-weight: 500;
  color: #374151;
}

.speed-quiz-manager .settings-form input[type="number"] {
  padding: 0.5rem 0.75rem;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 0.9rem;
}

.speed-quiz-manager .settings-form .checkbox {
  flex-direction: row;
  align-items: center;
}

.speed-quiz-manager .settings-form .checkbox label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
}

.speed-quiz-manager .skills-preview {
  margin-bottom: 2rem;
}

.speed-quiz-manager .skills-preview h4 {
  font-size: 0.9rem;
  color: #374151;
  margin-bottom: 1rem;
}

.speed-quiz-manager .skills-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 0.75rem;
}

.speed-quiz-manager .skill-preview-card {
  background: #f9fafb;
  border-radius: 8px;
  padding: 0.75rem;
  text-align: center;
}

.speed-quiz-manager .skill-preview-card .emoji {
  font-size: 1.5rem;
  display: block;
  margin-bottom: 0.25rem;
}

.speed-quiz-manager .skill-preview-card .name {
  font-weight: 600;
  font-size: 0.8rem;
  color: #374151;
  display: block;
}

.speed-quiz-manager .skill-preview-card .desc {
  font-size: 0.7rem;
  color: #6b7280;
}

.speed-quiz-manager .settings-actions {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
}

/* Manager Questions */
.speed-quiz-manager .questions-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.speed-quiz-manager .questions-header h3 {
  font-size: 1rem;
  color: #374151;
}

.speed-quiz-manager .questions-filters {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.speed-quiz-manager .questions-filters select,
.speed-quiz-manager .questions-filters input {
  padding: 0.5rem 0.75rem;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 0.85rem;
}

.speed-quiz-manager .questions-info {
  background: #f0fdf4;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
}

.speed-quiz-manager .questions-info p {
  margin: 0;
  font-size: 0.85rem;
  color: #166534;
}

.speed-quiz-manager .questions-table {
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  overflow: hidden;
}

.speed-quiz-manager .table-header {
  display: grid;
  grid-template-columns: 1fr 1fr 100px 60px 80px;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: #f9fafb;
  font-weight: 600;
  font-size: 0.8rem;
  color: #6b7280;
}

.speed-quiz-manager .table-row {
  display: grid;
  grid-template-columns: 1fr 1fr 100px 60px 80px;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  border-top: 1px solid #e5e7eb;
  font-size: 0.85rem;
  align-items: center;
}

.speed-quiz-manager .col-display {
  font-weight: 600;
  font-size: 1.1rem;
}

.speed-quiz-manager .col-actions {
  display: flex;
  gap: 0.375rem;
}

.speed-quiz-manager .icon-btn {
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
}

.speed-quiz-manager .icon-btn.danger {
  background: #fee2e2;
}

/* Manager Rooms */
.speed-quiz-manager .manager-rooms h3 {
  font-size: 1rem;
  color: #374151;
  margin-bottom: 1rem;
}

.speed-quiz-manager .rooms-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.speed-quiz-manager .room-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: #f9fafb;
  border-radius: 10px;
  flex-wrap: wrap;
}

.speed-quiz-manager .room-main {
  flex: 1;
  min-width: 150px;
}

.speed-quiz-manager .room-main .room-title {
  font-weight: 600;
  color: #374151;
  display: block;
}

.speed-quiz-manager .room-main .room-code {
  font-size: 0.8rem;
  color: #6b7280;
}

.speed-quiz-manager .room-info {
  display: flex;
  gap: 1rem;
  align-items: center;
}

.speed-quiz-manager .room-info .players {
  font-size: 0.85rem;
  color: #6b7280;
}

.speed-quiz-manager .room-info .status {
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 500;
}

.speed-quiz-manager .room-info .status.playing {
  background: #d1fae5;
  color: #047857;
}

.speed-quiz-manager .room-info .status.waiting {
  background: #fef3c7;
  color: #92400e;
}

.speed-quiz-manager .room-actions {
  display: flex;
  gap: 0.5rem;
}

.speed-quiz-manager .no-rooms {
  text-align: center;
  padding: 3rem;
  color: #9ca3af;
}

.speed-quiz-manager .no-rooms .icon {
  font-size: 3rem;
  display: block;
  margin-bottom: 0.5rem;
}

/* Manager History */
.speed-quiz-manager .manager-history h3 {
  font-size: 1rem;
  color: #374151;
  margin-bottom: 1rem;
}

.speed-quiz-manager .history-filters {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.speed-quiz-manager .history-filters input,
.speed-quiz-manager .history-filters select {
  padding: 0.5rem 0.75rem;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 0.85rem;
}

.speed-quiz-manager .history-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.speed-quiz-manager .history-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: #f9fafb;
  border-radius: 10px;
  flex-wrap: wrap;
}

.speed-quiz-manager .history-main {
  flex: 1;
  min-width: 150px;
}

.speed-quiz-manager .history-main .title {
  font-weight: 600;
  color: #374151;
  display: block;
}

.speed-quiz-manager .history-main .date {
  font-size: 0.8rem;
  color: #6b7280;
}

.speed-quiz-manager .history-stats {
  display: flex;
  gap: 1rem;
  font-size: 0.85rem;
  color: #6b7280;
}

.speed-quiz-manager .history-stats .winner {
  color: #FF5722;
  font-weight: 500;
}

.speed-quiz-manager .history-actions {
  display: flex;
  gap: 0.5rem;
}

/* ============================================ */
/* WORD MATCH - "NOI TU THACH DAU" GAME STYLES */
/* ============================================ */

.word-match-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #00BCD4 0%, #4DD0E1 100%);
}

/* Common button styles */
.word-match-btn {
  padding: 0.75rem 1.5rem;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.word-match-btn.primary {
  background: linear-gradient(135deg, #00BCD4 0%, #00ACC1 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(0, 188, 212, 0.4);
}

.word-match-btn.primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 188, 212, 0.5);
}

.word-match-btn.primary.saved {
  background: linear-gradient(135deg, #10b981, #059669);
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
}

.word-match-btn.primary:disabled {
  opacity: 0.7;
  cursor: wait;
}

.word-match-btn.secondary {
  background: white;
  color: #00BCD4;
  border: 2px solid #00BCD4;
}

.word-match-btn.secondary:hover:not(:disabled) {
  background: #e0f7fa;
}

.word-match-btn.outline {
  background: transparent;
  color: white;
  border: 2px solid white;
}

.word-match-btn.outline:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.1);
}

.word-match-btn.danger {
  background: #dc2626;
  color: white;
}

.word-match-btn.small {
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
}

.word-match-btn.large {
  padding: 1rem 2rem;
  font-size: 1.125rem;
}

.word-match-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.word-match-close-btn,
.word-match-back-btn {
  position: absolute;
  top: 1.25rem;
  left: 1.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 52px;
  height: 52px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.05));
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 14px;
  color: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.word-match-back-btn svg,
.word-match-close-btn svg {
  width: 22px;
  height: 22px;
}

.word-match-close-btn {
  left: auto;
  right: 1.25rem;
}

.word-match-back-btn:hover {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
  border-color: rgba(255, 255, 255, 0.3);
  color: white;
  transform: translateX(-4px);
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.word-match-close-btn:hover {
  background: linear-gradient(135deg, rgba(255, 82, 82, 0.25), rgba(255, 82, 82, 0.15));
  border-color: rgba(255, 82, 82, 0.5);
  color: #ff6b6b;
  box-shadow: 0 6px 25px rgba(255, 82, 82, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* ============ MENU STYLES ============ */
.word-match-menu {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  position: relative;
}

.word-match-menu-header {
  text-align: center;
  color: white;
  margin-bottom: 3rem;
}

.word-match-menu-icon {
  font-size: 5rem;
  margin-bottom: 1rem;
  animation: linkPulse 2s ease-in-out infinite;
}

@keyframes linkPulse {
  0%, 100% { transform: scale(1) rotate(0deg); }
  50% { transform: scale(1.1) rotate(10deg); }
}

.word-match-menu-header h1 {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.word-match-menu-header p {
  font-size: 1.125rem;
  opacity: 0.9;
}

.word-match-menu-actions {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  width: 100%;
  max-width: 320px;
}

.word-match-menu-actions .word-match-btn {
  width: 100%;
}

.word-match-join-input {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.word-match-join-input input {
  flex: 1;
  padding: 0.75rem 1rem;
  border-radius: 12px;
  border: 2px solid transparent;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  text-align: center;
  font-weight: 600;
}

.word-match-menu-features {
  display: flex;
  gap: 1.5rem;
  margin-top: 3rem;
  flex-wrap: wrap;
  justify-content: center;
}

.word-match-menu-features .feature {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-size: 0.9rem;
  opacity: 0.9;
}

.word-match-menu-features .feature-icon {
  font-size: 1.5rem;
}

/* ============ SETUP STYLES ============ */
.word-match-setup {
  min-height: 100vh;
  padding: 4rem 2rem 2rem;
  position: relative;
}

.word-match-setup-header {
  margin-bottom: 2rem;
}

.word-match-setup-header h2 {
  color: white;
  font-size: 1.75rem;
  text-align: center;
  margin-top: 1rem;
}

.word-match-setup-form {
  background: white;
  border-radius: 20px;
  padding: 1.5rem;
  max-width: 400px;
  margin: 0 auto 1.5rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.word-match-setup-form .form-group {
  margin-bottom: 1.25rem;
}

.word-match-setup-form .form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: #374151;
  font-size: 0.9rem;
}

.word-match-setup-form .form-group input[type="text"],
.word-match-setup-form .form-group input[type="number"] {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 2px solid #e5e7eb;
  border-radius: 10px;
  font-size: 1rem;
  transition: border-color 0.2s;
}

.word-match-setup-form .form-group input:focus {
  border-color: #00BCD4;
  outline: none;
}

.word-match-setup-form .form-group input[type="range"] {
  width: 100%;
  accent-color: #00BCD4;
}

.word-match-setup-form .range-labels {
  display: flex;
  justify-content: space-between;
  font-size: 0.75rem;
  color: #9ca3af;
  margin-top: 0.25rem;
}

.word-match-setup-preview {
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 1.25rem;
  max-width: 400px;
  margin: 0 auto 1.5rem;
  color: white;
}

.word-match-setup-preview h3 {
  margin-bottom: 1rem;
  font-size: 1rem;
}

.word-match-setup-preview .preview-items {
  display: grid;
  gap: 0.5rem;
}

.word-match-setup-preview .preview-item {
  display: flex;
  justify-content: space-between;
  font-size: 0.9rem;
}

.word-match-setup-preview .preview-item .label {
  opacity: 0.8;
}

.word-match-setup-actions {
  text-align: center;
}

/* ============ LOBBY STYLES ============ */
.word-match-lobby {
  min-height: 100vh;
  padding: 4rem 2rem 2rem;
  position: relative;
}

.word-match-lobby-header {
  margin-bottom: 2rem;
}

.word-match-lobby-header .room-info {
  text-align: center;
  margin-top: 1rem;
  color: white;
}

.word-match-lobby-header .room-info h2 {
  font-size: 1.75rem;
  margin-bottom: 0.75rem;
}

.word-match-lobby-header .room-code {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(255, 255, 255, 0.2);
  padding: 0.5rem 1rem;
  border-radius: 10px;
}

.word-match-lobby-header .room-code .code {
  font-size: 1.5rem;
  font-weight: 700;
  letter-spacing: 3px;
}

.word-match-lobby-header .copy-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 1rem;
}

.word-match-lobby-settings {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.word-match-lobby-settings .setting-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(255, 255, 255, 0.15);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  color: white;
  font-size: 0.875rem;
}

.word-match-lobby-players {
  background: white;
  border-radius: 20px;
  padding: 1.5rem;
  max-width: 600px;
  margin: 0 auto 2rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.word-match-lobby-players .players-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.word-match-lobby-players .players-header h3 {
  font-size: 1rem;
  color: #374151;
}

.word-match-lobby-players .players-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 0.75rem;
}

.word-match-lobby-players .player-card {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: #f9fafb;
  border-radius: 12px;
  border: 2px solid transparent;
}

.word-match-lobby-players .player-card.host {
  border-color: #00BCD4;
  background: #e0f7fa;
}

.word-match-lobby-players .player-card.bot {
  background: #f0f9ff;
  border-color: #0ea5e9;
}

.word-match-lobby-players .player-card.empty {
  background: #f3f4f6;
  opacity: 0.5;
}

.word-match-lobby-players .player-avatar {
  font-size: 2rem;
}

.word-match-lobby-players .player-info {
  display: flex;
  flex-direction: column;
  gap: 0.125rem;
}

.word-match-lobby-players .player-name {
  font-weight: 600;
  font-size: 0.9rem;
  color: #374151;
}

.word-match-lobby-players .host-badge {
  font-size: 0.7rem;
  color: #00BCD4;
}

.word-match-lobby-players .bot-badge {
  font-size: 0.75rem;
}

.word-match-lobby-actions {
  text-align: center;
}

.word-match-lobby-actions .waiting-message {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  color: white;
  font-size: 1rem;
}

/* ============ PLAY STYLES ============ */
.word-match-play {
  min-height: 100vh;
  padding: 2rem;
  position: relative;
}

/* Layout with leaderboard sidebar */
.word-match-play.with-leaderboard {
  display: flex;
  gap: 1.5rem;
  max-width: 1100px;
  margin: 0 auto;
}

.word-match-main {
  flex: 1;
  min-width: 0;
}

.word-match-sidebar {
  width: 280px;
  flex-shrink: 0;
}

.word-match-sidebar .player-leaderboard {
  position: sticky;
  top: 1rem;
  max-height: calc(100vh - 4rem);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.word-match-sidebar .leaderboard-list {
  flex: 1;
  overflow-y: auto;
}

/* Mobile: stack sidebar below */
@media (max-width: 900px) {
  .word-match-play.with-leaderboard {
    flex-direction: column;
  }

  .word-match-sidebar {
    width: 100%;
    order: -1;
  }

  .word-match-sidebar .player-leaderboard {
    position: relative;
    max-height: none;
  }
}

.word-match-play .play-header {
  margin-bottom: 1.5rem;
}

.word-match-play .round-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.18), rgba(255, 255, 255, 0.08));
  backdrop-filter: blur(10px);
  padding: 1rem 1.5rem;
  border-radius: 16px;
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.word-match-play .round {
  font-weight: 600;
  font-size: 1.125rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.word-match-play .round .special {
  color: #ffd700;
}

.word-match-play .timer {
  display: flex;
  align-items: baseline;
  gap: 0.25rem;
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  color: #00BCD4;
  padding: 0.75rem 1.25rem;
  border-radius: 14px;
  font-weight: 700;
  box-shadow: 0 4px 15px rgba(0, 188, 212, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 2px solid rgba(0, 188, 212, 0.15);
  transition: all 0.3s ease;
}

.word-match-play .timer.warning {
  background: linear-gradient(145deg, #fef3c7, #fde68a);
  color: #f59e0b;
  box-shadow: 0 4px 15px rgba(245, 158, 11, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border-color: rgba(245, 158, 11, 0.3);
}

.word-match-play .timer.danger {
  background: linear-gradient(145deg, #fecaca, #fca5a5);
  color: #dc2626;
  animation: pulse 0.5s ease-in-out infinite;
  box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border-color: rgba(220, 38, 38, 0.3);
}

.word-match-play .time-value {
  font-size: 1.5rem;
}

.word-match-play .time-label {
  font-size: 0.75rem;
  opacity: 0.8;
}

.word-match-play .active-effects {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-bottom: 1.25rem;
  justify-content: center;
  animation: effectsSlide 0.4s ease forwards;
}

.word-match-play .effect {
  padding: 0.5rem 1rem;
  border-radius: 24px;
  font-size: 0.85rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  position: relative;
  overflow: hidden;
  animation: effectPulse 2s ease infinite;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.word-match-play .effect::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  animation: effectShine 2s ease infinite;
}

.word-match-play .effect.shield {
  background: linear-gradient(135deg, #dbeafe, #93c5fd);
  color: #1e40af;
  border: 2px solid rgba(59, 130, 246, 0.4);
  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

.word-match-play .effect.shield::after {
  content: '✨';
  position: absolute;
  right: 8px;
  font-size: 0.7rem;
  animation: shieldSparkle 1.5s ease infinite;
}

@keyframes shieldSparkle {
  0%, 100% { opacity: 0.5; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1.1); }
}

.word-match-play .effect.challenged {
  background: linear-gradient(135deg, #fee2e2, #fecaca);
  color: #991b1b;
  border: 2px solid rgba(220, 38, 38, 0.4);
  box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.5);
  animation: challengedShake 0.5s ease, effectPulse 2s ease infinite;
}

@keyframes challengedShake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-3px); }
  40% { transform: translateX(3px); }
  60% { transform: translateX(-2px); }
  80% { transform: translateX(2px); }
}

/* ============ MATCHING AREA ============ */
.word-match-play .matching-area {
  background: linear-gradient(145deg, #ffffff, #f9f9f9);
  border-radius: 24px;
  padding: 2rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.5);
  position: relative;
  overflow: hidden;
}

.word-match-play .matching-area::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #00BCD4, #26C6DA, #4DD0E1);
  border-radius: 24px 24px 0 0;
}

.word-match-play .matching-instruction {
  text-align: center;
  margin-bottom: 1rem;
  color: #6b7280;
  font-size: 0.9rem;
}

.word-match-play .matching-columns {
  display: flex;
  gap: 1rem;
  justify-content: center;
  align-items: stretch;
}

.word-match-play .match-column {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  flex: 1;
  max-width: 200px;
}

.word-match-play .match-lines {
  width: 40px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
}

.word-match-play .match-line {
  width: 2px;
  height: 30px;
  background: #00BCD4;
  border-radius: 1px;
}

.word-match-play .match-item {
  padding: 1rem 1.25rem;
  border: 2px solid rgba(229, 231, 235, 0.8);
  border-radius: 14px;
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  min-height: 56px;
}

.word-match-play .match-item:hover:not(:disabled) {
  border-color: #00BCD4;
  background: linear-gradient(145deg, #e0f7fa, #b2ebf2);
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(0, 188, 212, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.word-match-play .match-item.selected {
  border-color: #00BCD4;
  background: linear-gradient(145deg, #e0f7fa, #b2ebf2);
  box-shadow: 0 0 0 4px rgba(0, 188, 212, 0.2), 0 6px 18px rgba(0, 188, 212, 0.25);
  transform: translateY(-2px);
}

.word-match-play .match-item.matched {
  border-color: #10b981;
  background: linear-gradient(145deg, #d1fae5, #a7f3d0);
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

.word-match-play .match-item.selectable {
  border-color: #fbbf24;
  background: linear-gradient(145deg, #fef3c7, #fde68a);
  animation: selectable-pulse 1.5s ease-in-out infinite;
}

@keyframes selectable-pulse {
  0%, 100% { box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3); }
  50% { box-shadow: 0 4px 18px rgba(251, 191, 36, 0.5); }
}

.word-match-play .match-item:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.word-match-play .match-text {
  font-weight: 600;
  color: #374151;
}

.word-match-play .left-column .match-text {
  font-size: 1.1rem;
}

.word-match-play .match-indicator {
  color: #10b981;
  font-weight: 700;
}

/* ============ SUBMIT SECTION ============ */
.word-match-play .submit-section {
  text-align: center;
  margin-bottom: 1.5rem;
}

.word-match-play .submitted-message {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: #d1fae5;
  color: #047857;
  padding: 0.75rem 1.5rem;
  border-radius: 12px;
  font-weight: 600;
}

/* ============ SCOREBOARD ============ */
.word-match-play .live-scoreboard {
  background: white;
  border-radius: 16px;
  padding: 1rem;
  max-width: 400px;
  margin: 0 auto;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.word-match-play .live-scoreboard h3 {
  font-size: 0.9rem;
  color: #6b7280;
  margin-bottom: 0.75rem;
  text-align: center;
}

.word-match-play .scoreboard-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.word-match-play .score-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: #f9fafb;
  border-radius: 8px;
  font-size: 0.875rem;
}

.word-match-play .score-row.current {
  background: #e0f7fa;
  border: 2px solid #00BCD4;
}

.word-match-play .score-row.submitted {
  background: #d1fae5;
}

.word-match-play .score-row .rank {
  width: 28px;
  text-align: center;
}

.word-match-play .score-row .avatar {
  font-size: 1.25rem;
}

.word-match-play .score-row .name {
  flex: 1;
  font-weight: 500;
  color: #374151;
}

.word-match-play .score-row .status {
  color: #10b981;
  font-weight: 600;
}

.word-match-play .score-row .score {
  font-weight: 700;
  color: #00BCD4;
  min-width: 50px;
  text-align: right;
}

/* ============ WHEEL PHASE ============ */
.word-match-play.wheel-phase {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.word-match-play .wheel-phase-header {
  text-align: center;
  color: white;
  margin-bottom: 2rem;
}

.word-match-play .wheel-phase-header h2 {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.word-match-play .effects-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  max-width: 700px;
  margin-bottom: 2rem;
}

.word-match-play .effect-card {
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  border-radius: 20px;
  padding: 1.75rem;
  text-align: center;
  cursor: pointer;
  border: 3px solid rgba(255, 255, 255, 0.5);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9);
  position: relative;
  overflow: hidden;
}

.word-match-play .effect-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  transition: left 0.5s ease;
}

.word-match-play .effect-card:hover::before {
  left: 100%;
}

.word-match-play .effect-card:hover {
  transform: translateY(-6px) scale(1.02);
  border-color: #00BCD4;
  box-shadow: 0 12px 35px rgba(0, 188, 212, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.word-match-play .effect-emoji {
  font-size: 3rem;
  display: block;
  margin-bottom: 0.5rem;
}

.word-match-play .effect-name {
  font-weight: 700;
  font-size: 1.1rem;
  color: #374151;
  display: block;
  margin-bottom: 0.25rem;
}

.word-match-play .effect-desc {
  font-size: 0.85rem;
  color: #6b7280;
}

.word-match-play .target-selection {
  text-align: center;
  color: white;
}

.word-match-play .target-selection h3 {
  margin-bottom: 1.5rem;
}

.word-match-play .targets-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.word-match-play .target-card {
  background: linear-gradient(145deg, #ffffff, #f8f8f8);
  border-radius: 16px;
  padding: 1.25rem 1.75rem;
  text-align: center;
  cursor: pointer;
  border: 3px solid rgba(255, 255, 255, 0.5);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.word-match-play .target-card:hover:not(:disabled) {
  border-color: #00BCD4;
  transform: translateY(-4px) scale(1.05);
  box-shadow: 0 10px 30px rgba(0, 188, 212, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.word-match-play .target-card.shielded {
  opacity: 0.6;
}

.word-match-play .target-card:disabled {
  cursor: not-allowed;
}

.word-match-play .target-avatar {
  font-size: 2rem;
  display: block;
  margin-bottom: 0.25rem;
}

.word-match-play .target-name {
  font-weight: 600;
  color: #374151;
  display: block;
}

.word-match-play .target-score {
  font-size: 0.8rem;
  color: #6b7280;
}

.word-match-play .shield-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  font-size: 1.25rem;
}

.word-match-play .waiting-wheel {
  text-align: center;
}

.word-match-play .wheel-animation {
  font-size: 5rem;
  animation: spin 2s linear infinite;
}

/* ============ RESULT PHASE ============ */
.word-match-play.result-phase {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 3rem;
}

.word-match-play .result-header {
  text-align: center;
  color: white;
  margin-bottom: 1.5rem;
}

.word-match-play .result-header h2 {
  font-size: 1.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.word-match-play .special-badge {
  background: #fef3c7;
  color: #92400e;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
}

.word-match-play .correct-answers {
  background: white;
  border-radius: 12px;
  padding: 1rem 1.5rem;
  margin-bottom: 1rem;
  width: 100%;
  max-width: 400px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.word-match-play .correct-answers h3 {
  font-size: 0.9rem;
  color: #6b7280;
  margin-bottom: 0.75rem;
}

.word-match-play .answers-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.word-match-play .answer-pair {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  background: #f0fdf4;
  border-radius: 8px;
  font-size: 0.9rem;
}

.word-match-play .answer-pair .left {
  font-weight: 600;
  color: #374151;
}

.word-match-play .answer-pair .arrow {
  color: #10b981;
}

.word-match-play .answer-pair .right {
  color: #047857;
}

.word-match-play .your-result {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  border-radius: 12px;
  margin-bottom: 1rem;
  background: #e0f7fa;
  color: #00838f;
  font-weight: 600;
}

.word-match-play .your-result.perfect {
  background: #fef3c7;
  color: #92400e;
}

.word-match-play .your-result .icon {
  font-size: 1.5rem;
}

.word-match-play .your-result .points {
  margin-left: auto;
  font-size: 1.1rem;
}

.word-match-play .effect-applied {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  margin-bottom: 1rem;
  background: rgba(255, 255, 255, 0.15);
  padding: 0.75rem 1.25rem;
  border-radius: 10px;
  font-size: 0.9rem;
}

.word-match-play .all-results {
  background: white;
  border-radius: 16px;
  padding: 1rem;
  width: 100%;
  max-width: 500px;
  margin-bottom: 1.5rem;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.word-match-play .all-results h3 {
  font-size: 0.9rem;
  color: #6b7280;
  margin-bottom: 0.75rem;
}

.word-match-play .results-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.word-match-play .result-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: #f9fafb;
  border-radius: 8px;
  font-size: 0.85rem;
}

.word-match-play .result-item.perfect {
  background: #fef3c7;
}

.word-match-play .result-item.current {
  border: 2px solid #00BCD4;
}

.word-match-play .result-item .rank {
  width: 28px;
  font-weight: 600;
}

.word-match-play .result-item .avatar {
  font-size: 1.125rem;
}

.word-match-play .result-item .name {
  flex: 1;
  font-weight: 500;
}

.word-match-play .result-item .correct {
  color: #10b981;
  font-weight: 600;
}

.word-match-play .result-item .points {
  font-weight: 700;
  color: #00BCD4;
  min-width: 50px;
  text-align: right;
}

/* ============ DISCONNECTED PHASE ============ */
.word-match-play.disconnected-phase {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.word-match-play .disconnected-message {
  text-align: center;
  color: white;
  margin-bottom: 2rem;
}

.word-match-play .disconnected-message .icon {
  font-size: 4rem;
  display: block;
  margin-bottom: 1rem;
}

.word-match-play .disconnected-message h2 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

/* ============ RESULTS STYLES ============ */
.word-match-results {
  min-height: 100vh;
  padding: 2rem;
  text-align: center;
}

.word-match-results .results-header {
  color: white;
  margin-bottom: 2rem;
}

.word-match-results .results-header h1 {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.word-match-results .winner-section {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  margin-bottom: 2rem;
  position: relative;
  overflow: hidden;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
}

.word-match-results .confetti {
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 2rem;
  animation: bounce 1s ease-in-out infinite;
}

.word-match-results .winner-trophy {
  font-size: 4rem;
  margin-bottom: 1rem;
}

.word-match-results .winner-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.word-match-results .winner-avatar {
  font-size: 4rem;
}

.word-match-results .winner-name {
  font-size: 1.75rem;
  font-weight: 700;
  color: #374151;
}

.word-match-results .winner-score {
  font-size: 1.25rem;
  color: #00BCD4;
  font-weight: 600;
}

.word-match-results .winner-label {
  margin-top: 1rem;
  font-size: 0.9rem;
  font-weight: 700;
  color: white;
  background: linear-gradient(135deg, #00BCD4 0%, #00ACC1 100%);
  padding: 0.5rem 1.5rem;
  border-radius: 20px;
}

.word-match-results .podium {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 1rem;
  margin-bottom: 2rem;
}

.word-match-results .podium-place {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.word-match-results .podium-player {
  background: white;
  border-radius: 12px;
  padding: 1rem;
  text-align: center;
  min-width: 100px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.word-match-results .podium-player .medal {
  font-size: 1.5rem;
  display: block;
  margin-bottom: 0.25rem;
}

.word-match-results .podium-player .avatar {
  font-size: 2rem;
  display: block;
}

.word-match-results .podium-player .name {
  font-weight: 600;
  font-size: 0.85rem;
  color: #374151;
  display: block;
  max-width: 80px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.word-match-results .podium-player .score {
  font-weight: 700;
  color: #00BCD4;
  font-size: 0.9rem;
}

.word-match-results .podium-stand {
  width: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  font-weight: 700;
  color: white;
  margin-top: 0.5rem;
  border-radius: 8px 8px 0 0;
}

.word-match-results .podium-place.first .podium-stand {
  background: linear-gradient(180deg, #FFD700 0%, #FFA500 100%);
  height: 80px;
}

.word-match-results .podium-place.second .podium-stand {
  background: linear-gradient(180deg, #C0C0C0 0%, #A0A0A0 100%);
  height: 60px;
}

.word-match-results .podium-place.third .podium-stand {
  background: linear-gradient(180deg, #CD7F32 0%, #A0522D 100%);
  height: 40px;
}

.word-match-results .your-final-result {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  max-width: 500px;
  margin-left: auto;
  margin-right: auto;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.word-match-results .your-final-result h3 {
  margin-bottom: 1rem;
  color: #374151;
}

.word-match-results .result-stats {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
}

.word-match-results .stat {
  text-align: center;
  min-width: 70px;
}

.word-match-results .stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: #00BCD4;
  display: block;
}

.word-match-results .stat-label {
  font-size: 0.75rem;
  color: #6b7280;
}

.word-match-results .full-rankings {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
  text-align: left;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.word-match-results .full-rankings h3 {
  margin-bottom: 1rem;
  color: #374151;
  text-align: center;
}

.word-match-results .rankings-table {
  font-size: 0.85rem;
}

.word-match-results .rankings-header,
.word-match-results .rankings-row {
  display: grid;
  grid-template-columns: 40px 1fr 60px 70px 70px 70px;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  align-items: center;
}

.word-match-results .rankings-header {
  font-weight: 600;
  color: #6b7280;
  border-bottom: 1px solid #e5e7eb;
}

.word-match-results .rankings-row {
  border-radius: 8px;
}

.word-match-results .rankings-row:nth-child(even) {
  background: #f9fafb;
}

.word-match-results .rankings-row.current {
  background: #e0f7fa;
  border: 2px solid #00BCD4;
}

.word-match-results .rankings-row.winner {
  background: #fef3c7;
}

.word-match-results .col-player {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.word-match-results .col-player .avatar {
  font-size: 1.25rem;
}

.word-match-results .col-player .name {
  font-weight: 500;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.word-match-results .col-score {
  font-weight: 700;
  color: #00BCD4;
}

.word-match-results .results-actions {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

/* ============ GUIDE STYLES ============ */
.word-match-guide {
  min-height: 100vh;
  padding: 2rem;
  position: relative;
}

.word-match-guide .guide-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
}

.word-match-guide .guide-header h1 {
  color: white;
  font-size: 1.75rem;
}

.word-match-guide .guide-content {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  max-width: 700px;
  margin: 0 auto 2rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.word-match-guide .guide-section {
  margin-bottom: 2rem;
}

.word-match-guide .guide-section:last-child {
  margin-bottom: 0;
}

.word-match-guide .guide-section h2 {
  font-size: 1.25rem;
  color: #00BCD4;
  margin-bottom: 0.75rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e0f7fa;
}

.word-match-guide .guide-section p {
  color: #4b5563;
  line-height: 1.6;
  margin-bottom: 0.75rem;
}

.word-match-guide .steps {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.word-match-guide .step {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
}

.word-match-guide .step-number {
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #00BCD4 0%, #00ACC1 100%);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  flex-shrink: 0;
}

.word-match-guide .step-content strong {
  display: block;
  color: #374151;
  margin-bottom: 0.25rem;
}

.word-match-guide .step-content p {
  font-size: 0.9rem;
  margin-bottom: 0;
}

.word-match-guide .scoring-rules {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.word-match-guide .rule {
  display: flex;
  gap: 0.75rem;
  padding: 0.75rem;
  border-radius: 10px;
}

.word-match-guide .rule.correct {
  background: #d1fae5;
}

.word-match-guide .rule.bonus {
  background: #fef3c7;
}

.word-match-guide .rule .icon {
  font-size: 1.5rem;
}

.word-match-guide .rule-text strong {
  display: block;
  color: #374151;
}

.word-match-guide .rule-text p {
  font-size: 0.8rem;
  margin: 0;
}

.word-match-guide .effects-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.word-match-guide .effect-item {
  display: flex;
  gap: 0.75rem;
  padding: 0.75rem;
  background: #f9fafb;
  border-radius: 10px;
}

.word-match-guide .effect-emoji {
  font-size: 1.5rem;
}

.word-match-guide .effect-info strong {
  display: block;
  color: #374151;
}

.word-match-guide .effect-info p {
  font-size: 0.85rem;
  margin: 0;
}

.word-match-guide .target-badge {
  display: inline-block;
  margin-top: 0.25rem;
  padding: 0.125rem 0.5rem;
  background: #fee2e2;
  color: #dc2626;
  border-radius: 4px;
  font-size: 0.7rem;
  font-weight: 600;
}

.word-match-guide .tips {
  background: #e0f7fa;
  padding: 1rem;
  border-radius: 10px;
}

.word-match-guide .tips h3 {
  color: #00838f;
  margin-bottom: 0.5rem;
  font-size: 1rem;
}

.word-match-guide .tips ul {
  margin: 0;
  padding-left: 1.5rem;
  color: #00838f;
}

.word-match-guide .guide-footer {
  text-align: center;
}

/* ============ MANAGER STYLES ============ */
.word-match-manager {
  padding: 1.5rem;
}

.word-match-manager .manager-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.word-match-manager .manager-header .back-btn {
  padding: 0.5rem 1rem;
  background: #f3f4f6;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  color: #374151;
}

.word-match-manager .manager-header h2 {
  font-size: 1.25rem;
  color: #374151;
}

.word-match-manager .manager-nav {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.word-match-manager .nav-btn {
  padding: 0.5rem 1rem;
  background: #f3f4f6;
  border: 2px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  color: #6b7280;
  transition: all 0.2s;
}

.word-match-manager .nav-btn:hover {
  background: #e5e7eb;
}

.word-match-manager .nav-btn.active {
  background: #e0f7fa;
  border-color: #00BCD4;
  color: #00BCD4;
}

.word-match-manager .manager-content {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  border: 1px solid #e5e7eb;
}

/* Manager Overview */
.word-match-manager .stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.word-match-manager .stat-card {
  background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
  border-radius: 12px;
  padding: 1.25rem;
  text-align: center;
}

.word-match-manager .stat-icon {
  font-size: 2rem;
  display: block;
  margin-bottom: 0.5rem;
}

.word-match-manager .stat-value {
  font-size: 2rem;
  font-weight: 700;
  color: #00BCD4;
  display: block;
}

.word-match-manager .stat-label {
  font-size: 0.8rem;
  color: #6b7280;
}

.word-match-manager .quick-actions h3,
.word-match-manager .active-rooms-preview h3,
.word-match-manager .manager-settings h3,
.word-match-manager .manager-rooms h3,
.word-match-manager .manager-history h3 {
  font-size: 1rem;
  color: #374151;
  margin-bottom: 1rem;
}

.word-match-manager .actions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 0.75rem;
  margin-bottom: 2rem;
}

.word-match-manager .action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  background: #f9fafb;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.word-match-manager .action-btn:hover {
  border-color: #00BCD4;
  background: #e0f7fa;
}

.word-match-manager .action-btn .icon {
  font-size: 1.5rem;
}

.word-match-manager .rooms-preview-list,
.word-match-manager .rooms-list,
.word-match-manager .history-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.word-match-manager .room-preview-item,
.word-match-manager .room-card,
.word-match-manager .history-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem 1rem;
  background: #f9fafb;
  border-radius: 8px;
  flex-wrap: wrap;
}

.word-match-manager .room-title {
  flex: 1;
  font-weight: 500;
  color: #374151;
}

.word-match-manager .room-code {
  font-family: monospace;
  background: #e5e7eb;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.8rem;
}

.word-match-manager .room-players {
  font-size: 0.85rem;
  color: #6b7280;
}

.word-match-manager .room-status {
  font-size: 0.8rem;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.word-match-manager .room-status.playing {
  background: #d1fae5;
  color: #047857;
}

.word-match-manager .room-status.waiting {
  background: #fef3c7;
  color: #92400e;
}

.word-match-manager .no-data,
.word-match-manager .no-rooms {
  text-align: center;
  color: #9ca3af;
  padding: 2rem;
}

.word-match-manager .no-rooms .icon {
  font-size: 3rem;
  display: block;
  margin-bottom: 0.5rem;
}

.word-match-manager .settings-form {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.word-match-manager .settings-form .form-group {
  display: flex;
  flex-direction: column;
  gap: 0.375rem;
}

.word-match-manager .settings-form label {
  font-size: 0.85rem;
  font-weight: 500;
  color: #374151;
}

.word-match-manager .settings-form input[type="number"] {
  padding: 0.5rem 0.75rem;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 0.9rem;
}

.word-match-manager .effects-preview {
  margin-bottom: 2rem;
}

.word-match-manager .effects-preview h4 {
  font-size: 0.9rem;
  color: #374151;
  margin-bottom: 1rem;
}

.word-match-manager .effects-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 0.75rem;
}

.word-match-manager .effect-preview-card {
  background: #f9fafb;
  border-radius: 8px;
  padding: 0.75rem;
  text-align: center;
}

.word-match-manager .effect-preview-card .emoji {
  font-size: 1.5rem;
  display: block;
  margin-bottom: 0.25rem;
}

.word-match-manager .effect-preview-card .name {
  font-weight: 600;
  font-size: 0.8rem;
  color: #374151;
  display: block;
}

.word-match-manager .effect-preview-card .desc {
  font-size: 0.7rem;
  color: #6b7280;
}

.word-match-manager .settings-actions {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.word-match-manager .history-filters {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.word-match-manager .history-filters input,
.word-match-manager .history-filters select {
  padding: 0.5rem 0.75rem;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 0.85rem;
}

.word-match-manager .history-main {
  flex: 1;
  min-width: 150px;
}

.word-match-manager .history-main .title {
  font-weight: 600;
  color: #374151;
  display: block;
}

.word-match-manager .history-main .date {
  font-size: 0.8rem;
  color: #6b7280;
}

.word-match-manager .history-stats {
  display: flex;
  gap: 1rem;
  font-size: 0.85rem;
  color: #6b7280;
}

.word-match-manager .history-stats .winner {
  color: #00BCD4;
  font-weight: 500;
}

.word-match-manager .history-actions,
.word-match-manager .room-actions {
  display: flex;
  gap: 0.5rem;
}


/* ======================================================
   AI CHALLENGE GAME STYLES - PROFESSIONAL
   ====================================================== */

/* Page container */
.ai-challenge-page {
  min-height: 100vh;
  background: linear-gradient(180deg, #0f0f23 0%, #1a1a3e 50%, #0f0f23 100%);
  padding: 1rem;
  position: relative;
  overflow-x: hidden;
}

/* ======== AI CHALLENGE MENU PRO ======== */
.ai-menu-pro {
  max-width: 1000px;
  margin: 0 auto;
  padding: 1rem;
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Menu Header */
.ai-menu-header {
  position: relative;
  margin-bottom: 1.5rem;
}

.ai-menu-back {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.8);
  padding: 0.6rem 1rem;
  border-radius: 10px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
  position: absolute;
  left: 0;
  top: 0;
}

.ai-menu-back:hover {
  background: rgba(255, 255, 255, 0.15);
  color: white;
}

.ai-menu-title {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  padding-top: 3rem;
}

.ai-menu-title .title-icon {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, #9b59b6, #8e44ad);
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  box-shadow: 0 8px 25px rgba(155, 89, 182, 0.4);
}

.ai-menu-title .title-text h1 {
  font-size: 1.8rem;
  color: white;
  margin: 0;
  font-weight: 700;
}

.ai-menu-title .title-text p {
  color: rgba(255, 255, 255, 0.6);
  margin: 0.25rem 0 0 0;
  font-size: 0.95rem;
}

/* Stats bar */
.ai-menu-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.75rem;
  margin-bottom: 1.5rem;
}

.ai-menu-stats .stat-card {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 14px;
  padding: 1rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  transition: all 0.2s;
}

.ai-menu-stats .stat-card:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateY(-2px);
}

.ai-menu-stats .stat-card .stat-icon {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}

.ai-menu-stats .stat-card.wins .stat-icon {
  background: linear-gradient(135deg, #ffd93d, #f5c400);
}

.ai-menu-stats .stat-card.games .stat-icon {
  background: linear-gradient(135deg, #4ecdc4, #44a3a0);
}

.ai-menu-stats .stat-card.rate .stat-icon {
  background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
}

.ai-menu-stats .stat-card.unlocked .stat-icon {
  background: linear-gradient(135deg, #9b59b6, #8e44ad);
}

.ai-menu-stats .stat-info {
  display: flex;
  flex-direction: column;
}

.ai-menu-stats .stat-value {
  font-size: 1.4rem;
  font-weight: 700;
  color: white;
  line-height: 1.2;
}

.ai-menu-stats .stat-label {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.5);
}

/* Unlock progress bar */
.ai-menu-unlock-progress {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 14px;
  padding: 1rem 1.25rem;
  margin-bottom: 1.5rem;
}

.ai-menu-unlock-progress .unlock-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.75rem;
}

.ai-menu-unlock-progress .unlock-label {
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.85rem;
}

.ai-menu-unlock-progress .unlock-target {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-weight: 600;
}

.ai-menu-unlock-progress .unlock-target .emoji {
  font-size: 1.2rem;
}

.ai-menu-unlock-progress .unlock-bar {
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  overflow: hidden;
  position: relative;
}

.ai-menu-unlock-progress .unlock-fill {
  height: 100%;
  background: linear-gradient(90deg, #9b59b6, #e74c3c);
  border-radius: 10px;
  transition: width 0.5s ease;
}

.ai-menu-unlock-progress .unlock-text {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.7rem;
  color: white;
  font-weight: 600;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* AI Grid */
.ai-menu-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1rem;
  margin-bottom: 1.5rem;
}

/* AI Card Pro */
.ai-card-pro {
  background: rgba(255, 255, 255, 0.04);
  border: 2px solid rgba(255, 255, 255, 0.08);
  border-radius: 18px;
  padding: 1.25rem;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  text-align: left;
  animation: cardSlideIn 0.4s ease backwards;
  animation-delay: var(--delay, 0s);
}

@keyframes cardSlideIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.ai-card-pro::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--ai-color, #9b59b6);
  opacity: 0.8;
}

.ai-card-pro:hover:not(.locked) {
  transform: translateY(-6px);
  box-shadow: 0 12px 35px rgba(0, 0, 0, 0.4);
  border-color: var(--ai-color, #9b59b6);
}

.ai-card-pro.locked {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Tier badges */
.ai-card-pro .ai-tier-badge {
  position: absolute;
  top: 12px;
  right: 12px;
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 8px;
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
}

.ai-card-pro.tier-bronze .ai-tier-badge {
  background: linear-gradient(135deg, #cd7f32, #a0522d);
  color: white;
}

.ai-card-pro.tier-silver .ai-tier-badge {
  background: linear-gradient(135deg, #c0c0c0, #a8a8a8);
  color: #333;
}

.ai-card-pro.tier-gold .ai-tier-badge {
  background: linear-gradient(135deg, #ffd700, #daa520);
  color: #333;
}

.ai-card-pro.tier-platinum .ai-tier-badge {
  background: linear-gradient(135deg, #e5e4e2, #b4b4b4);
  color: #333;
}

.ai-card-pro.tier-diamond .ai-tier-badge {
  background: linear-gradient(135deg, #b9f2ff, #00bfff);
  color: #1a1a2e;
}

.ai-card-pro.tier-legendary .ai-tier-badge {
  background: linear-gradient(135deg, #ff6b6b, #9b59b6, #3498db);
  color: white;
  animation: legendaryGlow 2s infinite;
}

@keyframes legendaryGlow {
  0%, 100% { box-shadow: 0 0 10px rgba(155, 89, 182, 0.5); }
  50% { box-shadow: 0 0 20px rgba(155, 89, 182, 0.8); }
}

/* Lock overlay */
.ai-card-pro .ai-lock-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(2px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  border-radius: 16px;
}

.ai-card-pro .lock-content {
  text-align: center;
  color: white;
}

.ai-card-pro .lock-content svg {
  margin-bottom: 0.5rem;
  opacity: 0.8;
}

.ai-card-pro .lock-requirement {
  display: block;
  font-weight: 600;
  font-size: 0.9rem;
}

.ai-card-pro .lock-progress {
  display: block;
  font-size: 0.8rem;
  opacity: 0.7;
  margin-top: 0.25rem;
}

/* AI Avatar */
.ai-card-pro .ai-avatar {
  position: relative;
  width: 70px;
  height: 70px;
  margin: 0 auto 1rem;
}

.ai-card-pro .ai-emoji {
  font-size: 3rem;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  position: relative;
  z-index: 1;
}

.ai-card-pro .ai-glow {
  position: absolute;
  inset: -5px;
  background: var(--ai-color, #9b59b6);
  opacity: 0.2;
  border-radius: 50%;
  filter: blur(15px);
}

/* AI Info */
.ai-card-pro .ai-info {
  text-align: center;
  margin-bottom: 1rem;
}

.ai-card-pro .ai-name {
  color: white;
  font-size: 1.1rem;
  font-weight: 600;
  margin: 0 0 0.5rem 0;
}

.ai-card-pro .ai-difficulty-stars {
  display: flex;
  justify-content: center;
  gap: 3px;
  margin-bottom: 0.5rem;
}

.ai-card-pro .ai-difficulty-stars svg {
  color: rgba(255, 255, 255, 0.2);
}

.ai-card-pro .ai-difficulty-stars svg.filled {
  color: #ffd93d;
  fill: #ffd93d;
}

.ai-card-pro .ai-description {
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.85rem;
  margin: 0;
}

/* AI Stats row */
.ai-card-pro .ai-stats-row {
  display: flex;
  justify-content: space-around;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 10px;
  padding: 0.75rem;
  margin-bottom: 0.75rem;
}

.ai-card-pro .ai-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.ai-card-pro .ai-stat svg {
  color: rgba(255, 255, 255, 0.4);
  margin-bottom: 2px;
}

.ai-card-pro .ai-stat .label {
  font-size: 0.7rem;
  color: rgba(255, 255, 255, 0.5);
}

.ai-card-pro .ai-stat .value {
  font-size: 0.85rem;
  font-weight: 600;
  color: white;
}

.ai-card-pro .ai-stat .value.speed-slow { color: #4ecdc4; }
.ai-card-pro .ai-stat .value.speed-medium { color: #ffd93d; }
.ai-card-pro .ai-stat .value.speed-fast { color: #ff6b6b; }

/* Play hint */
.ai-card-pro .ai-play-hint {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  background: linear-gradient(135deg, #9b59b6, #8e44ad);
  color: white;
  padding: 0.6rem;
  border-radius: 10px;
  font-size: 0.9rem;
  font-weight: 600;
  opacity: 0.9;
  transition: all 0.2s;
}

.ai-card-pro:hover .ai-play-hint {
  opacity: 1;
  transform: scale(1.02);
}

/* Instructions */
.ai-menu-instructions {
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  padding: 1.25rem;
}

.ai-menu-instructions h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  font-size: 1rem;
  margin: 0 0 1rem 0;
}

.ai-menu-instructions h3 svg {
  color: #ffd93d;
}

.ai-menu-instructions .instruction-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.75rem;
}

.ai-menu-instructions .instruction-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  text-align: center;
}

.ai-menu-instructions .instruction-icon {
  font-size: 1.5rem;
}

.ai-menu-instructions .instruction-item span {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.7);
}

/* ======== AI CHALLENGE PLAY PRO ======== */
.ai-play-pro {
  max-width: 800px;
  margin: 0 auto;
  padding: 1rem;
  min-height: 100vh;
}

/* Countdown screen */
.ai-play-pro.countdown-screen {
  display: flex;
  align-items: center;
  justify-content: center;
}

.ai-play-pro .countdown-content {
  text-align: center;
  width: 100%;
}

/* VS Display */
.ai-play-pro .versus-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  margin-bottom: 3rem;
}

.ai-play-pro .versus-display .player-side,
.ai-play-pro .versus-display .ai-side {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  animation: slideInSide 0.6s ease;
}

.ai-play-pro .versus-display .player-side {
  animation-name: slideInLeft;
}

.ai-play-pro .versus-display .ai-side {
  animation-name: slideInRight;
}

@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-50px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slideInRight {
  from { opacity: 0; transform: translateX(50px); }
  to { opacity: 1; transform: translateX(0); }
}

.ai-play-pro .avatar-frame {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.ai-play-pro .avatar-frame.player {
  background: linear-gradient(135deg, #4ecdc4, #44a3a0);
  box-shadow: 0 0 30px rgba(78, 205, 196, 0.4);
}

.ai-play-pro .avatar-frame.ai {
  background: linear-gradient(135deg, var(--ai-color, #9b59b6), color-mix(in srgb, var(--ai-color, #9b59b6) 80%, black));
  box-shadow: 0 0 30px color-mix(in srgb, var(--ai-color, #9b59b6) 40%, transparent);
}

.ai-play-pro .avatar-frame .avatar {
  font-size: 2.5rem;
}

.ai-play-pro .versus-display .name {
  color: white;
  font-weight: 600;
  font-size: 1.1rem;
}

.ai-play-pro .versus-display .role-tag {
  font-size: 0.75rem;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  background: rgba(78, 205, 196, 0.2);
  color: #4ecdc4;
}

.ai-play-pro .versus-display .role-tag.ai {
  background: rgba(155, 89, 182, 0.2);
  color: #9b59b6;
}

/* VS Badge */
.ai-play-pro .vs-badge {
  position: relative;
}

.ai-play-pro .vs-text {
  font-size: 2.5rem;
  font-weight: 800;
  background: linear-gradient(135deg, #ffd93d, #ff6b6b);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: vsPulse 1s infinite;
}

@keyframes vsPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.ai-play-pro .vs-spark {
  position: absolute;
  inset: -20px;
  background: radial-gradient(circle, rgba(255, 217, 61, 0.3) 0%, transparent 70%);
  animation: sparkle 2s infinite;
}

@keyframes sparkle {
  0%, 100% { opacity: 0.5; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.2); }
}

/* Countdown area */
.ai-play-pro .countdown-area {
  margin-bottom: 2rem;
}

.ai-play-pro .countdown-number-wrapper {
  height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.ai-play-pro .countdown-number {
  font-size: 6rem;
  font-weight: 800;
  color: white;
  animation: countdownPop 1s ease;
  text-shadow: 0 0 50px rgba(255, 255, 255, 0.5);
}

@keyframes countdownPop {
  0% { transform: scale(0.5); opacity: 0; }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); opacity: 1; }
}

.ai-play-pro .countdown-text {
  color: rgba(255, 255, 255, 0.7);
  font-size: 1.2rem;
  margin: 0;
}

/* Battle info */
.ai-play-pro .battle-info {
  display: flex;
  justify-content: center;
  gap: 2rem;
}

.ai-play-pro .battle-info .info-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.9rem;
}

.ai-play-pro .battle-info .info-item svg {
  opacity: 0.7;
}

/* Playing screen */
.ai-play-pro.playing-screen {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Game top bar */
.ai-play-pro .game-top-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: rgba(255, 255, 255, 0.06);
  border-radius: 16px;
  padding: 0.75rem 1rem;
}

.ai-play-pro .score-panel {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  min-width: 140px;
}

.ai-play-pro .score-panel.player {
  justify-content: flex-start;
}

.ai-play-pro .score-panel.ai {
  justify-content: flex-end;
}

.ai-play-pro .score-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
}

.ai-play-pro .score-panel.player .score-avatar {
  background: linear-gradient(135deg, #4ecdc4, #44a3a0);
  color: white;
}

.ai-play-pro .score-avatar .emoji {
  font-size: 1.3rem;
}

.ai-play-pro .score-info {
  display: flex;
  flex-direction: column;
}

.ai-play-pro .score-panel.ai .score-info {
  text-align: right;
}

.ai-play-pro .score-name {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.6);
}

.ai-play-pro .score-value {
  font-size: 1.25rem;
  font-weight: 700;
  color: white;
}

.ai-play-pro .streak-badge {
  display: flex;
  align-items: center;
  gap: 2px;
  background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
  padding: 0.25rem 0.5rem;
  border-radius: 8px;
  color: white;
  font-size: 0.8rem;
  font-weight: 600;
  animation: streakPulse 0.5s ease;
}

@keyframes streakPulse {
  0% { transform: scale(0.8); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.ai-play-pro .leading-indicator {
  color: #ffd93d;
  animation: leadingGlow 1s infinite;
}

@keyframes leadingGlow {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

/* Question progress */
.ai-play-pro .question-progress {
  text-align: center;
}

.ai-play-pro .progress-ring {
  display: flex;
  align-items: baseline;
  justify-content: center;
  gap: 2px;
  background: rgba(155, 89, 182, 0.2);
  padding: 0.4rem 1rem;
  border-radius: 20px;
}

.ai-play-pro .progress-ring .current {
  font-size: 1.1rem;
  font-weight: 700;
  color: #9b59b6;
}

.ai-play-pro .progress-ring .separator {
  color: rgba(255, 255, 255, 0.4);
}

.ai-play-pro .progress-ring .total {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.6);
}

/* Timer section */
.ai-play-pro .timer-section {
  display: flex;
  justify-content: center;
  padding: 0.5rem 0;
}

.ai-play-pro .circular-timer {
  position: relative;
  width: 80px;
  height: 80px;
}

.ai-play-pro .circular-timer svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.ai-play-pro .circular-timer .timer-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 6;
}

.ai-play-pro .circular-timer .timer-progress {
  fill: none;
  stroke: #4ecdc4;
  stroke-width: 6;
  stroke-linecap: round;
  transition: stroke-dasharray 1s linear;
}

.ai-play-pro .timer-section.warning .timer-progress {
  stroke: #ffd93d;
}

.ai-play-pro .timer-section.danger .timer-progress {
  stroke: #ff6b6b;
  animation: timerPulse 0.5s infinite;
}

@keyframes timerPulse {
  0%, 100% { stroke-width: 6; }
  50% { stroke-width: 8; }
}

.ai-play-pro .timer-content {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
}

.ai-play-pro .timer-content svg {
  width: 16px;
  height: 16px;
  opacity: 0.7;
}

.ai-play-pro .timer-value {
  font-size: 1.5rem;
  font-weight: 700;
  line-height: 1;
}

.ai-play-pro .timer-section.warning .timer-value {
  color: #ffd93d;
}

.ai-play-pro .timer-section.danger .timer-value {
  color: #ff6b6b;
}

/* Question area */
.ai-play-pro .question-area {
  background: rgba(255, 255, 255, 0.04);
  border-radius: 20px;
  padding: 1.5rem;
  text-align: center;
}

.ai-play-pro .question-category {
  display: inline-block;
  background: rgba(255, 255, 255, 0.1);
  padding: 0.4rem 1rem;
  border-radius: 20px;
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 1rem;
}

.ai-play-pro .question-text {
  font-size: 1.6rem;
  color: white;
  margin: 0 0 1rem 0;
  line-height: 1.4;
  font-weight: 500;
}

/* AI thinking indicator */
.ai-play-pro .ai-thinking-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.9rem;
}

.ai-play-pro .ai-thinking-indicator .ai-emoji {
  font-size: 1.2rem;
}

.ai-play-pro .thinking-dots span {
  animation: dotBounce 1.4s infinite ease-in-out;
}

.ai-play-pro .thinking-dots span:nth-child(1) { animation-delay: -0.32s; }
.ai-play-pro .thinking-dots span:nth-child(2) { animation-delay: -0.16s; }
.ai-play-pro .thinking-dots span:nth-child(3) { animation-delay: 0s; }

@keyframes dotBounce {
  0%, 80%, 100% { opacity: 0.3; }
  40% { opacity: 1; }
}

/* Answer grid */
.ai-play-pro .answer-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

.ai-play-pro .answer-btn {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.25rem;
  border: none;
  border-radius: 14px;
  color: white;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
  text-align: left;
  min-height: 60px;
}

.ai-play-pro .answer-btn:hover:not(:disabled) {
  transform: scale(1.02);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
}

.ai-play-pro .answer-btn:disabled {
  cursor: default;
}

.ai-play-pro .answer-btn .option-shape {
  font-size: 1.2rem;
  opacity: 0.8;
  flex-shrink: 0;
}

.ai-play-pro .answer-btn .option-text {
  flex: 1;
}

.ai-play-pro .answer-btn.selected {
  box-shadow: 0 0 0 4px white, 0 6px 20px rgba(0, 0, 0, 0.3);
}

.ai-play-pro .answer-btn.correct {
  box-shadow: 0 0 0 4px #4ecdc4, 0 0 30px rgba(78, 205, 196, 0.5);
}

.ai-play-pro .answer-btn.wrong {
  box-shadow: 0 0 0 4px #ff6b6b;
  opacity: 0.7;
}

.ai-play-pro .result-icon {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  flex-shrink: 0;
}

.ai-play-pro .result-icon.correct {
  background: #4ecdc4;
  color: white;
}

.ai-play-pro .result-icon.wrong {
  background: #ff6b6b;
  color: white;
}

.ai-play-pro .ai-answer-marker {
  position: absolute;
  top: -10px;
  right: -10px;
  font-size: 1.8rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
  z-index: 5;
}

/* Round result overlay */
.ai-play-pro .round-result-overlay {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 1rem;
  z-index: 100;
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(100%); }
  to { opacity: 1; transform: translateY(0); }
}

.ai-play-pro .result-card {
  max-width: 500px;
  margin: 0 auto;
  background: rgba(20, 20, 40, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 1.25rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.ai-play-pro .result-header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  padding: 0.75rem;
  border-radius: 12px;
  margin-bottom: 1rem;
}

.ai-play-pro .result-card.player .result-header {
  background: linear-gradient(135deg, #4ecdc4, #44a3a0);
}

.ai-play-pro .result-card.ai .result-header {
  background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
}

.ai-play-pro .result-card.tie .result-header {
  background: linear-gradient(135deg, #ffd93d, #f5c400);
}

.ai-play-pro .result-header .result-emoji {
  font-size: 1.5rem;
}

.ai-play-pro .result-header .result-title {
  color: white;
  font-weight: 600;
  font-size: 1.1rem;
}

.ai-play-pro .result-header .result-points {
  background: rgba(255, 255, 255, 0.2);
  padding: 0.25rem 0.75rem;
  border-radius: 8px;
  color: white;
  font-weight: 700;
}

/* Result comparison */
.ai-play-pro .result-comparison {
  display: flex;
  align-items: center;
  justify-content: space-around;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: 1rem;
}

.ai-play-pro .comparison-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}

.ai-play-pro .comparison-item .label {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.7);
}

.ai-play-pro .comparison-item .status {
  font-weight: 600;
}

.ai-play-pro .comparison-item .status.correct {
  color: #4ecdc4;
}

.ai-play-pro .comparison-item .status.wrong {
  color: #ff6b6b;
}

.ai-play-pro .comparison-item .time {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.5);
}

.ai-play-pro .comparison-divider {
  color: rgba(255, 255, 255, 0.3);
  font-weight: 600;
}

/* Next button */
.ai-play-pro .next-question-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  background: linear-gradient(135deg, #9b59b6, #8e44ad);
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.ai-play-pro .next-question-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(155, 89, 182, 0.4);
}

/* ======== AI CHALLENGE RESULTS PRO ======== */
.ai-results-pro {
  max-width: 600px;
  margin: 0 auto;
  padding: 1rem;
  position: relative;
  min-height: 100vh;
}

/* Background effects */
.ai-results-pro .results-background {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.ai-results-pro .results-background.player::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at top, rgba(78, 205, 196, 0.15) 0%, transparent 50%);
}

/* Confetti */
.ai-results-pro .confetti-container {
  position: fixed;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.ai-results-pro .confetti {
  position: absolute;
  top: -10px;
  left: var(--x, 50%);
  width: 10px;
  height: 10px;
  background: var(--color, #ffd93d);
  animation: confettiFall 3s linear infinite;
  animation-delay: var(--delay, 0s);
}

.ai-results-pro .confetti:nth-child(odd) {
  border-radius: 50%;
}

@keyframes confettiFall {
  0% {
    transform: translateY(-10px) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

/* Result banner */
.ai-results-pro .result-banner-pro {
  position: relative;
  z-index: 1;
  text-align: center;
  padding: 2.5rem 2rem;
  border-radius: 28px;
  margin-bottom: 1.75rem;
  animation: bannerSlideIn 0.6s ease;
  overflow: hidden;
  box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
}

.ai-results-pro .result-banner-pro::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.15), transparent);
  animation: bannerSpin 4s linear infinite;
}

@keyframes bannerSpin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.ai-results-pro .result-banner-pro::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
  animation: bannerShine 2.5s ease infinite;
}

@keyframes bannerShine {
  0% { left: -100%; }
  100% { left: 100%; }
}

@keyframes bannerSlideIn {
  from { opacity: 0; transform: scale(0.85) translateY(20px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}

.ai-results-pro .result-banner-pro.player {
  background: linear-gradient(145deg, #4ecdc4, #2ab7b0, #20a098);
  border: 3px solid rgba(255, 255, 255, 0.25);
  box-shadow: 0 15px 50px rgba(78, 205, 196, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.ai-results-pro .result-banner-pro.ai {
  background: linear-gradient(145deg, #ff6b6b, #ee5a5a, #dc4848);
  border: 3px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 15px 50px rgba(255, 107, 107, 0.4);
}

.ai-results-pro .result-banner-pro.tie {
  background: linear-gradient(145deg, #ffd93d, #f5c400, #e5b400);
  border: 3px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 15px 50px rgba(255, 217, 61, 0.4);
}

.ai-results-pro .victory-icon,
.ai-results-pro .tie-icon,
.ai-results-pro .defeat-icon {
  margin-bottom: 1rem;
  position: relative;
  z-index: 1;
}

.ai-results-pro .victory-icon svg {
  color: white;
  animation: crownBounce 1s ease infinite;
  filter: drop-shadow(0 4px 15px rgba(255, 255, 255, 0.5));
  width: 56px;
  height: 56px;
}

@keyframes crownBounce {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-12px) scale(1.1); }
}

.ai-results-pro .defeat-icon .ai-emoji {
  font-size: 3.5rem;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
}

.ai-results-pro .result-title {
  color: white;
  font-size: 2.5rem;
  font-weight: 800;
  margin: 0 0 0.6rem 0;
  text-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  position: relative;
  z-index: 1;
  letter-spacing: 1px;
}

.ai-results-pro .result-banner-pro.tie .result-title {
  color: #1a1a2e;
  text-shadow: none;
}

.ai-results-pro .result-subtitle {
  color: rgba(255, 255, 255, 0.95);
  font-size: 1.1rem;
  margin: 0;
  position: relative;
  z-index: 1;
  font-weight: 500;
}

.ai-results-pro .result-banner-pro.tie .result-subtitle {
  color: rgba(26, 26, 46, 0.85);
}

/* Score comparison */
.ai-results-pro .score-comparison-pro {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: stretch;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 24px;
  overflow: hidden;
  margin-bottom: 1.75rem;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
  animation: scoreAppear 0.5s ease forwards;
  animation-delay: 0.2s;
  opacity: 0;
}

@keyframes scoreAppear {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}

.ai-results-pro .player-panel,
.ai-results-pro .ai-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1.75rem 1.25rem;
  gap: 0.6rem;
  position: relative;
  transition: all 0.3s ease;
}

.ai-results-pro .player-panel.winner,
.ai-results-pro .ai-panel.winner {
  background: linear-gradient(145deg, rgba(78, 205, 196, 0.2), rgba(78, 205, 196, 0.1));
}

.ai-results-pro .player-panel.winner::before,
.ai-results-pro .ai-panel.winner::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #4ecdc4, #2ab7b0);
}

.ai-results-pro .panel-header {
  position: relative;
}

.ai-results-pro .panel-header .avatar {
  font-size: 3rem;
  filter: drop-shadow(0 4px 10px rgba(0, 0, 0, 0.2));
  transition: transform 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 72px;
  height: 72px;
}

.ai-results-pro .panel-header .avatar img {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid rgba(255, 255, 255, 0.3);
}

.ai-results-pro .player-panel.winner .panel-header .avatar,
.ai-results-pro .ai-panel.winner .panel-header .avatar {
  animation: avatarWinner 2s ease infinite;
}

@keyframes avatarWinner {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.ai-results-pro .panel-header .winner-badge {
  position: absolute;
  top: -10px;
  right: -10px;
  color: #ffd93d;
  animation: badgePulse 1s infinite;
  filter: drop-shadow(0 0 8px rgba(255, 217, 61, 0.6));
}

@keyframes badgePulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

.ai-results-pro .panel-name {
  color: white;
  font-weight: 600;
  font-size: 1rem;
}

.ai-results-pro .panel-score {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.ai-results-pro .score-number {
  font-size: 2.75rem;
  font-weight: 800;
  color: white;
  line-height: 1;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.ai-results-pro .player-panel.winner .score-number {
  color: #4ecdc4;
  text-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
}

.ai-results-pro .score-label {
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.6);
  font-weight: 500;
}

/* Score divider */
.ai-results-pro .score-divider {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0 1rem;
  background: rgba(0, 0, 0, 0.25);
  position: relative;
}

.ai-results-pro .divider-line {
  width: 2px;
  height: 35px;
  background: linear-gradient(180deg, transparent, rgba(255, 255, 255, 0.15), transparent);
}

.ai-results-pro .divider-vs {
  color: rgba(255, 255, 255, 0.5);
  font-weight: 800;
  font-size: 1rem;
  padding: 0.6rem 0;
  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

.ai-results-pro .score-diff {
  position: absolute;
  bottom: 12px;
  font-size: 0.8rem;
  font-weight: 800;
  padding: 0.25rem 0.6rem;
  border-radius: 10px;
  animation: diffPulse 1.5s ease infinite;
}

@keyframes diffPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.ai-results-pro .score-diff.player-lead {
  background: rgba(78, 205, 196, 0.35);
  color: #4ecdc4;
  box-shadow: 0 2px 10px rgba(78, 205, 196, 0.3);
}

.ai-results-pro .score-diff.ai-lead {
  background: rgba(255, 107, 107, 0.35);
  color: #ff6b6b;
  box-shadow: 0 2px 10px rgba(255, 107, 107, 0.3);
}

/* Stats grid */
.ai-results-pro .stats-grid-pro {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.85rem;
  margin-bottom: 1.75rem;
  animation: statsAppear 0.5s ease forwards;
  animation-delay: 0.35s;
  opacity: 0;
}

@keyframes statsAppear {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}

.ai-results-pro .stat-card-pro {
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  padding: 1.1rem;
  display: flex;
  align-items: flex-start;
  gap: 0.85rem;
  transition: all 0.3s ease;
}

.ai-results-pro .stat-card-pro:hover {
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.05));
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
}

.ai-results-pro .stat-card-pro .stat-icon {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.ai-results-pro .stat-card-pro.accuracy .stat-icon {
  background: linear-gradient(135deg, #4ecdc4, #44a3a0);
  color: white;
}

.ai-results-pro .stat-card-pro.correct .stat-icon {
  background: linear-gradient(135deg, #ffd93d, #f5c400);
  color: #1a1a2e;
}

.ai-results-pro .stat-card-pro.streak .stat-icon {
  background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
  color: white;
}

.ai-results-pro .stat-card-pro.time .stat-icon {
  background: linear-gradient(135deg, #9b59b6, #8e44ad);
  color: white;
}

.ai-results-pro .stat-content {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.ai-results-pro .stat-label {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.5);
}

.ai-results-pro .stat-value {
  font-size: 1.25rem;
  font-weight: 700;
  color: white;
}

.ai-results-pro .stat-comparison {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.ai-results-pro .stat-comparison .player-value {
  color: rgba(255, 255, 255, 0.7);
  font-weight: 600;
}

.ai-results-pro .stat-comparison .player-value.better {
  color: #4ecdc4;
}

.ai-results-pro .stat-comparison .vs {
  color: rgba(255, 255, 255, 0.3);
  font-size: 0.75rem;
}

.ai-results-pro .stat-comparison .ai-value {
  color: rgba(255, 255, 255, 0.7);
  font-weight: 600;
}

.ai-results-pro .stat-comparison .ai-value.better {
  color: #ff6b6b;
}

/* Unlock notification */
.ai-results-pro .unlock-notification-pro {
  position: relative;
  z-index: 1;
  background: linear-gradient(135deg, #ffd93d, #f5c400);
  border-radius: 18px;
  padding: 1.25rem;
  margin-bottom: 1.5rem;
  overflow: hidden;
}

.ai-results-pro .unlock-glow {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
  animation: unlockGlow 2s infinite;
}

@keyframes unlockGlow {
  0%, 100% { opacity: 0.5; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.1); }
}

.ai-results-pro .unlock-content {
  position: relative;
  display: flex;
  align-items: center;
  gap: 1rem;
}

.ai-results-pro .unlock-icon {
  width: 50px;
  height: 50px;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #1a1a2e;
}

.ai-results-pro .unlock-info {
  flex: 1;
}

.ai-results-pro .unlock-info h3 {
  color: #1a1a2e;
  font-size: 1.1rem;
  margin: 0 0 0.5rem 0;
}

.ai-results-pro .unlocked-ai-display {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.25rem;
}

.ai-results-pro .unlocked-ai-display .ai-emoji {
  font-size: 1.5rem;
}

.ai-results-pro .unlocked-ai-display .ai-name {
  color: #1a1a2e;
  font-weight: 600;
}

.ai-results-pro .unlock-info p {
  color: rgba(26, 26, 46, 0.7);
  font-size: 0.85rem;
  margin: 0;
}

.ai-results-pro .unlock-stars {
  display: flex;
  gap: 4px;
}

.ai-results-pro .unlock-stars .star {
  color: #1a1a2e;
  animation: starPop 0.5s ease backwards;
}

.ai-results-pro .unlock-stars .star:nth-child(1) { animation-delay: 0.1s; }
.ai-results-pro .unlock-stars .star:nth-child(2) { animation-delay: 0.2s; }
.ai-results-pro .unlock-stars .star:nth-child(3) { animation-delay: 0.3s; }

@keyframes starPop {
  from { opacity: 0; transform: scale(0) rotate(-180deg); }
  to { opacity: 1; transform: scale(1) rotate(0); }
}

/* Performance insight */
.ai-results-pro .performance-insight {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: 1.5rem;
}

.ai-results-pro .performance-insight svg {
  color: #9b59b6;
  flex-shrink: 0;
}

.ai-results-pro .performance-insight span {
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.9rem;
  line-height: 1.4;
}

/* Action buttons */
.ai-results-pro .result-actions-pro {
  position: relative;
  z-index: 1;
}

.ai-results-pro .action-btn-pro {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  border: none;
  border-radius: 14px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  width: 100%;
}

.ai-results-pro .action-btn-pro.primary {
  background: linear-gradient(135deg, #9b59b6, #8e44ad);
  color: white;
  margin-bottom: 0.75rem;
}

.ai-results-pro .action-btn-pro.primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(155, 89, 182, 0.4);
}

.ai-results-pro .secondary-actions {
  display: flex;
  gap: 0.75rem;
}

.ai-results-pro .action-btn-pro.secondary {
  flex: 1;
  background: rgba(255, 255, 255, 0.08);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.15);
}

.ai-results-pro .action-btn-pro.secondary:hover {
  background: rgba(255, 255, 255, 0.12);
}

.ai-results-pro .action-btn-pro.tertiary {
  flex: 1;
  background: transparent;
  color: rgba(255, 255, 255, 0.6);
}

.ai-results-pro .action-btn-pro.tertiary:hover {
  color: white;
  background: rgba(255, 255, 255, 0.05);
}

/* Mobile responsive */
@media (max-width: 768px) {
  .ai-menu-stats {
    grid-template-columns: repeat(2, 1fr);
  }

  .ai-menu-instructions .instruction-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 600px) {
  .ai-menu-pro {
    padding: 0.75rem;
  }

  .ai-menu-grid {
    grid-template-columns: 1fr;
  }

  .ai-menu-title {
    flex-direction: column;
    gap: 0.75rem;
  }

  .ai-menu-title .title-text {
    text-align: center;
  }

  .ai-menu-back {
    position: relative;
    margin-bottom: 1rem;
  }

  .ai-play-pro .answer-grid {
    grid-template-columns: 1fr;
  }

  .ai-play-pro .game-top-bar {
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .ai-play-pro .score-panel {
    min-width: 0;
  }

  .ai-play-pro .question-text {
    font-size: 1.3rem;
  }

  .ai-play-pro .versus-display {
    gap: 1rem;
  }

  .ai-play-pro .avatar-frame {
    width: 70px;
    height: 70px;
  }

  .ai-play-pro .avatar-frame .avatar {
    font-size: 2rem;
  }

  .ai-results-pro .stats-grid-pro {
    grid-template-columns: 1fr;
  }

  .ai-results-pro .score-comparison-pro {
    flex-direction: column;
  }

  .ai-results-pro .score-divider {
    flex-direction: row;
    padding: 0.5rem;
  }

  .ai-results-pro .divider-line {
    width: 30px;
    height: 1px;
  }

  .ai-results-pro .score-diff {
    position: static;
  }

  .ai-results-pro .secondary-actions {
    flex-direction: column;
  }
}

/* =============================================================
   AI CHALLENGE - BATTLE ARENA ESPORTS HUD REDESIGN
   Professional game design: fighting game style, esports feel
============================================================= */

/* ======== AI SELECT PREMIUM - NO PAGINATION TABS ======== */
.ai-select-premium {
  min-height: 100vh;
  min-height: 100dvh;
  position: relative;
  background: #0a0a12;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Background */
.asp-background {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.asp-gradient {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse 80% 50% at 50% 0%, rgba(120, 80, 200, 0.2), transparent),
    radial-gradient(ellipse 60% 40% at 100% 100%, rgba(80, 150, 200, 0.15), transparent),
    radial-gradient(ellipse 40% 30% at 0% 50%, rgba(200, 80, 150, 0.1), transparent);
}

.asp-particles {
  position: absolute;
  inset: 0;
}

.asp-particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: rgba(167, 139, 250, 0.6);
  border-radius: 50%;
  left: var(--x);
  animation: aspFloat var(--duration) ease-in-out infinite;
  animation-delay: var(--delay);
}

@keyframes aspFloat {
  0%, 100% { transform: translateY(100vh); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(-20px); opacity: 0; }
}

/* Container */
.asp-container {
  position: relative;
  z-index: 1;
  min-height: 100vh;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  padding: 1.5rem;
  max-width: 1100px;
  margin: 0 auto;
}

/* ===== PREMIUM HEADER ===== */
.asp-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.5rem 0 1rem;
  flex-shrink: 0;
}

/* Premium back button for AI Challenge */
.asp-back-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.15), rgba(167, 139, 250, 0.08));
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 16px;
  color: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  flex-shrink: 0;
  box-shadow: 0 4px 20px rgba(124, 58, 237, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.asp-back-btn:hover {
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.25), rgba(167, 139, 250, 0.15));
  border-color: rgba(167, 139, 250, 0.5);
  color: white;
  transform: translateX(-4px);
  box-shadow: 0 6px 30px rgba(124, 58, 237, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.asp-back-btn:active {
  transform: translateX(-2px);
  box-shadow: 0 2px 15px rgba(124, 58, 237, 0.2);
}

.asp-back-btn svg {
  width: 24px;
  height: 24px;
}

.asp-title-block {
  flex: 1;
}

.asp-title-line {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.asp-title-icon {
  color: #a78bfa;
}

.asp-title-block h1 {
  font-size: 1.4rem;
  font-weight: 800;
  letter-spacing: 0.1em;
  background: linear-gradient(135deg, #fff 0%, #a78bfa 50%, #fff 100%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: aspTitleShine 3s ease-in-out infinite;
  margin: 0;
}

@keyframes aspTitleShine {
  0%, 100% { background-position: 0% center; }
  50% { background-position: 200% center; }
}

.asp-subtitle {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.5);
  margin-top: 0.25rem;
}

.asp-player-stats {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
}

.asp-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.15rem;
}

.asp-stat-value {
  font-size: 1.25rem;
  font-weight: 800;
  color: #a78bfa;
}

.asp-stat-label {
  font-size: 0.65rem;
  color: rgba(255, 255, 255, 0.5);
  text-transform: uppercase;
}

.asp-stat-divider {
  width: 1px;
  height: 30px;
  background: rgba(255, 255, 255, 0.1);
}

/* ===== SESSION TABS ===== */
.asp-session-tabs {
  display: flex;
  gap: 0.5rem;
  padding: 0.5rem 0;
  flex-shrink: 0;
}

.asp-session-tab {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.6rem 0.75rem;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 10px;
  color: rgba(255, 255, 255, 0.5);
  cursor: pointer;
  transition: all 0.3s ease;
}

.asp-session-tab:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.8);
}

.asp-session-tab.active {
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.2), rgba(167, 139, 250, 0.15));
  border-color: rgba(167, 139, 250, 0.4);
  color: white;
}

.asp-session-num {
  width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 700;
}

.asp-session-tab.active .asp-session-num {
  background: linear-gradient(135deg, #7c3aed, #a78bfa);
}

.asp-session-name {
  font-size: 0.8rem;
  font-weight: 600;
}

/* ===== GRID WRAPPER ===== */
.asp-grid-wrapper {
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0.5rem 0;
}

.asp-grid-wrapper::-webkit-scrollbar {
  width: 6px;
}

.asp-grid-wrapper::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.02);
  border-radius: 3px;
}

.asp-grid-wrapper::-webkit-scrollbar-thumb {
  background: rgba(167, 139, 250, 0.3);
  border-radius: 3px;
}

.asp-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1.25rem;
}

/* ===== AI CARD ===== */
.asp-card {
  position: relative;
  padding: 1.5rem;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
}

.asp-card-border {
  position: absolute;
  inset: 0;
  border-radius: 14px;
  background: linear-gradient(135deg, var(--ai-color, #7c3aed) 0%, transparent 50%);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.asp-card-shine {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 40%,
    rgba(255, 255, 255, 0.03) 45%,
    rgba(255, 255, 255, 0.05) 50%,
    rgba(255, 255, 255, 0.03) 55%,
    transparent 60%
  );
  transform: translateX(-100%);
  transition: transform 0.6s ease;
}

.asp-card:hover .asp-card-shine {
  transform: translateX(100%);
}

.asp-card:hover:not(.locked) {
  transform: translateY(-4px);
  border-color: var(--ai-color, rgba(167, 139, 250, 0.4));
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3), 0 0 20px color-mix(in srgb, var(--ai-color, #7c3aed) 30%, transparent);
}

.asp-card:hover:not(.locked) .asp-card-border {
  opacity: 0.15;
}

.asp-card.selected {
  border-color: var(--ai-color, #a78bfa);
  background: rgba(167, 139, 250, 0.08);
}

.asp-card.selected .asp-card-border {
  opacity: 0.2;
}

.asp-selected-ring {
  position: absolute;
  inset: -3px;
  border: 2px solid var(--ai-color, #a78bfa);
  border-radius: 16px;
  pointer-events: none;
}

.asp-selected-ring .ring-pulse {
  position: absolute;
  inset: -4px;
  border: 2px solid var(--ai-color, #a78bfa);
  border-radius: 18px;
  animation: aspRingPulse 1.5s ease-out infinite;
}

@keyframes aspRingPulse {
  0% { opacity: 0.8; transform: scale(1); }
  100% { opacity: 0; transform: scale(1.1); }
}

.asp-card.locked {
  cursor: not-allowed;
  opacity: 0.6;
}

.asp-card-content {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  gap: 1.25rem;
}

/* Avatar */
.asp-avatar-wrapper {
  position: relative;
  flex-shrink: 0;
}

.asp-avatar-glow {
  position: absolute;
  inset: -4px;
  background: radial-gradient(circle, var(--ai-color, #7c3aed) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
  border-radius: 14px;
}

.asp-card:hover:not(.locked) .asp-avatar-glow,
.asp-card.selected .asp-avatar-glow {
  opacity: 0.3;
}

.asp-avatar {
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 18px;
  font-size: 2.6rem;
  position: relative;
}

.asp-avatar::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
}

.asp-card:hover:not(.locked) .asp-avatar span {
  transform: scale(1.1);
}

.asp-avatar span {
  transition: transform 0.3s ease;
}

.asp-card.locked .asp-avatar span {
  filter: grayscale(0.5);
}

.asp-tier-badge {
  position: absolute;
  top: -10px;
  right: -10px;
  min-width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 8px;
  font-size: 0.9rem;
  font-weight: 700;
  border-radius: 10px;
  color: white;
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3);
}

/* Tier badge colors */
.asp-tier-badge.tier-bronze { background: linear-gradient(135deg, #cd7f32, #8b4513); }
.asp-tier-badge.tier-silver { background: linear-gradient(135deg, #c0c0c0, #808080); }
.asp-tier-badge.tier-gold { background: linear-gradient(135deg, #ffd700, #daa520); }
.asp-tier-badge.tier-platinum { background: linear-gradient(135deg, #e5e4e2, #a0b2c6); }
.asp-tier-badge.tier-diamond { background: linear-gradient(135deg, #b9f2ff, #00bfff); }
.asp-tier-badge.tier-master { background: linear-gradient(135deg, #9b59b6, #8e44ad); }
.asp-tier-badge.tier-grandmaster { background: linear-gradient(135deg, #e74c3c, #c0392b); }
.asp-tier-badge.tier-legend { background: linear-gradient(135deg, #f39c12, #e67e22); }
.asp-tier-badge.tier-champion {
  background: linear-gradient(135deg, #ff6b6b, #ffd93d, #6bcb77);
  background-size: 200% 200%;
  animation: aspChampion 2s ease infinite;
}

@keyframes aspChampion {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* Card info */
.asp-card-info {
  flex: 1;
  min-width: 0;
  overflow: hidden;
}

.asp-card-name {
  display: block;
  font-size: 1.25rem;
  font-weight: 600;
  color: white;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.asp-card-taunt {
  display: block;
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.5);
  font-style: italic;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-top: 8px;
}

.asp-card.locked .asp-card-name,
.asp-card.locked .asp-card-taunt {
  opacity: 0.5;
}

/* Sparkle particles */
.asp-card-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.asp-card-particles .sparkle {
  position: absolute;
  color: var(--ai-color, #a78bfa);
  animation: aspSparkle 1s ease-in-out infinite;
}

.asp-card-particles .sparkle.s1 {
  top: 8px;
  right: 8px;
}

.asp-card-particles .sparkle.s2 {
  bottom: 8px;
  right: 16px;
  animation-delay: 0.3s;
}

@keyframes aspSparkle {
  0%, 100% { opacity: 0.5; transform: scale(1) rotate(0deg); }
  50% { opacity: 1; transform: scale(1.2) rotate(15deg); }
}

/* Lock overlay */
.asp-lock-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.3rem;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 14px;
  color: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(4px);
}

.asp-lock-text {
  font-size: 0.65rem;
  font-weight: 600;
}

/* ===== ACTION BAR ===== */
.asp-action-bar {
  padding: 1rem 0;
  margin-top: 2rem;
}

.asp-battle-btn {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 1.25rem;
  background: linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%);
  border: none;
  border-radius: 16px;
  color: white;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 20px rgba(124, 58, 237, 0.4);
}

.asp-battle-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 30px rgba(124, 58, 237, 0.5);
}

.asp-btn-emoji {
  font-size: 2rem;
}

.asp-btn-text {
  flex: 1;
  text-align: left;
}

.asp-btn-label {
  display: block;
  font-size: 0.7rem;
  font-weight: 600;
  letter-spacing: 0.15em;
  opacity: 0.8;
}

.asp-btn-name {
  display: block;
  font-size: 1.1rem;
  font-weight: 700;
  margin-top: 2px;
}

.asp-btn-icon {
  animation: aspPulse 1.5s ease-in-out infinite;
}

@keyframes aspPulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.15); }
}

.asp-hint {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.03);
  border: 1px dashed rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.9rem;
}

/* Responsive */
@media (max-width: 500px) {
  .asp-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .asp-card {
    padding: 0.75rem;
  }

  .asp-avatar {
    width: 44px;
    height: 44px;
    font-size: 1.5rem;
  }

  .asp-card-name {
    font-size: 0.8rem;
  }

  .asp-card-taunt {
    font-size: 0.6rem;
  }

  .asp-title-block h1 {
    font-size: 1.1rem;
  }

  .asp-subtitle {
    display: none;
  }

  .asp-player-stats {
    padding: 0.4rem 0.6rem;
  }

  .asp-stat-value {
    font-size: 1rem;
  }

  .asp-session-name {
    display: none;
  }
}

/* ===== QUICK SETTINGS PANEL ===== */
.asp-quick-settings {
  margin-top: 1.5rem;
}

.asp-settings-toggle {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.asp-settings-toggle:hover,
.asp-settings-toggle.active {
  background: rgba(124, 58, 237, 0.2);
  border-color: rgba(124, 58, 237, 0.4);
  color: white;
}

.asp-settings-panel {
  margin-top: 1rem;
  padding: 1rem;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  animation: slideDown 0.2s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.asp-setting-row {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.asp-setting-row label {
  flex: 0 0 100px;
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.7);
}

.asp-setting-row input[type="range"] {
  flex: 1;
  -webkit-appearance: none;
  height: 4px;
  border-radius: 2px;
  background: rgba(255, 255, 255, 0.1);
}

.asp-setting-row input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #a78bfa;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.asp-setting-row input[type="range"]::-webkit-slider-thumb:hover {
  transform: scale(1.2);
}

.asp-setting-value {
  flex: 0 0 50px;
  text-align: right;
  font-size: 0.85rem;
  font-weight: 600;
  color: #a78bfa;
}

/* ===== AUTO-ADD AI BUTTON ===== */
.asp-auto-ai-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1rem;
  background: rgba(255, 215, 0, 0.1);
  border: 1px solid rgba(255, 215, 0, 0.3);
  border-radius: 10px;
  color: #ffd700;
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-bottom: 0.75rem;
}

.asp-auto-ai-btn:hover {
  background: rgba(255, 215, 0, 0.2);
  border-color: rgba(255, 215, 0, 0.5);
  transform: translateY(-2px);
}

.asp-auto-ai-btn:active {
  transform: translateY(0);
}

/* ======== SETTINGS PAGE - QUESTION SOURCE & AI CHALLENGE ======== */
.question-source-options {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-top: 0.5rem;
}

.source-option {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  cursor: pointer;
}

.source-option input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--primary, #e74c3c);
}

.source-label {
  font-size: 0.9rem;
  color: var(--text-primary, #333);
}

.jlpt-level-buttons,
.memorization-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-left: 1.8rem;
  margin-top: 0.5rem;
}

.jlpt-btn,
.mem-btn {
  padding: 0.4rem 0.8rem;
  border: 1px solid rgba(0, 0, 0, 0.15);
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.03);
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.jlpt-btn:hover,
.mem-btn:hover {
  background: rgba(0, 0, 0, 0.08);
}

.jlpt-btn.active,
.mem-btn.active {
  background: var(--primary, #e74c3c);
  color: white;
  border-color: var(--primary, #e74c3c);
}

.lesson-select-wrapper {
  margin-left: 1.8rem;
  margin-top: 0.5rem;
}

.lesson-multiselect {
  width: 100%;
  max-width: 300px;
  min-height: 80px;
  padding: 0.5rem;
  border: 1px solid rgba(0, 0, 0, 0.15);
  border-radius: 8px;
  font-size: 0.85rem;
}

.lesson-hint {
  display: block;
  margin-top: 0.3rem;
  font-size: 0.75rem;
  color: #888;
}

.source-summary {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 1rem;
  padding: 0.75rem 1rem;
  background: rgba(var(--primary-rgb, 231, 76, 60), 0.08);
  border-radius: 8px;
  color: var(--primary, #e74c3c);
  font-size: 0.9rem;
}

.summary-icon {
  font-size: 1.1rem;
}

.ai-challenge-section .setting-divider {
  margin: 1rem 0;
  border-top: 1px dashed rgba(0, 0, 0, 0.1);
}

.ai-adjust-label {
  font-size: 0.85rem;
  font-weight: 600;
  color: #666;
  margin-bottom: 0.5rem;
}

/* ======== BATTLE ARENA - ESPORTS BATTLE HUD ======== */
.battle-arena {
  min-height: 100vh;
  position: relative;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Background */
.battle-arena .battle-bg {
  position: absolute;
  inset: 0;
  z-index: 0;
}

.battle-arena .bg-pulse {
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at 50% 30%, rgba(155, 89, 182, 0.1) 0%, transparent 50%);
  animation: bgPulse 4s ease-in-out infinite;
}

@keyframes bgPulse {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

/* Impact effects */
.battle-arena.impact-player {
  animation: impactShake 0.3s ease;
}

.battle-arena.impact-ai {
  animation: impactShake 0.3s ease;
}

@keyframes impactShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  50% { transform: translateX(5px); }
  75% { transform: translateX(-3px); }
}

/* === COUNTDOWN PHASE === */
.battle-arena.countdown-phase {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
}

.battle-arena .versus-screen {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4rem;
  margin-bottom: 2rem;
}

/* Fighter card */
.battle-arena .fighter-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  animation: fighterSlideIn 0.6s ease backwards;
}

.battle-arena .fighter-card.player {
  animation-name: fighterSlideLeft;
}

.battle-arena .fighter-card.ai {
  animation-name: fighterSlideRight;
}

@keyframes fighterSlideLeft {
  from { opacity: 0; transform: translateX(-100px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes fighterSlideRight {
  from { opacity: 0; transform: translateX(100px); }
  to { opacity: 1; transform: translateX(0); }
}

.battle-arena .fighter-portrait {
  width: 180px;
  height: 180px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  border: 4px solid rgba(255, 255, 255, 0.2);
}

.battle-arena .fighter-card.player .fighter-portrait {
  background: linear-gradient(135deg, #4ecdc4, #44a3a0);
  box-shadow: 0 0 60px rgba(78, 205, 196, 0.5), inset 0 0 40px rgba(255, 255, 255, 0.1);
}

.battle-arena .fighter-card.ai .fighter-portrait {
  background: linear-gradient(135deg, var(--ai-color, #9b59b6), color-mix(in srgb, var(--ai-color, #9b59b6) 80%, black));
  box-shadow: 0 0 60px color-mix(in srgb, var(--ai-color, #9b59b6) 50%, transparent), inset 0 0 40px rgba(255, 255, 255, 0.1);
}

.battle-arena .fighter-avatar {
  font-size: 5rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.battle-arena .fighter-avatar img {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
}

.battle-arena .fighter-info {
  text-align: center;
}

.battle-arena .fighter-name {
  display: block;
  color: white;
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.battle-arena .fighter-tag {
  display: inline-block;
  font-size: 0.85rem;
  padding: 0.4rem 1.25rem;
  border-radius: 20px;
  text-transform: uppercase;
  letter-spacing: 2px;
  font-weight: 700;
  backdrop-filter: blur(8px);
}

.battle-arena .fighter-card.player .fighter-tag {
  background: rgba(78, 205, 196, 0.2);
  color: #4ecdc4;
}

.battle-arena .fighter-card.ai .fighter-tag {
  background: color-mix(in srgb, var(--ai-color, #9b59b6) 20%, transparent);
  color: var(--ai-color, #9b59b6);
}

/* VS emblem */
.battle-arena .vs-emblem {
  position: relative;
  padding: 1.5rem;
}

.battle-arena .vs-text {
  font-size: 4rem;
  font-weight: 900;
  background: linear-gradient(135deg, #ffd93d, #ff6b6b, #ffd93d);
  background-size: 200% 200%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: vsBounce 1s ease-in-out infinite, vsGradient 3s ease infinite;
  text-shadow: 0 0 40px rgba(255, 217, 61, 0.5);
  filter: drop-shadow(0 0 20px rgba(255, 107, 107, 0.4));
}

@keyframes vsBounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

@keyframes vsGradient {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.battle-arena .vs-flash {
  position: absolute;
  inset: -40px;
  background: radial-gradient(circle, rgba(255, 217, 61, 0.4) 0%, rgba(255, 107, 107, 0.2) 30%, transparent 60%);
  animation: vsFlash 2s ease-in-out infinite;
}

@keyframes vsFlash {
  0%, 100% { opacity: 0.4; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.3); }
}

/* Countdown */
.battle-arena .battle-countdown {
  text-align: center;
  margin-bottom: 1.5rem;
}

.battle-arena .countdown-ring {
  width: 160px;
  height: 160px;
  margin: 0 auto;
  background: linear-gradient(135deg, rgba(155, 89, 182, 0.15), rgba(255, 255, 255, 0.05));
  border: 5px solid rgba(155, 89, 182, 0.6);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: ringPulse 1s ease-in-out infinite;
  box-shadow: 0 0 50px rgba(155, 89, 182, 0.4), inset 0 0 30px rgba(155, 89, 182, 0.2);
}

@keyframes ringPulse {
  0%, 100% {
    border-color: rgba(155, 89, 182, 0.6);
    box-shadow: 0 0 50px rgba(155, 89, 182, 0.4), inset 0 0 30px rgba(155, 89, 182, 0.2);
  }
  50% {
    border-color: rgba(155, 89, 182, 1);
    box-shadow: 0 0 80px rgba(155, 89, 182, 0.7), inset 0 0 40px rgba(155, 89, 182, 0.4);
  }
}

.battle-arena .countdown-num {
  font-size: 5rem;
  font-weight: 900;
  color: white;
  text-shadow: 0 0 40px rgba(155, 89, 182, 0.6), 0 4px 8px rgba(0, 0, 0, 0.3);
  animation: countPop 1s ease;
}

@keyframes countPop {
  0% { transform: scale(0.5); opacity: 0; }
  50% { transform: scale(1.4); }
  100% { transform: scale(1); opacity: 1; }
}

/* Match info */
.battle-arena .match-info {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1.5rem;
  color: rgba(255, 255, 255, 0.6);
  background: rgba(255, 255, 255, 0.05);
  padding: 0.75rem 2rem;
  border-radius: 25px;
  backdrop-filter: blur(8px);
}

.battle-arena .match-detail {
  font-size: 1rem;
  font-weight: 500;
}

.battle-arena .match-divider {
  opacity: 0.4;
  font-size: 0.5rem;
}

/* === BATTLE PHASE === */
.battle-arena.battle-phase {
  padding: 0.75rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

/* Battle HUD - Top bar */
.battle-arena .battle-hud {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.2));
  border-radius: 20px;
  padding: 1rem 1.5rem;
  border: 1px solid rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

/* Player side HUD */
.battle-arena .hud-player,
.battle-arena .hud-ai {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex: 1;
}

.battle-arena .hud-ai {
  justify-content: flex-end;
}

.battle-arena .hud-avatar {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  flex-shrink: 0;
  border: 3px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  overflow: hidden;
}

.battle-arena .hud-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.battle-arena .hud-player .hud-avatar {
  background: linear-gradient(135deg, #4ecdc4, #44a3a0);
  box-shadow: 0 4px 20px rgba(78, 205, 196, 0.4);
}

.battle-arena .hud-ai .hud-avatar {
  background: linear-gradient(135deg, var(--ai-color, #9b59b6), color-mix(in srgb, var(--ai-color, #9b59b6) 80%, black));
  box-shadow: 0 4px 20px color-mix(in srgb, var(--ai-color, #9b59b6) 40%, transparent);
}

.battle-arena .hud-info {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  min-width: 140px;
}

.battle-arena .hud-ai .hud-info {
  text-align: right;
}

.battle-arena .hud-name-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.battle-arena .hud-ai .hud-name-row {
  justify-content: flex-end;
}

.battle-arena .hud-name {
  font-size: 1.1rem;
  font-weight: 700;
  color: white;
  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
}

/* VIP name effect - Golden gradient animation */
.battle-arena .hud-name.vip-name,
.battle-arena .fighter-name.vip-name {
  background: linear-gradient(90deg, #ffd700, #ffec8b, #ffd700, #daa520, #ffd700);
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: vipNameShine 3s linear infinite;
  font-weight: 800;
  text-shadow: none;
  filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.5));
}

@keyframes vipNameShine {
  0% { background-position: 0% center; }
  100% { background-position: 200% center; }
}

/* Admin name effect - Red gradient */
.battle-arena .hud-name.admin-name,
.battle-arena .fighter-name.admin-name {
  background: linear-gradient(90deg, #ff4757, #ff6b81, #ff4757, #c62828, #ff4757);
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: adminNameShine 2s linear infinite;
  font-weight: 800;
  text-shadow: none;
  filter: drop-shadow(0 0 8px rgba(255, 71, 87, 0.5));
}

@keyframes adminNameShine {
  0% { background-position: 0% center; }
  100% { background-position: 200% center; }
}

/* Superadmin name effect - Rainbow gradient */
.battle-arena .hud-name.superadmin-name,
.battle-arena .fighter-name.superadmin-name {
  background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #8b00ff, #ff0000);
  background-size: 300% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: superadminNameShine 2s linear infinite;
  font-weight: 800;
  text-shadow: none;
  filter: drop-shadow(0 0 10px rgba(255, 100, 100, 0.6));
}

@keyframes superadminNameShine {
  0% { background-position: 0% center; }
  100% { background-position: 300% center; }
}

/* VIP avatar frame - Golden glow */
.battle-arena .hud-avatar.vip-frame,
.battle-arena .fighter-portrait.vip-frame,
.battle-arena .fighter-avatar-large.vip-frame {
  border: 3px solid #ffd700 !important;
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.6), 0 0 40px rgba(255, 215, 0, 0.3), inset 0 0 15px rgba(255, 215, 0, 0.2) !important;
  animation: vipFramePulse 2s ease-in-out infinite;
}

@keyframes vipFramePulse {
  0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.6), 0 0 40px rgba(255, 215, 0, 0.3); }
  50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 0 0 60px rgba(255, 215, 0, 0.4); }
}

/* Admin avatar frame - Red glow */
.battle-arena .hud-avatar.admin-frame,
.battle-arena .fighter-portrait.admin-frame,
.battle-arena .fighter-avatar-large.admin-frame {
  border: 3px solid #ff4757 !important;
  box-shadow: 0 0 20px rgba(255, 71, 87, 0.6), 0 0 40px rgba(255, 71, 87, 0.3), inset 0 0 15px rgba(255, 71, 87, 0.2) !important;
  animation: adminFramePulse 1.5s ease-in-out infinite;
}

@keyframes adminFramePulse {
  0%, 100% { box-shadow: 0 0 20px rgba(255, 71, 87, 0.6), 0 0 40px rgba(255, 71, 87, 0.3); }
  50% { box-shadow: 0 0 30px rgba(255, 71, 87, 0.8), 0 0 60px rgba(255, 71, 87, 0.4); }
}

.battle-arena .streak-badge {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
  padding: 0.2rem 0.4rem;
  border-radius: 6px;
  color: white;
  font-size: 0.7rem;
  font-weight: 600;
  animation: streakGlow 0.5s ease;
}

@keyframes streakGlow {
  0% { transform: scale(0.8); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.battle-arena .leading-badge {
  color: #ffd93d;
  animation: leadGlow 1s infinite;
}

@keyframes leadGlow {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

/* Score bar (health bar style) */
.battle-arena .score-bar {
  height: 12px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  position: relative;
  overflow: hidden;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}

.battle-arena .score-fill {
  height: 100%;
  border-radius: 10px;
  transition: width 0.5s ease;
  box-shadow: 0 0 10px currentColor;
}

.battle-arena .player-bar .score-fill {
  background: linear-gradient(90deg, #4ecdc4, #26ab9f);
  box-shadow: 0 0 15px rgba(78, 205, 196, 0.5);
}

.battle-arena .ai-bar .score-fill {
  background: linear-gradient(90deg, var(--ai-color, #9b59b6), color-mix(in srgb, var(--ai-color, #9b59b6) 80%, black));
  box-shadow: 0 0 15px color-mix(in srgb, var(--ai-color, #9b59b6) 50%, transparent);
}

.battle-arena .score-text {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.75rem;
  font-weight: 800;
  color: white;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

/* Round indicator */
.battle-arena .hud-round {
  display: flex;
  align-items: baseline;
  gap: 2px;
  background: rgba(155, 89, 182, 0.2);
  padding: 0.4rem 1rem;
  border-radius: 20px;
}

.battle-arena .round-current {
  font-size: 1.2rem;
  font-weight: 700;
  color: #9b59b6;
}

.battle-arena .round-sep {
  color: rgba(255, 255, 255, 0.3);
  margin: 0 2px;
}

.battle-arena .round-total {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.5);
}

/* Timer bar - Hidden, time shown in HUD */
.battle-arena .timer-bar {
  display: none;
}

.battle-arena .timer-bar::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  height: 3px;
  width: 100%;
  background: linear-gradient(90deg, #7C3AED, #A78BFA, #7C3AED);
  opacity: 0.5;
}

.battle-arena .timer-fill {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 4px;
  background: linear-gradient(90deg, #4ecdc4, #7C3AED);
  transition: width 1s linear;
  box-shadow: 0 0 20px rgba(78, 205, 196, 0.6);
}

.battle-arena .timer-bar.warning .timer-fill {
  background: linear-gradient(90deg, #fbbf24, #f59e0b);
  box-shadow: 0 0 20px rgba(251, 191, 36, 0.6);
}

.battle-arena .timer-bar.danger .timer-fill {
  background: linear-gradient(90deg, #ef4444, #dc2626);
  box-shadow: 0 0 20px rgba(239, 68, 68, 0.6);
  animation: timerPulse 0.5s ease-in-out infinite;
}

@keyframes timerPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.battle-arena .timer-text {
  font-size: 1.5rem;
  font-weight: 800;
  color: #4ecdc4;
  text-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
  font-family: 'Orbitron', monospace;
  letter-spacing: 2px;
}

.battle-arena .timer-bar.warning .timer-text {
  color: #fbbf24;
  text-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
}

.battle-arena .timer-bar.danger .timer-text {
  color: #ef4444;
  text-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
  animation: timerPulse 0.5s ease-in-out infinite;
}

/* Question zone - Professional Card Design */
.battle-arena .question-zone {
  background: linear-gradient(145deg, rgba(20, 20, 45, 0.95), rgba(15, 15, 35, 0.9));
  border-radius: 20px;
  padding: 1.5rem 2rem;
  margin: 0 0.5rem 1rem;
  text-align: center;
  border: 1px solid rgba(124, 58, 237, 0.3);
  position: relative;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
              inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.battle-arena .question-zone::before {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 60%;
  height: 2px;
  background: linear-gradient(90deg, transparent, #7C3AED, transparent);
}

.battle-arena .question-category {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.3), rgba(124, 58, 237, 0.1));
  padding: 0.35rem 1rem;
  border-radius: 6px;
  font-size: 0.7rem;
  color: #A78BFA;
  margin-bottom: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  font-weight: 600;
  border: 1px solid rgba(124, 58, 237, 0.25);
}

.battle-arena .question-text {
  font-size: 4rem;
  color: #ffffff;
  margin: 0 0 0.5rem 0;
  line-height: 1.15;
  font-weight: 800;
  text-shadow: 0 0 30px rgba(255, 255, 255, 0.2), 0 2px 10px rgba(0, 0, 0, 0.5);
  font-family: var(--font-jp-kanji), sans-serif;
}

/* AI thinking status */
.battle-arena .ai-status {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  background: rgba(15, 15, 35, 0.6);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.battle-arena .ai-status .ai-emoji {
  font-size: 1.3rem;
}

.battle-arena .ai-status .ai-thinking {
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.85rem;
  font-weight: 500;
}

.battle-arena .thinking-dots {
  color: #A78BFA;
}

.battle-arena .thinking-dots span {
  animation: thinkingDot 1.4s infinite ease-in-out;
}

.battle-arena .thinking-dots span:nth-child(1) { animation-delay: -0.32s; }
.battle-arena .thinking-dots span:nth-child(2) { animation-delay: -0.16s; }
.battle-arena .thinking-dots span:nth-child(3) { animation-delay: 0s; }

@keyframes thinkingDot {
  0%, 80%, 100% { opacity: 0.3; }
  40% { opacity: 1; }
}

/* Answer zone - Esports Battle Grid */
.battle-arena .answer-zone {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem 2rem;
  padding: 0 50px 0.75rem;
  max-width: 100%;
  margin: 0;
}

.battle-arena .answer-block {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 1rem;
  height: 100px;
  background: linear-gradient(135deg,
    color-mix(in srgb, var(--answer-color, #7C3AED) 20%, rgba(15, 15, 35, 0.9)),
    color-mix(in srgb, var(--answer-color, #7C3AED) 8%, rgba(10, 10, 25, 0.95))
  );
  border: 2px solid color-mix(in srgb, var(--answer-color, #7C3AED) 50%, transparent);
  border-radius: 12px;
  color: #ffffff;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  text-align: left;
  padding: 0 1.25rem;
  overflow: hidden;
}

.battle-arena .answer-block::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, transparent 0%, rgba(255, 255, 255, 0.03) 100%);
  pointer-events: none;
}

.battle-arena .answer-block::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: var(--answer-color, #7C3AED);
  opacity: 0.7;
  transition: all 0.2s ease;
}

.battle-arena .answer-block:hover:not(:disabled) {
  background: linear-gradient(135deg,
    color-mix(in srgb, var(--answer-color, #7C3AED) 35%, rgba(15, 15, 35, 0.95)),
    color-mix(in srgb, var(--answer-color, #7C3AED) 15%, rgba(10, 10, 25, 0.98))
  );
  border-color: var(--answer-color, #7C3AED);
  transform: translateX(4px);
  box-shadow: 0 0 25px color-mix(in srgb, var(--answer-color, #7C3AED) 30%, transparent),
              inset 0 0 30px color-mix(in srgb, var(--answer-color, #7C3AED) 10%, transparent);
}

.battle-arena .answer-block:hover:not(:disabled)::after {
  width: 6px;
  opacity: 1;
  box-shadow: 0 0 15px var(--answer-color, #7C3AED);
}

.battle-arena .answer-block:active:not(:disabled) {
  transform: translateX(2px);
}

.battle-arena .answer-block:disabled {
  cursor: default;
  opacity: 0.5;
}

/* Selected answer - neon glow effect */
.battle-arena .answer-block.selected {
  background: linear-gradient(135deg,
    color-mix(in srgb, var(--answer-color, #7C3AED) 50%, rgba(15, 15, 35, 0.9)),
    color-mix(in srgb, var(--answer-color, #7C3AED) 25%, rgba(10, 10, 25, 0.95))
  );
  border-color: var(--answer-color, #7C3AED);
  border-width: 2px;
  transform: translateX(4px) scale(1.02);
  box-shadow: 0 0 30px color-mix(in srgb, var(--answer-color, #7C3AED) 40%, transparent),
              0 0 60px color-mix(in srgb, var(--answer-color, #7C3AED) 20%, transparent);
}

.battle-arena .answer-block.selected::after {
  width: 6px;
  opacity: 1;
  box-shadow: 0 0 20px var(--answer-color, #7C3AED);
}

/* Submitted answer - locked in state */
.battle-arena .answer-block.submitted {
  background: linear-gradient(135deg,
    color-mix(in srgb, var(--answer-color, #7C3AED) 60%, rgba(15, 15, 35, 0.85)),
    color-mix(in srgb, var(--answer-color, #7C3AED) 35%, rgba(10, 10, 25, 0.9))
  );
  border-color: var(--answer-color, #7C3AED);
  box-shadow: 0 0 35px color-mix(in srgb, var(--answer-color, #7C3AED) 50%, transparent),
              inset 0 0 20px color-mix(in srgb, var(--answer-color, #7C3AED) 15%, transparent);
}

.battle-arena .answer-block.submitted::after {
  width: 8px;
  background: linear-gradient(180deg, var(--answer-color, #7C3AED), color-mix(in srgb, var(--answer-color, #7C3AED) 70%, white));
  box-shadow: 0 0 25px var(--answer-color, #7C3AED);
}

/* Esports-style A B C D labels */
.battle-arena .answer-label {
  width: 44px;
  height: 44px;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
  border: 2px solid rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  font-weight: 800;
  color: rgba(255, 255, 255, 0.9);
  flex-shrink: 0;
  transition: all 0.2s ease;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.battle-arena .answer-block:hover:not(:disabled) .answer-label {
  background: linear-gradient(135deg, var(--answer-color, #7C3AED), color-mix(in srgb, var(--answer-color, #7C3AED) 70%, black));
  border-color: var(--answer-color, #7C3AED);
  box-shadow: 0 0 15px color-mix(in srgb, var(--answer-color, #7C3AED) 50%, transparent);
}

.battle-arena .answer-block.selected .answer-label {
  background: linear-gradient(135deg, var(--answer-color, #7C3AED), color-mix(in srgb, var(--answer-color, #7C3AED) 60%, black));
  border-color: white;
  box-shadow: 0 0 20px var(--answer-color, #7C3AED);
  transform: scale(1.05);
}

.battle-arena .answer-block.submitted .answer-label {
  background: linear-gradient(135deg, white, #E2E8F0);
  border-color: white;
  color: var(--answer-color, #7C3AED);
  box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
}

/* Submit button zone - Esports CTA */
.battle-arena .submit-zone {
  display: flex;
  justify-content: center;
  padding: 1.25rem 1.5rem 0.5rem;
}

.battle-arena .submit-btn {
  padding: 0.875rem 3rem;
  font-size: 1rem;
  font-weight: 700;
  border: 2px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  text-transform: uppercase;
  letter-spacing: 2px;
  position: relative;
  overflow: hidden;
}

.battle-arena .submit-btn.active {
  background: linear-gradient(135deg, #4ecdc4, #2dd4bf);
  color: white;
  border-color: rgba(78, 205, 196, 0.5);
  box-shadow: 0 0 30px rgba(78, 205, 196, 0.4), 0 4px 15px rgba(0, 0, 0, 0.2);
}

.battle-arena .submit-btn.active::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  animation: submitShine 2s infinite;
}

@keyframes submitShine {
  0% { left: -100%; }
  50%, 100% { left: 100%; }
}

.battle-arena .submit-btn.active:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 40px rgba(78, 205, 196, 0.5), 0 8px 25px rgba(0, 0, 0, 0.3);
}

.battle-arena .submit-btn.disabled {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.3);
  cursor: not-allowed;
}

.battle-arena .answer-text {
  flex: 1;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  line-height: 1.4;
  font-size: 1rem;
}

/* Correct answer - Victory glow */
.battle-arena .answer-block.correct {
  background: linear-gradient(135deg,
    rgba(78, 205, 196, 0.4),
    rgba(45, 212, 191, 0.25)
  ) !important;
  border-color: #4ecdc4 !important;
  box-shadow: 0 0 40px rgba(78, 205, 196, 0.5),
              inset 0 0 30px rgba(78, 205, 196, 0.2);
  animation: correctGlow 0.6s ease;
}

.battle-arena .answer-block.correct::after {
  background: linear-gradient(180deg, #4ecdc4, #2dd4bf) !important;
  box-shadow: 0 0 20px #4ecdc4;
}

@keyframes correctGlow {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

/* Wrong answer - Fade out */
.battle-arena .answer-block.wrong {
  background: linear-gradient(135deg,
    rgba(239, 68, 68, 0.3),
    rgba(220, 38, 38, 0.15)
  ) !important;
  border-color: #ef4444 !important;
  box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
  opacity: 0.6;
}

.battle-arena .answer-block.wrong::after {
  background: #ef4444 !important;
}

/* Answer result badges */
.battle-arena .answer-result {
  position: absolute;
  top: 50%;
  right: 12px;
  transform: translateY(-50%);
  width: 32px;
  height: 32px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 1rem;
  z-index: 5;
}

.battle-arena .answer-result.correct {
  background: linear-gradient(135deg, #4ecdc4, #2dd4bf);
  color: white;
  box-shadow: 0 0 15px rgba(78, 205, 196, 0.5);
}

.battle-arena .answer-result.wrong {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  color: white;
  box-shadow: 0 0 15px rgba(239, 68, 68, 0.5);
}

.battle-arena .ai-pick {
  position: absolute;
  bottom: 8px;
  right: 8px;
  font-size: 1.5rem;
  filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.5));
  z-index: 5;
  background: rgba(15, 15, 35, 0.8);
  padding: 0.25rem;
  border-radius: 6px;
}

/* Round result modal */
.battle-arena .round-result-modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  animation: modalFadeIn 0.3s ease;
}

@keyframes modalFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.battle-arena .result-content {
  background: linear-gradient(145deg, rgba(25, 25, 50, 0.98), rgba(15, 15, 35, 0.98));
  border-radius: 28px;
  padding: 2.5rem 4rem;
  max-width: 620px;
  width: 95%;
  text-align: center;
  animation: modalSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  border: 2px solid rgba(255, 255, 255, 0.12);
  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5), 0 10px 30px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
}

.battle-arena .result-content::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #4ecdc4, #9b59b6, #ff6b6b);
}

.battle-arena .result-content.player::before {
  background: linear-gradient(90deg, #4ecdc4, #2ab7b0);
}

.battle-arena .result-content.ai::before {
  background: linear-gradient(90deg, #ff6b6b, #ee5a5a);
}

.battle-arena .result-content.tie::before {
  background: linear-gradient(90deg, #ffd93d, #f5c400);
}

@keyframes modalSlideIn {
  from { opacity: 0; transform: translateY(30px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

/* Result announcement */
.battle-arena .result-announcement {
  margin-bottom: 1.25rem;
  position: relative;
}

.battle-arena .result-icon {
  font-size: 3.5rem;
  display: block;
  margin-bottom: 0.6rem;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
  animation: iconPop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes iconPop {
  0% { transform: scale(0); opacity: 0; }
  60% { transform: scale(1.2); }
  100% { transform: scale(1); opacity: 1; }
}

.battle-arena .result-text {
  display: block;
  font-size: 2rem;
  font-weight: 800;
  margin-bottom: 0.4rem;
  letter-spacing: 2px;
  text-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
  animation: textSlide 0.4s ease 0.1s both;
}

@keyframes textSlide {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.battle-arena .result-text.win {
  color: #4ecdc4;
  text-shadow: 0 0 30px rgba(78, 205, 196, 0.5);
}

.battle-arena .result-text.lose {
  color: #ff6b6b;
  text-shadow: 0 0 30px rgba(255, 107, 107, 0.5);
}

.battle-arena .result-text.tie {
  color: #ffd93d;
  text-shadow: 0 0 30px rgba(255, 217, 61, 0.5);
}

.battle-arena .result-points {
  display: inline-block;
  background: linear-gradient(135deg, rgba(78, 205, 196, 0.25), rgba(78, 205, 196, 0.15));
  color: #4ecdc4;
  padding: 0.5rem 1.25rem;
  border-radius: 25px;
  font-weight: 800;
  font-size: 1.15rem;
  border: 1px solid rgba(78, 205, 196, 0.3);
  box-shadow: 0 4px 15px rgba(78, 205, 196, 0.2);
  animation: pointsBounce 0.5s ease 0.2s both;
}

@keyframes pointsBounce {
  0% { transform: scale(0); }
  60% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.battle-arena .result-content.ai .result-points {
  background: linear-gradient(135deg, rgba(255, 107, 107, 0.25), rgba(255, 107, 107, 0.15));
  color: #ff6b6b;
  border-color: rgba(255, 107, 107, 0.3);
  box-shadow: 0 4px 15px rgba(255, 107, 107, 0.2);
}

/* Result stats - Pro VS Display */
.battle-arena .result-stats-pro {
  display: flex;
  align-items: stretch;
  justify-content: center;
  gap: 0;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  padding: 1.25rem 0.75rem;
  margin-bottom: 1.75rem;
  position: relative;
  overflow: hidden;
}

/* Fighter sides */
.battle-arena .fighter-side {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  position: relative;
  transition: all 0.3s ease;
}

.battle-arena .fighter-side.winner {
  animation: fighterPulse 1.5s ease infinite;
}

@keyframes fighterPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}

/* Large avatar */
.battle-arena .fighter-avatar-large {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.5rem;
  position: relative;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
  border: 3px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  overflow: hidden;
}

.battle-arena .fighter-avatar-large img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.battle-arena .fighter-side.player .fighter-avatar-large {
  border-color: rgba(78, 205, 196, 0.5);
  box-shadow: 0 4px 20px rgba(78, 205, 196, 0.3);
}

.battle-arena .fighter-side.ai .fighter-avatar-large {
  border-color: var(--ai-color, rgba(155, 89, 182, 0.5));
  box-shadow: 0 4px 20px color-mix(in srgb, var(--ai-color, #9b59b6) 30%, transparent);
}

.battle-arena .fighter-side.winner .fighter-avatar-large {
  animation: avatarGlow 1.5s ease infinite;
}

.battle-arena .fighter-side.winner.player .fighter-avatar-large {
  border-color: #4ecdc4;
  box-shadow: 0 0 25px rgba(78, 205, 196, 0.5);
}

@keyframes avatarGlow {
  0%, 100% { box-shadow: 0 0 20px rgba(78, 205, 196, 0.4); }
  50% { box-shadow: 0 0 35px rgba(78, 205, 196, 0.7); }
}

/* Fighter name */
.battle-arena .fighter-name {
  color: white;
  font-weight: 700;
  font-size: 0.95rem;
  text-align: center;
  max-width: 100px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

/* Fighter result */
.battle-arena .fighter-result {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}

.battle-arena .result-badge {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  font-weight: 800;
}

.battle-arena .result-badge.correct {
  background: linear-gradient(145deg, #4ecdc4, #2ab7b0);
  color: white;
  box-shadow: 0 4px 15px rgba(78, 205, 196, 0.5);
  animation: correctBounce 0.5s ease;
}

@keyframes correctBounce {
  0% { transform: scale(0); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.battle-arena .result-badge.wrong {
  background: linear-gradient(145deg, #ff6b6b, #ee5a5a);
  color: white;
  box-shadow: 0 4px 15px rgba(255, 107, 107, 0.5);
  animation: wrongShake 0.5s ease;
}

@keyframes wrongShake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-3px); }
  40%, 80% { transform: translateX(3px); }
}

.battle-arena .result-time {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.6);
  font-weight: 500;
}

/* VS Divider */
.battle-arena .vs-divider {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0 0.5rem;
  gap: 0.5rem;
}

.battle-arena .vs-line {
  width: 2px;
  height: 25px;
  background: linear-gradient(180deg, transparent, rgba(255, 255, 255, 0.2), transparent);
}

.battle-arena .vs-text-pro {
  color: rgba(255, 255, 255, 0.4);
  font-weight: 800;
  font-size: 1rem;
  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
  letter-spacing: 1px;
}

/* Legacy stat-side styles for compatibility */
.battle-arena .stat-side {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}

.battle-arena .stat-vs {
  color: rgba(255, 255, 255, 0.3);
  font-weight: 700;
}

/* Continue button */
/* Correct answer display */
.battle-arena .correct-answer-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  margin: 1rem 0;
  background: linear-gradient(135deg, rgba(78, 205, 196, 0.15), rgba(78, 205, 196, 0.05));
  border: 2px solid rgba(78, 205, 196, 0.4);
  border-radius: 12px;
}

.battle-arena .correct-answer-label {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.6);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.battle-arena .correct-answer-text {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  font-size: 1.1rem;
  font-weight: 700;
  color: #4ecdc4;
}

.battle-arena .correct-answer-letter {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #4ecdc4;
  color: white;
  border-radius: 50%;
  font-size: 0.9rem;
  font-weight: 800;
}

.battle-arena .continue-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  width: 100%;
  padding: 1.1rem 1.5rem;
  background: linear-gradient(135deg, #9b59b6, #8e44ad);
  border: none;
  border-radius: 16px;
  color: white;
  font-size: 1.1rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  box-shadow: 0 6px 25px rgba(155, 89, 182, 0.4);
}

.battle-arena .continue-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
  animation: continueShine 2s ease infinite;
}

@keyframes continueShine {
  0%, 100% { left: -100%; }
  50% { left: 100%; }
}

.battle-arena .continue-btn:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 12px 35px rgba(155, 89, 182, 0.5);
}

.battle-arena .continue-btn:active {
  transform: translateY(-1px) scale(0.98);
}

/* ======== ARENA MOBILE RESPONSIVE ======== */
@media (max-width: 900px) {
  .arena-select .arena-content {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .arena-select .character-preview {
    order: -1;
    max-height: 300px;
  }

  .arena-select .roster-grid {
    grid-template-columns: repeat(5, 1fr);
  }
}

@media (max-width: 768px) {
  .arena-select .roster-grid {
    grid-template-columns: repeat(4, 1fr);
  }

  .arena-select .player-profile-card {
    flex-direction: column;
    gap: 1rem;
    text-align: center;
  }

  .arena-select .profile-stats {
    justify-content: center;
  }

  .arena-select .arena-header {
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .arena-select .arena-empty {
    display: none;
  }

  .arena-select .arena-tips {
    flex-direction: column;
    gap: 0.5rem;
    align-items: center;
  }

  .battle-arena .versus-screen {
    flex-direction: column;
    gap: 1.5rem;
  }

  .battle-arena .vs-emblem {
    order: -1;
  }

  .battle-arena .fighter-portrait {
    width: 90px;
    height: 90px;
  }

  .battle-arena .fighter-avatar {
    font-size: 2.5rem;
  }

  .battle-arena .countdown-ring {
    width: 100px;
    height: 100px;
  }

  .battle-arena .countdown-num {
    font-size: 3rem;
  }
}

@media (max-width: 600px) {
  .arena-select .roster-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .arena-select .char-emoji {
    font-size: 2rem;
  }

  .arena-select .char-emoji-large {
    font-size: 3.5rem;
  }

  .battle-arena .battle-hud {
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .battle-arena .hud-round {
    order: -1;
    width: 100%;
    justify-content: center;
    margin-bottom: 0.5rem;
  }

  .battle-arena .hud-player,
  .battle-arena .hud-ai {
    min-width: 0;
  }

  .battle-arena .hud-info {
    min-width: 0;
  }

  .battle-arena .question-zone {
    margin: 0 0.25rem 0.75rem;
    padding: 1rem 1rem;
    border-radius: 16px;
  }

  .battle-arena .question-text {
    font-size: 2.5rem;
  }

  .battle-arena .question-category {
    font-size: 0.65rem;
    padding: 0.3rem 0.75rem;
  }

  .battle-arena .answer-zone {
    gap: 0.5rem 1rem;
    padding: 0 15px 0.5rem;
  }

  .battle-arena .answer-block {
    height: 72px;
    font-size: 0.9rem;
    padding: 0 0.75rem;
    gap: 0.5rem;
  }

  .battle-arena .answer-label {
    width: 32px;
    height: 32px;
    font-size: 0.9rem;
    border-radius: 6px;
  }

  .battle-arena .submit-btn {
    padding: 0.65rem 1.5rem;
    font-size: 0.85rem;
  }

  .battle-arena .result-content {
    padding: 2rem 1.5rem;
    max-width: 95%;
  }

  .battle-arena .result-text {
    font-size: 1.5rem;
  }

  /* Pro VS Display mobile */
  .battle-arena .result-stats-pro {
    padding: 1rem 0.5rem;
  }

  .battle-arena .fighter-avatar-large {
    width: 60px;
    height: 60px;
    font-size: 2rem;
  }

  .battle-arena .fighter-name {
    font-size: 0.85rem;
    max-width: 80px;
  }

  .battle-arena .result-badge {
    width: 32px;
    height: 32px;
    font-size: 1.1rem;
  }

  .battle-arena .vs-line {
    height: 20px;
  }
}

/* ========================================
   Custom Topics Management - 題材拡張管理
   Professional UI for custom question sets
   ======================================== */

.custom-topics-management {
  padding: 1rem;
}

/* Topics Header */
.topics-header {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.topics-title h2 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0;
  font-size: 1.5rem;
  color: #1f2937;
}

.topics-title h2 svg {
  color: var(--primary);
}

.topics-subtitle {
  margin: 0.25rem 0 0 0;
  color: #6b7280;
  font-size: 0.9rem;
}

.topics-actions {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.search-box {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  min-width: 200px;
}

.search-box svg {
  color: #9ca3af;
}

.search-box input {
  border: none;
  outline: none;
  background: transparent;
  font-size: 0.9rem;
  width: 100%;
}

.view-toggle {
  display: flex;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  overflow: hidden;
}

.view-toggle .btn-icon {
  padding: 0.5rem 0.75rem;
  border: none;
  border-radius: 0;
  background: transparent;
}

.view-toggle .btn-icon.active {
  background: var(--primary);
  color: white;
}

/* Topics Grid */
.topics-grid {
  display: grid;
  gap: 1rem;
}

.topics-grid.grid {
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
}

.topics-grid.list {
  grid-template-columns: 1fr;
}

/* Topic Card */
.custom-topic-card {
  background: white;
  border-radius: 16px;
  padding: 1.25rem;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 2px solid transparent;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  position: relative;
  overflow: hidden;
}

.custom-topic-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--topic-color, var(--primary));
}

.custom-topic-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  border-color: var(--topic-color, var(--primary));
}

.custom-topic-card.list {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 1.25rem;
}

.custom-topic-card.list .topic-card-body {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex: 1;
}

.custom-topic-card.list .topic-name {
  margin: 0;
}

.custom-topic-card.list .topic-description {
  display: none;
}

.topic-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 1rem;
}

.topic-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.75rem;
  border-radius: 12px;
  background: rgba(var(--topic-color-rgb), 0.1);
}

.topic-card-actions {
  display: flex;
  gap: 0.25rem;
  opacity: 0;
  transition: opacity 0.2s;
}

.custom-topic-card:hover .topic-card-actions {
  opacity: 1;
}

.topic-name {
  font-size: 1.1rem;
  font-weight: 600;
  color: #1f2937;
  margin: 0 0 0.5rem 0;
}

.topic-description {
  font-size: 0.85rem;
  color: #6b7280;
  margin: 0 0 1rem 0;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.topic-meta {
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 0.8rem;
  color: #6b7280;
}

.topic-meta > span {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.topic-difficulty {
  font-weight: 600;
}

.topic-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 0.75rem;
}

.topic-tag {
  padding: 0.2rem 0.5rem;
  background: #f3f4f6;
  border-radius: 4px;
  font-size: 0.75rem;
  color: #6b7280;
}

.topic-tag.more {
  background: #e5e7eb;
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: 4rem 2rem;
  background: white;
  border-radius: 16px;
  border: 2px dashed #e5e7eb;
}

.empty-icon {
  font-size: 4rem;
  margin-bottom: 1rem;
}

.empty-state h3 {
  margin: 0 0 0.5rem 0;
  color: #1f2937;
}

.empty-state p {
  margin: 0 0 1.5rem 0;
  color: #6b7280;
}

/* Topic Modal */
.topic-modal {
  width: 90%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  background: white;
  border-radius: 16px;
  animation: modalSlideIn 0.3s ease;
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.25rem 1.5rem;
  border-bottom: 1px solid #e5e7eb;
}

.modal-header h3 {
  margin: 0;
  font-size: 1.25rem;
}

.btn-close {
  width: 32px;
  height: 32px;
  border: none;
  background: #f3f4f6;
  border-radius: 8px;
  font-size: 1.25rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #6b7280;
}

.btn-close:hover {
  background: #e5e7eb;
  color: #1f2937;
}

.modal-body {
  padding: 1.5rem;
}

.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  border-top: 1px solid #e5e7eb;
  background: #f9fafb;
  border-radius: 0 0 16px 16px;
}

/* Form Sections */
.form-section {
  margin-bottom: 1.25rem;
}

.form-section label {
  display: block;
  font-size: 0.85rem;
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.5rem;
}

.form-section.half {
  flex: 1;
  min-width: 0;
}

.form-row {
  display: flex;
  gap: 1rem;
}

.form-input {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  font-size: 0.9rem;
  transition: border-color 0.2s;
}

.form-input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

/* Templates Grid */
.templates-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 0.5rem;
}

.template-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.template-btn:hover {
  background: #f9fafb;
}

.template-icon {
  font-size: 1.25rem;
}

.template-name {
  font-size: 0.75rem;
  color: #374151;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Icon Picker */
.icon-picker {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.icon-btn {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.icon-btn:hover {
  background: #f3f4f6;
}

.icon-btn.selected {
  border-color: var(--primary);
  background: rgba(99, 102, 241, 0.1);
}

/* Color Picker */
.color-picker {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.color-btn {
  width: 32px;
  height: 32px;
  border: 3px solid transparent;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s;
}

.color-btn:hover {
  transform: scale(1.1);
}

.color-btn.selected {
  border-color: #1f2937;
  box-shadow: 0 0 0 2px white, 0 0 0 4px currentColor;
}

/* Toggle Group */
.toggle-group {
  display: flex;
  background: #f3f4f6;
  border-radius: 8px;
  padding: 0.25rem;
}

.toggle-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.5rem;
  border: none;
  background: transparent;
  border-radius: 6px;
  font-size: 0.85rem;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
}

.toggle-btn.active {
  background: white;
  color: var(--primary);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Topic Preview */
.topic-preview {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: #f9fafb;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
}

.preview-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  border-radius: 10px;
}

.preview-info {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.preview-info strong {
  color: #1f2937;
}

.preview-info span {
  font-size: 0.85rem;
}

/* Detail View Header */
.detail-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.detail-title {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex: 1;
}

.detail-icon {
  width: 56px;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  border-radius: 14px;
}

.detail-icon.folder {
  background: #fef3c7;
}

.detail-title h2 {
  margin: 0;
  font-size: 1.5rem;
  color: #1f2937;
}

.detail-title p {
  margin: 0.25rem 0 0 0;
  color: #6b7280;
  font-size: 0.9rem;
}

.detail-actions {
  display: flex;
  gap: 0.5rem;
}

/* Topic Stats */
.topic-stats {
  display: flex;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: white;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.topic-stats .stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.topic-stats .stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary);
}

.topic-stats .stat-label {
  font-size: 0.8rem;
  color: #6b7280;
}

/* Folders List */
.folders-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

.folders-list .folder-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  background: white;
  border-radius: 10px;
  border: 1px solid #e5e7eb;
  cursor: pointer;
  transition: all 0.2s;
}

.folders-list .folder-item:hover {
  background: #f9fafb;
  border-color: var(--primary);
}

.folders-list .folder-icon {
  font-size: 1.5rem;
}

.folders-list .folder-name {
  flex: 1;
  font-weight: 500;
  color: #1f2937;
}

.folders-list .folder-count {
  font-size: 0.85rem;
  color: #6b7280;
}

.folder-actions-inline {
  display: flex;
  gap: 0.25rem;
  opacity: 0;
  transition: opacity 0.2s;
}

.folders-list .folder-item:hover .folder-actions-inline {
  opacity: 1;
}

/* Add Folder Inline */
.add-folder-inline {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
  padding: 0.75rem;
  background: #f9fafb;
  border-radius: 10px;
}

.add-folder-inline input {
  flex: 1;
  padding: 0.5rem 0.75rem;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  font-size: 0.9rem;
}

.add-folder-inline input:focus {
  outline: none;
  border-color: var(--primary);
}

/* Question Modal */
.question-modal {
  width: 90%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  background: white;
  border-radius: 16px;
  animation: modalSlideIn 0.3s ease;
}

/* Responsive */
@media (max-width: 768px) {
  .topics-header {
    flex-direction: column;
    align-items: stretch;
  }

  .topics-actions {
    flex-wrap: wrap;
  }

  .search-box {
    width: 100%;
    min-width: auto;
  }

  .form-row {
    flex-direction: column;
  }

  .topic-stats {
    flex-wrap: wrap;
    justify-content: center;
  }

  .custom-topic-card.list {
    flex-direction: column;
    align-items: flex-start;
  }

  .custom-topic-card.list .topic-card-body {
    flex-direction: column;
    align-items: flex-start;
  }
}

/* ========================================
   Custom Topics Selection in JLPT Setup
   ======================================== */

.custom-topics-section .jlpt-section-header h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.custom-topics-section .jlpt-section-header h3 svg {
  color: #f59e0b;
}

.custom-topics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 0.75rem;
}

.custom-topic-select-card {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
}

.custom-topic-select-card:hover {
  border-color: var(--topic-color, var(--primary));
  background: #fafafa;
}

.custom-topic-select-card.selected {
  border-color: var(--topic-color, var(--primary));
  background: linear-gradient(135deg, rgba(var(--topic-color-rgb), 0.05), rgba(var(--topic-color-rgb), 0.1));
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.topic-select-icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  border-radius: 10px;
  flex-shrink: 0;
}

.topic-select-info {
  flex: 1;
  min-width: 0;
}

.topic-select-name {
  display: block;
  font-weight: 600;
  font-size: 0.9rem;
  color: #1f2937;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.topic-select-count {
  display: block;
  font-size: 0.8rem;
  color: #6b7280;
}

.custom-topic-select-card .check-icon {
  color: var(--topic-color, var(--primary));
  flex-shrink: 0;
}

.custom-topics-hint {
  margin: 0.75rem 0 0 0;
  padding: 0.5rem 0.75rem;
  background: #fef3c7;
  border-radius: 8px;
  font-size: 0.85rem;
  color: #92400e;
  text-align: center;
}

@media (max-width: 768px) {
  .custom-topics-grid {
    grid-template-columns: 1fr;
  }
}

/* ========================================
   Image-Word Matching Game Styles
   Nối Hình Ảnh - Từ Vựng
   ======================================== */

/* Main page container */
.image-word-page {
  min-height: 100%;
  background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 50%, #f5d0fe 100%);
}

/* Menu Screen */
.image-word-menu {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 2rem;
  max-width: 500px;
  margin: 0 auto;
}

.image-word-menu .menu-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  width: 100%;
  margin-bottom: 2rem;
}

.image-word-menu .menu-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex: 1;
}

.image-word-menu .menu-icon {
  font-size: 2.5rem;
}

.image-word-menu h1 {
  font-size: 1.75rem;
  font-weight: 700;
  color: #1f2937;
  margin: 0;
}

.image-word-menu .menu-description {
  text-align: center;
  margin-bottom: 2rem;
}

.image-word-menu .menu-description p {
  font-size: 1.1rem;
  color: #4b5563;
  margin: 0 0 0.5rem 0;
}

.image-word-menu .lesson-count {
  font-size: 0.9rem;
  color: #9ca3af;
  background: white;
  padding: 0.25rem 0.75rem;
  border-radius: 999px;
}

.image-word-menu .menu-actions {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  width: 100%;
}

.image-word-menu .menu-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  border-radius: 16px;
  font-size: 1.1rem;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
}

.image-word-menu .menu-btn.primary {
  background: linear-gradient(135deg, #E91E63 0%, #F06292 100%);
  color: white;
  box-shadow: 0 4px 12px rgba(233, 30, 99, 0.3);
}

.image-word-menu .menu-btn.primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(233, 30, 99, 0.4);
}

.image-word-menu .menu-btn.primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.image-word-menu .menu-btn.secondary {
  background: white;
  color: #374151;
  border: 2px solid #e5e7eb;
}

.image-word-menu .menu-btn.secondary:hover {
  border-color: #E91E63;
  color: #E91E63;
}

.image-word-menu .menu-btn.tertiary {
  background: transparent;
  color: #6b7280;
}

.image-word-menu .menu-btn.tertiary:hover {
  background: rgba(0, 0, 0, 0.05);
}

.image-word-menu .menu-notice {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 1rem;
  padding: 0.75rem 1rem;
  background: #fef3c7;
  border-radius: 12px;
  font-size: 0.9rem;
  color: #92400e;
}

/* Lesson Select Screen */
.image-word-lesson-select {
  padding: 1.5rem;
}

.image-word-lesson-select .lesson-select-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.image-word-lesson-select .lesson-select-header h2 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
  font-size: 1.25rem;
  font-weight: 600;
  color: #1f2937;
  margin: 0;
}

.image-word-lesson-select .btn-manage {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 10px;
  font-size: 0.9rem;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s ease;
}

.image-word-lesson-select .btn-manage:hover {
  border-color: #E91E63;
  color: #E91E63;
}

.image-word-lesson-select .empty-lessons {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  text-align: center;
  color: #9ca3af;
}

.image-word-lesson-select .empty-lessons h3 {
  margin: 1rem 0 0.5rem 0;
  color: #374151;
}

.image-word-lesson-select .empty-lessons p {
  margin: 0 0 1.5rem 0;
}

.image-word-lesson-select .lessons-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
}

.image-word-lesson-select .lesson-card {
  background: white;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  cursor: pointer;
  transition: all 0.2s ease;
}

.image-word-lesson-select .lesson-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.image-word-lesson-select .lesson-thumbnail {
  position: relative;
  aspect-ratio: 16/10;
  background: linear-gradient(135deg, #f3e8ff 0%, #fce7f3 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9ca3af;
}

.image-word-lesson-select .lesson-thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.image-word-lesson-select .lesson-thumbnail .pair-count {
  position: absolute;
  bottom: 0.5rem;
  right: 0.5rem;
  padding: 0.25rem 0.5rem;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  font-size: 0.75rem;
  border-radius: 6px;
}

.image-word-lesson-select .lesson-info {
  padding: 1rem;
}

.image-word-lesson-select .lesson-info h3 {
  font-size: 1rem;
  font-weight: 600;
  color: #1f2937;
  margin: 0 0 0.25rem 0;
}

.image-word-lesson-select .lesson-info p {
  font-size: 0.85rem;
  color: #6b7280;
  margin: 0;
}

/* Game Play Screen */
.image-word-game-play {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 100vh;
  padding: 1rem;
}

.image-word-game-play .game-play-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.image-word-game-play .game-play-header h2 {
  flex: 1;
  font-size: 1.25rem;
  font-weight: 600;
  color: #1f2937;
  margin: 0;
}

.image-word-game-play .game-stats {
  display: flex;
  gap: 1rem;
}

.image-word-game-play .game-stats .stat {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.35rem 0.75rem;
  background: white;
  border-radius: 8px;
  font-size: 0.9rem;
  font-weight: 500;
  color: #374151;
}

.image-word-game-play .game-stats .stat.wrong {
  color: #dc2626;
  background: #fef2f2;
}

.image-word-game-play .game-progress-bar {
  height: 6px;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
  margin-bottom: 1.5rem;
  overflow: hidden;
}

.image-word-game-play .game-progress-bar .progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #E91E63 0%, #F06292 100%);
  border-radius: 3px;
  transition: width 0.3s ease;
}

.image-word-game-play .game-area {
  display: flex;
  flex: 1;
  gap: 1rem;
}

.image-word-game-play .items-column {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.image-word-game-play .column-title {
  text-align: center;
  font-size: 0.9rem;
  font-weight: 600;
  color: #6b7280;
  margin: 0 0 1rem 0;
  padding: 0.5rem;
  background: white;
  border-radius: 8px;
}

.image-word-game-play .items-grid {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.image-word-game-play .connector-area {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
}

.image-word-game-play .connector-line {
  width: 2px;
  height: 80%;
  background: linear-gradient(180deg, transparent 0%, #e5e7eb 20%, #e5e7eb 80%, transparent 100%);
}

.image-word-game-play .item-card {
  padding: 0.75rem;
  background: white;
  border: 3px solid transparent;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.image-word-game-play .item-card:hover:not(:disabled) {
  transform: scale(1.02);
}

.image-word-game-play .item-card.selected {
  border-color: #3b82f6;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
}

.image-word-game-play .item-card.matched {
  border-color: #10b981;
  background: #ecfdf5;
  opacity: 0.6;
  pointer-events: none;
}

.image-word-game-play .item-card.wrong {
  border-color: #ef4444;
  animation: shake 0.4s ease;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-8px); }
  40%, 80% { transform: translateX(8px); }
}

.image-word-game-play .item-card.matched .match-check {
  position: absolute;
  top: -8px;
  right: -8px;
  width: 24px;
  height: 24px;
  background: #10b981;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
}

.image-word-game-play .image-card {
  aspect-ratio: 1;
  max-height: 120px;
}

.image-word-game-play .image-card img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 8px;
}

.image-word-game-play .word-card {
  flex-direction: column;
  gap: 0.25rem;
  padding: 1rem;
  text-align: center;
}

.image-word-game-play .word-card .vocabulary {
  font-size: 1.25rem;
  font-weight: 700;
  color: #1f2937;
}

.image-word-game-play .word-card .reading {
  font-size: 0.85rem;
  color: #9ca3af;
}

.image-word-game-play .word-card .meaning {
  font-size: 0.9rem;
  color: #6b7280;
}

.image-word-game-play .game-hint {
  text-align: center;
  padding: 1rem;
  color: #6b7280;
  font-size: 0.9rem;
}

/* Results Screen */
.image-word-results {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 2rem;
}

.image-word-results .results-card {
  background: white;
  border-radius: 24px;
  padding: 2rem;
  max-width: 400px;
  width: 100%;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  text-align: center;
}

.image-word-results .results-header {
  margin-bottom: 1.5rem;
}

.image-word-results .trophy-icon {
  width: 80px;
  height: 80px;
  margin: 0 auto 1rem;
  background: linear-gradient(135deg, #fef3c7 0%, #fcd34d 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #d97706;
}

.image-word-results .results-header h2 {
  font-size: 1.75rem;
  font-weight: 700;
  color: #1f2937;
  margin: 0 0 0.5rem 0;
}

.image-word-results .lesson-name {
  color: #6b7280;
  font-size: 1rem;
  margin: 0;
}

.image-word-results .stars-rating {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

.image-word-results .star-filled {
  color: #fbbf24;
}

.image-word-results .star-empty {
  color: #d1d5db;
}

.image-word-results .rating-label {
  font-weight: 600;
  color: #374151;
  margin-left: 0.5rem;
}

.image-word-results .score-display {
  background: linear-gradient(135deg, #E91E63 0%, #F06292 100%);
  color: white;
  padding: 1.5rem;
  border-radius: 16px;
  margin-bottom: 1.5rem;
}

.image-word-results .score-value {
  display: block;
  font-size: 3rem;
  font-weight: 800;
}

.image-word-results .score-label {
  font-size: 0.9rem;
  opacity: 0.9;
}

.image-word-results .stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin-bottom: 2rem;
}

.image-word-results .stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
  padding: 1rem;
  background: #f9fafb;
  border-radius: 12px;
}

.image-word-results .stat-item svg {
  color: #6b7280;
}

.image-word-results .stat-value {
  font-size: 1.25rem;
  font-weight: 700;
  color: #1f2937;
}

.image-word-results .stat-label {
  font-size: 0.8rem;
  color: #6b7280;
}

.image-word-results .stat-item.accuracy {
  background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
}

.image-word-results .results-actions {
  display: flex;
  gap: 1rem;
}

.image-word-results .btn-play-again,
.image-word-results .btn-back-menu {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
}

.image-word-results .btn-play-again {
  background: linear-gradient(135deg, #E91E63 0%, #F06292 100%);
  color: white;
}

.image-word-results .btn-play-again:hover {
  transform: translateY(-2px);
}

.image-word-results .btn-back-menu {
  background: #f3f4f6;
  color: #374151;
}

.image-word-results .btn-back-menu:hover {
  background: #e5e7eb;
}

/* Management Page */
.image-word-management-page {
  padding: 1.5rem;
  min-height: 100vh;
  background: #f9fafb;
}

.image-word-management-page .management-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.image-word-management-page .management-header h1 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
  font-size: 1.5rem;
  font-weight: 700;
  color: #1f2937;
  margin: 0;
}

.image-word-management-page .btn-create {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  background: linear-gradient(135deg, #E91E63 0%, #F06292 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.image-word-management-page .btn-create:hover {
  transform: translateY(-2px);
}

.image-word-management-page .empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 4rem 2rem;
  text-align: center;
  color: #9ca3af;
}

.image-word-management-page .empty-state h3 {
  margin: 1rem 0 0.5rem 0;
  color: #374151;
}

.image-word-management-page .lessons-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.image-word-management-page .lesson-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: white;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.image-word-management-page .lesson-preview {
  width: 80px;
  height: 80px;
  border-radius: 12px;
  background: linear-gradient(135deg, #f3e8ff 0%, #fce7f3 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9ca3af;
  flex-shrink: 0;
  overflow: hidden;
}

.image-word-management-page .lesson-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.image-word-management-page .lesson-details {
  flex: 1;
  min-width: 0;
}

.image-word-management-page .lesson-details h3 {
  font-size: 1.1rem;
  font-weight: 600;
  color: #1f2937;
  margin: 0 0 0.25rem 0;
}

.image-word-management-page .lesson-details p {
  font-size: 0.9rem;
  color: #6b7280;
  margin: 0;
}

.image-word-management-page .lesson-details .desc {
  display: block;
  font-size: 0.85rem;
  color: #9ca3af;
  margin-top: 0.25rem;
}

.image-word-management-page .lesson-actions {
  display: flex;
  gap: 0.5rem;
}

.image-word-management-page .btn-edit,
.image-word-management-page .btn-delete {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem 0.75rem;
  border-radius: 8px;
  font-size: 0.85rem;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
}

.image-word-management-page .btn-edit {
  background: #f3f4f6;
  color: #374151;
}

.image-word-management-page .btn-edit:hover {
  background: #e5e7eb;
}

.image-word-management-page .btn-delete {
  background: #fef2f2;
  color: #dc2626;
}

.image-word-management-page .btn-delete:hover {
  background: #fee2e2;
}

/* Lesson Editor Modal */
.lesson-editor-modal {
  background: white;
  border-radius: 20px;
  width: 95%;
  max-width: 700px;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.lesson-editor-modal .editor-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.25rem 1.5rem;
  border-bottom: 1px solid #e5e7eb;
}

.lesson-editor-modal .editor-header h2 {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
  color: #1f2937;
}

.lesson-editor-modal .btn-close {
  padding: 0.5rem;
  background: transparent;
  border: none;
  border-radius: 8px;
  color: #6b7280;
  cursor: pointer;
}

.lesson-editor-modal .btn-close:hover {
  background: #f3f4f6;
}

.lesson-editor-modal .editor-body {
  flex: 1;
  overflow-y: auto;
  padding: 1.5rem;
}

.lesson-editor-modal .error-message {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: #fef2f2;
  border-radius: 10px;
  color: #dc2626;
  font-size: 0.9rem;
  margin-bottom: 1rem;
}

.lesson-editor-modal .form-group {
  margin-bottom: 1.25rem;
}

.lesson-editor-modal .form-group label {
  display: block;
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.5rem;
  font-size: 0.9rem;
}

.lesson-editor-modal .form-group input {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 2px solid #e5e7eb;
  border-radius: 10px;
  font-size: 1rem;
  transition: border-color 0.2s ease;
}

.lesson-editor-modal .form-group input:focus {
  outline: none;
  border-color: #E91E63;
}

.lesson-editor-modal .pairs-section {
  margin-top: 1.5rem;
}

.lesson-editor-modal .pairs-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
}

.lesson-editor-modal .pairs-header h3 {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: #374151;
}

.lesson-editor-modal .btn-add-pair {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem 1rem;
  background: #ecfdf5;
  color: #059669;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.lesson-editor-modal .btn-add-pair:hover {
  background: #d1fae5;
}

.lesson-editor-modal .pairs-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.lesson-editor-modal .no-pairs {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 2rem;
  color: #9ca3af;
  text-align: center;
}

.lesson-editor-modal .pair-editor {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  background: #f9fafb;
  border-radius: 12px;
}

.lesson-editor-modal .pair-index {
  width: 28px;
  height: 28px;
  background: #E91E63;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.85rem;
  flex-shrink: 0;
}

.lesson-editor-modal .pair-image-upload {
  flex-shrink: 0;
}

.lesson-editor-modal .upload-btn {
  width: 80px;
  height: 80px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  background: white;
  border: 2px dashed #d1d5db;
  border-radius: 10px;
  color: #9ca3af;
  font-size: 0.75rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.lesson-editor-modal .upload-btn:hover {
  border-color: #E91E63;
  color: #E91E63;
}

.lesson-editor-modal .image-preview {
  width: 80px;
  height: 80px;
  border-radius: 10px;
  overflow: hidden;
  position: relative;
  cursor: pointer;
}

.lesson-editor-modal .image-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.lesson-editor-modal .image-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  color: white;
  font-size: 0.7rem;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.lesson-editor-modal .image-preview:hover .image-overlay {
  opacity: 1;
}

.lesson-editor-modal .pair-inputs {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.lesson-editor-modal .pair-inputs input {
  padding: 0.5rem 0.75rem;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  font-size: 0.9rem;
}

.lesson-editor-modal .pair-inputs input:focus {
  outline: none;
  border-color: #E91E63;
}

.lesson-editor-modal .btn-delete-pair {
  padding: 0.5rem;
  background: transparent;
  border: none;
  border-radius: 8px;
  color: #dc2626;
  cursor: pointer;
  transition: all 0.2s ease;
}

.lesson-editor-modal .btn-delete-pair:hover {
  background: #fef2f2;
}

.lesson-editor-modal .editor-footer {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  padding: 1rem 1.5rem;
  border-top: 1px solid #e5e7eb;
}

.lesson-editor-modal .btn-cancel {
  padding: 0.75rem 1.5rem;
  background: #f3f4f6;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  color: #374151;
  cursor: pointer;
}

.lesson-editor-modal .btn-cancel:hover {
  background: #e5e7eb;
}

.lesson-editor-modal .btn-save {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #E91E63 0%, #F06292 100%);
  border: none;
  border-radius: 10px;
  font-weight: 600;
  color: white;
  cursor: pointer;
  transition: all 0.2s ease;
}

.lesson-editor-modal .btn-save:hover {
  transform: translateY(-2px);
}

/* Confirm Dialog */
.image-word-management-page .confirm-dialog {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  max-width: 360px;
  text-align: center;
}

.image-word-management-page .confirm-dialog h3 {
  margin: 1rem 0 0.5rem 0;
  font-size: 1.25rem;
  color: #1f2937;
}

.image-word-management-page .confirm-dialog p {
  color: #6b7280;
  margin: 0 0 1.5rem 0;
}

.image-word-management-page .dialog-actions {
  display: flex;
  gap: 1rem;
}

.image-word-management-page .dialog-actions button {
  flex: 1;
  padding: 0.75rem;
  border-radius: 10px;
  font-weight: 600;
  border: none;
  cursor: pointer;
}

.image-word-management-page .btn-confirm-delete {
  background: #dc2626;
  color: white;
}

.image-word-management-page .btn-confirm-delete:hover {
  background: #b91c1c;
}

/* Guide Screen */
.image-word-guide {
  padding: 1.5rem;
  max-width: 600px;
  margin: 0 auto;
}

.image-word-guide .guide-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.image-word-guide .guide-header h2 {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 700;
  color: #1f2937;
}

.image-word-guide .guide-content {
  background: white;
  border-radius: 20px;
  padding: 2rem;
}

.image-word-guide .guide-section {
  margin-bottom: 2rem;
}

.image-word-guide .guide-section:last-child {
  margin-bottom: 0;
}

.image-word-guide .guide-section h3 {
  font-size: 1.1rem;
  color: #1f2937;
  margin: 0 0 0.75rem 0;
}

.image-word-guide .guide-section p {
  color: #4b5563;
  line-height: 1.6;
  margin: 0;
}

.image-word-guide .guide-section ol,
.image-word-guide .guide-section ul {
  color: #4b5563;
  line-height: 1.8;
  padding-left: 1.5rem;
  margin: 0;
}

/* Common buttons */
.image-word-page .btn-back,
.image-word-lesson-select .btn-back,
.image-word-game-play .btn-back {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: white;
  border: none;
  border-radius: 10px;
  font-size: 0.9rem;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s ease;
}

.image-word-page .btn-back:hover,
.image-word-lesson-select .btn-back:hover,
.image-word-game-play .btn-back:hover {
  background: #f3f4f6;
}

.image-word-page .btn-primary {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #E91E63 0%, #F06292 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.image-word-page .btn-primary:hover {
  transform: translateY(-2px);
}

/* Modal overlay */
.image-word-management-page .modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 1rem;
}

/* Responsive */
@media (max-width: 768px) {
  .image-word-game-play .game-area {
    flex-direction: column;
  }

  .image-word-game-play .connector-area {
    width: 100%;
    height: 40px;
  }

  .image-word-game-play .connector-line {
    width: 80%;
    height: 2px;
    background: linear-gradient(90deg, transparent 0%, #e5e7eb 20%, #e5e7eb 80%, transparent 100%);
  }

  .image-word-game-play .items-grid {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
  }

  .image-word-game-play .image-card {
    width: calc(33.33% - 0.5rem);
    max-height: 80px;
  }

  .image-word-game-play .word-card {
    width: calc(50% - 0.5rem);
  }

  .lesson-editor-modal .pair-editor {
    flex-wrap: wrap;
  }

  .lesson-editor-modal .pair-inputs {
    width: 100%;
    order: 1;
  }
}
